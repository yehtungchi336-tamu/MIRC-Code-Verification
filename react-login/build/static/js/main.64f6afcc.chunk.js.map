{"version":3,"sources":["Fire.js","ContextAPI.js","components/Sidebar.js","components/Forgotpassword.js","components/Login.js","components/Users.js","components/Userrow.js","components/Hoverabletexticonflexrow.js","components/Contextmenu.js","components/Elapsedtime.js","components/Recorder.js","components/Hoverableiconsdiv.js","components/msgcomponents/Iframe.js","components/msgcomponents/Img.js","components/msgcomponents/File.js","components/msgcomponents/Recording.js","components/Gifs.js/Search.js","components/Hoverablebutton.js","components/Gifs.js/Gif.js","components/msgcomponents/Contextoptions.js","components/msgcomponents/Threedots.js","components/Dialogue.js","components/Userprofile.js","components/Adduser.js","components/Inputs.js","components/settings/Account.js","components/Switches.js","components/Input.js","components/Button.js","components/settings/Personalization.js","components/settings/Infocontainer.js","components/settings/Aboutchatuser.js","components/settings/Preferences.js","components/settings/Themes.js","components/settings/Actions.js","components/settings/Support.js","components/Usersettings.js","components/Hoverlink.js","components/Home.js","components/Notifications.js","components/Paths.js","components/Chatviewrow.js","components/Body.js","components/StartConvo.js","App.js","index.js"],"names":["firebaseApp","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","databaseURL","db","firestore","database","ContextApp","createContext","ContextAppProvider","props","user","auth","currentUser","useState","darkmode","widemode","chatcolor","themecolor","notifi","setNotifi","emoji","msg","notificont","setNotificont","collection","doc","uid","onSnapshot","snap","data","Provider","value","children","Sidebar","useContext","updateProfile","chatFuncDisplay","handleLogout","setChatview","setChatstarted","className","activeClassName","exact","to","class","onClick","Forgotpassword","email","setEmail","onSubmit","e","preventDefault","type","placeholder","onChange","target","sendPasswordResetEmail","then","window","alert","catch","err","code","errormsg","message","Login","loginwithTwitter","loginwithFacebook","loginwithGoogle","setName","setlName","lname","name","password","setPassword","handleLogin","handleSignup","hasAccount","setHasAccount","emailError","passwordError","path","src","alt","style","display","id","for","loading","textAlign","cursor","marginBottom","Users","convoinfo","setConvoinfo","el","setChatuser","chatuser","recipimg","setRecipimg","recipname","setRecipname","sendername","setSendername","setActivestatus","senderimg","setSenderimg","setLoading","setMsg","reg","determineMsgtype","undefined","base64","file","audio","match","RegExp","$1","replace","_","text","img","trim","useEffect","recipientid","userinfo","cover","online","creatorid","convoid","msgs","messages","length","slice","dangerouslySetInnerHTML","__html","senderid","lastMsg","Userrow","keyword","setUserlist","convos","setConvos","allconvos","sort","a","b","lastmsgdate","map","userlist","forEach","msgids","includes","push","color","setAdduser","onFocus","Hoverabletexticonflexrow","icon","classNames","functionOne","Contextmenu","themebool","emojibool","setUpdatedMsg","copy","contextmenu","setContextmenu","contextstyle","msgid","visible","setVisible","setMsgs","contextmenuSelector","useRef","history","useLocation","useHistory","sendReaction","opt","itemindex","indexOf","reaction1","update","reaction2","emojisrow","allemojisrow","document","addEventListener","current","ref","onContextMenu","left","top","onMouseOver","onMouseLeave","CSSTransition","in","timeout","unmountOnExit","r","createRange","querySelector","selectNode","getSelection","removeAllRanges","addRange","execCommand","copyFunc","splice","setThemebool","setEmojibool","emojitype","location","reload","goForward","goBack","ElapsedTime","Iconspecial","styled","i","Recorder","progressbar","progresswidth","record","setRecord","clicked","setClicked","reset","setReset","stop","RecordState","STOP","time","setTime","intervalId","setIntervalId","startRecord","START","setInterval","prev","state","onStop","audioData","require","storage","reader","FileReader","readAsDataURL","blob","onloadend","url","filename","mimeType","base64data","result","fetch","res","arrayBuffer","buf","File","storageRef","put","on","percentage","bytesTransferred","totalBytes","height","msgobject","bucket","reaction","msgdate","Timestamp","now","read","editing","nobackground","FieldValue","arrayUnion","clearInterval","Button","button","Icon","Span","span","Hoverableicondiv","inputref","sendFile","setImg","special","setState","lnk","setState2","handleEvent","setTimeout","zIndex","accept","Iframe","link","controls","allowFullScreen","Img","fontSize","position","href","Recording","video","playBtn","progress","onLoadedData","duration","toFixed","onTimeUpdate","currentTime","width","ended","updateProgress","paused","play","pause","togglePlayPause","Math","round","determineMinSecH","Search","search","setSearch","fetchData","setTitle","Hoverablebutton","Gif","setGif","notifibool","chatimg","React","setData","title","loader","setLoader","offset","setOffset","limit","setTotalCount","trending","setTrending","trendSearch","setTrendSearch","tSearch","date","serverTimestamp","URL","axios","fetchGif","fetchRes","status","pagination","total_count","content","onTop","scrollTo","behavior","g","notificationobj","notifimsg","notifidate","sender","displayName","gif","notifiid","notifications","sendGif","images","fixed_height","fixed_width","t","toUpperCase","s","Contextoptions","function1","re","stopPropagation","Threedots","emojis","setEmojis","msgidedit","setMsgidedit","allemojis","contextoption","emojiref","threedots","copyMsg","Dialogue","msgstring","setMsgstring","setUpdateelapsed","typing","setTyping","setRecipcity","setRecipcountry","userimg","setUserimg","setUsername","setNotifibool","setEmojitype","setChatcolor","setUserchatcolor","setShowinput","updatedMsg","theme","setTheme","setMsgid","chatname","setChatname","setChatimg","setChatcity","setChatcountry","chatactive","setChatactive","nickname","setNickname","emojipicker","setEmojipicker","diag","typerRef","imageRegexB","ytVidId","sm","determineClass","modal","setModal","imgsrc","setImgSrcModal","allmsgs","reverse","customcontext","getBoundingClientRect","currentTarget","getAttribute","pageY","pageX","editMsg","contextMenu","contentEditable","backgroundColor","closest","contains","setAttribute","clickHandler","ReactTimeAgo","toDate","marginLeft","files","idxDot","lastIndexOf","extFile","substr","toLowerCase","iconsrow","scrollto","sendMessage","scrollIntoView","block","emojipickerref","zoomamount","setZoomamount","zoom","timer","city","country","customization","get","use","customizedconvo","notifications2","nickname1","notifications1","nickname2","padding","render","backgroundImage","onKeyUp","keyCode","shiftKey","triggerSend","onInput","focus","role","sendEmoji","hideScrollbars","onEmojiClick","event","emojiobject","Userprofile","recipcity","recipcountry","recipjob","setRecipjob","recipnumber","setRecipnumber","recipemail","setRecipemail","recipwebsite","setRecipwebsite","extend","setExtend","active","setActive","job","phone","website","toLocaleLowerCase","Adduser","allusers","setRecipientname","setRecipientid","setMessage","msgpersonids","adduser","setKeyword","determineDisplay","border","cssText","pattern","allusersrow","test","Input","input","Inputs","disabled","determineDelete","age","setAge","setCity","phonenumber","setPhonenumber","setWebsite","setCountry","required","min","delete","Account","uploaded","setUploaded","setCover","setJob","userobj","setDisabled","uploadImg","removeImg","Switches","checked","setChecked","setValue","changeCSSVar","onBlur","state1","setState1","setState3","addstyle","state3","stylebtn","Personalization","input1","input2","input3","input4","setInput4","setInput1","setInput2","setInput3","hovered","setHovered","documentElement","setProperty","Infocontainer","variable","margin","Aboutchatuser","setPhone","rel","Preferences","Themes","setThemeimg","themeimg","setEmoji","miniview","setMiniview","convo","Actions","o","Support","Usersettings","settings","linklabel","BrowserHistory","setThemecolor","darkmode1","setDarkmode","setWidemode","themes","themesrow","clientHeight","clientWidth","activeStyle","link0","link1","link2","link3","marginTop","updateObj","Hoverlink","num","txt","clk","Body","roleType","setRoleType","lnks","tmp","console","log","d","Date","getHours","determineTime","providerData","providerId","determinetext","rows","Notifications","setNotifLength","setNotifications","deleteNotifi","noti","notificationsrow","locale","Paths","chatsettings","onedialogue","userprofile","Home","senderonline","setSenderonline","reciponline","setReciponline","Div","div","unreadmsgs","setMsgpersonids","convolist","setConvolist","setAllusers","recipientname","chatview","chatstarted","chatopen","setChatopen","dialoguerow","usersrow","Chatviewrow","pathname","split","users","right","creatorname","typerid","userref","set","StartConvo","App","setUser","setEmailError","setPasswordError","loginType","clearErrors","authListener","onAuthStateChanged","checkbox","querySelectorAll","provider","GoogleAuthProvider","addScope","signInWithPopup","additionalUserInfo","isNewUser","credential","accessToken","created","photoURL","phoneNumber","error","FacebookAuthProvider","usergoogle","errorCode","useBeforeunload","host","signOut","signInWithEmailAndPassword","createUserWithEmailAndPassword","TimeAgo","addDefaultLocale","en","addLocale","rootElement","getElementById","ReactDOM"],"mappings":"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","file":"static/js/main.64f6afcc.chunk.js","sourcesContent":["import firebase from 'firebase'\r\n\r\nconst  firebaseApp = firebase.initializeApp ({\r\n  apiKey: \"AIzaSyBtw3coit5Y_E2gJInz7RavYXuthmhh35Q\",\r\n  authDomain: \"authentic-idea-365202.firebaseapp.com\",\r\n  projectId: \"authentic-idea-365202\",\r\n  storageBucket: \"authentic-idea-365202.appspot.com\",\r\n  messagingSenderId: \"497585289385\",\r\n  appId: \"1:497585289385:web:a9ee5f59c4a17b793bd1b8\",\r\n  measurementId: \"G-2HBL5FQBGG\",\r\n  databaseURL: \"https://authentic-idea-365202-default-rtdb.firebaseio.com\"\r\n});\r\n\r\nconst db= firebaseApp.firestore()\r\nconst realtime_db = firebaseApp.database()\r\nconst Fire = firebaseApp\r\nexport  {db, realtime_db, Fire}\r\n","import React, { createContext, useState, useEffect } from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport firebase from 'firebase'\r\nimport { db } from './Fire'\r\nexport let ContextApp=createContext()\r\nlet ContextAppProvider=(props)=>{\r\n  const user = firebase.auth().currentUser\r\n  const [darkmode, setDarkmode]=useState(false)\r\n  const [widemode, setWidemode]=useState(false)\r\n  const [chatcolor, setChatcolor]=useState('')\r\n  const [themecolor, setThemecolor]=useState('')\r\n  const [notifi, setNotifi]=useState(false)\r\n  const [notificont, setNotificont]=useState({\r\n    emoji: '',\r\n    msg: ''\r\n  })\r\n  if(user) {\r\n    db.collection('users').doc(user.uid).onSnapshot(snap=>{\r\n      let user = snap.data()\r\n      /*\r\n      setDarkmode(user.customization.darkmode)\r\n      setWidemode(user.customization.widemode)\r\n      setChatcolor(user.customization.color)\r\n      setThemecolor(user.customization.themecolor)\r\n      */\r\n    })\r\n  }\r\n  return (\r\n    <ContextApp.Provider value={{darkmode, widemode, chatcolor, themecolor, notificont, notifi, setNotificont, setNotifi}}>\r\n      {props.children}\r\n    </ContextApp.Provider>\r\n  )\r\n}\r\nexport default ContextAppProvider","import React, {useState, useEffect, useContext} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport firebase from 'firebase'\r\nimport { db } from '../Fire'\r\nimport {ContextApp} from '../ContextAPI'\r\nfunction Sidebar (props) {\r\n  const {darkmode, chatcolor, widemode, themecolor}=useContext(ContextApp)\r\n\r\n  const {updateProfile,chatFuncDisplay,handleLogout, setChatview, setChatstarted}=props\r\n  const [userimg, setUserimg]=useState('')\r\n  const [username, setUsername]=useState('')\r\n  const [loader, setLoader]=useState(true)\r\n  const user = firebase.auth().currentUser\r\n  const [extend, setExtend]=useState(false)\r\n/*\r\n  useEffect(()=>{\r\n    db.collection('users').doc(user.uid).onSnapshot(snap=>{\r\n      const user = snap.data()  \r\n      setUserimg(user.userinfo.cover)\r\n      setUsername(user.userinfo.name)\r\n      setLoader(false)\r\n    })\r\n  },[userimg])\r\n  */\r\n  return (\r\n   <>\r\n  \r\n    <div className=\"profilepic profilepiccol\">\r\n    {\r\n\r\n        }\r\n        </div>\r\n  \r\n        <div className=\"icons\">\r\n            <NavLink activeClassName='activelink' exact to='/home'><span><i class=\"far fa-home\"></i>{widemode?<p className='widemodeElement'>Home</p>:''}</span></NavLink>\r\n            <NavLink activeClassName='activelink' onClick={()=>{chatFuncDisplay()}}  to='/chat'><span><i class=\"far fa-comment-alt\"></i>{widemode?<p className='widemodeElement'>Chat</p>:''}</span></NavLink>\r\n            <NavLink activeClassName='activelink'  to='/notifications'><span><i class=\"far fa-bell\"></i>{widemode?<p className='widemodeElement'>Notifications</p>:''}</span></NavLink>\r\n            <NavLink activeClassName='activelink' to='/podcast'><span><i class=\"fal fa-podcast\"></i>{widemode?<p className='widemodeElement'>Podcast</p>:''}</span></NavLink>\r\n            <NavLink activeClassName='activelink'  to='/settings'><span><i class=\"fal fa-cog\"></i>{widemode?<p className='widemodeElement'>Settings</p>:''}</span></NavLink>\r\n            <NavLink exact to='/' onClick={()=>{handleLogout()}}><span> <i  class=\"fal fa-sign-out-alt\"></i>{widemode?<p className='widemodeElement'>Logout</p>:''}</span></NavLink> \r\n           <a onClick={()=>{updateProfile()}} className='widemodeElement' ><i class={widemode?\"fal fa-chevron-double-right rotate\":'fal fa-chevron-double-right'}></i></a>\r\n        </div>    \r\n       { widemode?'':<><div className='widemodeElement spac'></div>\r\n        <div className='widemodeElement spac'></div></>}\r\n\r\n\r\n  </>\r\n  )\r\n}\r\nexport default Sidebar","import React, {useState, useEffect} from 'react'\r\nimport firebase from 'firebase'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink } from \"react-router-dom\" \r\n\r\nfunction Forgotpassword (props){\r\n  let [email, setEmail]=useState('')\r\n  function sendEmail(){\r\n      if(email!==''){\r\n       firebase.auth().sendPasswordResetEmail(email).then(()=>{\r\n          window.alert('email has been sent')\r\n       })\r\n       .catch(err=>{\r\n          let errorcode = err.code\r\n          let errormsg = err.message\r\n          window.alert(errormsg)\r\n       })\r\n      }else {\r\n        window.alert('Please input an email')\r\n      }\r\n  }\r\nreturn (\r\n  <div className='forgotpassword'>\r\n         <div className='login'>\r\n<div className=\"spacer1\"></div>\r\n\r\n    <div className=\"title\">\r\n    <i class=\"fa-unlock fad\"></i>\r\n      <h1>Forgot Password</h1>\r\n    </div>\r\n    <div className=\"spacer1\"></div>\r\n      <div className=\"logincontainer\">\r\n        <form onSubmit={(e)=>e.preventDefault()}>\r\n          <label >\r\n            <span>Email</span>\r\n            <input type=\"text\" placeholder='example@mail.com' onChange={(e)=>setEmail(e.target.value)}/>\r\n          </label>\r\n            <button className='themeBtn' onClick={()=>sendEmail()}>Send email</button>\r\n         \r\n        </form> \r\n   \r\n       <Link to='/' className='forgotPasswordButton'>Return to login page</Link>\r\n      </div>\r\n    \r\n  </div>\r\n  </div>\r\n)\r\n}\r\nexport default Forgotpassword","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport {db} from '../Fire'\r\nimport firebase from 'firebase'\r\nimport Forgotpassword from './Forgotpassword'\r\nimport GoogleButton from 'react-google-button'\r\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props'\r\nimport ReactFacebookLogin from 'react-facebook-login'\r\n\r\nfunction Login(props){\r\n  const {loginwithTwitter,loginwithFacebook,loginwithGoogle,setlName,lname,name, setName, email, setEmail, password, setPassword, handleLogin, handleSignup, hasAccount, setHasAccount, emailError, passwordError } = props\r\n  function determineLoading (){\r\n      if(props.loading) {\r\n       return <div class=\"lds-ring\"><div></div><div></div><div></div><div></div></div>\r\n      }else {\r\n        return 'Log in'\r\n      }\r\n  }\r\n\r\n  return (\r\n    <>\r\n     <Route exact path='/'>\r\n     <div className='image'>\r\n     <img src=\"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.webp\" class=\"img-fluid\" alt=\"Sample image\" />\r\n     </div>\r\n     <div className='login'>    \r\n        <div className='icon'>\r\n          <label style={{display: hasAccount?'flex': 'none'}}>  \r\n            <button className='login-btn gog-btn' onClick={loginwithGoogle()}> <i class=\"fab fa-google\"></i></button>\r\n            <button className='login-btn fb-btn' onClick={loginwithFacebook()}><i className=\"fab fa-facebook\"></i></button>\r\n          </label>    \r\n        </div>  \r\n        <div className=\"sub_title\" style={{display: hasAccount?'flex': 'none'}}>\r\n            <p className=\"text-center\">Or</p>\r\n        </div>\r\n\r\n        <div className=\"title\">\r\n        <h2>{hasAccount?'Log In':'Register'}</h2>\r\n        </div>        \r\n        <div className=\"spacer1\"></div>\r\n            <fieldset className=\"choose_role\">\r\n                <legend>Choose your role</legend>\r\n                <div>\r\n                  <input type=\"radio\" id=\"assistant\" name=\"interest\" class=\"slectOne\" value=\"assistant\" />\r\n                  <label for=\"assistant\" >Assistant</label>\r\n                </div>\r\n                <div>\r\n                  <input type=\"radio\" id=\"executive\" name=\"interest\" class=\"slectOne\" value=\"executive\" />\r\n                  <label for=\"executive\" >Executive</label>\r\n                </div>\r\n            </fieldset>  \r\n          <div className=\"logincontainer\">\r\n            <form onSubmit={(e)=>e.preventDefault()}>\r\n              <label style={{display: hasAccount?'none': 'flex'}}>   \r\n                <span>Name</span>\r\n                <input type=\"text\" placeholder='Jennifer Chang' onChange={(e)=>setName(e.target.value)}/>\r\n              </label>\r\n\r\n              <label>\r\n                <span>Email address</span>\r\n                <input type=\"text\" value={email} placeholder='username@mail.com' onChange={(e)=>setEmail(e.target.value)}/>\r\n                <p className='errormsgLogin'>{emailError}</p>\r\n              </label>\r\n              <label>\r\n                <span>Password</span>\r\n                <input type=\"password\" placeholder='password' value={password}onChange={(e)=>setPassword(e.target.value)}/>\r\n                <p className='errormsgLogin'>{passwordError}</p>\r\n              </label>\r\n              {hasAccount?\r\n              <div className='btnContainer'>\r\n                <button className='themeBtn' onClick={handleLogin}>{determineLoading()}</button>\r\n             <div className='flex' style={{textAlign: 'center'}}>\r\n             <Link exact to='/forgotpassword' className='forgotPasswordButton' >Forgot your password?</Link>\r\n             </div>\r\n             <div className='flex_warn' style={{textAlign: 'center'}}>\r\n             <small>Don't have an account<span onClick={()=>setHasAccount(!hasAccount)} style={{cursor: 'pointer'}}>? Register</span></small>\r\n             </div>\r\n              </div>:\r\n              \r\n              <div className='btnContainer'>\r\n                  <button className='themeBtn' style={{marginBottom: '10px'}} onClick={handleSignup}>Register</button>\r\n                  <div className='flexrow'>\r\n                  <small>Already have an account<span onClick={()=>setHasAccount(!hasAccount)} style={{cursor:'pointer'}}>? Sign in</span></small>\r\n                  </div>\r\n                  \r\n              </div>}\r\n              \r\n            </form> \r\n             \r\n          </div>\r\n        \r\n      </div>\r\n\r\n\r\n      <div className=\"footer\">\r\n        <div className=\"text-white mb-3 mb-md-0\">\r\n          Copyright © 2022. MOON AND CAKE.\r\n        </div>\r\n      </div>\r\n\r\n     </Route>\r\n     <Route exact path='/forgotpassword'>\r\n          <Forgotpassword />\r\n     </Route>\r\n     </>\r\n  )\r\n}\r\nexport default Login\r\n","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport firebase from 'firebase'\r\nimport {db} from '../Fire'\r\nfunction Users (props) {\r\n  // const [name, setName]=useState('')\r\n  // const [img, setImg]=useState('')\r\n  // const [city, setCity]=useState('')\r\n  // const [country, setCountry]=useState('')\r\n  // const [job, setJob]=useState('')\r\n  // const [recipnumber, setRecipnumber]=useState('')\r\n  // const [recipemail, setRecipemail]=useState('')\r\n  // const [recipwebsite, setRecipwebsite]=useState('')\r\n  // const [extend, setExtend]=useState(false)\r\n    const {convoinfo, setConvoinfo, el, setChatuser, chatuser}=props\r\n    const [recipimg, setRecipimg]=useState('')\r\n    // const {recipname, setRecipname, sendername, setSendername}=props\r\n    const [recipname, setRecipname] = useState('')\r\n    const [sendername, setSendername]=useState('')\r\n    const [activestatus, setActivestatus]=useState(false)\r\n    const [senderimg, setSenderimg]=useState('')\r\n    const [loading, setLoading]=useState(true)\r\n    const [msg, setMsg]=useState('')\r\n    const reg = /((?:(?!(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)).)+)|((?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)(?:\\?\\S+=\\S*(?:&\\S+=\\S*)*)?)/gm\r\n    function ytVidId(url) {\r\n      var p = /^(?:https?:\\/\\/)?(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?$/;\r\n    return (url.match(p)) ? RegExp.$1 : false\r\n    }\r\n    let user = firebase.auth().currentUser\r\n    function determineMsgtype(msg){\r\n      if(msg.message!==undefined){\r\n        if(msg.base64){\r\n          return `<span style='font-size: 0px; position: absolute'>${msg.message}</span><img src=\"${msg.message}\"/>`\r\n        }else if(msg.file){\r\n        return 'Sent a File'\r\n        }else if(msg.audio){\r\n            return 'Sent a recording'\r\n        }\r\n        else if(ytVidId(msg.message)){\r\n          return 'Sent a Video'\r\n        }\r\n        else {\r\n          return msg.message.replace(reg, (_, text, img) => text ? `<p>${text.trim()}</p>` : `<img src=\"${img}\" />`)\r\n\r\n        }\r\n      }\r\n\r\n    }\r\n    function lastMsg(msg) {\r\n      if(msg) {\r\n        if(msg.senderid===user.uid) {\r\n          return `<p>You:</p> ${determineMsgtype(msg)}`\r\n        }else {\r\n          return determineMsgtype(msg)\r\n       }\r\n      }\r\n     \r\n    }\r\n    useEffect(()=>{\r\n      db.collection('users').doc(el.convoinfo.recipientid).onSnapshot(snap=>{\r\n        const user = snap.data()\r\n        setRecipname(user.userinfo.name)\r\n        setRecipimg(user.userinfo.cover)\r\n        setActivestatus(user.userinfo.online)\r\n        setLoading(false)\r\n      })\r\n      db.collection('users').doc(el.convoinfo.creatorid).onSnapshot(snap=>{\r\n        const user = snap.data()\r\n        setSendername(user.userinfo.name)\r\n        setSenderimg(user.userinfo.cover)\r\n        setLoading(false)\r\n      })\r\n      db.collection('conversations').doc(el.convoinfo.convoid).onSnapshot(snap=>{\r\n        const msgs = snap.data()  \r\n        setMsg(msgs.messages[msgs.messages.length-1])\r\n      })\r\n    },[el.convoinfo.recipientid, el, chatuser])\r\n    return (\r\n   <>\r\n  <NavLink activeClassName='activelink' to={'/chat/'+el.convoinfo.convoid} onClick={()=>{setChatuser(el.convoinfo.creatorid===user.uid?el.convoinfo.recipientid:el.convoinfo.creatorid)}}>\r\n      <div className=\"user\">\r\n          <div className=\"profilepic\">\r\n          {loading?<div class=\"lds-ring\"><div></div><div></div><div></div><div></div></div>: <img src={el.convoinfo.creatorid===user.uid?recipimg:senderimg} alt=\"\"/>}\r\n          </div>\r\n        <div className=\"info flex\">\r\n          <p className='username'>{el.convoinfo.creatorid===user.uid?recipname.length>15?recipname.slice(0, 15)+'...':recipname:sendername.length>15?sendername.slice(0, 15)+'...':sendername}</p>\r\n          <small dangerouslySetInnerHTML={{__html: lastMsg(msg)}}></small>        \r\n          </div>\r\n      </div>\r\n  </NavLink>\r\n  </>\r\n  )\r\n}\r\nexport default Users","import React, {useState, useEffect, useContext} from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport Users from './Users'\r\nimport {db} from '../Fire'\r\nimport firebase from 'firebase'\r\nimport { ContextApp } from '../ContextAPI'\r\n\r\nfunction Userrow (props) {\r\n  const {themecolor}=useContext(ContextApp)\r\n  const [keyword, setKeyword]=useState('')\r\n  const pattern = new RegExp('\\\\b' + keyword.replace(/[\\W_]+/g,\"\"), 'i')\r\n\r\n    const {convoinfo, setConvoinfo, setChatuser, chatuser}= props \r\n    const [userlist, setUserlist]=useState([])\r\n    const [convos, setConvos]=useState([])\r\n    const id =db.collection('users').doc().id\r\n    const  user = firebase.auth().currentUser\r\n    const allconvos = convos && convos.sort((a, b) => b.lastmsgdate - a.lastmsgdate).map(el=>{\r\n      if(user){\r\n          return <Users   chatuser={chatuser} setChatuser={setChatuser} el={el} convoinfo={convoinfo} setConvoinfo={setConvoinfo}/>    \r\n\r\n      }else {\r\n        return null\r\n      }\r\n    })\r\n    useEffect(()=>{\r\n     db.collection('users').doc(user.uid).onSnapshot(user=>{\r\n       const userlist = user.data()\r\n       setUserlist(userlist)\r\n       db.collection('conversations').onSnapshot(snap=>{\r\n         let convos = []\r\n          snap.forEach(doc=>{\r\n            if(userlist.msgids.includes(doc.id)){\r\n              convos.push(doc.data())\r\n            }\r\n          })\r\n          setConvos(convos)\r\n       })\r\n     })\r\n    },[])\r\n  return (\r\n   <>\r\n    <h2>Chats</h2>\r\n     <div className=\"search abs\">\r\n      \r\n       <i class=\"far fa-plus\" style={{color: themecolor}} onClick={()=>props.setAdduser()}></i>\r\n       <input type=\"text\" placeholder='Search' onFocus={()=>props.setAdduser()}/>\r\n     </div> \r\n   \r\n     <div className=\"users\">\r\n     {allconvos}     \r\n     </div>\r\n    \r\n  </>\r\n  )\r\n}\r\nexport default Userrow","import React, { useState, useEffect, useContext } from \"react\";\r\nimport { ContextApp } from \"../ContextAPI\";\r\n\r\nfunction Hoverabletexticonflexrow(props) {\r\n  const { themecolor } = useContext(ContextApp);\r\n  const { icon, classNames, text, functionOne } = props;\r\n  return (\r\n    <div\r\n     \r\n      className={`${classNames} white`}\r\n      onClick={functionOne}\r\n    >\r\n      <i className={\"whiteel fad fa-\" + icon} ></i>\r\n        <p className='white' >{text}</p>\r\n    </div>\r\n  );\r\n}\r\nexport default Hoverabletexticonflexrow;\r\n","import React, { useContext, useEffect, useRef, useState } from 'react'\r\nimport {CSSTransition} from 'react-transition-group'\r\nimport { db } from '../Fire'\r\nimport firebase from 'firebase'\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\nimport { ContextApp } from '../ContextAPI'\r\nimport Hoverabletexticonflexrow from './Hoverabletexticonflexrow'\r\n\r\nfunction Contextmenu(props){\r\n  const user =firebase.auth().currentUser\r\n  const {themebool, emojibool,type,setUpdatedMsg,copy,convoid,contextmenu, setContextmenu, contextstyle, msgid}=props\r\n  const [events, setEvents]=useState(false)\r\n  const [visible, setVisible]=useState(false)\r\n  const emojis = ['smile','angry','sad-cry','surprise']\r\n  const [msgs, setMsgs]=useState([])\r\n  const contextmenuSelector = useRef()\r\n  const location = useLocation()\r\n  const history = useHistory()\r\n  const {themecolor}=useContext(ContextApp)\r\n  const allemojis = [{\r\n    class: 'surprise yellow',\r\n    msg: 'Surprised'\r\n  },{\r\n    class: 'tired blue',\r\n    msg: 'Tired'\r\n  },\r\n  {\r\n    class: 'smile-wink yellow',\r\n    msg: 'Wink'\r\n  },\r\n  {\r\n    class: 'kiss-beam red',\r\n    msg: 'Love'\r\n  },\r\n  {\r\n    class: 'grin-stars yellow',\r\n    msg: 'Stars'\r\n  },\r\n  {\r\n    class: 'grin-squint-tears yellow',\r\n    msg: 'Laugh'\r\n  },\r\n  {\r\n    class: 'grimace yellow',\r\n    msg: 'Grimace'\r\n  }, \r\n  {\r\n    class: 'frown red',\r\n    msg: 'Frown'\r\n  },\r\n  {\r\n    class: 'heart red',\r\n    msg: 'Like'\r\n  }\r\n    ] \r\n \r\n  function sendReaction(opt){\r\n    let messages = {\r\n    reaction: `fad fa-${opt}`\r\n    }\r\n  msgs && msgs.map(msg=>{\r\n      if(msgid===msg.msgid){\r\n        let itemindex = msgs.indexOf(msg)\r\n        if(msg.senderid===user.uid){\r\n          msgs[itemindex].reaction1=`fad fa-${opt}`\r\n          db.collection('conversations').doc(convoid).update({\r\n              messages: msgs\r\n          })\r\n        }\r\n        else {\r\n          msgs[itemindex].reaction2=`fad fa-${opt}`\r\n          db.collection('conversations').doc(convoid).update({\r\n              messages: msgs\r\n          })\r\n        }\r\n      }\r\n  })\r\n    setContextmenu(false)\r\n  }\r\n  function copyFunc(msgid){\r\n    var r = document.createRange()\r\n    let text = document.querySelector(`#${msgid} .msg`)\r\n    r.selectNode(text)\r\n    window.getSelection().removeAllRanges()\r\n    window.getSelection().addRange(r)\r\n    document.execCommand('copy')\r\n    window.getSelection().removeAllRanges()\r\n    setContextmenu(false)\r\n  }\r\n\r\n  function deleteFunc(){\r\n    msgs && msgs.map(msg=>{\r\n      if(msgid===msg.msgid&&msg.senderid===user.uid){\r\n        let itemindex = msgs.indexOf(msg)\r\n        msgs.splice(itemindex, 1) \r\n        db.collection('conversations').doc(convoid).update({\r\n            messages: msgs\r\n        })\r\n      }\r\n  })\r\n    setContextmenu(false)\r\n  }\r\n  function editFunc(){\r\n          let edit = document.querySelector(`#${msgid} p`)\r\n          edit.setAttribute('contentEditable', 'true')\r\n\r\n          edit.oninput=(e)=>{\r\n            setUpdatedMsg(e.currentTarget.textContent)\r\n          }\r\n\r\n          setContextmenu(false)\r\n\r\n    }\r\n  const emojisrow = emojis.map(opt=>{\r\n    return <div onClick={()=>sendReaction(opt)}> <i className={'fad fa-'+(opt==='cry'?'sad-cry':opt)} ></i>  </div>\r\n\r\n  })\r\n  const allemojisrow = allemojis.map(emoji=>{\r\n    return <div onClick={()=>sendReaction(emoji.class)}>\r\n        <i className={emoji.class==='heart red'?'fas fa-'+emoji.class:'fad fa-'+emoji.class}></i>\r\n        <p>{emoji.msg}</p>\r\n    </div>\r\n  })\r\n  document.addEventListener('click', function(e){\r\n      const target = e.target\r\n      if(target!==contextmenuSelector.current){\r\n        setContextmenu(false)\r\n      }\r\n  })\r\n  useEffect(()=>{\r\n    if(type==='msg'){\r\n      db.collection('conversations').doc(convoid).onSnapshot(snap=>{\r\n        setMsgs(snap.data().messages)\r\n      })\r\n    }\r\n   \r\n  },[convoid])\r\n\r\n\r\n  return (\r\n    <>\r\n    {\r\n      type==='msg'?   <div  ref={contextmenuSelector}  onContextMenu={(e)=>e.preventDefault()} className=\"contextmenu bs\" style={{display: contextmenu?'flex':'none', left: contextstyle.left+'px', top: contextstyle.top+'px'}}>\r\n       <div className='emojis'>{emojisrow}</div>\r\n       <div className={'option laugh' } onMouseOver={()=>setVisible(true)} onMouseLeave={()=>setVisible(false)}>\r\n         <i className='fad fa-laugh'></i> <p>Reaction</p>\r\n         <CSSTransition\r\n          in={visible}\r\n          timeout={200}\r\n          classNames=\"drophover\"\r\n          unmountOnExit\r\n          >\r\n        <div className='dropmenu bs'>\r\n        {allemojisrow}\r\n        </div>\r\n        </CSSTransition>\r\n        </div>\r\n    <div className={'option copy'} onClick={()=>copyFunc(msgid)}>\r\n    <i className='fal fa-copy'></i> <p>Copy</p>\r\n   </div>    \r\n   {/* <div className={'option edit'} onClick={()=>editFunc()}>\r\n    <i className='fal fa-edit'></i> <p>Edit</p>\r\n   </div> */}\r\n\r\n   <div className={'option delete'} onClick={()=>deleteFunc()}>\r\n    <i className='fal fa-trash'></i> <p>Delete</p>\r\n   </div>\r\n    </div>\r\n    :type==='settings'?\r\n    <div ref={contextmenuSelector}  onContextMenu={(e)=>e.preventDefault()} className=\"contextmenu bs\" style={{display: contextmenu?'flex':'none', left: contextstyle.left+'px', top: contextstyle.top+'px'}}>\r\n        \r\n        {(emojibool ===true ||  themebool===true ||type==='settings')?'':<>\r\n        <Hoverabletexticonflexrow classNames={'option'} functionOne={()=>props.setThemebool(true)} icon={'adjust'} text={'Theme'}/>\r\n        <Hoverabletexticonflexrow classNames={'option'} functionOne={()=>props.setEmojibool(true)} icon={props.emojitype} text={'Emoji'}/>\r\n        </> }\r\n        <Hoverabletexticonflexrow classNames={'option'} functionOne={()=>window.location.reload()} icon={'sync'} text={'Reload'}/>\r\n        <Hoverabletexticonflexrow classNames={'option'} functionOne={()=>history.goForward()} icon={'long-arrow-alt-right'} text={'Forward'}/>\r\n        <Hoverabletexticonflexrow classNames={'option'} functionOne={()=>history.goBack()} icon={'undo'} text={'Previous'}/>\r\n       \r\n    </div>\r\n    :\r\n    ''\r\n    }\r\n    </>\r\n  )\r\n}\r\nexport default Contextmenu","import React, {useState, useEffect} from 'react'\r\n\r\nfunction ElapsedTime(props) {\r\n \r\n  const [elapsedTime, setElapsedTime] = useState('')\r\n  const [regdate, setRegDate] = useState('')\r\n  const [providedtime, setProvidedTime] = useState(props.providedtime)\r\n\r\n  function msToTime(duration) {\r\n    let date = new Date()\r\n    let minutes = Math.floor((duration / (1000 * 60)) % 60),\r\n    hours = Math.floor((duration / (1000 * 60 * 60)) % 24)\r\n    let pday = providedtime.getDate()\r\n    let pmonth = providedtime.getMonth()\r\n    let pyear = providedtime.getFullYear()\r\n    let day = date.getDate()\r\n    let month = date.getMonth()\r\n    let year = date.getFullYear() \r\n    if(pday===day && pmonth===month && pyear===year && hours < 24) {\r\n      if(hours < 1) {\r\n        if(minutes < 1)\r\n          return \"A few seconds ago\"\r\n        else if (minutes === 1)\r\n          return \"A minute ago\"\r\n        else \r\n          return minutes+\" minutes ago\"\r\n      }\r\n      else if(hours === 1) \r\n        return \"One hour ago\"\r\n      else \r\n        return hours+\" hours ago\"\r\n    }\r\n    else {\r\n      return providedtime.toString().split(' ').slice(1,4).toString().replaceAll(',',' ') \r\n    }\r\n  } \r\n\r\n  useEffect(() => {\r\n    var storedDate = new Date(providedtime)\r\n    var nowDate = new Date()\r\n    var elapsedTime = nowDate.getTime() - storedDate.getTime()\r\n    setElapsedTime(msToTime(elapsedTime))\r\n  },[props.updateelapsed, providedtime])\r\n\r\n  return <>{elapsedTime}</> \r\n}\r\n\r\nexport default ElapsedTime","import React, { Component, useContext, useState } from 'react'\r\nimport { saveAs } from 'file-saver';\r\n\r\nimport AudioReactRecorder, { RecordState } from 'audio-react-recorder'\r\nimport styled from 'styled-components'  \r\nimport { ContextApp } from '../ContextAPI'\r\nimport firebase from 'firebase'\r\nimport { db } from '../Fire'\r\n\r\nconst Iconspecial = styled.i `\r\ncolor: ${props=>props.color};\r\nbackground-color: white;\r\n&:hover {\r\n  color: white;\r\n  background-color:  ${props=>props.color};\r\n}\r\n`\r\nfunction Recorder(props) {\r\n  \r\n  const user = firebase.auth().currentUser\r\n  const {convoid, progressbar, progresswidth}=props\r\n  const {themecolor}= useContext(ContextApp)\r\n  const [record, setRecord] = useState(null)\r\n  const [audio, setAudio] = useState('blob:https://5guz4.csb.app/2ff8746b-44d6-4c3f-b531-480291e7aa84')\r\n  const [update, setUpdate]=useState(0)\r\n  const [clicked, setClicked]=useState(false)\r\n  const [reset, setReset]=useState(false)\r\n  let id = db.collection('conversations').doc().id\r\n\r\n  function start() {\r\n    setRecord(RecordState.START)\r\n  }\r\n \r\n  function stop() {\r\n      setRecord(RecordState.STOP)\r\n  }\r\n  //audioData contains blob and blobUrl\r\n    const onStop = (audioData) => {\r\n    if(!reset){\r\n      var FileSaver = require('file-saver');\r\n      const storageRef =  firebase.storage().ref(`${convoid}/recording.mp3`)\r\n      var reader = new FileReader();\r\n      reader.readAsDataURL(audioData.blob); \r\n      reader.onloadend = function() {\r\n          var base64data = reader.result;                \r\n          function urltoFile(url, filename, mimeType){\r\n            return (fetch(url)\r\n                .then(function(res){return res.arrayBuffer();})\r\n                .then(function(buf){return new File([buf], filename,{type:mimeType});})\r\n            );\r\n        }\r\n        \r\n        //Usage example:\r\n        urltoFile(base64data, 'recording.wav','audio/wav')\r\n        .then(\r\n          function(file){ \r\n\r\n              const storageRef =  firebase.storage().ref(`${convoid}/${id}.wav`)\r\n\r\n    const task =  storageRef.put(file)\r\n      task.on('state_changes',\r\n\r\n        function progress(snap){\r\n          progressbar.current.style.display='flex'\r\n          const percentage =( snap.bytesTransferred/snap.totalBytes)*100\r\n         progresswidth.current.style.height=`${percentage}%`\r\n        }, \r\n        function error(err){\r\n\r\n        },\r\n        function complete(){\r\n  \r\n              let msgobject = {\r\n            message: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${id}.wav?alt=media`,\r\n            reaction: \"\",\r\n            msgdate: firebase.firestore.Timestamp.now(),\r\n            msgid: db.collection(\"conversations\").doc().id,\r\n            read: false,\r\n            senderid: user.uid,\r\n            editing: false,\r\n            nobackground: true,\r\n            emoji: true,\r\n            base64: false,\r\n            audio: true\r\n          };\r\n          db.collection(\"conversations\")\r\n          .doc(convoid)\r\n          .update({\r\n            messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n          });\r\n          progressbar.current.style.display='none'\r\n\r\n    })    \r\n          });\r\n\r\n}\r\n\r\n    }else {\r\n      setReset(false)\r\n    }\r\n  }\r\n  \r\n  const [time, setTime] = useState(0)\r\n  const [intervalId, setIntervalId] = useState();\r\n  function startRecord() {\r\n      start()\r\n      setClicked(true)\r\n      setIntervalId(setInterval(() => {\r\n          setTime(prev => prev + 1)\r\n      }, 1000));\r\n  }\r\n  \r\n  function stopRecord() {\r\n      setTime(0)\r\n      stop()\r\n      setClicked(false)\r\n      clearInterval(intervalId);\r\n  }\r\n  function resetRecord(){\r\n    setReset(true)\r\n    stop()\r\n  }\r\n    return (\r\n      <>\r\n        <AudioReactRecorder state={record} onStop={onStop} />\r\n        {!clicked?<Iconspecial color={themecolor} className='icondiv fal fa-microphone' onClick={()=>{startRecord(); }}></Iconspecial>:\r\n        <div class=\"spinner-wave\" onClick={()=>{stopRecord(); }}>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n       \r\n        <span className=\"time\">\r\n          {time}\r\n        </span>\r\n        <Iconspecial color={themecolor} className=\"left fal fa-times-circle\" onClick={()=>resetRecord()}></Iconspecial>\r\n\r\n      </div>\r\n      }\r\n        {/* <button onClick={()=>start()}>Start</button>\r\n        <button onClick={()=>stop()}>Stop</button> */}\r\n      </>\r\n    )\r\n  }\r\n\r\nexport default Recorder","import React, { useState, useEffect, useContext } from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  NavLink,\r\n  Redirect\r\n} from \"react-router-dom\";\r\nimport { ContextApp } from \"../ContextAPI\";\r\nimport styled from 'styled-components'  \r\nimport Recorder from \"./Recorder\";\r\n\r\nconst Button =  styled.button `\r\n&:hover {\r\n  background-color: ${props=>props.color}\r\n}\r\n`\r\nconst Icon = styled.i `\r\ncolor: ${props=>props.color};\r\n\r\n`;\r\nconst Iconspecial = styled.i `\r\ncolor: ${props=>props.color};\r\nz-index: 10;\r\nbackground-color: white;\r\n&:hover {\r\n  color: white;\r\n  background-color:  ${props=>props.color};\r\n}\r\n`\r\nconst Span = styled.span `\r\n&:hover {\r\n  background-color: ${props=>props.color}\r\n}\r\n`;\r\nfunction Hoverableicondiv(props) {\r\n  const { inputref,progresswidth, progressbar,convoid,setImg,sendFile,special,icon,type, classNames, setState, state, lnk, setState2, handleEvent } = props;\r\n  const { themecolor } = useContext(ContextApp);\r\n  function chatFuncDisplay(){\r\n    setState2(false);\r\n     setTimeout(()=>{\r\n      setState(false)\r\n     },400)\r\n  }\r\n  return  (\r\n    <>\r\n    { type && type==='link'?    \r\n      <Link  to={lnk} id='sth' onClick={()=>{chatFuncDisplay()}}>\r\n      <Span color={themecolor} className={`icondiv ${classNames}`}>\r\n      <Icon color={themecolor} className={\" fal fa-\" + icon}></Icon>\r\n     </Span>\r\n    </Link>\r\n    :special?\r\n    <label style={{zIndex: 4, cursor: 'pointer'}}>\r\n        {type==='microphone'?<Recorder convoid={convoid} progressbar={progressbar} progresswidth={progresswidth}/>: \r\n        <><input type={type} ref={inputref} className={`${icon}file`}style={{display: 'none'}} onChange={()=>sendFile(icon)} accept={icon==='image'?\"image/*\":icon==='film'?'\"video/mp4,video/x-m4v,video/*, mp4\"':''}/>\r\n         <Iconspecial color={themecolor} className={\"icondiv fal fa-\" + icon} ></Iconspecial></>}\r\n\r\n    </label>\r\n    :\r\n    <Button color={themecolor} className={`icondiv ${classNames}`} onClick={()=>{setState && setState(!state); handleEvent&&handleEvent()}}>\r\n         <Icon color={themecolor} className={\" fal fa-\" + icon} ></Icon>\r\n      </Button>\r\n  }\r\n    </>\r\n\r\n  );\r\n}\r\nexport default Hoverableicondiv;\r\n","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction Iframe (props) {\r\n  const {link, type}= props\r\n  return (\r\n<>\r\n  {\r\n    type==='video'?\r\n      <video controls src={link}  allowFullScreen>\r\n         \r\n      </video>\r\n      :\r\n      <iframe src={link} allowFullScreen>\r\n\r\n      </iframe>\r\n}\r\n</>\r\n  )\r\n}\r\nexport default Iframe","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction Img (props) {\r\n  const {src, link}= props\r\n  return (\r\n    <>\r\n    {link?   <span style={{fontSize: '0px', position:'absolute'}}>{src}</span>:''}\r\n    <img src={src}/>\r\n    </>\r\n  )\r\n}\r\nexport default Img","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction File (props) {\r\n  const {link, name}= props\r\n  return (\r\n\r\n      <a href={link} target='_blank' className='file'><i className='fal fa-file'> </i><span>Download {name}</span></a>\r\n\r\n  )\r\n}\r\nexport default File","import React, {useState, useEffect, useRef} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction Recording (props) {\r\n  const {src}= props\r\n  const video =useRef()  \r\n  const playBtn = useRef()\r\n  const progress = useRef()\r\n  const playPause = useState(false)\r\n  function togglePlayPause(e){\r\n    if(video.current.paused){\r\n      video.current.play()\r\n      e.target.className='fal fa-pause'\r\n    }\r\n    else {\r\n      video.current.pause()\r\n      e.target.className='fal fa-play'\r\n    }\r\n  }\r\nfunction updateProgress(){\r\n    const progresswidth = video.current.currentTime/video.current.duration\r\n    setTime((video.current.duration-video.current.currentTime).toFixed(1))\r\n    progress.current.style.width=progresswidth*100+'%'\r\n    if(video.current.ended){\r\n      playBtn.current.className='fal fa-play'\r\n    }\r\n    }\r\n    const [time, setTime]=useState('')\r\n    function determineMinSecH(time){\r\n      if(time>60){\r\n        return (time / 60).toFixed(0) +' m'\r\n      }else if (time>3600){\r\n        return (time/3600).toFixed(1) + ' h'\r\n      }else {\r\n        return Math.round(time) + ' s'\r\n      }\r\n    }\r\n  return (\r\n    <div className='videoContainer'> \r\n      <video onLoadedData={()=>setTime(video.current.duration.toFixed(1))} onTimeUpdate={()=>updateProgress()} src={src} id='video' ref={video}></video>\r\n        <div className=\"controls\">\r\n          <i className=\"fal fa-play\" ref={playBtn} onClick={(e)=>togglePlayPause(e)}></i>\r\n          <div className=\"progressvideo\">\r\n            <div className=\"progress\" ref={progress}></div>\r\n          </div>\r\n          <small>{determineMinSecH(time)}</small>\r\n        </div>\r\n    </div>\r\n   \r\n  )\r\n}\r\nexport default Recording","import React from 'react'\r\n\r\nexport function Search({search, setSearch, fetchData, setTitle}) {\r\n// Handle Submit\r\nconst handleSubmit = (e)=>{\r\n    // Prevent default\r\n    e.preventDefault();\r\n    // Set Title\r\n    setTitle(search);\r\n    // Fetch\r\n    fetchData(search);\r\n    // Reset form search value\r\n    setSearch('');\r\n}\r\n\r\n// RETURN    \r\n    return (\r\n\r\n            <form className='gif-search flexrow' onSubmit={handleSubmit}>\r\n              <div className=\"gifform flexrow\">\r\n              <button className='themeBtn'>\r\n            <i className=\"fal fa-search\"></i>\r\n            </button>\r\n              <input \r\n            className='inputgif'\r\n            type=\"text\"\r\n            value={search}\r\n            onChange={ e => {setSearch(e.target.value)}}\r\n            placeholder='Search GIFs'\r\n            /> \r\n       \r\n              </div>\r\n            </form>\r\n    )\r\n}\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\n\r\nimport { ContextApp } from \"../ContextAPI\";\r\nimport styled from 'styled-components'\r\nconst Button = styled.button ` \r\nbackground-color: ${props=>props.color};\r\nborder: solid 3px transparent;\r\n  &:hover {\r\n    background-color: white;\r\n    border: solid 3px ${props=>props.color}\r\n  }\r\n`\r\nfunction Hoverablebutton(props) {\r\n  const { themecolor } = useContext(ContextApp);\r\n  const { state, setState, type, text } = props;\r\n\r\n  return (      \r\n      <Button \r\n      color={themecolor}\r\n       className={state===type?'themeBtn active':'themeBtn'}\r\n        onClick={()=>setState(type)}\r\n      > \r\n        {text}\r\n      </Button>\r\n    );\r\n}\r\nexport default Hoverablebutton;\r\n","import React from 'react'\r\nimport axios from 'axios'\r\n\r\nimport {Search} from './Search'\r\nimport Hoverablebutton from '../Hoverablebutton';\r\nimport Hoverableicondiv from '../Hoverableiconsdiv';\r\nimport firebase from 'firebase'\r\nimport {db} from '../../Fire'\r\n\r\nexport default function Gif(props) {\r\n    // STATEs\r\n    const {setGif, convoid, chatuser, notifibool, chatimg}=props\r\n    const [data, setData] = React.useState([]);\r\n    const [title, setTitle] = React.useState('Gif');\r\n    const [loader, setLoader] = React.useState(true);\r\n    const [offset, setOffset] = React.useState(0);\r\n    const [limit, setLimit] = React.useState(10)\r\n    const [totalCount, setTotalCount] = React.useState(0)\r\n    const [search, setSearch] = React.useState('');\r\n    const [trending, setTrending] = React.useState(false)\r\n    const [trendSearch, setTrendSearch] = React.useState(false)\r\n    const [tSearch, setTsearch] = React.useState([])\r\n    const date = firebase.firestore.FieldValue.serverTimestamp()\r\n    const user =firebase.auth().currentUser\r\n//\r\n// ─── FETCH ──────────────────────────────────────────────────────────────────────\r\nconst fetchData = async (title)=>{\r\nlet URL = `https://api.giphy.com/v1/gifs/search?q=${title}&api_key=nn7ZohI4KJCwSXdYVpViEi7RkUmJacV3&limit=${limit}&offset=${offset}`;\r\n// Try and catch\r\ntry{\r\n    let fetchGif = await axios(URL);\r\n    let fetchRes = await fetchGif;\r\n    if(fetchRes.status === 200){\r\n    // Set Data\r\n    setData(fetchRes.data.data)\r\n    // Set Total Count\r\n    setTotalCount(fetchRes.data.pagination.total_count)\r\n    // Set loader false\r\n    setLoader(false)\r\n     // Call new content\r\n     content()\r\n     // Set fetch random false\r\n     if(trending){\r\n     setTrending(false)\r\n    // Reset offset\r\n    setOffset(0)\r\n     }\r\n     // Set trend searching\r\n     setTrendSearch(false)\r\n    \r\n    }\r\n}\r\ncatch(error){\r\n    if(error) throw error\r\n}\r\n\r\n}\r\n// Remove image\r\n// const removeImage = id => {\r\n//     setData(\r\n//      data.filter(gif => gif.id !== id)\r\n//     )\r\n//   }\r\n// USE EFFECT on offset change fetch new data\r\nReact.useEffect(()=>{\r\n\r\n    if(!trending){\r\n    fetchData(title)\r\n    }\r\n},[offset])\r\n\r\n //\r\n // ─── HANDLE DOWNLOAD ────────────────────────────────────────────────────────────\r\n     \r\nconst handleDownload = (url)=>{\r\n    var xhr = new XMLHttpRequest();\r\n    xhr.open(\"GET\", url, true);\r\n    xhr.responseType = \"blob\";\r\n    xhr.onload = function(){\r\n        let urlCreator = window.URL || window.webkitURL;\r\n        let imageUrl = urlCreator.createObjectURL(this.response);\r\n        let tag = document.createElement('a');\r\n        tag.href = imageUrl;\r\n        tag.download = title.charAt(0).toUpperCase() + title.slice(1);\r\n        document.body.appendChild(tag);\r\n        tag.click();\r\n        document.body.removeChild(tag);\r\n    }\r\n    xhr.send();\r\n}\r\n\r\n// Scroll on top function\r\nconst onTop = () => {\r\n    let options = { top: 0, left: 0, behavior: 'smooth' };\r\n    window.scrollTo(options);\r\n}\r\n\r\n// Handle Next Pagination\r\nconst handleNext = ()=>{\r\n    // Set loader true\r\n    setLoader(true);\r\n    // Add one page\r\n    setOffset(offset + limit)\r\n    // Go on top\r\n    onTop()\r\n}\r\n// Handle prev Pagination\r\nconst handlePrev = ()=>{\r\n    // Loader true\r\n    setLoader(true);\r\n    // One page\r\n    setOffset(offset - limit) \r\n    // Go on top\r\n    onTop()\r\n}\r\nfunction sendGif(img){\r\n    let msgobject = {\r\n        message: img,\r\n        reaction1: \"\",\r\n        reaction2: \"\",\r\n        msgdate: firebase.firestore.Timestamp.now(),\r\n        msgid: db.collection(\"conversations\").doc().id,\r\n        read: false,\r\n        senderid: user.uid,\r\n        editing: false,\r\n        nobackground: true,\r\n        emoji: true,\r\n        base64: true\r\n      };\r\n      db.collection(\"conversations\")\r\n        .doc(convoid)\r\n        .update({\r\n          lastmsgdate: date,\r\n          messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n        });\r\n        let notificationobj = {\r\n            notifimsg: img,\r\n            notifidate: firebase.firestore.Timestamp.now(),\r\n            read: false,\r\n            sender: user.displayName,\r\n            gif: true,\r\n            id: convoid,\r\n            senderid: user.uid,\r\n            notifiid: db.collection('users').doc().id          }      \r\n          if(notifibool){\r\n            db.collection('notifications').doc(chatuser).update({\r\n              notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n            })\r\n          }\r\n}\r\n //\r\n // ─── RENDER CONTENT ─────────────────────────────────────────────────────────────\r\n     \r\nconst content = () => {\r\n    switch(true) {\r\n    // If loader is true show loader spinner\r\n      case loader:\r\n        return <div>Loading...</div>\r\n    // If data array more than zero loop through\r\n      case data.length > 0:\r\n        return  data.map(g=> {\r\n            return (\r\n                <div className='gif-card' key={g.id}>\r\n                <img className='image' onClick={()=>sendGif(g.images.fixed_height.url)} src={g.images.fixed_width.url} alt=\"gif\"/>\r\n                </div>\r\n            )\r\n        })\r\n\r\n    // Otherwise return default\r\n      default:\r\n        return data\r\n    }\r\n  }\r\n\r\n//\r\n// ─── RETURN ─────────────────────────────────────────────────────────────────────\r\n    \r\nreturn (\r\n    <div className='gif bs'>\r\n        <header>\r\n        <i className=\"fal fa-times\" onClick={()=>setGif(false)}></i>\r\n        <h2>Search GIFs</h2>\r\n        <Search search={search} setSearch={setSearch} fetchData={fetchData} setTitle={setTitle}/>\r\n\r\n        </header>\r\n    \r\n        <div className='gif-wrap'>\r\n      \r\n        {trendSearch ? \r\n        (\r\n            <div className='gif-trend-search'>\r\n            <ul> \r\n            {tSearch.map((t,i)=> <li key={i}><strong>{i + 1}</strong> {t.toUpperCase()}</li>)}\r\n            </ul>\r\n            </div>\r\n        )\r\n        :\r\n        ''\r\n        }\r\n          {content()}\r\n        </div>\r\n        <div className=\"flexrow np-btn\">\r\n        <button className='themeBtn flex' s onClick={handlePrev}><i class=\"fad fa-backward\"></i></button>\r\n        <button className='themeBtn flex' onClick={handleNext}><i class=\"fad fa-forward\"></i></button>\r\n        </div>\r\n\r\n       \r\n    </div>\r\n)\r\n}\r\n","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction Contextoptions (props) {\r\n  const {text,classNames, icon, function1, setState, re}= props\r\n  return (\r\n    <div className={classNames} ref={re &&re}onClick={(e)=>{setState && setState(prev=>!prev);e.stopPropagation(); function1 && function1()}}>\r\n    <i className={icon} ></i>\r\n    </div>\r\n  )\r\n}\r\nexport default Contextoptions","\r\nimport React, {useState, useEffect, useRef} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport Contextoptions from './Contextoptions'\r\nimport {db} from '../../Fire'\r\nimport Contextmenu from '../Contextmenu'\r\nimport { displayName } from 'react-addons-css-transition-group'\r\nfunction Threedots (props) {\r\n  const {msg, user, msgs, convoid}= props\r\n  const [visible, setVisible]=useState(false)\r\n  const [emojis, setEmojis]=useState(false)\r\n  const [msgidedit, setMsgidedit]=useState('')\r\n  const allemojis = [\r\n  {\r\n    class: 'smile-wink yellow',\r\n    msg: 'Wink'\r\n  },\r\n  {\r\n    class: 'kiss-beam red',\r\n    msg: 'Love'\r\n  },\r\n  {\r\n    class: 'grin-stars yellow',\r\n    msg: 'Stars'\r\n  },\r\n  {\r\n    class: 'grin-squint-tears yellow',\r\n    msg: 'Laugh'\r\n  },\r\n  {\r\n    class: 'frown red',\r\n    msg: 'Frown'\r\n  },\r\n  {\r\n    class: 'heart red',\r\n    msg: 'Like'\r\n  }\r\n    ] \r\n    function sendReaction(opt){\r\n      msgs && msgs.map(msg=>{\r\n          if(msgidedit===msg.msgid){\r\n            let itemindex = msgs.indexOf(msg)\r\n            if(msg.senderid===user.uid){\r\n              msgs[itemindex].reaction1=`fad fa-${opt}`\r\n              db.collection('conversations').doc(convoid).update({\r\n                  messages: msgs\r\n              })\r\n            }else {\r\n              msgs[itemindex].reaction2=`fad fa-${opt}`\r\n              db.collection('conversations').doc(convoid).update({\r\n                  messages: msgs\r\n              })\r\n            }\r\n          }\r\n      })\r\n    }\r\n    const emojisrow = allemojis && allemojis.map(emoji=>{\r\n      return <i  className={'fad fa-'+emoji.class} onClick={()=>{sendReaction(emoji.class); setVisible(false)}}></i>\r\n    })\r\n    const contextoption = useRef()\r\n    const emojiref = useRef()\r\n\r\n  // function reactionMsg(msgid){\r\n  //   msgs && msgs.map(msg=>{\r\n  //     if(msgid===msg.msgid){\r\n  //       let itemindex = msgs.indexOf(msg)\r\n  //       msgs[itemindex].reaction=`fad fa-${opt}`\r\n  //       db.collection('conversations').doc(convoid).update({\r\n  //           messages: msgs\r\n  //       })\r\n  //     }\r\n  // })\r\n  // }\r\n\r\n  function copyMsg(){\r\n    var r = document.createRange()\r\n    let text = document.querySelector(`#${msgidedit} .msg`)\r\n    if(text){\r\n      r.selectNode(text)\r\n      window.getSelection().removeAllRanges()\r\n      window.getSelection().addRange(r)\r\n      document.execCommand('copy')\r\n      window.getSelection().removeAllRanges()\r\n      setVisible(false)\r\n    }\r\n  }\r\n  function deleteMsg(){\r\n    msgs && msgs.map(msg=>{\r\n      if(msgidedit===msg.msgid&&msg.senderid===user.uid){\r\n        let itemindex = msgs.indexOf(msg)\r\n        msgs.splice(itemindex, 1) \r\n        db.collection('conversations').doc(convoid).update({\r\n            messages: msgs\r\n        })\r\n        setVisible(false)\r\n      }\r\n  })\r\n\r\n  }\r\n \r\n  function msgOptions(msg){\r\n\r\n  }\r\n  const threedots = useRef()\r\n  document.addEventListener('click', function(e){\r\n  if(e.target!==threedots.current){\r\n    setVisible(false)\r\n    setEmojis(false)\r\n  }\r\n})\r\n  return (\r\n    <>\r\n      <i ref={threedots}onClick={(e)=>{msgOptions(msg); setMsgidedit(msg.msgid); setVisible(!visible)}} className={msg.senderid === user.uid ?\"fal fa-ellipsis-v-alt rightdots\":'fal fa-ellipsis-v-alt leftdots'}></i>\r\n      <div onContextMenu={(e)=>e.preventDefault()} onClick={(e)=>e.stopPropagation()} className='flexrow optionsEdit' ref={contextoption} data-id={msg.msgid} style={{display: visible?'flex':'none'}}>\r\n      <div className=\"emojisdiv\">\r\n      <Contextoptions classNames={'laugn'} icon={'fad fa-laugh'} setState={setEmojis} re={emojiref}/>\r\n      <div  onClick={(e)=>e.stopPropagation()} className=\"emojisrow flexrow bs\" style={{display: emojis?'flex':'none',  zIndex: 'var(--high-priority)'}}>\r\n        {emojisrow}\r\n      </div>\r\n      </div>\r\n       <Contextoptions classNames={'copy'} icon={'fad fa-copy'} function1={()=>copyMsg()}/>\r\n       <Contextoptions classNames={'delete'} icon={'fad fa-trash'} function1={()=>deleteMsg()}/>\r\n      </div>\r\n    </>\r\n      )\r\n}\r\nexport default Threedots","import React, { useState, useEffect, useRef, useContext } from \"react\";\r\nimport { NavLink, Route, Link } from \"react-router-dom\";\r\nimport Users from \"./Users\";\r\nimport firebase from \"firebase\";\r\nimport { db } from \"../Fire\";\r\nimport Contextmenu from \"./Contextmenu\";\r\nimport { FilePond, File, registerPlugin } from \"react-filepond\";\r\nimport \"filepond/dist/filepond.min.css\";\r\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\r\nimport ElapsedTime from \"./Elapsedtime\";\r\nimport { ContextApp } from \"../ContextAPI\";\r\nimport Hoverableicondiv from \"./Hoverableiconsdiv\";\r\nimport InnerImageZoom from \"react-inner-image-zoom\";\r\nimport Iframe from \"./msgcomponents/Iframe\";\r\nimport Img from './msgcomponents/Img'\r\nimport Filemsg from './msgcomponents/File'\r\nimport P from './msgcomponents/P'\r\nimport Recording from \"./msgcomponents/Recording\";\r\nimport Gif from \"./Gifs.js/Gif\";\r\nimport ReactTimeAgo from 'react-time-ago'\r\nimport ReactImageMagnify from 'react-image-magnify';\r\nimport Contextoptions from \"./msgcomponents/Contextoptions\";\r\nimport Threedots from \"./msgcomponents/Threedots\";\r\nimport ScrollContainer from 'react-indiana-drag-scroll';\r\nimport { ReactTinyLink } from 'react-tiny-link'\r\nimport Picker from 'emoji-picker-react';\r\n\r\nfunction Dialogue(props) {\r\n  const {\r\n    themecolor,\r\n    notifi,\r\n    setNotifi,\r\n    notificont,\r\n    setNotificont\r\n  } = useContext(ContextApp);\r\n  const [gif, setGif]=useState(false)\r\n  const [msgs, setMsgs] = useState([]);\r\n  const [msgstring, setMsgstring] = useState(\"\");\r\n  const [updateelapsed, setUpdateelapsed] = useState(0);\r\n  const [typing, setTyping] = useState(false);\r\n  const [realtyping, setRealtyping] = useState(false);\r\n  const [typerid, setTyperid] = useState(\"\");\r\n  const [activestatus, setActivestatus] = useState(false);\r\n  const [recipname, setRecipname] = useState(\"\");\r\n  const [recipimg, setRecipimg] = useState(\"\");\r\n  const [recipcity, setRecipcity] = useState(\"\");\r\n  const [recipcountry, setRecipcountry] = useState(\"\");\r\n  const [userimg, setUserimg] = useState(\"\");\r\n  const [username, setUsername] = useState(\"\");\r\n  const [visible, setVisible] = useState(false);\r\n  const [contextmenu, setContextmenu] = useState(false);\r\n  const [contextstyle, setContextstyle] = useState({\r\n    top: 0,\r\n    left: 0\r\n  });\r\n  const [notifibool, setNotifibool]=useState(true)\r\n  const [emojitype, setEmojitype] = useState(\"\");\r\n  const [loader, setLoader] = useState(true);\r\n  const [loading, setLoading] = useState(true);\r\n  const [chatcolor, setChatcolor] = useState(\"\");\r\n  const [userChatcolor, setUserchatcolor] = useState(\"\");\r\n  const [showinput, setShowinput] = useState(false);\r\n  const [updatedMsg, setUpdatedMsg] = useState(\"\");\r\n  const [emojilist, setEmojilist] = useState(false);\r\n  const [theme, setTheme] = useState(\"\");\r\n  const [msgid, setMsgid] = useState(\"\");\r\n  const [chatname, setChatname] = useState(\"\");\r\n  const [chatimg, setChatimg] = useState(\"\");\r\n  const [chatcity, setChatcity] = useState(\"\");\r\n  const [chatcountry, setChatcountry] = useState(\"\");\r\n  const [chatactive, setChatactive] = useState(\"\");\r\n  const [nickname, setNickname] = useState([]);\r\n  const [emojipicker, setEmojipicker]=useState(false)\r\n  const emojis = []\r\n  const { chatuser, setState, icon, type } = props;\r\n  const { messages } = props.diag;\r\n  const { convoid, creatorid, recipientid } = props.diag.convoinfo;\r\n  const user = firebase.auth().currentUser;\r\n  const date = firebase.firestore.FieldValue.serverTimestamp()\r\n  const typerRef = useRef();\r\n  const id =db.collection('users').doc().id\r\n  const reg = /((?:(?!(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)).)+)|((?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)(?:\\?\\S+=\\S*(?:&\\S+=\\S*)*)?)/gm;\r\n  const imageRegexB = /(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)/g;\r\n  var urlreg = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/g;\r\n  var ureg = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/g;\r\n\r\n  function ytVidId(url) {\r\n    var p = /(?:https?:\\/\\/)?(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?/;\r\n    return url.match(p) ? RegExp.$1 : false;\r\n  }\r\n\r\n  \r\n  function determineMsgtype(msg) {\r\n    if (msg.base64) {\r\n      return <Img src={msg.message} link={true}/>\r\n     \r\n    }\r\n    else if (msg.file) {\r\n      return <Filemsg name={msg.name} link={msg.message}/>\r\n    } else if (msg.audio) {\r\n      return <Recording src={msg.message}/>\r\n      \r\n    } else if (msg.video){\r\n      return <Iframe type='video' link={msg.message}/>\r\n    }\r\n    else if (ytVidId(msg.message)) {\r\n      return <Iframe link={\"https://www.youtube.com/embed/\" + ytVidId(msg.message)} />\r\n\r\n    }\r\n    // else if(urlreg.test(msg.message)){\r\n    //   const stringWithOnlyURLS = msg.message.match(urlreg).join(' ');\r\n    //   const string = msg.message.replace(stringWithOnlyURLS, ' ')\r\n    //   return <>\r\n    //   <p className='bg'>{string}</p>\r\n    //     <div>\r\n    //     <ReactTinyLink\r\n    //   cardSize=\"small\" \r\n    //   showGraphic={true}\r\n    //   maxLine={2}\r\n    //   minLine={1}\r\n    //   url={stringWithOnlyURLS}\r\n    //   />\r\n    //     </div>\r\n    //   </>\r\n    // }  \r\n    else {\r\n      const sm = msg.message.replace(reg, (_, text, img)  => \r\n      text ?  `<p>${text.trim()}</p>`:`<img src=\"${img}\"/>`\r\n      ) \r\n      return  <div dangerouslySetInnerHTML={{__html:sm}} ></div>\r\n    }\r\n  }\r\n  function determineClass(msg) {\r\n    var urreg = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/g;\r\n    if(user.uid===msg.senderid){\r\n      if (msg.file) {\r\n        return \"msg file\";\r\n      }else if (msg.video) {\r\n        return 'msg video'\r\n      }\r\n       else if (msg.audio) {\r\n        return \"msg audio\";\r\n      } else if (msg.emoji) {\r\n        return \"msg emojimsg\";\r\n      } else if (msg.nobackground) {\r\n        return \"no-bg msg\";\r\n      } else if (ytVidId(msg.message)) {\r\n        return `msg youtube`;\r\n      }\r\n      //   else if(urreg.test(msg.message)){\r\n      //   return 'msg emojimsg imp'\r\n      // }\r\n      else {\r\n        return \"msg\";\r\n      }\r\n    }else {\r\n      if (msg.file) {\r\n        return \"msg file trans\";\r\n      }else if (msg.video) {\r\n        return 'msg video trans'\r\n      }\r\n       else if (msg.audio) {\r\n        return \"msg audio trans\";\r\n      } else if (msg.emoji) {\r\n        return \"msg emojimsg trans\";\r\n      } else if (msg.nobackground) {\r\n        return \"no-bg msg trans\";\r\n      } else if (ytVidId(msg.message)) {\r\n        return `msg youtube trans`;\r\n      }\r\n      //   else if(urreg.test(msg.message)){\r\n      //   return 'msg emojimsg imp'\r\n      // }\r\n      else {\r\n        return \"msg trans\";\r\n      }\r\n    }\r\n  }\r\n  const [opti, setOpti]=useState(false)\r\n  function msgOptions(msg){\r\n    const allel = document.querySelectorAll('.optionsEdit')\r\n    allel.forEach(el=>{\r\n      el.style.display='none'\r\n    })\r\n    const el = document.querySelector(`div[data-id=\"${msg.msgid}\"]`)\r\n    el.style.display='flex'\r\n  }\r\n  const [modal, setModal] = useState(false);\r\n  const imgsrc = useRef();\r\n  const [imgSrcModal, setImgSrcModal]=useState('')\r\n  function clickHandler(e) {\r\n    const audio = e.target.querySelector(\".controls\");\r\n    const video = e.target.closest(\"VIDEO\");\r\n\r\n    const play = e.target.querySelector(\".fa-play\");\r\n    const el = e.target.closest(\"IMG\");\r\n    if (el && e.currentTarget.contains(el)) {\r\n      setModal(true);\r\n      const imgsrc = document.querySelector(\".modal img\");\r\n      setImgSrcModal(el.getAttribute('src'))\r\n      imgsrc.setAttribute(\"src\", el.getAttribute(\"src\"));\r\n    }\r\n    if (video && e.currentTarget.contains(video)) {\r\n    }\r\n  }\r\n  const allmsgs =\r\n    messages &&\r\n    messages\r\n      .slice(0)\r\n      .reverse()\r\n      .map((msg) => {\r\n        return (\r\n          <div\r\n            id={msg.msgid}\r\n            className={msg.senderid === user.uid ? \"right m\" : \"left m\"}\r\n            onContextMenu={(e) => contextMenu(e)}\r\n          >\r\n            <div className=\"flex\">\r\n              <p\r\n                className={determineClass(msg)}\r\n                contentEditable={false}\r\n                style={\r\n                  msg.nobackground\r\n                    ? { backgroundColor: \"transparent\" }\r\n                    : msg.emoji\r\n                    ? { backgroundColor: \"transparent\" }\r\n                    : ytVidId(msg.message)\r\n                    ? { backgroundColor: \"transparent\" }\r\n                    : msg.senderid === user.uid\r\n                    ? { backgroundColor: chatcolor }\r\n                    : null\r\n                }\r\n                onClick={(e) => clickHandler(e)}\r\n     \r\n              >    { determineMsgtype(msg) }</p>\r\n\r\n             <Threedots msgs={msgs} user={user} msg={msg} convoid={convoid}/>\r\n\r\n                <small\r\n                className={\r\n                  msg.senderid === user.uid\r\n                    ? \"alignRight elapsedtime\"\r\n                    : \"alignLeft elapsedtime\"\r\n                }\r\n              ><ReactTimeAgo date={msg.msgdate.toDate()}/></small>\r\n              <div\r\n                className=\"reaction\"\r\n                style={{ display: (msg.reaction1||msg.reaction2) ? \"flex\" : \"none\", width: (msg.reaction1===''||msg.reaction2==='')?'22px':'42px' }}\r\n              >\r\n                <i className={ msg.reaction1 === \"fad fa-heart\"? \"emoj fas fa-\" + msg.reaction1: \"emoj fad fa-\" + msg.reaction1 }></i>\r\n                <i style={{marginLeft: msg.reaction2===''?'':'5px'}}className={ msg.reaction2 === \"fad fa-heart\"? \"emoj fas fa-\" + msg.reaction2: \"emoj fad fa-\" + msg.reaction2}></i>\r\n              </div>\r\n            </div>\r\n            <img src={msg.senderid === user.uid ? userimg : chatimg} alt=\"\" />\r\n          </div>\r\n        );\r\n      });\r\n  const progressbar = useRef();\r\n  const progresswidth = useRef();\r\n  const [img, setImg] = useState();\r\n  const inputref = useRef()\r\n  function sendFile(type) {\r\n    let file = document.querySelector(`.${type}file`).files[0];\r\n    if (file) {\r\n      var idxDot = file.name.lastIndexOf(\".\") + 1;\r\n      var extFile = file.name.substr(idxDot, file.name.length).toLowerCase();\r\n\r\n      const storageRef = firebase.storage().ref(`${convoid}/${file.name}`);\r\n      const task = storageRef.put(file);\r\n      task.on(\r\n        \"state_changes\",\r\n\r\n        function progress(snap) {\r\n          progressbar.current.style.display = \"flex\";\r\n          const percentage = (snap.bytesTransferred / snap.totalBytes) * 100;\r\n          progresswidth.current.style.height = `${percentage}%`;\r\n        },\r\n        function error(err) {},\r\n        function complete() {\r\n          if (type === \"image\") {\r\n            if (extFile === \"jpg\" || extFile === \"jpeg\" || extFile === \"png\") {\r\n              let msgobject = {\r\n                message: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n                reaction1: \"\",\r\n                reaction2: \"\",\r\n                msgdate: firebase.firestore.Timestamp.now(),\r\n                msgid: db.collection(\"conversations\").doc().id,\r\n                read: false,\r\n                senderid: user.uid,\r\n                editing: false,\r\n                nobackground: true,\r\n                emoji: true,\r\n                base64: true\r\n              };\r\n              let notificationobj = {\r\n                notifimsg: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n                notifidate: firebase.firestore.Timestamp.now(),\r\n                read: false,\r\n                sender: user.displayName,\r\n                base64: true,\r\n                id: convoid,\r\n                senderid: user.uid,\r\n                notifiid: db.collection('users').doc().id              }      \r\n                if(notifibool){\r\n                  db.collection('notifications').doc(chatuser).update({\r\n                    notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n                  })\r\n                }\r\n              db.collection(\"conversations\")\r\n                .doc(convoid)\r\n                .update({\r\n                  lastmsgdate: date,\r\n                  messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n                });\r\n            } else {\r\n              setNotifi(true);\r\n              setNotificont({\r\n                emoji: \"fal fa-exclamation-circle\",\r\n                msg: \"Only Images are allowed!\"\r\n              });\r\n              setTimeout(() => {\r\n                setNotifi(false);\r\n              }, 300500);\r\n            }\r\n          } else if (type === \"paperclip\") {\r\n            let msgobject = {\r\n              message: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n              reaction1: \"\",\r\n              reaction2: \"\",\r\n              msgdate: firebase.firestore.Timestamp.now(),\r\n              msgid: db.collection(\"conversations\").doc().id,\r\n              read: false,\r\n              senderid: user.uid,\r\n              editing: false,\r\n              nobackground: true,\r\n              emoji: true,\r\n              file: true,\r\n              name: file.name,\r\n              base64: false\r\n            };\r\n            let notificationobj = {\r\n              notifimsg: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n              notifidate: firebase.firestore.Timestamp.now(),\r\n              read: false,\r\n              sender: user.displayName,\r\n              file: true,\r\n              id: convoid,\r\n              senderid: user.uid,\r\n              notifiid: db.collection('users').doc().id            }      \r\n            if(notifibool){\r\n              db.collection('notifications').doc(chatuser).update({\r\n                notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n              })\r\n            }\r\n            db.collection(\"conversations\")\r\n              .doc(convoid)\r\n              .update({\r\n                lastmsgdate: date,\r\n                messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n              });\r\n          } else if (type === \"microphone\") {\r\n          }else if(type==='film') {\r\n              if(extFile==='mp4'||'gif'||'avi'){\r\n                let msgobject = {\r\n                  message: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n                  reaction1: \"\",\r\n                  reaction2: \"\",\r\n                  msgdate: firebase.firestore.Timestamp.now(),\r\n                  msgid: db.collection(\"conversations\").doc().id,\r\n                  read: false,\r\n                  senderid: user.uid,\r\n                  editing: false,\r\n                  nobackground: true,\r\n                  emoji: true,\r\n                  video: true\r\n                };\r\n                let notificationobj = {\r\n                  notifimsg: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n                  notifidate: firebase.firestore.Timestamp.now(),\r\n                  read: false,\r\n                  sender: user.displayName,\r\n                  video: true,\r\n                  id: convoid,\r\n                  senderid: user.uid,\r\n                  notifiid: db.collection('users').doc().id                }      \r\n                if(notifibool){\r\n                  db.collection('notifications').doc(chatuser).update({\r\n                    notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n                  })\r\n                }\r\n                db.collection(\"conversations\")\r\n                  .doc(convoid)\r\n                  .update({\r\n                    lastmsgdate: date,\r\n                    messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n                  });\r\n              }else {\r\n\r\n              }\r\n          }\r\n          progressbar.current.style.display = \"none\";\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  const icons = [\r\n    { icon: \"image\", type: \"file\" },\r\n    {icon: 'film', type:'file'},\r\n    { icon: \"paperclip\", type: \"file\" },\r\n    { icon: \"microphone\", type: \"microphone\" },\r\n\r\n  ];\r\n\r\n  let iconsrow = icons.map((icon) => {\r\n    return (\r\n      <Hoverableicondiv\r\n        progressbar={progressbar}\r\n        progresswidth={progresswidth}\r\n        classNames=\"\"\r\n        icon={icon.icon}\r\n        type={icon.type}\r\n        special={true}\r\n        sendFile={sendFile}\r\n        convoid={convoid}\r\n        inputref={inputref}\r\n        \r\n      />\r\n    );\r\n  });\r\n\r\n  function editMsg() {\r\n    msgs &&\r\n      msgs.map((msg) => {\r\n        if (msgid === msg.msgid) {\r\n          let itemindex = msgs.indexOf(msg);\r\n          msgs[itemindex].message = updatedMsg;\r\n          db.collection(\"conversations\").doc(convoid).update({\r\n            messages: msgs\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  function contextMenu(e) {\r\n    let customcontext = document.querySelector(\".contextmenu\");\r\n    const bounding = customcontext.getBoundingClientRect();\r\n    e.preventDefault();\r\n    setMsgid(e.currentTarget.getAttribute(\"id\"));\r\n    setContextmenu(true);\r\n    if (type === \"small\") {\r\n      customcontext.style.top = `${e.pageY - 201}px`;\r\n      customcontext.style.left = `${0}px`;\r\n    } else {\r\n    const bounding = customcontext.getBoundingClientRect()\r\n    customcontext.style.top = `${e.pageY -200}px`;\r\n    customcontext.style.left = `${e.pageX -150 }px`;\r\n    }\r\n\r\n    if (!updatedMsg === \"\") {\r\n      editMsg();\r\n    }\r\n  }\r\n  function sendEmoji(emoji) {\r\n    let msgobject = {\r\n      message: emoji,\r\n      reaction1: \"\",\r\n      reaction2: \"\",\r\n      msgdate: firebase.firestore.Timestamp.now(),\r\n      msgid: db.collection(\"conversations\").doc().id,\r\n      read: false,\r\n      senderid: user.uid,\r\n      editing: false,\r\n      nobackground: false,\r\n      emoji: true\r\n    };\r\n    db.collection(\"conversations\")\r\n      .doc(convoid)\r\n      .update({\r\n        lastmsgdate: date,\r\n        messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n      });\r\n      let notificationobj = {\r\n        notifimsg: emoji,\r\n        notifidate: firebase.firestore.Timestamp.now(),\r\n        read: false,\r\n        sender: user.displayName,\r\n        id: convoid,\r\n        senderid: user.uid,\r\n        notifiid: db.collection('users').doc().id\r\n      }      \r\n      if(notifibool){\r\n        db.collection('notifications').doc(chatuser).update({\r\n          notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n        })\r\n      }\r\n    setMsgstring(\"\");\r\n    typerRef.current.setAttribute(\"style\", \"height: 50px\");\r\n  }\r\n  const scrollto = useRef()\r\n  function  sendMessage() {\r\n    scrollto.current.scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n    const imageRegex = /(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)/g;\r\n    if (msgstring.match(imageRegexB) != null) {\r\n      let msgobject = {\r\n        message: msgstring,\r\n        reaction1: \"\",\r\n        reaction2: '',\r\n        msgdate: firebase.firestore.Timestamp.now(),\r\n        msgid: db.collection(\"conversations\").doc().id,\r\n        read: false,\r\n        senderid: user.uid,\r\n        editing: false,\r\n        nobackground: true,\r\n        emoji: false\r\n      };\r\n      db.collection(\"conversations\")\r\n        .doc(convoid)\r\n        .update({\r\n          lastmsgdate: date,\r\n          messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n        });\r\n        let notificationobj = {\r\n          notifimsg: msgstring,\r\n          notifidate: firebase.firestore.Timestamp.now(),\r\n          read: false,\r\n          sender: user.displayName,\r\n          id: convoid,\r\n          senderid: user.uid,\r\n          notifiid: db.collection('users').doc().id,\r\n\r\n        }      \r\n        if(notifibool){\r\n          db.collection('notifications').doc(chatuser).update({\r\n            notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n          })\r\n        }else {\r\n          return null\r\n        }\r\n      setMsgstring(\"\");\r\n      typerRef.current.setAttribute(\"style\", \"height: 50px\");\r\n    } else if (msgstring.replace(/\\s/g, \"\").length) {\r\n      let msgobject = {\r\n        message: msgstring,\r\n        reaction1: \"\",\r\n        reaction2: \"\",\r\n        msgdate: firebase.firestore.Timestamp.now(),\r\n        msgid: db.collection(\"conversations\").doc().id,\r\n        read: false,\r\n        senderid: user.uid,\r\n        editing: false,\r\n        nobackground: false,\r\n        emoji: false\r\n      };\r\n      let notificationobj = {\r\n        notifimsg: msgstring,\r\n        notifidate: firebase.firestore.Timestamp.now(),\r\n        read: false,\r\n        sender: user.displayName,\r\n        id: convoid,\r\n        senderid: user.uid,\r\n        notifiid: db.collection('users').doc().id\r\n      }      \r\n      if(notifibool){\r\n        db.collection('notifications').doc(chatuser).update({\r\n          notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n        })\r\n      }\r\n      db.collection(\"conversations\")\r\n        .doc(convoid)\r\n        .update({\r\n          lastmsgdate: firebase.firestore.Timestamp.now(),\r\n          messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n        });\r\n      setMsgstring(\"\");\r\n      typerRef.current.setAttribute(\"style\", \"height: 50px\");\r\n    }\r\n  }\r\n  function triggerSend(e) {\r\n    if (e.keyCode === 13 && !e.shiftKey) {\r\n      e.preventDefault();\r\n      sendMessage();\r\n    }\r\n  }\r\n  function formatTextarea() {\r\n\r\n    // setTyping(true)\r\n    // showTypingAnim()\r\n  }\r\n  const emojipickerref = useRef()\r\n  function inputFunc(){\r\n    typerRef.current.focus()\r\n    setEmojipicker(!emojipicker)\r\n  }\r\n  function showTypingAnim() {\r\n    setTyperid(user.uid);\r\n    let infoobj = {\r\n      convoid,\r\n      creatorid,\r\n      recipientid,\r\n      usertyping: typing,\r\n      userref: db.collection(\"users\").doc(recipientid),\r\n      typerid\r\n    };\r\n    db.collection(\"conversations\")\r\n      .doc(convoid)\r\n      .update({\r\n        // convoinfo: infoobj\r\n      })\r\n      .then(() => {\r\n        db.collection(\"conversations\")\r\n          .doc(convoid)\r\n          .onSnapshot((snap) => {\r\n            // setTyperid(snap.data().convoinfo.typerid)\r\n            // setRealtyping(snap.data().convoinfo.usertyping)\r\n          });\r\n      });\r\n  }\r\n  const [zoomamount, setZoomamount]=useState(1)\r\n  function zoom(el){\r\n   if(el.type==='in'){\r\n    setZoomamount(prev=>prev+ 0.1);\r\n   }else {\r\n    if(zoomamount>1){\r\n      setZoomamount(prev=>prev- 0.1);\r\n    }\r\n   }\r\n\r\n  }\r\n  const onEmojiClick = (event, emojiobject)=>{\r\n   setMsgstring(msgstring + emojiobject.emoji)\r\n  }\r\n  useEffect(() => {\r\n    let timer = setInterval(() => {\r\n      setUpdateelapsed((prev) => prev + 1);\r\n    }, 60000);\r\n    return () => {\r\n      clearInterval(timer);\r\n    };\r\n  }, []);\r\n  useEffect(() => {\r\n    let timer = setInterval(() => {\r\n      setTyping(false);\r\n    }, 4000);\r\n    // showTypingAnim()\r\n    return () => {\r\n      clearInterval(timer);\r\n    };\r\n  }, [typing]);\r\n\r\n  useEffect(() => {\r\n    db.collection(\"users\")\r\n      .doc(creatorid)\r\n      .onSnapshot((snap) => {\r\n        const user = snap.data();\r\n        setRecipname(user.userinfo.name);\r\n        setRecipimg(user.userinfo.cover);\r\n        setRecipcity(user.userinfo.city);\r\n        setRecipcountry(user.userinfo.country);\r\n      });\r\n    db.collection(\"users\")\r\n      .doc(recipientid)\r\n      .onSnapshot((snap) => {\r\n        const user = snap.data();\r\n        setUserimg(user.userinfo.cover);\r\n        setUsername(user.userinfo.name);\r\n      });\r\n    db.collection(\"users\")\r\n      .doc(chatuser)\r\n      .onSnapshot((snap) => {\r\n        const user = snap.data();\r\n        setChatname(user.userinfo.name);\r\n        setChatimg(user.userinfo.cover);\r\n        setChatcity(user.userinfo.city);\r\n        setChatcountry(user.userinfo.country);\r\n        setChatactive(user.online);\r\n        setActivestatus(user.userinfo.online);\r\n        setLoading(false);\r\n      });\r\n  }, [creatorid, recipientid, chatuser]);\r\n  useEffect(() => {\r\n    db.collection(\"users\")\r\n      .doc(user.uid)\r\n      .onSnapshot((snap) => {\r\n        const user = snap.data();\r\n        setChatcolor(user.customization.color);\r\n        setUserimg(user.userinfo.cover);\r\n      });\r\n  }, [chatcolor, chatuser]);\r\n  useEffect(() => {\r\n    db.collection(\"users\")\r\n      .doc(chatuser)\r\n      .onSnapshot((snap) => {\r\n        let user = snap.data();\r\n        setUserchatcolor(user.customization.chatcolor);\r\n      });\r\n  }, [chatuser]);\r\n  useEffect(() => {\r\n\r\n    db.collection(\"conversations\")\r\n    .doc(convoid)\r\n    .get().then((snap) => {\r\n      let use = snap.data();\r\n      setMsgs(use.messages);\r\n      setLoader(false);\r\n      setTheme(use.customizedconvo.theme);\r\n      setEmojitype(use.customizedconvo.emoji);\r\n      if(user.uid===props.diag.convoinfo.creatorid) {\r\n        setNotifibool(use.notifications2)\r\n        setNickname(use.nickname1)\r\n      }else {\r\n        setNotifibool(use.notifications1)\r\n        setNickname(use.nickname2)\r\n      }\r\n    }); \r\n\r\n  \r\n  }, [convoid]);\r\n\r\n  return (\r\n\r\n    <>  \r\n\r\n         <div className=\"top br-l\">\r\n        <div className=\"profilepic\">\r\n          <div className=\"relative\">\r\n            {loading ? (\r\n              <div className={\"loader blue reloader\"}>\r\n                <div class=\"lds-ring\">\r\n                  <div></div>\r\n                  <div></div>\r\n                  <div></div>\r\n                  <div></div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              [\r\n                <img src={chatimg} alt=\"\" />,\r\n                <div\r\n                  className=\"notifi\"\r\n                  style={{\r\n                    backgroundColor: chatactive ? \"rgb(44, 255, 44)\" : \"#FF3D3D\"\r\n                  }}\r\n                ></div>\r\n              ]\r\n            )}\r\n          </div>\r\n          <div>\r\n            {nickname===''?<p className='username'>{chatname.length>15?chatname.slice(0, 15)+'...':chatname}</p>:<p className='username'>{nickname}</p>}\r\n            <small>{chatactive ? \"Online\" : \"Offline\"}</small>\r\n          </div>\r\n        </div>\r\n        <div className=\"controls\">\r\n          <i class=\"fal fa-phone-alt\" style={{ color: themecolor }}></i>\r\n          <i class=\"fal fa-video\" style={{ color: themecolor }}></i>\r\n          {icon && icon === \"fal fa-times\" ? (\r\n            <i\r\n              className={icon}\r\n              style={{ padding: \"0 5px\", color: themecolor }}\r\n              onClick={() => setState(false)}\r\n            ></i>\r\n          ) : (\r\n            <Link exact to={\"/chatsettings/\" + convoid}>\r\n              <i\r\n                style={{ padding: \"0 5px\", color: themecolor }}\r\n                class=\"fal fa-ellipsis-v\"\r\n              ></i>\r\n            </Link>\r\n          )}\r\n        </div>\r\n      </div>\r\n \r\n      <Route\r\n        render={({ location }) => (\r\n          <div\r\n            className={!theme?\"msgs black\":theme==='https://i.imgur.com/4hzNTTq.png'?'msgs black':'msgs'}\r\n            style={\r\n              theme\r\n                ? { backgroundImage: \"url(\" + theme + \")\" }\r\n                : { backgroundImage: \"url(https://i.imgur.com/4hzNTTq.png)\" }\r\n            }\r\n          >\r\n            <div className=\"grid\">\r\n              <div className=\"scrollto\" ref={scrollto}></div>\r\n\r\n              {loader ? (\r\n                <div className={loader ? \"loader opa\" : \"loader\"}>\r\n                  <div class=\"lds-ring\">\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                allmsgs\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      />\r\n   <div className=\"search whiteb br-l\">\r\n    <div className=\"plus\">\r\n      <i\r\n        class={visible ? \"fal fa-minus\" : \"fal fa-plus\"}\r\n        style={{ color: themecolor }}\r\n        onClick={() => setVisible(!visible)}\r\n      ></i>\r\n      <CSSTransition\r\n        in={visible}\r\n        timeout={300}\r\n        classNames=\"iconshover\"\r\n        unmountOnExit\r\n      >\r\n        <div className={\"icons\"}>\r\n          {iconsrow}\r\n          <span className=\"uploader bs\" ref={progressbar}>\r\n            <span className=\"percent\" ref={progresswidth}></span>\r\n          </span>\r\n        </div>\r\n      </CSSTransition>\r\n    </div>\r\n    <div className=\"textarea flexrow\">\r\n    <textarea\r\n      type=\"text\"\r\n      placeholder=\"Send a message...\"\r\n      onKeyUp={(e) => triggerSend(e)}\r\n      ref={typerRef}\r\n      value={msgstring}\r\n      onChange={(e) => {\r\n        setMsgstring(e.target.value);\r\n\r\n      }}\r\n      onInput={()=>formatTextarea()}\r\n\r\n    ></textarea>\r\n    <div className=\"gif_emoji\">\r\n    <i className=\"fal fa-laugh\" onClick={()=>{inputFunc()}}></i>\r\n    <i class=\"fal fa-comment-alt-smile\" onClick={()=>setGif(!gif)}></i>\r\n    </div>\r\n\r\n   </div>\r\n      <div className=\"flexrow\">\r\n      <span\r\n      role=\"img\"\r\n      aria-label=\"emoji\"\r\n      onClick={() => sendEmoji(emojitype)}\r\n      style={{ cursor: \"pointer\" }}\r\n    >\r\n      {emojitype}\r\n    </span>\r\n    <i\r\n      class=\"fal fa-paper-plane\"\r\n      style={{ color: themecolor }}\r\n      onClick={() => {sendMessage();setEmojipicker(false)}}\r\n    ></i>\r\n      </div>\r\n  </div>\r\n \r\n      <Contextmenu\r\n        setShowinput={setShowinput}\r\n        editMsg={editMsg}\r\n        setUpdatedMsg={setUpdatedMsg}\r\n        convoid={convoid}\r\n        type={\"msg\"}\r\n        msgid={msgid}\r\n        setMsgid={setMsgid}\r\n        setContextmenu={setContextmenu}\r\n        contextmenu={contextmenu}\r\n        contextstyle={contextstyle}\r\n      />\r\n\r\n      <CSSTransition in={gif} unmountOnExit classNames='gif' timeout={300}>\r\n        <Gif chatimg={chatimg} setGif={setGif} convoid={convoid} notifibool={notifibool} chatuser={chatuser}/>\r\n      </CSSTransition>\r\n      <CSSTransition\r\n        in={notifi}\r\n        timeout={300}\r\n        classNames=\"displayerror\"\r\n        unmountOnExit\r\n      >\r\n        <div className=\"errormsg bs diagmsg\">\r\n          <i\r\n            className={notificont.emoji}\r\n            style={{ position: \"absolute\", left: \"20px\" }}\r\n          ></i>{\" \"}\r\n          <p>{notificont.msg}</p>\r\n          <i\r\n            className=\"far fa-times\"\r\n            style={{ color: themecolor }}\r\n            onClick={() => setNotifi(false)}\r\n          ></i>\r\n        </div>\r\n      </CSSTransition>\r\n      <CSSTransition in={modal} classNames=\"modal\" timeout={0}>\r\n        <div className=\"modal overflowimgcontainer\">\r\n         <div className=\"buttons\">\r\n         \r\n         <i className=\"fal fa-search-minus\" onClick={()=>zoom({type: 'out'})}></i>\r\n         <i class=\"fal fa-redo-alt\" onClick={()=>setZoomamount(1)}></i>\r\n         <i class=\"fal fa-search-plus\" onClick={()=>zoom({type: 'in'})}></i>\r\n         </div>\r\n          <ScrollContainer className='grabbercontainer' hideScrollbars={true}>\r\n          <img src=\"\" alt=\"\" ref={imgsrc}style={{width: 100*zoomamount+'%', height: 100*zoomamount+'%'}} />\r\n          </ScrollContainer>\r\n          <i className=\"fal fa-times\" onClick={() => {setModal(false); setZoomamount(1)}}></i>\r\n        </div>\r\n      </CSSTransition>\r\n      <CSSTransition in={emojipicker}  classNames='emojipicker' timeout={300} >\r\n       <div className=\"emojipicker\" ref={emojipickerref} onMouseOver={()=>typerRef.current.focus()} onClick={()=>typerRef.current.focus()}>\r\n        <div className=\"times\"> <i className=\"fal fa-times\" onClick={()=>setEmojipicker(false)}></i></div>\r\n       <Picker onEmojiClick={onEmojiClick}/>\r\n       </div>\r\n      </CSSTransition>\r\n    </>\r\n  );\r\n}\r\nexport default Dialogue;\r\n","\r\nimport React, {useState, useEffect, useContext} from 'react'\r\nimport firebase from 'firebase'\r\nimport { db } from '../Fire'\r\nimport { CSSTransition } from 'react-transition-group'\r\nimport { ContextApp } from '../ContextAPI'\r\nfunction Userprofile (props) {\r\n  const link = <a href='google.com'>asd</a>\r\n  const {themecolor}=useContext(ContextApp)\r\n  const user = firebase.auth().currentUser\r\n  const {chatuser}=props\r\n  const {convoid, creatorid, recipientid} = props.diag.convoinfo\r\n  const [recipname, setRecipname]=useState('')\r\n  const [recipimg, setRecipimg]=useState('')\r\n  const [recipcity, setRecipcity]=useState('')\r\n  const [recipcountry, setRecipcountry]=useState('')\r\n  const [recipjob, setRecipjob]=useState('')\r\n  const [recipnumber, setRecipnumber]=useState('')\r\n  const [recipemail, setRecipemail]=useState('')\r\n  const [recipwebsite, setRecipwebsite]=useState('')\r\n  const [extend, setExtend]=useState(false)\r\n  const [active, setActive]=useState(false)\r\n  const [loading, setLoading]=useState(true)\r\n\r\n  useEffect(()=>{\r\n    db.collection('users').doc(chatuser).onSnapshot(snap=>{\r\n        const user = snap.data()\r\n        setRecipname(user.userinfo.name)\r\n        setRecipimg(user.userinfo.cover)\r\n        setRecipcity(user.userinfo.city)\r\n        setRecipcountry(user.userinfo.country)\r\n        setRecipjob(user.userinfo.job)\r\n        setRecipnumber(user.userinfo.phone)\r\n        setRecipemail(user.userinfo.email)\r\n        setRecipwebsite(user.userinfo.website)\r\n        setActive(user.online)\r\n        setLoading(false)\r\n\r\n    })\r\n  },[recipientid, chatuser])\r\n  return (\r\n   <>\r\n    <div className=\"profilepic profilepiccol br-l\">\r\n        <div className='relative'>\r\n        {loading?<div className={'loader blue reloader'}><div class=\"lds-ring\"><div></div><div></div><div></div><div></div></div></div>:[<img src={recipimg} alt=\"\"/>, <div className=\"notifi\" style={{backgroundColor:active?'rgb(44, 255, 44)':'#FF3D3D'}}></div>]}\r\n          \r\n        </div>\r\n        <div>\r\n          <p>{recipname.length>17?recipname.slice(0, 17)+'...':recipname}</p>\r\n          <small>Job: {recipjob===''?'Not provided':recipjob}</small>\r\n        </div>\r\n        <i className=\"fal fa-cog\" style={{color: themecolor}}></i>\r\n    </div> \r\n    <div className=\"personalinfo br-l flex\">\r\n     <div className='flexrow'><p>Personal info</p>\r\n      <i className={extend?`fal fa-chevron-up rotate`:'fal fa-chevron-up'} onClick={()=>setExtend(!extend)}></i>\r\n      </div>\r\n      <CSSTransition in={extend} classNames='extended' timeout={0} unmountOnExit>\r\n        <div className='extendoff'>\r\n        <hr />\r\n         <div className='flex'>\r\n           <div className=\"flexrow flexinfo\"><p>Phone #</p> <p>{recipnumber===''?'N/A':recipnumber}</p></div>\r\n           <div className=\"flexrow flexinfo\"><p>Email</p><p>{recipemail}</p></div>\r\n           <div className=\"flexrow flexinfo\"><p>Country</p><p>{recipcountry===''?'N/A':recipcountry}</p></div>\r\n           <div className=\"flexrow flexinfo\"><p>City</p><p>{recipcity===''?'N/A':recipcity}</p></div>\r\n         </div>\r\n        </div>\r\n      </CSSTransition>\r\n    </div>\r\n    <div className=\"mutualcontacts br-l pdng flexrow\">\r\n    <i class=\"fal fa-users\"></i>\r\n      <p>Mutual Contacts</p>\r\n      <i class=\"fal fa-ellipsis-h-alt\"></i>\r\n      </div>\r\n      <div className=\"br-l pdng flexrow\">\r\n        {recipwebsite.toLocaleLowerCase()==='https://'?<i class=\"fal fa-external-link\"></i>:\r\n          <a href={recipwebsite}><i class=\"fal fa-external-link\"></i></a>}\r\n          <p>View Site</p>\r\n         \r\n      </div>\r\n    </>\r\n  )\r\n}\r\nexport default Userprofile","import React, {useState, useEffect, useContext} from 'react'\r\nimport {ContextApp} from '../ContextAPI'\r\nimport Hoverablebutton from './Hoverablebutton'\r\nfunction Adduser (props) {\r\n  const {themecolor}= useContext(ContextApp)\r\nlet {allusers, setRecipientname,setRecipientid, recipientid, setMessage, sendMessage, msgpersonids, adduser,setAdduser, message} = props\r\nconst [keyword, setKeyword]=useState('')\r\n\r\nfunction determineDisplay(user){\r\n  if(msgpersonids && msgpersonids.includes(user.uid)){\r\n    return <i className=\"fal fa-exclamation-circle\"></i>\r\n  }\r\nelse if(recipientid===user.uid){\r\n  return <i className=\"fal fa-check slct\" ></i>\r\n}else {\r\n  return <span className='slct' style={{color: themecolor, border: 'solid 1px'+themecolor}} onMouseOver={(e)=>e.target.style.cssText=`background-color:${themecolor}; border: solid 1px transparent`} onMouseLeave={(e)=>e.target.style.cssText=`background-color: transparent; border: solid 1px ${themecolor}; color: ${themecolor}`}>Select</span>\r\n}\r\n\r\n}\r\nconst pattern = new RegExp('\\\\b' + keyword.replace(/[\\W_]+/g,\"\"), 'i')\r\nconst allusersrow = allusers && allusers.map(user=>{\r\n  if(pattern.test(user.userinfo.name.toLowerCase())) {\r\n    return  <div className={msgpersonids && msgpersonids.includes(user.uid)?\"profilepic selected\":'profilepic'}>\r\n      <div>\r\n      <img src={user.userinfo.cover?user.userinfo.cover:\"https://www.gettyimages.ca/gi-resources/images/500px/983794168.jpg\"} alt=\"\"/>\r\n       <p>{user.userinfo.name}</p>\r\n      </div>\r\n      <small onClick={msgpersonids && msgpersonids.includes(user.uid)?() => {setAdduser(!adduser);}:() => {setRecipientid(user.uid); setRecipientname(user.userinfo.name)}} className={recipientid===user.uid?\"usersrowselected\":\"\"}>\r\n        {determineDisplay(user)}\r\n      </small>\r\n</div>\r\n  }\r\n  })\r\n  function actions (){\r\n    setMessage('')\r\n    setAdduser(!adduser)\r\n  }\r\n  return (\r\n    <>\r\n    <div className=\"adduser\"onClick={()=>props.setAdduser()}>\r\n      \r\n    </div>\r\n    <div className=\"userlist bs\" >\r\n          <div className=\"hd\">\r\n          <h2>Add Contact</h2>\r\n          <div className=\"search\">\r\n            <input type=\"text\" placeholder='Search' onChange={(e)=>setKeyword(e.target.value)}/>\r\n          </div>\r\n          </div>\r\n          <div className=\"overflow flex\">\r\n       {allusersrow}\r\n          </div>\r\n          <div className=\"search\">\r\n          <input type=\"text\" placeholder='Send a message...' onChange={(e)=>setMessage(e.target.value)} value={message}/>\r\n          <button className=\"themeBtn\"  onClick={()=>{recipientid?sendMessage():actions()}}  style={{color: 'white', border: `solid 3px transparent`, backgroundColor: themecolor}} onMouseOver={(e)=>e.target.style.cssText=`background-color: transparent; border: solid 3px ${themecolor}; color: ${themecolor}`} onMouseLeave={(e)=>e.target.style.cssText=`background-color: ${themecolor}; border: solid 3px transparent; color: white`}>Send Message</button>\r\n          </div>\r\n          <i className=\"fal fa-times\" onClick={()=>props.setAdduser()} style={{color: themecolor}}></i>\r\n      </div>\r\n    \r\n    </>\r\n  )\r\n}\r\nexport default Adduser","import React, {useState, useEffect, useContext} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport {db} from '../Fire'\r\nimport firebase from 'firebase'\r\nimport {ContextApp} from '../ContextAPI'\r\nimport styled from 'styled-components'  \r\n\r\nconst Input = styled.input ` \r\n      &:valid {\r\n         border: solid 2px ${props=>props.color}\r\n      }\r\n      &:focus {\r\n         border: solid 2px ${props=>props.color}\r\n      }\r\n`\r\nfunction Inputs (props) {\r\n   const {themecolor}=useContext(ContextApp)\r\n    const {disabled, determineDelete, updateProfile,age, setAge, name, setName, city, setCity, phonenumber, setPhonenumber, website, setWebsite, country, setCountry}=props\r\n    const user = firebase.auth().currentUser\r\n   function deleteUser(){\r\n      db.collection('users').doc(user.uid).delete()\r\n      db.collection('notifications').doc(user.uid).delete()\r\n      user.delete().then(()=>{\r\n\r\n      }).catch(err=>{\r\n\r\n      })\r\n   }\r\n return (\r\n<div className=\"inputs inps\">\r\n  <label>\r\n    <span>Name</span>\r\n    <Input type='text' value={name} onChange={(e)=>setName(e.target.value)} required placeholder='Name' color={themecolor}/>\r\n  </label>\r\n  <label>\r\n      <span>Age</span>\r\n     <Input color={themecolor} type=\"number\" value={age}onChange={(e)=>setAge(e.target.value)} min='1' required placeholder='Age'/>\r\n  </label>\r\n  <label>\r\n      <span>Phone Number</span>\r\n      <Input  color={themecolor} type=\"number\" value={phonenumber} onChange={(e)=>setPhonenumber(e.target.value)} required placeholder='Phone Number' />\r\n  </label>\r\n  <label>\r\n      <span>City</span>\r\n     <Input  color={themecolor} type=\"text\" value={city} onChange={(e)=>setCity(e.target.value)} required placeholder='City'/>\r\n  </label>\r\n  <label>\r\n     <span>Country</span>\r\n     <Input  color={themecolor} type=\"text\" value={country} onChange={(e)=>setCountry(e.target.value)} required placeholder='Country' />\r\n  </label>\r\n  <label>\r\n     <span>Website URL</span>\r\n     <Input  color={themecolor} type=\"text\" value={website}  onChange={(e)=>setWebsite(e.target.value)} required placeholder='https://example.com'/>\r\n  </label>\r\n    <label className='btnContainer'>\r\n    <button className=\"themeBtn\" onClick={()=>updateProfile()}style={{color: 'white', border: `solid 3px transparent`, backgroundColor: themecolor}} onMouseOver={(e)=>e.target.style.cssText=`background-color: transparent; border: solid 3px ${themecolor}; color: ${themecolor}`} onMouseLeave={(e)=>e.target.style.cssText=`background-color: ${themecolor}; border: solid 3px transparent; color: white`}>Save</button>\r\n    </label>\r\n    <label>\r\n       <span><strong>Delete Account</strong></span>\r\n       <Input color={themecolor} required onChange={e=>determineDelete(e)} placeholder={'Type in '+user.displayName+' to delete account.'}/>\r\n      <small >Key: {user.displayName}</small>\r\n      <button disabled={disabled} className='themeBtn warning' onClick={()=>deleteUser()}>Delete Account</button>\r\n    </label>\r\n</div>\r\n  )\r\n}\r\nexport default Inputs","import React, {useState, useEffect, useContext} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport Inputs from '../Inputs'\r\nimport firebase from 'firebase'\r\nimport {db} from '../../Fire'\r\nimport {CSSTransition, TransitionGroup} from 'react-transition-group'\r\nimport { ContextApp } from '../../ContextAPI'\r\n\r\nfunction Account (props) {\r\n  const user = firebase.auth().currentUser\r\n  const [deleteuser, setDeleteuser]=useState('')\r\n  const [name, setName]=useState('')\r\n  const [age, setAge]=useState('')\r\n  const [phonenumber, setPhonenumber]=useState('')\r\n  const [city, setCity]=useState('')\r\n  const [country, setCountry]=useState('')\r\n  const [website, setWebsite]=useState('')\r\n  const [uploaded, setUploaded]=useState(false)\r\n  const [cover, setCover]=useState('')\r\n  const [email, setEmail]=useState('')\r\n  const [job, setJob]=useState('')\r\n  const [deleteaccountstring, setDeleteaccountstring]=useState('')\r\n  const {notifi, setNotifi, notificont, setNotificont}=useContext(ContextApp)\r\n\r\n  const [loading, setLoading]=useState(true)\r\n  function uploadImg(){\r\n   \r\n    let file = document.querySelector('.uploadpic').files[0]\r\n    const storageRef = firebase.storage().ref(`${user.uid}/${file.name}`);\r\n    const task = storageRef.put(file);\r\n    task.on('state_changes',\r\n      function progress(){\r\n        setLoading(true)\r\n      },\r\n      function error(){\r\n      \r\n      },\r\n      function complete(){\r\n      setLoading(false)\r\n        setCover(`https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${user.uid}%2F${file.name}?alt=media`,)\r\n         setUploaded(!uploaded)\r\n      }\r\n    )\r\n  \r\n  }  // if(file.size <=2097152){ \r\n    //   setUploaded(!uploaded)\r\n    //   let reader = new FileReader()\r\n    //   reader.onloadend = function (){\r\n    //     setCover(reader.result)\r\n    //   }\r\n    //   if(file){\r\n    //     reader.readAsDataURL(file)\r\n    //   }\r\n    // }else {\r\n    //   setNotifi(true)\r\n    //   setNotificont({\r\n    //     msg: 'Image is too large',\r\n    //     emoji: 'fal fa-exclamation-circle'\r\n    //   })\r\n\r\n    //   setTimeout(()=>{\r\n    //     setNotifi(false)\r\n    //   },3500)\r\n    // }\r\n  function saveImg(){\r\n    setUploaded(!uploaded)\r\n    updateProfile()\r\n  }\r\n  function removeImg(){\r\n    setUploaded(false)  \r\n    updateProfile()\r\n    user.updateProfile({\r\n      displayName: name,\r\n    })\r\n    const userobj = {\r\n      job,\r\n      age,\r\n      city,\r\n      country,\r\n      phone: phonenumber,\r\n      website, \r\n      name, \r\n      email,\r\n      cover: 'https://www.gettyimages.ca/gi-resources/images/500px/983794168.jpg'\r\n    }\r\n    db.collection('users').doc(user.uid).update({\r\n        userinfo: userobj\r\n    })    \r\n\r\n  }\r\n  function updateProfile(){\r\n    const userobj = {\r\n      age,\r\n      city,\r\n      country,\r\n      phone: phonenumber,\r\n      website, \r\n      cover, \r\n      name, \r\n      email,\r\n      job,\r\n    }\r\n    db.collection('users').doc(user.uid).update({\r\n        userinfo: userobj\r\n    }).then(()=>{ \r\n        setNotifi(true)\r\n        setNotificont({\r\n          msg: 'Profile was updated!',\r\n          emoji: 'fal fa-check-circle'\r\n        })\r\n    }).catch(err=>{\r\n      setNotifi(true)\r\n      setNotificont({\r\n        msg: 'Image is too large',\r\n        emoji: 'fal fa-exclamation-circle'\r\n      })\r\n    })\r\n    setTimeout(()=>{\r\n      setNotifi(false)\r\n    },3500)\r\n  \r\n  }\r\n  const [disabled, setDisabled]=useState(true)\r\n  function determineDelete(e){\r\n    if(e.target.value===user.displayName){\r\n      setDisabled(false)\r\n    }else {\r\n      setDisabled(true)\r\n    }\r\n  }\r\n  useEffect(()=>{\r\n    db.collection('users').doc(user.uid).onSnapshot(snap=>{\r\n      const user = snap.data()\r\n      setName(user.userinfo.name)\r\n      setAge(user.userinfo.age)\r\n      setPhonenumber(user.userinfo.phone)\r\n      setCity(user.userinfo.city)\r\n      setCountry(user.userinfo.country)\r\n      setWebsite(user.userinfo.website)\r\n      setCover(user.userinfo.cover)\r\n      setEmail(user.userinfo.email)\r\n      setJob(user.userinfo.job)\r\n      setLoading(false)\r\n    })\r\n  },[])\r\n\r\n  return (\r\n   <div className='account'>\r\n      <div className=\"head\">\r\n        <h2>Account</h2>\r\n      </div>\r\n      <div className=\"profilepic\">\r\n          {loading?<div className={\"loader blue reloader width\"}>\r\n                <div class=\"lds-ring\">\r\n                  <div></div>\r\n                  <div></div>\r\n                  <div></div>\r\n                  <div></div>\r\n                </div>\r\n              </div>:  <img src={cover} alt=\"\"/>}\r\n          <div className=\"btnprof flexrow\">\r\n          {!uploaded?\r\n            <label>\r\n            <div className=\"settingBtn\" onClick={()=>setNotifi(false)}>Upload</div>\r\n            <input className='uploadpic' onChange={()=>uploadImg()} type=\"file\" style={{display: 'none'}}/>\r\n          </label>:\r\n            <button className='settingBtn' onClick={()=>saveImg()}>Save</button>\r\n        }\r\n            <button className='settingBtn warning' onClick={()=>removeImg()}>Remove</button>\r\n          </div>\r\n      </div>\r\n      <hr/>\r\n        <Inputs \r\n        name={name}\r\n        setName={setName}\r\n        age={age}\r\n        setAge={setAge}\r\n        phonenumber={phonenumber}\r\n        setPhonenumber={setPhonenumber}\r\n        city={city}\r\n        setCity={setCity}\r\n        country={country}\r\n        setCountry={setCountry}\r\n        website={website}\r\n        setWebsite={setWebsite}\r\n        updateProfile={updateProfile}\r\n        determineDelete={determineDelete}\r\n        disabled={disabled}\r\n       />\r\n\r\n        {/* <div className=\"flexrow inps\">\r\n        <label>\r\n          <span style={{marginBottom: '10px'}}>Delete Account</span>\r\n          <small>If you delete your account, all your data will be lost.</small>\r\n         <input style={{width: '80%'}} placeholder={'Type in '+user.displayName} type=\"text\" required onChange={(e)=>{setDeleteuser(e.target.value);}}/>\r\n        </label>\r\n        <label>\r\n        <button  className={deleteuser===user.displayName?'themeBtn warning':'themeBtn warning disabled'} disabled={deleteUser===user.displayName?'false':'true'} style={{marginTop: '10px', width: '80%'}}  onClick={()=>deleteUser()}>Delete Account</button>\r\n        </label>\r\n        </div> */}\r\n  </div>\r\n  )\r\n}\r\nexport default Account","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction Switches (props) {\r\n  const {checked, setChecked, function1} =props\r\n  return (\r\n   <div className='switchdiv'>\r\n  <div className=\"flexrow switchdiv\">\r\n  <p>{props.title}</p>\r\n  <label className='form-switch'>\r\n  <input type=\"checkbox\" checked={checked} onChange={(e)=>{setChecked && setChecked(e.target.checked); function1 && function1()}}/>\r\n  <i></i>\r\n  </label>\r\n  </div>\r\n  </div>\r\n  )\r\n}\r\nexport default Switches","import React, {useState, useEffect, useContext} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport {ContextApp} from '../ContextAPI'\r\nimport {createGlobalStyle, createglobalStyle} from 'styled-components'\r\n\r\nfunction Input (props) {\r\n  const {themecolor}=useContext(ContextApp)\r\n  const {type, title, value, setValue, placeholder, changeCSSVar} = props\r\n\r\n  return (\r\n   <div className='input flexrow sb'>\r\n     <p>{title}</p>\r\n     {type==='text'?<input required onBlur={(e)=>e.target.style.border='solid 2px #eee'} onFocus={(e)=>e.target.style.border=`solid 2px ${value}`} placeholder={placeholder} type={type} value={value} onChange={(e)=>{setValue(e.target.value)}}/>:\r\n         <input required onBlur={(e)=>e.target.style.border='solid 2px #eee'} onFocus={(e)=>e.target.style.border=`solid 2px ${value}`} placeholder={placeholder} type={type} value={value} onChange={(e)=>{setValue(e.target.value); changeCSSVar(e)}}/>\r\n    }\r\n    </div>\r\n  )\r\n}\r\nexport default Input","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport firebase from 'firebase'\r\n\r\n\r\n\r\nfunction Button (props) {\r\n  const {emoji,state1, setState1, setState2,style, function1, type, title, addstyle, state3, setState3, stylebtn}=props\r\n  function styleFunc(){\r\n    if(addstyle){\r\n      if(state1){\r\n        return {backgroundColor: 'transparent', border: 'solid 3px'+style, color: style}\r\n      }else {\r\n        return {backgroundColor: style, border: 'solid 3px transparent'}\r\n      }\r\n    }\r\n  }\r\n  return (\r\n      <div className='flexrow sb'>\r\n      {type==='button'?<div></div>:<p>{title}</p>}\r\n      {type==='button'?<button className='btn'   onClick={()=>{function1()}} >Save</button>:<i class={emoji} onClick={()=>{props.setState1(!state1); setState2 && setState2(true)}} onMouseOver={()=>setState3 && setState3(true)} onMouseLeave={()=>setState3 && setState3(false)}></i>}\r\n      {(emoji!=='fad fa-adjust'&&type!=='button')?<span role='img' aria-label='emoji' onClick={()=>{props.setState1(!state1); setState2 && setState2(true)}}>{emoji}</span>:''}\r\n      </div>\r\n  )\r\n}\r\nexport default Button\r\n","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport Switches from '../Switches'\r\nimport Input from '../Input'\r\nimport firebase from 'firebase'\r\nimport { db } from '../../Fire'\r\nimport Button from '../Button'\r\n\r\nfunction Personalization (props) {\r\n  const user = firebase.auth().currentUser\r\n  const {function1, input1, input2, input3,input4, setInput4, setInput1, setInput2, setInput3} = props\r\n  const [hovered, setHovered]=useState(false)\r\n\r\n  function changeCSSVar(e){\r\n    document.documentElement.style.setProperty(\r\n      '--theme-color', e.target.value\r\n    )\r\n}\r\nfunction changeCSSVarChat(e){\r\n  document.documentElement.style.setProperty(\r\n    '--chat-color', e.target.value\r\n  )\r\n}\r\n  return (\r\n   <div className='customize'>\r\n <div><h2>Customize</h2></div>\r\n    <small>Customize your chat settings.</small>\r\n    <hr/>\r\n      <div className=\"spacer1\"></div>\r\n    <div className=\"flex\">\r\n      <Switches title={'Dark Mode'} checked={input1} setChecked={setInput1}/>\r\n      <Switches title={'Wide Sidebar'} checked={input2} setChecked={setInput2}/>\r\n      <Input type={'color'} title={'Chat Color'} value={input3} setValue={setInput3} changeCSSVar={changeCSSVarChat}/>\r\n      <Input type={'color'} title={'Theme Color'} value={input4} setValue={setInput4} changeCSSVar={changeCSSVar}/>\r\n      <Button type={'button'} state1={hovered} setState1={setHovered} style={input4}  function1={function1} addstyle={true} />\r\n    </div>\r\n  </div>\r\n  )\r\n}\r\nexport default Personalization","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction Infocontainer (props) {\r\n  const {variable, title}=props\r\n  return (\r\n   <>\r\n      <div className=\"flexrow sb\" style={{margin: '10px 0'}}>\r\n      <p>{title}:</p>\r\n      <p className='light'>{variable?variable:'N/A'}</p>\r\n    </div>\r\n  </>\r\n  )\r\n}\r\nexport default Infocontainer","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport { db } from '../../Fire'\r\nimport Infocontainer from './Infocontainer'\r\n\r\nfunction Aboutchatuser (props) {\r\n  let {chatuser}=props\r\n  const [name, setName]=useState('')\r\n  const [age, setAge]=useState('')\r\n  const [city, setCity]=useState('')\r\n  const [country, setCountry]=useState('')\r\n  const [cover, setCover]=useState('')\r\n  const [email, setEmail]=useState('')\r\n  const [job, setJob]=useState('')\r\n  const [phone, setPhone]=useState('')\r\n  const [website, setWebsite]=useState('')\r\n  useEffect(()=>{\r\n    db.collection('users').doc(chatuser).onSnapshot(snap=>{\r\n      let data = snap.data()\r\n      setName(data.userinfo.name)\r\n      setAge(data.userinfo.age)\r\n      setCity(data.userinfo.city)\r\n      setCountry(data.userinfo.country)\r\n      setCover(data.userinfo.cover)\r\n      setEmail(data.userinfo.email)\r\n      setJob(data.userinfo.job)\r\n      setPhone(data.userinfo.phone)\r\n      setWebsite(data.userinfo.website)\r\n    })\r\n\r\n  },[])\r\n  return (\r\n   <>\r\n    <div className=\"flexrow sb\">\r\n    <h2 className='capitalize'>About {name}</h2>\r\n    <div className=\"profilepic\">\r\n      <img src={cover} alt=\"profilepicture\"/>\r\n    </div>\r\n    </div>\r\n    <hr/>\r\n    <h3 style={{marginBottom: '10px'}}>Personal Info</h3>\r\n\r\n    <Infocontainer variable={age} title={'Age'}/>\r\n    <Infocontainer variable={job} title={'Job'}/>\r\n    <Infocontainer variable={phone} title={'Phone'}/>\r\n    <Infocontainer variable={country} title={'Country'}/>\r\n    <Infocontainer variable={city} title={'City'}/>\r\n    <h3 style={{margin: '10px 0'}}>Other Info</h3>\r\n    <Infocontainer variable={email} title={'Email'}/>\r\n    <div className=\"flexrow sb\" style={{margin: '10px 0'}}>\r\n      <p>Website:</p>\r\n      <p className='light'>{website==='https://'?'N/A':<a href={website} rel='noreferrer' target=\"_blank\"> <i class=\"fal fa-external-link-alt\"></i></a>}</p>\r\n    </div>\r\n\r\n  </>\r\n  )\r\n}\r\nexport default Aboutchatuser","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction Preferences () {\r\n\r\n  return (\r\n   <>\r\n   asd\r\n  </>\r\n  )\r\n}\r\nexport default Preferences","import React, {useState, useEffect, useContext} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport Switches from '../Switches'\r\nimport Input from '../Input'\r\nimport firebase from 'firebase'\r\nimport { db } from '../../Fire'\r\nimport Button from '../Button'\r\nimport {ContextApp} from '../../ContextAPI'\r\nfunction Themes (props) {\r\n  const  {themecolor,notifi, setNotifi, notificont, setNotificont}=useContext(ContextApp)\r\n  const user = firebase.auth().currentUser\r\n  const {themeimg,setThemeimg,themebool,setEmojibool,setThemebool} = props\r\n  const [hovered, setHovered]=useState(false)\r\n  const [nickname, setNickname]=useState('')\r\n  const [emoji, setEmoji]=useState('')\r\n  const {creatorid,convoid, setEmojitype, emojitype, miniview, setMiniview}=props\r\n  function updateProfile(){\r\n    setNotifi(true)\r\n    setNotificont({\r\n      msg: 'Profile was updated!',\r\n      emoji: 'fal fa-check-circle'\r\n    })\r\n\r\n    if(user.uid===creatorid){\r\n      db.collection('conversations').doc(convoid).update({\r\n        nickname1: nickname,\r\n      })\r\n    }\r\n    else {\r\n      db.collection('conversations').doc(convoid).update({\r\n        nickname2: nickname,\r\n      })\r\n    }\r\n    setTimeout(()=>{\r\n      setNotifi(false)\r\n    },3500)\r\n  }\r\n  useEffect(()=>{\r\n    db.collection('conversations').doc(convoid).onSnapshot(snap=>{\r\n        const convo =  snap.data()\r\n        setThemeimg(convo.customizedconvo.theme) \r\n        setEmojitype(convo.customizedconvo.emoji)\r\n        if(user.uid===creatorid) {\r\n          setNickname(convo.nickname1)\r\n        }\r\n        else {\r\n          setNickname(convo.nickname2)\r\n        }\r\n      })\r\n  },[convoid])\r\n  return (\r\n   <div className='customize'>\r\n <div><h2>Themes</h2></div>\r\n    <small>Customize your conversation settings.</small>\r\n    <hr/>\r\n      <div className=\"spacer1\"></div>\r\n    <div className=\"flex\">\r\n       <Button type='emoji' emoji='fad fa-adjust' title={'Theme'} setState1={setThemebool} state1={themebool} state3={miniview} setState3={setMiniview}/>\r\n       <Button type={'emoji'} emoji={emojitype} title={'Emoji'} state1={emoji} setState1={setEmoji} setState2={setEmojibool}/>\r\n       <Input  placeholder={'Nickname'} type={'text'}  title={'Nickname'} value={nickname} setValue={setNickname} />\r\n        <div className='flexrow sb'><span></span><button className='btn' style={{color: 'white', border: `solid 3px transparent`, backgroundColor: themecolor}} onMouseOver={(e)=>e.target.style.cssText=`background-color: transparent; border: solid 3px ${themecolor}; color: ${themecolor}`} onMouseLeave={(e)=>e.target.style.cssText=`background-color: ${themecolor}; border: solid 3px transparent; color: white`} onClick={()=>updateProfile()}>Save</button></div>\r\n    </div>\r\n  </div>\r\n  )\r\n}\r\nexport default Themes","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport Input from '../Input'\r\nimport Switches from '../Switches'\r\nimport {db} from '../../Fire'\r\nimport firebase from 'firebase'\r\nfunction Actions (props) {\r\n  const user = firebase.auth().currentUser\r\n  const {notifibool, setNotifibool, convoid, creatorid}=props\r\n  function changeNotifi(){\r\n   \r\n      if(user.uid===creatorid){\r\n        db.collection('conversations').doc(convoid).update({\r\n          notifications1: !notifibool\r\n        })\r\n     }else {\r\n       db.collection('conversations').doc(convoid).update({\r\n         notifications2: !notifibool\r\n       })\r\n\r\n     }\r\n    \r\n}\r\n  return (\r\n   <>\r\n    <h2 o>Chat Configurations</h2>\r\n    <hr/>\r\n   <Switches title='Notifications' checked={notifibool}  function1={changeNotifi}/>\r\n  </>\r\n  )\r\n}\r\nexport default Actions","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction Support () {\r\n\r\n  return (\r\n   <>\r\n   \r\n  </>\r\n  )\r\n}\r\nexport default Support","import React, {useState, useEffect, useContext} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport firebase from 'firebase'\r\nimport {db} from '../Fire'\r\nimport Account from './settings/Account'\r\nimport Personalization from './settings/Personalization'\r\nimport Aboutchatuser from './settings/Aboutchatuser'\r\nimport Preferences from './settings/Preferences'\r\nimport { CSSTransition } from 'react-transition-group'\r\nimport Themes from './settings/Themes'\r\nimport {ContextApp} from '../ContextAPI'\r\nimport {useHistory} from 'react-router-dom'\r\nimport Contextmenu from './Contextmenu'\r\nimport Hoverablebutton from './Hoverablebutton'\r\nimport Actions from './settings/Actions'\r\nimport Support from './settings/Support'\r\n\r\nfunction Usersettings (props) {\r\n  const id =db.collection('users').doc().id\r\n  const [keyword, setKeyword]=useState('')\r\n  const pattern = new RegExp('\\\\b' + keyword.replace(/[\\W_]+/g,\"\"), 'i')\r\n  const history = useHistory()\r\n  const {settings, type, link, linklabel, BrowserHistory}=props\r\n  const [themebool, setThemebool]=useState(false)\r\n  const [emojibool, setEmojibool]=useState(false)\r\n  const [miniview, setMiniview]=useState(false)\r\n  const {darkmode, notifi, setNotifi, notificont, setNotificont}=useContext(ContextApp)\r\n  const user = firebase.auth().currentUser\r\n\r\n  const [themecolor, setThemecolor]=useState('')\r\n  const [themeimg, setThemeimg]=useState('')\r\n  const [emojitype, setEmojitype]=useState('')\r\n  const [darkmode1, setDarkmode]=useState(false)\r\n  const [notifibool, setNotifibool]=useState(true)\r\n  const [widemode, setWidemode]=useState(false)\r\n  const [chatcolor, setChatcolor]=useState('')\r\n  const [contextmenu, setContextmenu]=useState(false)\r\n  const [contextstyle, setContextstyle]=useState({\r\n    top: 0,\r\n    left: 0,\r\n  })\r\n  const themes = [\r\n    {img:'https://wallpaperaccess.com/full/1288078.jpg', type: 'background'},\r\n    {img:'https://www.setaswall.com/wp-content/uploads/2019/08/Whatsapp-Wallpaper-072.jpg',type: 'background'},\r\n    {img:'http://images.unsplash.com/photo-1518531933037-91b2f5f229cc?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max', type: 'background'},\r\n    {img:'https://i.imgur.com/05HfuHW.jpg',type: 'background'},\r\n    {img:'https://i.imgur.com/Frdc6vv.jpg',type: 'background'},\r\n    {img:'https://i.imgur.com/3St6WoQ.jpg',type: 'background'},\r\n    {img: 'https://i.imgur.com/R4TMmVd.jpg', type: 'background'},\r\n    {img: 'https://i.imgur.com/8UIUZae.jpg', type: 'background'},\r\n    {img:'https://i.imgur.com/yfwxwo1.jpg' , type: 'gradient'},\r\n    {img:'https://i.imgur.com/HTQ2T1O.jpg', type: 'gradient'},\r\n    {img:'https://i.imgur.com/z0zjGrS.jpg', type: 'gradient'},\r\n    {img:'https://i.imgur.com/NXUqzHa.jpg', type: 'gradient'},\r\n    {img:'https://i.imgur.com/bT0t5lL.jpg' , type: 'gradient'},\r\n    {img: 'https://i.imgur.com/TE4sKjU.jpg', type: 'gradient'},\r\n    {img: 'https://i.imgur.com/4hzNTTq.png', type: 'default'},  \r\n]\r\nconst emojis= [\r\n  '😀', '😃' ,'😄', '😁', '😆' ,'😅' ,\r\n     '🥺', '😢', '😭' ,'😤' ,'😠', '😡' ,\r\n     '🤬' ,'🤯','😳', '🥵', '🥶', \r\n     '😱', '😨','😰', '😥', '😓' ,'🤗' ,\r\n     '🤔', '🤭', '🤫' ,'🤥' ,'😶', '😐',\r\n     '😑', '😬', '🙄' ,'😯', '😦', '😧',\r\n      '😑', '😬', '🙄' ,'😯', '😦', '😧',\r\n       '😮', '😲' ,'🥱' ,'😴', '🤤',\r\n        '😪' ,'😵', '🤐', \"🥴\",\r\n        '😬' ,'🙄', '😯' ,'😦' ,\r\n        '😧', '😮' ,'😲', '🥱' ,\r\n        '😴' ,'🤤' ,'😪', '😵',\r\n         '🤐', '🥴', '🤢 ','🤮' ,\r\n         '🤧', '😷', \"🤒\", \"🤕\", '🤑', \r\n         \"🤠\", '😈', \"👿\"\r\n] \r\n  function selectEmoji(el){\r\n    setEmojitype(el)\r\n    setNotifi(true)\r\n  setNotificont({\r\n    emoji: el,\r\n    msg: 'Emoji selected!'\r\n  })\r\n  db.collection('conversations').doc(props.diag.convoinfo.convoid).update({\r\n    customizedconvo : {\r\n     theme: themeimg,\r\n     emoji: el,\r\n    }\r\n   })\r\n  setTimeout(()=>{\r\n    setNotifi(false)\r\n  },3500)\r\n  setEmojibool(false)\r\n  }\r\nfunction selectTheme(el){\r\n  setThemeimg(el)\r\n  setNotifi(true)\r\n  setNotificont({\r\n    emoji: 'fal fa-check-circle',\r\n    msg: 'Theme selected!'\r\n  })\r\n  \r\n    db.collection('conversations').doc(props.diag.convoinfo.convoid).update({\r\n     customizedconvo : {\r\n      theme: el,\r\n      emoji: emojitype,\r\n     }\r\n    })\r\n  \r\n  setTimeout(()=>{\r\n    setNotifi(false)\r\n  },3500)\r\n  setThemebool(false)\r\n}\r\n  let emojisrow = emojis &&emojis.map(emoji=>{\r\n      return <div  style={{cursor: 'pointer'}} className=\"emojidiv\"  onClick={()=>selectEmoji(emoji)}>\r\n          <span role='img' aria-label='emoji'>{emoji}</span>\r\n      </div>\r\n  })\r\n\r\n    let themesrow = themes && themes.map(theme=>{\r\n        if(pattern.test(theme.type.toLowerCase())){\r\n          return <div  className=\"theme bs flex\">\r\n          <div className=\"img\"> <img src={theme.img} alt=''/></div>\r\n           <div className=\"select flexrow\">\r\n           <p>Select this theme:</p>\r\n           <i className='fal fa-check-circle'  onClick={()=>{selectTheme(theme.img)}} style={{color: themecolor}}></i>\r\n           </div>\r\n       </div>\r\n        }\r\n    })\r\n\r\n  function updateProfile(){\r\n    const updateObj ={\r\n      darkmode: darkmode1,\r\n      widemode,\r\n      color: chatcolor,\r\n      themecolor\r\n    }\r\n    db.collection('users').doc(user.uid).update({\r\n      customization :  updateObj  \r\n    }).then(()=>{\r\n      setNotifi(true)\r\n      setNotificont({\r\n        emoji: 'fal fa-check-circle',\r\n        msg: 'Profile has been updated!'\r\n      })\r\n    })\r\n    setTimeout(()=>{\r\n      setNotifi(false)\r\n    },3500)\r\n  }\r\n\r\n  function contextMenu(e){\r\n    let customcontext = document.querySelector('.contextmenu')\r\n    const bounding = customcontext.getBoundingClientRect();\r\n      e.preventDefault() \r\n      setContextmenu(true)\r\n      customcontext.style.top= `${e.pageY-customcontext.clientHeight}px`\r\n      customcontext.style.left= `${e.pageX-customcontext.clientWidth}px`\r\n\r\n    }\r\n    useEffect(()=>{\r\n      if(type==='chatsettings'){\r\n        db.collection('conversations').doc(props.diag.convoinfo.convoid).onSnapshot(snap=>{\r\n            const convo = snap.data()\r\n            if(user.uid===props.diag.convoinfo.creatorid) {\r\n              setNotifibool(convo.notifications1)\r\n            }else {\r\n              setNotifibool(convo.notifications2)\r\n            }\r\n        })\r\n      }\r\n\r\n    },[])\r\n  useEffect(()=>{\r\n    db.collection('users').doc(user.uid).onSnapshot(snap=>{\r\n      const user = snap.data()\r\n      setDarkmode(user.customization.darkmode)\r\n      setWidemode(user.customization.widemode)\r\n      setChatcolor(user.customization.color)\r\n      setThemecolor(user.customization.themecolor)\r\n    })\r\n  },[])\r\n\r\n    return (\r\n   <>\r\n    <div onContextMenu={(e)=>contextMenu(e)} className={darkmode?\"settingsgrid flex darkmode\":'settingsgrid flex'}>\r\n        <div className=\"links  flex\">\r\n            <div className=\"section1 flex\">\r\n              <h2>Settings</h2>\r\n            <NavLink onClick={()=>setNotifi(false)} activeStyle={{color: themecolor}} activeClassName='bs' exact to={'/'+link.link0}>{linklabel.link0}</NavLink>\r\n            <NavLink onClick={()=>setNotifi(false)} activeStyle={{color: themecolor}} activeClassName='bs'  to={`/${type}/${link.link1}`}>{linklabel.link1}</NavLink>\r\n            </div>\r\n            <hr/>\r\n            <div className=\"section2 flex\">\r\n            <NavLink onClick={()=>setNotifi(false)} activeStyle={{color: themecolor}} activeClassName='bs'  to={`/${type}/${link.link2}`}>{linklabel.link2}</NavLink>\r\n            <NavLink onClick={()=>setNotifi(false)}activeStyle={{color: themecolor}} activeClassName='bs' to={`/${type}/${link.link3}`}>{linklabel.link3}</NavLink>\r\n              {type==='settings'?'':<hr/>}\r\n             {type==='settings'?'':  <Link  to={'/chat/'+props.diag.convoinfo.convoid} style={{marginTop:'5px'}}>Return to Chat</Link>}\r\n            </div>\r\n        </div>\r\n        <div className=\"paths bs\">\r\n          <Switch>\r\n          <Route exact path={`/${link.link0}`}>\r\n            {type==='settings'?<Account  notifi={notifi} notificont={notificont} setNotifi={setNotifi} setNotificont={setNotificont}/>:<Themes setEmojitype={setEmojitype} emojitype={emojitype} setEmojibool={setEmojibool} themeimg={themeimg} setThemeimg={setThemeimg} themebool={themebool} setThemebool={setThemebool} chatuser={props.chatuser} notifi={notifi} notificont={notificont} setNotifi={setNotifi} setNotificont={setNotificont} convoid={props.diag.convoinfo.convoid} creatorid={props.diag.convoinfo.creatorid} miniview={miniview} setMiniview={setMiniview}/>}\r\n          </Route>\r\n          <Route  path={`/${type}/${link.link1}`}>\r\n             {type==='settings'? <Preferences />:<Actions notifibool={notifibool} setNotifibool={setNotifibool} convoid={props.diag.convoinfo.convoid} creatorid={props.diag.convoinfo.creatorid}/>}\r\n          </Route>\r\n          <Route  path={`/${type}/${link.link2}`}>\r\n            {type==='settings'?<Personalization function1={updateProfile} input1={darkmode1} input3={chatcolor} input4={themecolor} input2={widemode} setInput1={setDarkmode} setInput4={setThemecolor} setThemecolor={setThemecolor} setInput3={setChatcolor} setInput2={setWidemode}/>:''}\r\n          </Route>\r\n          <Route path={`/${type}/${link.link3}`}>\r\n              {type==='settings'?<Support />:<Aboutchatuser chatuser={props.chatuser}/>}\r\n          </Route>\r\n\r\n          </Switch>\r\n        \r\n        </div>\r\n       <CSSTransition in={notifi} timeout={300} classNames='displayerror' unmountOnExit>\r\n       <div className=\"errormsg bs\" >\r\n       <span role='img' aria-label='emoji'>{emojitype}</span> <p>{notificont.msg}</p>\r\n        <i className=\"far fa-times\" style={{color: themecolor}} onClick={()=>setNotifi(false)}></i>    \r\n        </div>\r\n       </CSSTransition>\r\n        <CSSTransition in={themebool} timeout={300} classNames={\"themesdisplay\"} unmountOnExit>\r\n          <>\r\n        <div className=\"screen\" onClick={()=>setThemebool(false)}></div> \r\n          \r\n        <div className='themes bs flex'>\r\n          \r\n      \r\n          <div className=\"filterBtn flex\">\r\n            <h2 style={{textAlign: 'center'}}>Filter: </h2>\r\n              <div className=\"flexrow center\">\r\n                <Hoverablebutton  state={keyword} setState={setKeyword} type='' text='All'/>\r\n                <Hoverablebutton  state={keyword} setState={setKeyword} type='background' text='Images'/>\r\n                <Hoverablebutton  state={keyword} setState={setKeyword} type='gradient' text='Gradients'/>\r\n                <Hoverablebutton  state={keyword} setState={setKeyword} type='default' text='Default'/>\r\n              </div>\r\n            </div>\r\n        \r\n          <div className=\"flex\">  \r\n         <p className='themestitle'>Themes: </p>\r\n         {themesrow}\r\n          </div>\r\n          </div>\r\n          </>\r\n        </CSSTransition>\r\n        <CSSTransition in={emojibool} timeout={300} classNames={\"emojidisplay\"} unmountOnExit>\r\n          <>\r\n          <div className=\"screen\" onClick={()=>setEmojibool(false)} onContextMenu={()=>setContextmenu(false)}></div> \r\n          \r\n        <div className='emojiwindow bs flexrow'>\r\n            <div className=\"emojistitle\">\r\n              <h2>Select Emoji</h2>\r\n              <div className=\"flexrow flexwrap\">\r\n              {emojisrow}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          </>\r\n        </CSSTransition>\r\n        <CSSTransition in={miniview} timeout={300} classNames={'miniviewdisplay'} unmountOnExit>\r\n            <div className=\"miniviewdisplay bs\" >\r\n              <img src={themeimg} alt=\"\"/>\r\n            </div>\r\n        </CSSTransition>\r\n      \r\n          <Contextmenu emojitype={emojitype} setEmojibool={setEmojibool} emojibool={emojibool} themebool={themebool} setThemebool={setThemebool} contextstyle={contextstyle} type={'settings'} contextmenu={contextmenu} setContextmenu={setContextmenu}/>\r\n    </div>\r\n  </>\r\n  )\r\n}\r\nexport default Usersettings","import React, { useState, useEffect, useContext } from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  NavLink,\r\n  Redirect\r\n} from \"react-router-dom\";\r\nimport { ContextApp } from \"../ContextAPI\";\r\nimport styled from 'styled-components'\r\nconst Icon = styled.i `\r\ncolor: ${props=>props.color}\r\n`;\r\nconst Span = styled.span `\r\n    background-color: red;\r\n    &:hover {\r\n      background-color: ${props=>props.color};\r\n      span {\r\n        color: white;\r\n      }\r\n      i {\r\n        color: white;\r\n      }\r\n    }\r\n`;\r\n\r\nfunction Hoverlink(props) {\r\n  const { themecolor } = useContext(ContextApp);\r\n  const { num,icon,type, classNames, setState, state, lnk, txt, clk } = props;\r\n\r\n\r\n  return  (\r\n    <>\r\n        <Link to={lnk} onClick={clk }>\r\n            <Span color={themecolor} className={classNames}>\r\n            <span>{txt}</span>\r\n            <Icon color={themecolor} className={icon}></Icon>\r\n            </Span>\r\n        </Link>\r\n    </>\r\n\r\n  );\r\n}\r\nexport default Hoverlink;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport firebase from \"firebase\";\r\nimport { db } from \"../Fire\";\r\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  NavLink,\r\n  Redirect,\r\n  useLocation\r\n} from \"react-router-dom\";\r\nimport ReactTimeAgo from 'react-time-ago'\r\n\r\nimport Usersettings from \"./Usersettings\";\r\nimport { ContextApp } from \"../ContextAPI\";\r\nimport Hoverlink from \"./Hoverlink\";\r\nfunction Body(props) {\r\n  const { themecolor } = useContext(ContextApp)\r\n  const user = firebase.auth().currentUser\r\n  const [roleType, setRoleType] = useState('')\r\n  //var roleType = 'assistant'\r\n  const [cover, setCover] = useState(\"\")\r\n  const { handleLogout } = props\r\n  const links = [\"comment\", \"notifications\", \"settings\", \"logout\"]\r\n  const [notifi, setNotifLength]=useState(0)\r\n  const lnks = [\r\n    { icon: \"fal fa-comment-alt\", txt: \"Comment\" },\r\n    { icon: \"fal fa-bell\", txt: \"Notifications\" },\r\n    { icon: \"fal fa-cog\", txt: \"Settings\" },\r\n    { icon: \"fal fa-sign-out\", txt: \"Logout\" }\r\n  ];\r\n  const id =db.collection('users').doc().id\r\n  const lnksrow =\r\n    lnks &&\r\n    lnks.map((lnk) => {\r\n      return (\r\n        <Hoverlink  icon={lnk.icon} txt={lnk.txt} handleLogout={handleLogout} />\r\n      );\r\n    });\r\n\r\n    useEffect(()=>{\r\n      if (user){\r\n      db.collection('users').doc(user.uid).onSnapshot(snap=>{\r\n        const tmp = snap.data()\r\n        setRoleType(tmp.role)\r\n        //roleType = tmp.role\r\n        console.log(\"home set role..\" + tmp.role)\r\n      })\r\n    }\r\n    },[])\r\n\r\n  function determineTime() {\r\n    const d = new Date();\r\n    if (d.getHours() >= 6 && d.getHours() < 12) {\r\n      return \"Good Morning,\";\r\n    } else if (d.getHours() >= 12 && d.getHours() < 17) {\r\n      return \"Good Afternoon,\";\r\n    } else if (d.getHours() >= 17 && d.getHours() < 20) {\r\n      return \"Good Evening,\";\r\n    } else if (d.getHours() >= 20 && d.getHours() <= 23) {\r\n      return \"Good Night,\";\r\n    } else if (d.getHours() >= 0 && d.getHours() < 6) {\r\n      return \"Good Night,\";\r\n    }\r\n  }\r\n\r\n  function determinetext() {\r\n    if (user) {\r\n        return determineTime() + \" \" + roleType + \" \" + user.displayName + \" (login type: \" + user.providerData[0].providerId + \")\"\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"home\">\r\n      <div className=\"header flex sb\">\r\n        <h2 className=\"marginBottom\">{determinetext()}</h2>\r\n      </div>\r\n      \r\n      <div className=\"flex fe sticky\">\r\n        <div className=\"gridobjects  bs marginBottom\">\r\n          <Hoverlink\r\n            icon=\"fal fa-sign-out\"\r\n            txt=\"Logout\"\r\n            classNames=\"blueback all flexrow sa\"\r\n            lnk=\"/\"\r\n            clk={() => props.handleLogout()}\r\n          />\r\n        </div>\r\n      </div>\r\n      \r\n      <form> \r\n          <div class=\"form-group\">\r\n            <label for=\"subject\">Subject</label>\r\n            <input\r\n              type=\"subject\"\r\n              name=\"subject\"\r\n              class=\"form-control-lg \"\r\n              id=\"subject\"\r\n              placeholder=\" enter email subject\"\r\n            />\r\n          </div>\r\n\r\n          <div class=\"form-group\">\r\n            <label for=\"recipient\">TO: </label>\r\n            <input\r\n              type=\"recipient\"\r\n              name=\"recipient\"\r\n              class=\"form-control-lg\"\r\n              id=\"recipient\"\r\n              placeholder=\" enter the recipient\"\r\n            />\r\n          </div>\r\n\r\n          <div class=\"form-group\">\r\n            <label for=\"cc\">CC:</label>\r\n            <input\r\n              type=\"cc\"\r\n              name=\"cc\"\r\n              class=\"form-control-lg\"\r\n              id=\"cc\"\r\n              placeholder=\" enter the Carbon Copy\"\r\n            />\r\n          </div>\r\n\r\n          <div class=\"form-group\">\r\n            <label for=\"bcc\">BCC:</label>\r\n            <input\r\n              type=\"bcc\"\r\n              name=\"bcc\"\r\n              class=\"form-control-lg\"\r\n              id=\"bcc\"\r\n              placeholder=\" enter the Blind Carbon Copy\"\r\n            />\r\n          </div>\r\n\r\n          <div class=\"form-group\">\r\n            <label for=\"email_body\">Message</label>\r\n            <textarea\r\n              class=\"form-control-lg\"\r\n              id=\"email_body\"\r\n              rows=\"5\"\r\n            ></textarea>\r\n          </div>\r\n          \r\n      <div >\r\n        <div className=\"gridobjects  bs marginBottom\">\r\n          <Hoverlink\r\n            \r\n            txt=\"Submit\"\r\n            classNames=\"blueback all flexrow center\"\r\n            lnk=\"/\"\r\n            \r\n          />\r\n        </div>\r\n      </div>\r\n      \r\n\r\n      </form>\r\n\r\n\r\n      <div className=\"homeside\">\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default Body;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport firebase from \"firebase\";\r\nimport { db } from \"../Fire\";\r\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  NavLink,\r\n  Redirect,\r\n  useLocation\r\n} from \"react-router-dom\";\r\nimport Usersettings from \"./Usersettings\";\r\nimport { ContextApp } from \"../ContextAPI\";\r\nimport Calendars from \"./Calendars\";\r\nimport Hoverlink from \"./Hoverlink\";\r\nimport ElapsedTime from \"./Elapsedtime\";\r\nimport ReactTimeAgo from 'react-time-ago'\r\nfunction Notifications(props) {\r\n  const { themecolor } = useContext(ContextApp);\r\n  const {setChatuser} = props\r\n  const user = firebase.auth().currentUser;\r\n  const [cover, setCover] = useState(\"\");\r\n  const [notifi, setNotifLength]=useState(0)\r\n  const [notifications, setNotifications]=useState([])\r\n\r\n  const imageRegexB = /(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)/g;\r\n\r\n  function determineNotiMsg(msg){\r\n    if(msg.gif){\r\n      return 'Sent a GIF'\r\n    }else if(msg.file){\r\n      return 'Sent a file'\r\n    }else if(msg.video){\r\n      return 'Sent a video'\r\n    }else if(msg.base64||msg.notifimsg.match(imageRegexB) != null){\r\n      return 'Sent a photo'\r\n    }\r\n    else {\r\n      return msg.notifimsg\r\n    }\r\n  }\r\n  const id =db.collection('users').doc().id\r\n  function deleteNotifi(el){\r\n      notifications && notifications.map(noti=>{\r\n        if(el.notifiid===noti.notifiid){\r\n          let itemindex = notifications.indexOf(noti)\r\n          notifications.splice(itemindex, 1)\r\n          db.collection('notifications').doc(user.uid).update({\r\n            notifications: notifications\r\n          })\r\n        }\r\n      })\r\n  }\r\n  function deleteAllNotifi(){\r\n    db.collection('notifications').doc(user.uid).update({\r\n      notifications: []\r\n    })\r\n  }\r\n  const notificationsrow = notifications && notifications.slice(0).reverse().map(noti=>{\r\n    return <div ><Link to={'/chat/'+noti.id} onClick={()=>{setChatuser(noti.senderid); deleteNotifi(noti)}}>\r\n    <div className=\"notification flex\">\r\n      <div className=\"userprofile\">\r\n        <img src={cover} alt=\"\"/>\r\n      </div>\r\n     <strong> <p>From: {noti.sender}</p></strong>\r\n      <span>Message: {determineNotiMsg(noti)}</span>\r\n      <span>Sent: <ReactTimeAgo date={noti.notifidate.toDate()} locale='en-US'/></span>\r\n      \r\n   </div>\r\n    </Link>\r\n    <i className=\"fal fa-times\" onClick={()=>deleteNotifi(noti)}></i></div>\r\n  })\r\n  useEffect(()=>{\r\n    \r\n    db.collection('notifications').doc(user.uid).onSnapshot(snap=>{\r\n      const notifi = snap.data()\r\n      setNotifLength(notifi.notifications.length)\r\n      setNotifications(notifi.notifications)\r\n      setCover(notifi.notifications.cover)\r\n    }) \r\n  },[])\r\n  return (\r\n    <div className=\"notificationspage\">\r\n      <div className=\"tp\">\r\n      <div className=\"header flexrow \">\r\n      <i class=\"far fa-inbox\" style={{color: themecolor, cursor: 'auto'}}></i>\r\n        <h2>Your Notifications</h2>\r\n      </div>   \r\n       <hr style={{width: '100%'}}/>\r\n      </div>\r\n      <div className=\"notificationsrow flex\">\r\n        <div className='notifiBtnCont'>\r\n          <button className=' themeBtn notifiBtn' onClick={()=>deleteAllNotifi()}>Clear Notifications </button>\r\n          </div>\r\n        {notificationsrow}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default Notifications;\r\n","import React, {useState, useEffect, useContext} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport firebase from 'firebase'\r\nimport {db} from '../Fire'\r\nimport Usernav from './Usernav'\r\nimport Userrow from './Userrow'\r\nimport Userprofile from './Userprofile'\r\nimport Usersettings from './Usersettings'\r\nimport Home from './Home'\r\nimport Notifications from './Notifications'\r\nimport {CSSTransition, TransitionGroup} from 'react-transition-group'\r\nimport {ContextApp} from '../ContextAPI'\r\nfunction Paths (props) {\r\n    let {chatsettings,convoinfo, onedialogue, setConvoinfo,adduser, setAdduser, userprofile, chatuser, setChatuser} =props\r\n    const {darkmode, themecolor}=useContext(ContextApp)\r\n    return (\r\n   <>\r\n   \r\n    <Route  path='/chat'>\r\n        <div className={darkmode?\"conversations darkmode\":'conversations'} style={{backgroundColor: themecolor}}>\r\n\r\n          <div className={\"chatcontainer\"}>\r\n          <div className={\"userrow spanall \"}>\r\n            <Userrow chatuser={chatuser} setChatuser={setChatuser} convoinfo={convoinfo} setConvoinfo={setConvoinfo} setAdduser={()=>setAdduser(!adduser)}/>\r\n        </div>\r\n        \r\n          <div className='dialogue spanall'>\r\n                  <Switch >\r\n                  {onedialogue}\r\n                  </Switch>  \r\n          </div>\r\n            \r\n        \r\n        <div className=\"userprofile spanall\">\r\n        <Switch>\r\n         {userprofile}\r\n         </Switch>\r\n        </div>\r\n        \r\n          </div>\r\n      </div>\r\n    </Route>\r\n      <Route  path='/home'>\r\n        <div className={darkmode? \"conversations darkmode\":'conversations'} style={{backgroundColor: themecolor}}>\r\n          <Home handleLogout={props.handleLogout}/>\r\n        </div>\r\n      </Route>\r\n    <Switch>\r\n          {chatsettings}\r\n    </Switch> \r\n      <Route path='/notifications'>\r\n        <Notifications setChatuser={setChatuser}/>\r\n      </Route>\r\n    <Route  path='/settings'>\r\n      <Usersettings  settings={'settings'} type={'settings'} link={{link0: 'settings',link1: 'preferences', link2:'themes', link3: 'support'}} linklabel={{link0: 'Account',link1: 'Preferences', link2: 'Customize', link3: 'Support'}}/>\r\n    </Route>\r\n  </>\r\n  )\r\n}\r\nexport default Paths","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect, useLocation } from \"react-router-dom\" \r\nimport firebase from 'firebase'\r\nimport {db} from '../Fire'\r\nimport Hoverableicondiv from './Hoverableiconsdiv'\r\nfunction Users (props) {\r\n  // const [name, setName]=useState('')\r\n  // const [img, setImg]=useState('')\r\n  // const [city, setCity]=useState('')\r\n  // const [country, setCountry]=useState('')\r\n  // const [job, setJob]=useState('')\r\n  // const [recipnumber, setRecipnumber]=useState('')\r\n  // const [recipemail, setRecipemail]=useState('')\r\n  // const [recipwebsite, setRecipwebsite]=useState('')\r\n  // const [extend, setExtend]=useState(false)\r\n    const {lnk,convoinfo, setConvoinfo, el, setChatuser, chatuser, setChatstarted, setChatview}=props\r\n    const [recipimg, setRecipimg]=useState('')\r\n    // const {recipname, setRecipname, sendername, setSendername}=props\r\n    const [recipname, setRecipname] = useState('')\r\n    const [sendername, setSendername]=useState('')\r\n    const [activestatus, setActivestatus]=useState(false)\r\n    const [senderimg, setSenderimg]=useState('')\r\n    const [senderonline, setSenderonline]=useState(false)\r\n    const [reciponline, setReciponline]=useState(false)\r\n    const [loading, setLoading]=useState(true)\r\n    const [msg, setMsg]=useState('')\r\n    const location = useLocation()\r\n    let user = firebase.auth().currentUser\r\n  function colorFunc(){\r\n    if(el.convoinfo.creatorid===user.uid){\r\n        if(reciponline){\r\n          return 'rgb(44, 255, 44)'\r\n        }else {\r\n          return '#FF3D3D'\r\n        }\r\n    }else {\r\n      if(senderonline){\r\n        return 'rgb(44, 255, 44)'\r\n      }else {\r\n        return '#FF3D3D'\r\n      }\r\n    }\r\n  }\r\n    useEffect(()=>{\r\n      db.collection('users').doc(el.convoinfo.recipientid).onSnapshot(snap=>{\r\n        const user = snap.data()\r\n        setRecipname(user.userinfo.name)\r\n        setRecipimg(user.userinfo.cover)\r\n        setActivestatus(user.userinfo.online)\r\n        setLoading(false)\r\n        setReciponline(user.online)\r\n      })\r\n      db.collection('users').doc(el.convoinfo.creatorid).onSnapshot(snap=>{\r\n        const user = snap.data()\r\n        setSendername(user.userinfo.name)\r\n        setSenderimg(user.userinfo.cover)\r\n        setLoading(false)\r\n        setSenderonline(user.online)\r\n      })\r\n      db.collection('conversations').doc(el.convoinfo.convoid).onSnapshot(snap=>{\r\n        const msgs = snap.data()  \r\n        setMsg(msgs.messages[msgs.messages.length-1])\r\n      })\r\n    \r\n    },[el.convoinfo.recipientid, el, chatuser])\r\n    return (\r\n   <>\r\n  <Link   onClick={()=>{setChatuser(el.convoinfo.creatorid===user.uid?el.convoinfo.recipientid:el.convoinfo.creatorid)}} >\r\n    {loading?<div class=\"lds-ring\"><div></div><div></div><div></div><div></div></div>:<div className='flexrow' onClick={()=>setChatstarted(true)}> <img src={el.convoinfo.creatorid===user.uid?recipimg:senderimg} alt=\"\"/>  <small>{el.convoinfo.creatorid===user.uid?recipname:sendername}</small>    <div className=\"notifi\" style={{backgroundColor: colorFunc()}}></div> </div>}\r\n\r\n      <Hoverableicondiv icon={'ellipsis-h-alt'} classNames={'white'} type={'link'} lnk={`/chatsettings/${el.convoinfo.convoid}`} setState={setChatview} setState2={setChatstarted}/>\r\n  </Link>\r\n  </>\r\n  )\r\n}\r\nexport default Users","import React, { useState, useEffect, useContext } from \"react\";\r\nimport Sidebar from \"./Sidebar\";\r\nimport firebase from \"firebase\";\r\nimport { db } from \"../Fire\";\r\nimport Usernav from \"./Usernav\";\r\nimport Userrow from \"./Userrow\";\r\nimport Dialogue from \"./Dialogue\";\r\nimport Userprofile from \"./Userprofile\";\r\nimport Adduser from \"./Adduser\";\r\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  NavLink,\r\n  Redirect,\r\n  useLocation\r\n} from \"react-router-dom\";\r\nimport { StartConvo } from \"./StartConvo\";\r\nimport styled from 'styled-components'\r\nimport Paths from \"./Paths\";\r\nimport Account from \"./settings/Account\";\r\nimport Personalization from \"./settings/Personalization\";\r\nimport Chatsettings from \"./Chatsettings\";\r\nimport Usersettings from \"./Usersettings\";\r\nimport { ContextApp } from \"../ContextAPI\";\r\nimport Hoverableicondiv from \"./Hoverableiconsdiv\";\r\nimport Chatviewrow from './Chatviewrow'\r\nconst Div = styled.div ` \r\n      ::selection {\r\n        background-color: ${props=>props.color};\r\n        color: white;\r\n      }\r\n`\r\nfunction Body(props) {\r\n  const location = useLocation();\r\n  const user = firebase.auth().currentUser;\r\n  const [convoinfo, setConvoinfo] = useState({\r\n    unreadmsgs: 0\r\n  });\r\n  const [convos, setConvos]=useState([])\r\n  const { darkmode, widemode, themecolor,chatcolor } = useContext(ContextApp);\r\n  const [chatuser, setChatuser] = useState(\"\");\r\n  const { handleLogout, setLoading } = props;\r\n  const [msgpersonids, setMsgpersonids] = useState([]);\r\n  const [adduser, setAdduser] = useState(false);\r\n  const [convolist, setConvolist] = useState([]);\r\n  const [userlist, setUserlist] = useState([]);\r\n  const [allusers, setAllusers] = useState([]);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [recipientid, setRecipientid] = useState(\"\");\r\n  const [recipientname, setRecipientname] = useState(\"\");\r\n  const [chatview, setChatview]=useState(false)\r\n  const [chatstarted, setChatstarted]=useState(false)\r\n  const [sidebar, setSidebar]=useState(false)\r\n\r\n  const onedialogue =convolist && convolist.map((diag) => {\r\n    return (\r\n        <Route  exact path={\"/chat/\" + diag.convoinfo.convoid}>\r\n          <Dialogue diag={diag} chatuser={chatuser}/>\r\n        </Route>\r\n      );\r\n    });\r\n    const [chatopen, setChatopen]=useState(false)\r\n    const dialoguerow = convolist && convolist.map(diag=>{\r\n        if(user) {\r\n          if(chatuser===(user.uid===diag.convoinfo.creatorid?diag.convoinfo.recipientid:diag.convoinfo.creatorid)){\r\n            return ( \r\n              <Dialogue  type={'small'} chatuser={chatuser} diag={diag} icon='fal fa-times' setState={setChatstarted} />     \r\n              )\r\n           }\r\n        }\r\n    })\r\n    const usersrow = convos && convos.sort((a, b) => b.lastmsgdate - a.lastmsgdate).map(el=>{\r\n      return <div className=\"profilepic\"><Chatviewrow el={el} setChatopen={setChatopen} chatopen={chatopen} chatuser={chatuser} setChatuser={setChatuser} convoinfo={convoinfo} lnk={location.pathname.split('/').slice(1, 2)[0]} setChatstarted={setChatstarted} setChatview={setChatview} /></div>\r\n    })\r\n  const chatsettings = \r\n    convolist &&\r\n    convolist.map((diag) => {\r\n      return (\r\n        <Route path={\"/chatsettings/\" + diag.convoinfo.convoid}>\r\n          <Usersettings\r\n            chatuser={chatuser}\r\n            diag={diag}\r\n            settings={\"chat\"}\r\n            type={\"chatsettings\"}\r\n            link={{\r\n              link0: \"chatsettings/\" + diag.convoinfo.convoid,\r\n              link1: diag.convoinfo.convoid + \"/actions\",\r\n              link2: diag.convoinfo.convoid + \"/privacy\",\r\n              link3: diag.convoinfo.convoid + \"/support\"\r\n            }}\r\n            linklabel={{\r\n              link0: \"Themes\",\r\n              link1: \"Actions\",\r\n              link2: \"Privacy\",\r\n              link3: \"About\"\r\n            }}\r\n            \r\n          />\r\n        </Route>\r\n      );\r\n    });\r\n  const userprofile =\r\n    convolist &&\r\n    convolist.map((diag) => {\r\n      return (\r\n        <Route exact path={\"/chat/\" + diag.convoinfo.convoid}>\r\n          <Userprofile diag={diag} chatuser={chatuser} />\r\n        </Route>\r\n      );\r\n    });\r\n    const imageRegexB = /(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)/g;\r\n    const photo = true\r\n  function sendMessage() {\r\n if (message.length) {\r\n      setAdduser(!adduser);\r\n      let convoid = db.collection(\"conversations\").doc().id;\r\n      StartConvo(recipientid, message, convoid, recipientname);\r\n    }\r\n  }\r\n  function chatFuncDisplay(){\r\n    setChatstarted(false)\r\n    setTimeout(()=>{\r\n      setChatview(false); \r\n    },400)\r\n  }\r\n  function updateProfile(){\r\n    db.collection('users').doc(user.uid).update({\r\n        customization: {\r\n          widemode: !widemode,\r\n          darkmode,\r\n          color: chatcolor,\r\n          themecolor\r\n        }\r\n    })\r\n}\r\n\r\n  useEffect(()=>{\r\n    db.collection('users').doc(user.uid).onSnapshot(user=>{\r\n      const userlist = user.data()\r\n      setUserlist(userlist)\r\n      db.collection('conversations').onSnapshot(snap=>{\r\n        let convos = []\r\n         snap.forEach(doc=>{\r\n           if(userlist.msgids.includes(doc.id)){\r\n             convos.push(doc.data())\r\n           }\r\n         })\r\n         setConvos(convos)\r\n      })\r\n    })\r\n   },[])\r\n  useEffect(() => {\r\n    if(user){\r\n      db.collection(\"users\")\r\n      .doc(user.uid)\r\n      .onSnapshot((user) => {\r\n        const userlist = user.data();\r\n        setMsgpersonids(userlist.msgpersonids);\r\n        setUserlist(userlist);\r\n        db.collection(\"conversations\").onSnapshot((snap) => {\r\n          let convos = [];\r\n          snap.forEach((doc) => {\r\n            if (userlist.msgids.includes(doc.id)) convos.push(doc.data());\r\n          });\r\n          setConvolist(convos);\r\n        });\r\n      });\r\n    db.collection(\"users\")\r\n   \r\n      .onSnapshot((snap) => {\r\n        const users = [];\r\n        snap.forEach((el) => {\r\n          users.push(el.data());\r\n        });\r\n        setAllusers(users);\r\n      });\r\n      /*\r\n      db.collection('users').doc(user.uid).onSnapshot(snap=>{\r\n        const user = snap.data()\r\n        document.documentElement.style.setProperty(\r\n          '--theme-color', user.customization.themecolor\r\n        )\r\n        document.documentElement.style.setProperty(\r\n          '--chat-color', user.customization.color\r\n        )\r\n      })\r\n      */\r\n    }\r\n    setLoading(false);\r\n  }, []);\r\n  function deleteAccount(){\r\n    var user = firebase.auth().currentUser;\r\n    user.delete().then(()=>{\r\n      db.collection('users').doc(user.uid).delete()\r\n    }).catch(err=>{\r\n\r\n    })\r\n  }\r\n  return (\r\n    <Div\r\n    color={themecolor}  \r\n    className={widemode ? \"body widebody\" : \"body\"}\r\n      style={{ backgroundColor: themecolor }}\r\n    >\r\n      <div className='sidebar'\r\n      >\r\n        <Sidebar updateProfile={updateProfile} chatFuncDisplay={chatFuncDisplay} setChatview={setChatview} setChatstarted={setChatstarted} handleLogout={handleLogout} />\r\n      </div>\r\n      <Switch>\r\n        <Paths\r\n          handleLogout={handleLogout}\r\n          chatsettings={chatsettings}\r\n          chatuser={chatuser}\r\n          setChatuser={setChatuser}\r\n          userprofile={userprofile}\r\n          onedialogue={onedialogue}\r\n          convoinfo={convoinfo}\r\n          setConvoinfo={setConvoinfo}\r\n          adduser={adduser}\r\n          setAdduser={() => setAdduser(!adduser)}\r\n        />\r\n      </Switch>\r\n     \r\n        {location.pathname.slice(0, 5)==='/chat'?<div className='chattab'></div>:<><Hoverableicondiv  classNames={\"chatdiv flex bs\"} icon={\"comment\"} state={chatview} setState={setChatview}/></>}\r\n\r\n        <CSSTransition in={chatview} timeout={300} unmountOnExit classNames='chatusers'>\r\n      <div className=\"chatusers bs\">\r\n        <h2>Chat</h2>\r\n        <div className=\"users flexrow\">\r\n          <i className=\"fal fa-times\" onClick={()=>setChatview(false)} style={{color: 'var(--theme-color)', position: 'absolute', top: '15px',right: '20px'}}></i>\r\n                {usersrow}\r\n              </div>\r\n        </div>\r\n      </CSSTransition>\r\n      <CSSTransition \r\n      in={chatstarted}\r\n      classNames='chatview'\r\n      unmountOnExit \r\n      timeout={300}\r\n      >\r\n        <div className='chatview bs' style={{right: chatview?'330px':'50px'}}>\r\n            <div className=\"\">\r\n              <div className=\"dialogue\">\r\n                {dialoguerow}\r\n              </div>\r\n            </div>\r\n        </div>\r\n      </CSSTransition>\r\n      <CSSTransition\r\n        in={adduser}\r\n        classNames={\"adduser\"}\r\n        unmountOnExit\r\n        timeout={300}\r\n      >\r\n        <Adduser\r\n          setRecipientname={setRecipientname}\r\n          message={message}\r\n          msgpersonids={msgpersonids}\r\n          sendMessage={sendMessage}\r\n          setMessage={setMessage}\r\n          setRecipientid={setRecipientid}\r\n          allusers={allusers}\r\n          setAdduser={setAdduser}\r\n          recipientid={recipientid}\r\n          adduser={adduser}\r\n        />\r\n      </CSSTransition>\r\n      \r\n    </Div>\r\n  );\r\n}\r\nexport default Body;\r\n","import { db } from \"../Fire\";\r\nimport firebase from \"firebase\";\r\n\r\nexport function StartConvo(recipientid, message, convoid, recipientname) {\r\n  const user = firebase.auth().currentUser;\r\n  const date = firebase.firestore.FieldValue.serverTimestamp()\r\n  let convoinfo = {\r\n    convoid,\r\n    creatorid: user.uid,\r\n    creatorname: user.displayName,\r\n    recipientid,\r\n    recipientname,\r\n    typerid: user.uid,\r\n    userref: db.collection(\"users\").doc(recipientid)\r\n    // usertyping: false,\r\n  };\r\n  let customizedconvo = {\r\n    theme: \"https://i.imgur.com/4hzNTTq.png\",\r\n    emoji: \"🤗\"\r\n  };\r\n  let nicknames = {\r\n    nickname1: \"\",\r\n    nickname2: \"\"\r\n  };\r\n  let messages = {\r\n    message,\r\n    reaction1: \"\",\r\n    reaction2: \"\",\r\n    msgdate: firebase.firestore.Timestamp.now(),\r\n    msgid: db.collection(\"conversations\").doc().id,\r\n    read: false,\r\n    senderid: user.uid,\r\n    sendername: user.displayName,\r\n    editing: false\r\n  };\r\n  let notificationobj = {\r\n    notifimsg: message,\r\n    notifidate: firebase.firestore.Timestamp.now(),\r\n    read: false,\r\n    sender: user.displayName,\r\n    id: convoid,\r\n    senderid: user.uid,\r\n    notifiid: db.collection('users').doc().id\r\n  }      \r\n    db.collection('notifications').doc(recipientid).update({\r\n      notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n    })\r\n  db.collection(\"users\")\r\n    .doc(user.uid)\r\n    .update({\r\n      msgids: firebase.firestore.FieldValue.arrayUnion(convoid),\r\n      msgpersonids: firebase.firestore.FieldValue.arrayUnion(recipientid)\r\n    });\r\n  db.collection(\"users\")\r\n    .doc(recipientid)\r\n    .update({\r\n      msgids: firebase.firestore.FieldValue.arrayUnion(convoid),\r\n      msgpersonids: firebase.firestore.FieldValue.arrayUnion(user.uid)\r\n    });\r\n  db.collection(\"conversations\")\r\n    .doc(convoid)\r\n    .set({\r\n      lastmsgdate : date,\r\n      convoinfo,\r\n      messages: firebase.firestore.FieldValue.arrayUnion(messages),\r\n      customizedconvo,\r\n      nickname1: '',\r\n      notifications1: true,\r\n      nickname2: '',\r\n      notifications2: true,\r\n    });\r\n}\r\n","import React, {useState, useEffect} from \"react\";\nimport \"./styles.css\";\nimport {db, Fire} from './Fire';\nimport firebase from \"firebase\";\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \nimport Sidebar from './components/Sidebar'\nimport Login from './components/Login'\nimport Body from './components/Body'\nimport ContextAppProvider from './ContextAPI'\nimport { useBeforeunload } from 'react-beforeunload'\nimport emailjs from 'emailjs-com'\n\nfunction App() {\n  const [update, setUpdate]=useState(0)\n  const [user, setUser]=useState('')\n  const [name, setName]=useState('')\n  const [email, setEmail]=useState('')\n  const [password, setPassword]=useState('')\n  const [emailError, setEmailError]=useState('')\n  const [passwordError, setPasswordError]=useState('')\n  const [hasAccount, setHasAccount]=useState(true)\n  //const [loginType, setLoginType]=useState('assistant')\n  var loginType = \"assistant\"\n  const [lname, setlName]=useState('')\n  const [userinfo, setUserinfo]=useState([])\n  const [users, setUsers]=useState([])\n  const [cover, setCover]=useState('https://www.gettyimages.ca/gi-resources/images/500px/983794168.jpg')\n  const [forgotpassword, setForgotpassword]=useState(false)\n  const [msgids, setMsgIds] = useState([''])\n  const [loading, setLoading]=useState(false)\n  const clearInputs = () => {\n    setEmail('')\n    setPassword('')\n  }\n  const clearErrors = () => {\n    setEmailError('')\n    setPasswordError('')\n  }\n  const handleLogin = () => {\n    clearErrors()\n\n    var checkbox = document.querySelectorAll(\"input[type='radio']:checked\")\n    for (let i = 0; i < checkbox.length; i++) {\n        //setLoginType(checkbox[0].id)\n        loginType = checkbox[0].id\n        console.log(\"Checkbox is checked..\" + loginType)\n    }\n\n    firebase.auth().signInWithEmailAndPassword(email, password)\n    .then(()=>{setLoading(true)})\n    .catch(err => {\n      switch(err.code) {\n        case \"auth/invalid-email\":\n          setEmailError(err.message)\n          break\n        case \"auth/user/disabled\":\n        case \"auth/user-not-found\":\n          setEmailError('Email does not exist')\n        break\n        case \"auth/wrong-password\":\n          setPasswordError('Incorrect Password')\n        break\n        default:\n      }  \n    })\n  } \n  const handleSignup = () => {\n    console.log('signup')\n    clearErrors()\n    firebase.auth().createUserWithEmailAndPassword(email, password).catch(err => {\n        \n        switch(err.code) {\n        case \"auth/email-already-in-use\":\n          setEmailError(err.message)\n          break\n        case \"auth/invalid-email\":\n          setEmailError(err.message)\n        break\n        case \"auth/weak-password\":\n          setPasswordError(err.message)\n        break\n        default: \n        setEmailError('Invalid')\n      }\n    })\n    firebase.auth().onAuthStateChanged(user => {\n      if(user) {\n          user.updateProfile({\n            displayName: name,\n          }) \n          db.collection('users').doc(user.uid).set({\n              created: new Date(), \n              msgids,\n              uid: firebase.auth().currentUser.uid,\n              online: true,\n              userinfo: {\n                name,\n                cover,\n                age: '', \n                phone: '', \n                city: '',\n                country: '',\n                website: 'https://',\n                job: '',\n                email,\n              },\n              customization: {\n                color: '#10325c',\n                themecolor: '#0f6ce6',\n                darkmode: false,\n                widemode: false,\n              }\n          })\n          db.collection('notifications').doc(user.uid).set({\n            notifications: 'email'\n          })\n   \n      }//if (user)\n      else {\n        setUser('')\n      } \n    }) \n  }\n  const handleLogout = () => {\n    if(user) {\n      db.collection('users').doc(user.uid).update({online: false})\n    }\n    //setLoginType('assistant')\n    loginType = 'assistant'\n    console.log(\"handle logout..\" + loginType)\n    window.location.host\n    firebase.auth().signOut()\n  }\n  const authListener = () => {\n    firebase.auth().onAuthStateChanged(user => {   \n      if(user) {\n        clearInputs()\n        setUser(user)\n        db.collection('users').doc(user.uid).update({online: true})\n\n        firebase.auth().onAuthStateChanged(user => {\n          db.collection('users').doc(user.uid).set({role: loginType})\n          console.log(\"Final role..\" + loginType)\n       } )\n      }\n      else {\n          setUser('')\n          //setLoginType('assistant')\n          //db.collection('users').doc(user.uid).update({online: false})\n      }\n    })\n  } \n  \n  function loginwithGoogle(){\n    var checkbox = document.querySelectorAll(\"input[type='radio']:checked\")\n    for (let i = 0; i < checkbox.length; i++) {\n        loginType = checkbox[0].id\n        console.log(\"Checkbox is checked..\" + loginType)\n    }\n\n    var provider = new firebase.auth.GoogleAuthProvider();\n    provider.addScope('email');\n\n    firebase.auth()\n    .signInWithPopup(provider)\n    .then((result) => {\n      if(result.additionalUserInfo.isNewUser){\n            /** @type {firebase.auth.OAuthCredential} */\n      var credential = result.credential;\n  \n      // This gives you a Google Access Token. You can use it to access the Google API.\n      var token = credential.accessToken;\n      // The signed-in user info.\n      var user = result.user;\n      // ...\n      db.collection('users').doc(user.uid).set({\n        created: new Date(), \n        msgids,\n        uid: user.uid,\n        online: true, \n        userinfo: {\n          name: user.displayName,\n          cover: user.photoURL,\n          age: '', \n          phone: user.phoneNumber, \n          city:'',\n          country: '',\n          website: 'https://',\n          job: '',\n          email: user.email\n          \n        },\n        customization: {\n          color: '#10325c',\n          themecolor: '#0f6ce6',\n          darkmode: false,\n          widemode: false,\n        }\n    })\n    db.collection('notifications').doc(user.uid).set({\n      notifications: 'Google'\n    })\n      }\n\n    }).catch((error) => {\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      // The email of the user's account used.\n      var email = error.email;\n      // The firebase.auth.AuthCredential type that was used.\n      var credential = error.credential;\n      // ...\n      setEmailError(error.message)\n      setTimeout(()=>{\n        setEmailError('')\n      },3000)\n    });\n  }\n  function loginwithFacebook(){\n    var provider = new firebase.auth.FacebookAuthProvider();\n    provider.addScope(\"email\");\n\n    firebase.auth()\n    .signInWithPopup(provider)\n    .then((result) => {\n      if(result.additionalUserInfo.isNewUser){\n        /** @type {firebase.auth.OAuthCredential} */\n        var credential = result.credential;\n  \n        // This gives you a Google Access Token. You can use it to access the Google API.\n        var token = credential.accessToken;\n        // The signed-in user info.\n        var usergoogle = result.user;\n        // ...\n        db.collection('users').doc(usergoogle.uid).set({\n          created: new Date(), \n          msgids,\n          uid: usergoogle.uid,\n          online: true, \n          userinfo: {\n            name: usergoogle.displayName,\n            cover: usergoogle.photoURL,\n            age: '', \n            phone: usergoogle.phoneNumber, \n            city:'',\n            country: '',\n            website: 'https://',\n            job: '',\n            email: usergoogle.email\n          },\n          customization: {\n            color: '#10325c',\n            themecolor: '#0f6ce6',\n            darkmode: false,\n            widemode: false,\n          }\n      })\n      db.collection('notifications').doc(usergoogle.uid).set({\n        notifications: 'Facebook'\n      })\n    }\n    })\n    .catch((error) => {\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      // The email of the user's account used.\n      var email = error.email;\n      // The firebase.auth.AuthCredential type that was used.\n      var credential = error.credential;\n  \n      // ...\n      setEmailError(email)\n      setTimeout(()=>{\n        setEmailError('')\n      },3000)\n      console.log(errorCode)\n    });\n  }\n  useBeforeunload(() => {\n    if(user) {\n      db.collection('users').doc(user.uid).update({online: false})\n    }\n  }) \n\n  useEffect(() => { \n    let cnt = false\n    authListener()\n\n    /*\n    var checkbox = document.querySelector(\"input[id='executive']\")  \n    if (checkbox)\n    {\n      checkbox.addEventListener('change', function() {\n       if (checkbox.checked) \n       {\n         //setLoginType('executive')\n         loginType = 'executive'\n       }\n       console.log(\"Checkbox is checked..\" + loginType)\n     });\n    } \n    var checkbox_2 = document.querySelector(\"input[id='assistant']\")  \n    if (checkbox_2)\n    {\n      checkbox_2.addEventListener('change', function() {\n       if (checkbox_2.checked) \n       {\n         //setLoginType('executive')\n         loginType = 'assistant'\n       }\n       console.log(\"Checkbox is checked..\" + loginType)\n     });\n    } \n    */\n    window.addEventListener('onbeforeunload', removeActiveStatus) \n    function removeActiveStatus() {\n      if(user) {\n        db.collection('users').doc(user.uid).update({online: false})\n      }\n    }\n    if(user) {\n      db.collection('users').doc(user.uid).update({online: true})\n    }\n\n    return() => cnt = true\n  },[])  \n  /*\n   localStorage.openpages = Date.now();\n   var onLocalStorageEvent = function(e){\n       if(e.key == \"openpages\"){\n           // Listen if anybody else is opening the same page!\n           localStorage.page_available = Date.now();\n       }\n       if(e.key == \"page_available\"){\n           alert(\"One more page already open\");\n       }\n   };\n\n   window.addEventListener('storage', onLocalStorageEvent, false);\n*/   \n\n   return ( \n    \n        <Router >\n    <div className=\"App\">\n       {user?\n        <ContextAppProvider>\n        <>\n          <Body setLoading={setLoading} handleLogout={handleLogout} />\n          <Redirect to='/Home'/>\n        </>\n        </ContextAppProvider>\n        :\n        <> \n        <Login loginwithFacebook={()=>loginwithFacebook}loginwithGoogle={()=>loginwithGoogle} loading={loading} name={name} setName={setName} lname={lname} setlName={setlName}email={email} setEmail={setEmail} password= {password} setPassword={setPassword} handleLogin={handleLogin} handleSignup={handleSignup} hasAccount={hasAccount} setHasAccount={setHasAccount} emailError={emailError} passwordError={passwordError}/>       \n        <Redirect to='/'/>\n     </>\n        }\n    </div>  \n     </Router>\n\n  );\n}\n\nexport default App ","import React, { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport TimeAgo from 'javascript-time-ago'\n\nimport en from 'javascript-time-ago/locale/en'\nimport ru from 'javascript-time-ago/locale/ru'\n\nimport App from \"./App\";\nTimeAgo.addDefaultLocale(en)\nTimeAgo.addLocale(en)\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}