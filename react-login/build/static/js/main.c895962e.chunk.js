(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{153:function(e,t,c){"use strict";c.r(t);var s=c(1),n=c.n(s),a=c(29),i=c.n(a),o=c(160),r=c(46),l=c(6),d=(c(84),c(7)),j=d.a.initializeApp({apiKey:"AIzaSyBtw3coit5Y_E2gJInz7RavYXuthmhh35Q",authDomain:"authentic-idea-365202.firebaseapp.com",projectId:"authentic-idea-365202",storageBucket:"authentic-idea-365202.appspot.com",messagingSenderId:"497585289385",appId:"1:497585289385:web:a9ee5f59c4a17b793bd1b8",measurementId:"G-2HBL5FQBGG",databaseURL:"https://authentic-idea-365202-default-rtdb.firebaseio.com"}),u=j.firestore(),b=j.database(),m=c(11),f=c(17),O=c(0),h=Object(s.createContext)(),x=function(e){var t=d.a.auth().currentUser,c=Object(s.useState)(!1),n=Object(l.a)(c,2),a=n[0],i=(n[1],Object(s.useState)(!1)),o=Object(l.a)(i,2),r=o[0],j=(o[1],Object(s.useState)("")),b=Object(l.a)(j,2),m=b[0],f=(b[1],Object(s.useState)("")),x=Object(l.a)(f,2),p=x[0],g=(x[1],Object(s.useState)(!1)),v=Object(l.a)(g,2),y=v[0],N=v[1],S=Object(s.useState)({emoji:"",msg:""}),k=Object(l.a)(S,2),w=k[0],C=k[1];return t&&u.collection("users").doc(t.uid).onSnapshot((function(e){e.data()})),Object(O.jsx)(h.Provider,{value:{darkmode:a,widemode:r,chatcolor:m,themecolor:p,notificont:w,notifi:y,setNotificont:C,setNotifi:N},children:e.children})};var p=function(e){var t=Object(s.useContext)(h),c=(t.darkmode,t.chatcolor,t.widemode),n=(t.themecolor,e.updateProfile),a=(e.chatFuncDisplay,e.handleLogout),i=(e.setChatview,e.setChatstarted,Object(s.useState)("")),o=Object(l.a)(i,2),r=(o[0],o[1],Object(s.useState)("")),j=Object(l.a)(r,2),u=(j[0],j[1],Object(s.useState)(!0)),b=Object(l.a)(u,2),f=(b[0],b[1],d.a.auth().currentUser,Object(s.useState)(!1)),x=Object(l.a)(f,2);return x[0],x[1],Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"profilepic profilepiccol"}),Object(O.jsxs)("div",{className:"icons",children:[Object(O.jsx)(m.c,{activeClassName:"activelink",exact:!0,to:"/home",children:Object(O.jsxs)("span",{children:[Object(O.jsx)("i",{class:"far fa-home"}),c?Object(O.jsx)("p",{className:"widemodeElement",children:"Home"}):""]})}),Object(O.jsx)(m.c,{activeClassName:"activelink",to:"/adddraft",children:Object(O.jsxs)("span",{children:[Object(O.jsx)("i",{class:"fal fa-cog"}),c?Object(O.jsx)("p",{className:"widemodeElement",children:"Adddraft"}):""]})}),Object(O.jsx)(m.c,{activeClassName:"activelink",to:"/MailSend",children:Object(O.jsxs)("span",{children:[Object(O.jsx)("i",{class:"far fa-bell"}),c?Object(O.jsx)("p",{className:"widemodeElement",children:"MailSending"}):""]})}),Object(O.jsx)(m.c,{activeClassName:"activelink",to:"/linkage",children:Object(O.jsxs)("span",{children:[Object(O.jsx)("i",{class:"fal fa-podcast"}),c?Object(O.jsx)("p",{className:"widemodeElement",children:"Linkage"}):""]})}),Object(O.jsx)(m.c,{exact:!0,to:"/",onClick:function(){a()},children:Object(O.jsxs)("span",{children:[" ",Object(O.jsx)("i",{class:"fal fa-sign-out-alt"}),c?Object(O.jsx)("p",{className:"widemodeElement",children:"Logout"}):""]})}),Object(O.jsx)("a",{onClick:function(){n()},className:"widemodeElement",children:Object(O.jsx)("i",{class:c?"fal fa-chevron-double-right rotate":"fal fa-chevron-double-right"})})]}),c?"":Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"widemodeElement spac"}),Object(O.jsx)("div",{className:"widemodeElement spac"})]})]})};var g=function(e){var t=Object(s.useState)(""),c=Object(l.a)(t,2),n=c[0],a=c[1];return Object(O.jsx)("div",{className:"forgotpassword",children:Object(O.jsxs)("div",{className:"login",children:[Object(O.jsx)("div",{className:"spacer1"}),Object(O.jsxs)("div",{className:"title",children:[Object(O.jsx)("i",{class:"fa-unlock fad"}),Object(O.jsx)("h1",{children:"Forgot Password"})]}),Object(O.jsx)("div",{className:"spacer1"}),Object(O.jsxs)("div",{className:"logincontainer",children:[Object(O.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(O.jsxs)("label",{children:[Object(O.jsx)("span",{children:"Email"}),Object(O.jsx)("input",{type:"text",placeholder:"example@mail.com",onChange:function(e){return a(e.target.value)}})]}),Object(O.jsx)("button",{className:"themeBtn",onClick:function(){""!==n?d.a.auth().sendPasswordResetEmail(n).then((function(){window.alert("email has been sent")})).catch((function(e){e.code;var t=e.message;window.alert(t)})):window.alert("Please input an email")},children:"Send email"})]}),Object(O.jsx)(m.b,{to:"/",className:"forgotPasswordButton",children:"Return to login page"})]})]})})};c(93),c(96),c(97);var v=function(e){e.loginwithTwitter;var t=e.loginwithFacebook,c=e.loginwithGoogle,s=(e.setlName,e.lname,e.name,e.setName),n=e.email,a=e.setEmail,i=e.password,o=e.setPassword,r=e.handleLogin,l=e.handleSignup,d=e.hasAccount,j=e.setHasAccount,u=e.emailError,b=e.passwordError;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(f.b,{exact:!0,path:"/",children:[Object(O.jsx)("div",{className:"image",children:Object(O.jsx)("img",{src:"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.webp",class:"img-fluid",alt:"Sample image"})}),Object(O.jsxs)("div",{className:"login",children:[Object(O.jsx)("div",{className:"icon",children:Object(O.jsxs)("label",{style:{display:d?"flex":"none"},children:[Object(O.jsxs)("button",{className:"login-btn gog-btn",onClick:c(),children:[" ",Object(O.jsx)("i",{class:"fab fa-google"})]}),Object(O.jsx)("button",{className:"login-btn fb-btn",onClick:t(),children:Object(O.jsx)("i",{className:"fab fa-facebook"})})]})}),Object(O.jsx)("div",{className:"sub_title",style:{display:d?"flex":"none"},children:Object(O.jsx)("p",{className:"text-center",children:"Or"})}),Object(O.jsx)("div",{className:"title",children:Object(O.jsx)("h2",{children:d?"Log In":"Register"})}),Object(O.jsx)("div",{className:"spacer1"}),Object(O.jsxs)("fieldset",{className:"choose_role",children:[Object(O.jsx)("legend",{children:"Choose your role"}),Object(O.jsxs)("div",{children:[Object(O.jsx)("input",{type:"radio",id:"assistant",name:"interest",class:"slectOne",value:"assistant"}),Object(O.jsx)("label",{for:"assistant",children:"Assistant"})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("input",{type:"radio",id:"executive",name:"interest",class:"slectOne",value:"executive"}),Object(O.jsx)("label",{for:"executive",children:"Executive"})]})]}),Object(O.jsx)("div",{className:"logincontainer",children:Object(O.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(O.jsxs)("label",{style:{display:d?"none":"flex"},children:[Object(O.jsx)("span",{children:"Name"}),Object(O.jsx)("input",{type:"text",placeholder:"Jennifer Chang",onChange:function(e){return s(e.target.value)}})]}),Object(O.jsxs)("label",{children:[Object(O.jsx)("span",{children:"Email address"}),Object(O.jsx)("input",{type:"text",value:n,placeholder:"username@mail.com",onChange:function(e){return a(e.target.value)}}),Object(O.jsx)("p",{className:"errormsgLogin",children:u})]}),Object(O.jsxs)("label",{children:[Object(O.jsx)("span",{children:"Password"}),Object(O.jsx)("input",{type:"password",placeholder:"password",value:i,onChange:function(e){return o(e.target.value)}}),Object(O.jsx)("p",{className:"errormsgLogin",children:b})]}),d?Object(O.jsxs)("div",{className:"btnContainer",children:[Object(O.jsx)("button",{className:"themeBtn",onClick:r,children:e.loading?Object(O.jsxs)("div",{class:"lds-ring",children:[Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{})]}):"Log in"}),Object(O.jsx)("div",{className:"flex",style:{textAlign:"center"},children:Object(O.jsx)(m.b,{exact:!0,to:"/forgotpassword",className:"forgotPasswordButton",children:"Forgot your password?"})}),Object(O.jsx)("div",{className:"flex_warn",style:{textAlign:"center"},children:Object(O.jsxs)("small",{children:["Don't have an account",Object(O.jsx)("span",{onClick:function(){return j(!d)},style:{cursor:"pointer"},children:"? Register"})]})})]}):Object(O.jsxs)("div",{className:"btnContainer",children:[Object(O.jsx)("button",{className:"themeBtn",style:{marginBottom:"10px"},onClick:l,children:"Register"}),Object(O.jsx)("div",{className:"flexrow",children:Object(O.jsxs)("small",{children:["Already have an account",Object(O.jsx)("span",{onClick:function(){return j(!d)},style:{cursor:"pointer"},children:"? Sign in"})]})})]})]})})]}),Object(O.jsx)("div",{className:"footer",children:Object(O.jsx)("div",{className:"text-white mb-3 mb-md-0",children:"Copyright \xa9 2022. MOON AND CAKE."})})]}),Object(O.jsx)(f.b,{exact:!0,path:"/forgotpassword",children:Object(O.jsx)(g,{})})]})},y=c(22);var N=function(e){e.convoinfo,e.setConvoinfo;var t=e.el,c=e.setChatuser,n=e.chatuser,a=Object(s.useState)(""),i=Object(l.a)(a,2),o=i[0],r=i[1],j=Object(s.useState)(""),b=Object(l.a)(j,2),f=b[0],h=b[1],x=Object(s.useState)(""),p=Object(l.a)(x,2),g=p[0],v=p[1],y=Object(s.useState)(!1),N=Object(l.a)(y,2),S=(N[0],N[1]),k=Object(s.useState)(""),w=Object(l.a)(k,2),C=w[0],F=w[1],E=Object(s.useState)(!0),T=Object(l.a)(E,2),L=T[0],A=T[1],U=Object(s.useState)(""),I=Object(l.a)(U,2),R=I[0],D=I[1],B=/((?:(?!(?:https?|ftp):\/\/[\S]*\.(?:png|jpe?g|gif|svg|webp)).)+)|((?:https?|ftp):\/\/[\S]*\.(?:png|jpe?g|gif|svg|webp)(?:\?\S+=\S*(?:&\S+=\S*)*)?)/gm,M=d.a.auth().currentUser;function P(e){if(void 0!==e.message)return e.base64?"<span style='font-size: 0px; position: absolute'>".concat(e.message,'</span><img src="').concat(e.message,'"/>'):e.file?"Sent a File":e.audio?"Sent a recording":e.message.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/)&&RegExp.$1?"Sent a Video":e.message.replace(B,(function(e,t,c){return t?"<p>".concat(t.trim(),"</p>"):'<img src="'.concat(c,'" />')}))}return Object(s.useEffect)((function(){u.collection("users").doc(t.convoinfo.recipientid).onSnapshot((function(e){var t=e.data();h(t.userinfo.name),r(t.userinfo.cover),S(t.userinfo.online),A(!1)})),u.collection("users").doc(t.convoinfo.creatorid).onSnapshot((function(e){var t=e.data();v(t.userinfo.name),F(t.userinfo.cover),A(!1)})),u.collection("conversations").doc(t.convoinfo.convoid).onSnapshot((function(e){var t=e.data();D(t.messages[t.messages.length-1])}))}),[t.convoinfo.recipientid,t,n]),Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(m.c,{activeClassName:"activelink",to:"/chat/"+t.convoinfo.convoid,onClick:function(){c(t.convoinfo.creatorid===M.uid?t.convoinfo.recipientid:t.convoinfo.creatorid)},children:Object(O.jsxs)("div",{className:"user",children:[Object(O.jsx)("div",{className:"profilepic",children:L?Object(O.jsxs)("div",{class:"lds-ring",children:[Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{})]}):Object(O.jsx)("img",{src:t.convoinfo.creatorid===M.uid?o:C,alt:""})}),Object(O.jsxs)("div",{className:"info flex",children:[Object(O.jsx)("p",{className:"username",children:t.convoinfo.creatorid===M.uid?f.length>15?f.slice(0,15)+"...":f:g.length>15?g.slice(0,15)+"...":g}),Object(O.jsx)("small",{dangerouslySetInnerHTML:{__html:function(e){if(e)return e.senderid===M.uid?"<p>You:</p> ".concat(P(e)):P(e)}(R)}})]})]})})})};var S=function(e){var t=Object(s.useContext)(h).themecolor,c=Object(s.useState)(""),n=Object(l.a)(c,2),a=n[0],i=(n[1],new RegExp("\\b"+a.replace(/[\W_]+/g,""),"i"),e.convoinfo),o=e.setConvoinfo,r=e.setChatuser,j=e.chatuser,b=Object(s.useState)([]),m=Object(l.a)(b,2),f=(m[0],m[1]),x=Object(s.useState)([]),p=Object(l.a)(x,2),g=p[0],v=p[1],y=(u.collection("users").doc().id,d.a.auth().currentUser),S=g&&g.sort((function(e,t){return t.lastmsgdate-e.lastmsgdate})).map((function(e){return y?Object(O.jsx)(N,{chatuser:j,setChatuser:r,el:e,convoinfo:i,setConvoinfo:o}):null}));return Object(s.useEffect)((function(){u.collection("users").doc(y.uid).onSnapshot((function(e){var t=e.data();f(t),u.collection("conversations").onSnapshot((function(e){var c=[];e.forEach((function(e){t.msgids.includes(e.id)&&c.push(e.data())})),v(c)}))}))}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h2",{children:"Chats"}),Object(O.jsxs)("div",{className:"search abs",children:[Object(O.jsx)("i",{class:"far fa-plus",style:{color:t},onClick:function(){return e.setAdduser()}}),Object(O.jsx)("input",{type:"text",placeholder:"Search",onFocus:function(){return e.setAdduser()}})]}),Object(O.jsx)("div",{className:"users",children:S})]})},k=c(162);var w=function(e){Object(s.useContext)(h).themecolor;var t=e.icon,c=e.classNames,n=e.text,a=e.functionOne;return Object(O.jsxs)("div",{className:"".concat(c," white"),onClick:a,children:[Object(O.jsx)("i",{className:"whiteel fad fa-"+t}),Object(O.jsx)("p",{className:"white",children:n})]})};var C=function(e){var t=d.a.auth().currentUser,c=e.themebool,n=e.emojibool,a=e.type,i=(e.setUpdatedMsg,e.copy,e.convoid),o=e.contextmenu,r=e.setContextmenu,j=e.contextstyle,b=e.msgid,m=Object(s.useState)(!1),x=Object(l.a)(m,2),p=(x[0],x[1],Object(s.useState)(!1)),g=Object(l.a)(p,2),v=g[0],y=g[1],N=Object(s.useState)([]),S=Object(l.a)(N,2),C=S[0],F=S[1],E=Object(s.useRef)(),T=(Object(f.h)(),Object(f.g)());function L(e){"fad fa-".concat(e);C&&C.map((function(c){if(b===c.msgid){var s=C.indexOf(c);c.senderid===t.uid?(C[s].reaction1="fad fa-".concat(e),u.collection("conversations").doc(i).update({messages:C})):(C[s].reaction2="fad fa-".concat(e),u.collection("conversations").doc(i).update({messages:C}))}})),r(!1)}Object(s.useContext)(h).themecolor;var A=["smile","angry","sad-cry","surprise"].map((function(e){return Object(O.jsxs)("div",{onClick:function(){return L(e)},children:[" ",Object(O.jsx)("i",{className:"fad fa-"+("cry"===e?"sad-cry":e)}),"  "]})})),U=[{class:"surprise yellow",msg:"Surprised"},{class:"tired blue",msg:"Tired"},{class:"smile-wink yellow",msg:"Wink"},{class:"kiss-beam red",msg:"Love"},{class:"grin-stars yellow",msg:"Stars"},{class:"grin-squint-tears yellow",msg:"Laugh"},{class:"grimace yellow",msg:"Grimace"},{class:"frown red",msg:"Frown"},{class:"heart red",msg:"Like"}].map((function(e){return Object(O.jsxs)("div",{onClick:function(){return L(e.class)},children:[Object(O.jsx)("i",{className:"heart red"===e.class?"fas fa-"+e.class:"fad fa-"+e.class}),Object(O.jsx)("p",{children:e.msg})]})}));return document.addEventListener("click",(function(e){e.target!==E.current&&r(!1)})),Object(s.useEffect)((function(){"msg"===a&&u.collection("conversations").doc(i).onSnapshot((function(e){F(e.data().messages)}))}),[i]),Object(O.jsx)(O.Fragment,{children:"msg"===a?Object(O.jsxs)("div",{ref:E,onContextMenu:function(e){return e.preventDefault()},className:"contextmenu bs",style:{display:o?"flex":"none",left:j.left+"px",top:j.top+"px"},children:[Object(O.jsx)("div",{className:"emojis",children:A}),Object(O.jsxs)("div",{className:"option laugh",onMouseOver:function(){return y(!0)},onMouseLeave:function(){return y(!1)},children:[Object(O.jsx)("i",{className:"fad fa-laugh"})," ",Object(O.jsx)("p",{children:"Reaction"}),Object(O.jsx)(k.a,{in:v,timeout:200,classNames:"drophover",unmountOnExit:!0,children:Object(O.jsx)("div",{className:"dropmenu bs",children:U})})]}),Object(O.jsxs)("div",{className:"option copy",onClick:function(){return function(e){var t=document.createRange(),c=document.querySelector("#".concat(e," .msg"));t.selectNode(c),window.getSelection().removeAllRanges(),window.getSelection().addRange(t),document.execCommand("copy"),window.getSelection().removeAllRanges(),r(!1)}(b)},children:[Object(O.jsx)("i",{className:"fal fa-copy"})," ",Object(O.jsx)("p",{children:"Copy"})]}),Object(O.jsxs)("div",{className:"option delete",onClick:function(){return C&&C.map((function(e){if(b===e.msgid&&e.senderid===t.uid){var c=C.indexOf(e);C.splice(c,1),u.collection("conversations").doc(i).update({messages:C})}})),void r(!1)},children:[Object(O.jsx)("i",{className:"fal fa-trash"})," ",Object(O.jsx)("p",{children:"Delete"})]})]}):"settings"===a?Object(O.jsxs)("div",{ref:E,onContextMenu:function(e){return e.preventDefault()},className:"contextmenu bs",style:{display:o?"flex":"none",left:j.left+"px",top:j.top+"px"},children:[!0===n||!0===c||"settings"===a?"":Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(w,{classNames:"option",functionOne:function(){return e.setThemebool(!0)},icon:"adjust",text:"Theme"}),Object(O.jsx)(w,{classNames:"option",functionOne:function(){return e.setEmojibool(!0)},icon:e.emojitype,text:"Emoji"})]}),Object(O.jsx)(w,{classNames:"option",functionOne:function(){return window.location.reload()},icon:"sync",text:"Reload"}),Object(O.jsx)(w,{classNames:"option",functionOne:function(){return T.goForward()},icon:"long-arrow-alt-right",text:"Forward"}),Object(O.jsx)(w,{classNames:"option",functionOne:function(){return T.goBack()},icon:"undo",text:"Previous"})]}):""})};c(98),c(100);var F,E=c(19),T=(c(51),c(37)),L=E.a.i(F||(F=Object(y.a)(["\ncolor: ",";\nbackground-color: white;\n&:hover {\n  color: white;\n  background-color:  ",";\n}\n"])),(function(e){return e.color}),(function(e){return e.color}));var A,U,I,R,D=function(e){var t=d.a.auth().currentUser,n=e.convoid,a=e.progressbar,i=e.progresswidth,o=Object(s.useContext)(h).themecolor,r=Object(s.useState)(null),j=Object(l.a)(r,2),b=j[0],m=j[1],f=Object(s.useState)("blob:https://5guz4.csb.app/2ff8746b-44d6-4c3f-b531-480291e7aa84"),x=Object(l.a)(f,2),p=(x[0],x[1],Object(s.useState)(0)),g=Object(l.a)(p,2),v=(g[0],g[1],Object(s.useState)(!1)),y=Object(l.a)(v,2),N=y[0],S=y[1],k=Object(s.useState)(!1),w=Object(l.a)(k,2),C=w[0],F=w[1],E=u.collection("conversations").doc().id;function A(){m(T.a.STOP)}var U=Object(s.useState)(0),I=Object(l.a)(U,2),R=I[0],D=I[1],B=Object(s.useState)(),M=Object(l.a)(B,2),P=M[0],z=M[1];function V(){m(T.a.START),S(!0),z(setInterval((function(){D((function(e){return e+1}))}),1e3))}return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(T.b,{state:b,onStop:function(e){if(C)F(!1);else{c(51),d.a.storage().ref("".concat(n,"/recording.mp3"));var s=new FileReader;s.readAsDataURL(e.blob),s.onloadend=function(){var e,c,o,r=s.result;(e=r,c="recording.wav",o="audio/wav",fetch(e).then((function(e){return e.arrayBuffer()})).then((function(e){return new File([e],c,{type:o})}))).then((function(e){var c=d.a.storage().ref("".concat(n,"/").concat(E,".wav"));c.put(e).on("state_changes",(function(e){a.current.style.display="flex";var t=e.bytesTransferred/e.totalBytes*100;i.current.style.height="".concat(t,"%")}),(function(e){}),(function(){var e={message:"https://firebasestorage.googleapis.com/v0/b/".concat(c.bucket,"/o/").concat(n,"%2F").concat(E,".wav?alt=media"),reaction:"",msgdate:d.a.firestore.Timestamp.now(),msgid:u.collection("conversations").doc().id,read:!1,senderid:t.uid,editing:!1,nobackground:!0,emoji:!0,base64:!1,audio:!0};u.collection("conversations").doc(n).update({messages:d.a.firestore.FieldValue.arrayUnion(e)}),a.current.style.display="none"}))}))}}}}),N?Object(O.jsxs)("div",{class:"spinner-wave",onClick:function(){D(0),A(),S(!1),clearInterval(P)},children:[Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("span",{className:"time",children:R}),Object(O.jsx)(L,{color:o,className:"left fal fa-times-circle",onClick:function(){return F(!0),void A()}})]}):Object(O.jsx)(L,{color:o,className:"icondiv fal fa-microphone",onClick:function(){V()}})]})},B=E.a.button(A||(A=Object(y.a)(["\n&:hover {\n  background-color: ","\n}\n"])),(function(e){return e.color})),M=E.a.i(U||(U=Object(y.a)(["\ncolor: ",";\n\n"])),(function(e){return e.color})),P=E.a.i(I||(I=Object(y.a)(["\ncolor: ",";\nz-index: 10;\nbackground-color: white;\n&:hover {\n  color: white;\n  background-color:  ",";\n}\n"])),(function(e){return e.color}),(function(e){return e.color})),z=E.a.span(R||(R=Object(y.a)(["\n&:hover {\n  background-color: ","\n}\n"])),(function(e){return e.color}));var V=function(e){var t=e.inputref,c=e.progresswidth,n=e.progressbar,a=e.convoid,i=(e.setImg,e.sendFile),o=e.special,r=e.icon,l=e.type,d=e.classNames,j=e.setState,u=e.state,b=e.lnk,f=e.setState2,x=e.handleEvent,p=Object(s.useContext)(h).themecolor;return Object(O.jsx)(O.Fragment,{children:l&&"link"===l?Object(O.jsx)(m.b,{to:b,id:"sth",onClick:function(){f(!1),setTimeout((function(){j(!1)}),400)},children:Object(O.jsx)(z,{color:p,className:"icondiv ".concat(d),children:Object(O.jsx)(M,{color:p,className:" fal fa-"+r})})}):o?Object(O.jsx)("label",{style:{zIndex:4,cursor:"pointer"},children:"microphone"===l?Object(O.jsx)(D,{convoid:a,progressbar:n,progresswidth:c}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("input",{type:l,ref:t,className:"".concat(r,"file"),style:{display:"none"},onChange:function(){return i(r)},accept:"image"===r?"image/*":"film"===r?'"video/mp4,video/x-m4v,video/*, mp4"':""}),Object(O.jsx)(P,{color:p,className:"icondiv fal fa-"+r})]})}):Object(O.jsx)(B,{color:p,className:"icondiv ".concat(d),onClick:function(){j&&j(!u),x&&x()},children:Object(O.jsx)(M,{color:p,className:" fal fa-"+r})})})};c(155);var q=function(e){var t=e.link,c=e.type;return Object(O.jsx)(O.Fragment,{children:"video"===c?Object(O.jsx)("video",{controls:!0,src:t,allowFullScreen:!0}):Object(O.jsx)("iframe",{src:t,allowFullScreen:!0})})};var _=function(e){var t=e.src,c=e.link;return Object(O.jsxs)(O.Fragment,{children:[c?Object(O.jsx)("span",{style:{fontSize:"0px",position:"absolute"},children:t}):"",Object(O.jsx)("img",{src:t})]})};var H=function(e){var t=e.link,c=e.name;return Object(O.jsxs)("a",{href:t,target:"_blank",className:"file",children:[Object(O.jsx)("i",{className:"fal fa-file",children:" "}),Object(O.jsxs)("span",{children:["Download ",c]})]})};var G,W=function(e){var t=e.src,c=Object(s.useRef)(),n=Object(s.useRef)(),a=Object(s.useRef)();Object(s.useState)(!1);var i=Object(s.useState)(""),o=Object(l.a)(i,2),r=o[0],d=o[1];return Object(O.jsxs)("div",{className:"videoContainer",children:[Object(O.jsx)("video",{onLoadedData:function(){return d(c.current.duration.toFixed(1))},onTimeUpdate:function(){return function(){var e=c.current.currentTime/c.current.duration;d((c.current.duration-c.current.currentTime).toFixed(1)),a.current.style.width=100*e+"%",c.current.ended&&(n.current.className="fal fa-play")}()},src:t,id:"video",ref:c}),Object(O.jsxs)("div",{className:"controls",children:[Object(O.jsx)("i",{className:"fal fa-play",ref:n,onClick:function(e){return function(e){c.current.paused?(c.current.play(),e.target.className="fal fa-pause"):(c.current.pause(),e.target.className="fal fa-play")}(e)}}),Object(O.jsx)("div",{className:"progressvideo",children:Object(O.jsx)("div",{className:"progress",ref:a})}),Object(O.jsx)("small",{children:function(e){return e>60?(e/60).toFixed(0)+" m":e>3600?(e/3600).toFixed(1)+" h":Math.round(e)+" s"}(r)})]})]})},J=c(48),K=c(67),Y=c(68),X=c.n(Y);function Q(e){var t=e.search,c=e.setSearch,s=e.fetchData,n=e.setTitle;return Object(O.jsx)("form",{className:"gif-search flexrow",onSubmit:function(e){e.preventDefault(),n(t),s(t),c("")},children:Object(O.jsxs)("div",{className:"gifform flexrow",children:[Object(O.jsx)("button",{className:"themeBtn",children:Object(O.jsx)("i",{className:"fal fa-search"})}),Object(O.jsx)("input",{className:"inputgif",type:"text",value:t,onChange:function(e){c(e.target.value)},placeholder:"Search GIFs"})]})})}var $=E.a.button(G||(G=Object(y.a)([" \nbackground-color: ",";\nborder: solid 3px transparent;\n  &:hover {\n    background-color: white;\n    border: solid 3px ","\n  }\n"])),(function(e){return e.color}),(function(e){return e.color}));var Z=function(e){var t=Object(s.useContext)(h).themecolor,c=e.state,n=e.setState,a=e.type,i=e.text;return Object(O.jsx)($,{color:t,className:c===a?"themeBtn active":"themeBtn",onClick:function(){return n(a)},children:i})};function ee(e){var t=e.setGif,c=e.convoid,s=e.chatuser,a=e.notifibool,i=(e.chatimg,n.a.useState([])),o=Object(l.a)(i,2),r=o[0],j=o[1],b=n.a.useState("Gif"),m=Object(l.a)(b,2),f=m[0],h=m[1],x=n.a.useState(!0),p=Object(l.a)(x,2),g=p[0],v=p[1],y=n.a.useState(0),N=Object(l.a)(y,2),S=N[0],k=N[1],w=n.a.useState(10),C=Object(l.a)(w,2),F=C[0],E=(C[1],n.a.useState(0)),T=Object(l.a)(E,2),L=(T[0],T[1]),A=n.a.useState(""),U=Object(l.a)(A,2),I=U[0],R=U[1],D=n.a.useState(!1),B=Object(l.a)(D,2),M=B[0],P=B[1],z=n.a.useState(!1),V=Object(l.a)(z,2),q=V[0],_=V[1],H=n.a.useState([]),G=Object(l.a)(H,2),W=G[0],Y=(G[1],d.a.firestore.FieldValue.serverTimestamp()),$=d.a.auth().currentUser,Z=function(){var e=Object(K.a)(Object(J.a)().mark((function e(t){var c,s,n;return Object(J.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="https://api.giphy.com/v1/gifs/search?q=".concat(t,"&api_key=nn7ZohI4KJCwSXdYVpViEi7RkUmJacV3&limit=").concat(F,"&offset=").concat(S),e.prev=1,e.next=4,X()(c);case 4:return s=e.sent,e.next=7,s;case 7:200===(n=e.sent).status&&(j(n.data.data),L(n.data.pagination.total_count),v(!1),te(),M&&(P(!1),k(0)),_(!1)),e.next=15;break;case 11:if(e.prev=11,e.t0=e.catch(1),!e.t0){e.next=15;break}throw e.t0;case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();n.a.useEffect((function(){M||Z(f)}),[S]);var ee=function(){window.scrollTo({top:0,left:0,behavior:"smooth"})};var te=function(){switch(!0){case g:return Object(O.jsx)("div",{children:"Loading..."});case r.length>0:return r.map((function(e){return Object(O.jsx)("div",{className:"gif-card",children:Object(O.jsx)("img",{className:"image",onClick:function(){return function(e){var t={message:e,reaction1:"",reaction2:"",msgdate:d.a.firestore.Timestamp.now(),msgid:u.collection("conversations").doc().id,read:!1,senderid:$.uid,editing:!1,nobackground:!0,emoji:!0,base64:!0};u.collection("conversations").doc(c).update({lastmsgdate:Y,messages:d.a.firestore.FieldValue.arrayUnion(t)});var n={notifimsg:e,notifidate:d.a.firestore.Timestamp.now(),read:!1,sender:$.displayName,gif:!0,id:c,senderid:$.uid,notifiid:u.collection("users").doc().id};a&&u.collection("notifications").doc(s).update({notifications:d.a.firestore.FieldValue.arrayUnion(n)})}(e.images.fixed_height.url)},src:e.images.fixed_width.url,alt:"gif"})},e.id)}));default:return r}};return Object(O.jsxs)("div",{className:"gif bs",children:[Object(O.jsxs)("header",{children:[Object(O.jsx)("i",{className:"fal fa-times",onClick:function(){return t(!1)}}),Object(O.jsx)("h2",{children:"Search GIFs"}),Object(O.jsx)(Q,{search:I,setSearch:R,fetchData:Z,setTitle:h})]}),Object(O.jsxs)("div",{className:"gif-wrap",children:[q?Object(O.jsx)("div",{className:"gif-trend-search",children:Object(O.jsx)("ul",{children:W.map((function(e,t){return Object(O.jsxs)("li",{children:[Object(O.jsx)("strong",{children:t+1})," ",e.toUpperCase()]},t)}))})}):"",te()]}),Object(O.jsxs)("div",{className:"flexrow np-btn",children:[Object(O.jsx)("button",{className:"themeBtn flex",s:!0,onClick:function(){v(!0),k(S-F),ee()},children:Object(O.jsx)("i",{class:"fad fa-backward"})}),Object(O.jsx)("button",{className:"themeBtn flex",onClick:function(){v(!0),k(S+F),ee()},children:Object(O.jsx)("i",{class:"fad fa-forward"})})]})]})}var te=c(161);c(154);var ce=function(e){e.text;var t=e.classNames,c=e.icon,s=e.function1,n=e.setState,a=e.re;return Object(O.jsx)("div",{className:t,ref:a&&a,onClick:function(e){n&&n((function(e){return!e})),e.stopPropagation(),s&&s()},children:Object(O.jsx)("i",{className:c})})};c(132);var se=function(e){var t=e.msg,c=e.user,n=e.msgs,a=e.convoid,i=Object(s.useState)(!1),o=Object(l.a)(i,2),r=o[0],d=o[1],j=Object(s.useState)(!1),b=Object(l.a)(j,2),m=b[0],f=b[1],h=Object(s.useState)(""),x=Object(l.a)(h,2),p=x[0],g=x[1],v=[{class:"smile-wink yellow",msg:"Wink"},{class:"kiss-beam red",msg:"Love"},{class:"grin-stars yellow",msg:"Stars"},{class:"grin-squint-tears yellow",msg:"Laugh"},{class:"frown red",msg:"Frown"},{class:"heart red",msg:"Like"}],y=v&&v.map((function(e){return Object(O.jsx)("i",{className:"fad fa-"+e.class,onClick:function(){var t;t=e.class,n&&n.map((function(e){if(p===e.msgid){var s=n.indexOf(e);e.senderid===c.uid?(n[s].reaction1="fad fa-".concat(t),u.collection("conversations").doc(a).update({messages:n})):(n[s].reaction2="fad fa-".concat(t),u.collection("conversations").doc(a).update({messages:n}))}})),d(!1)}})})),N=Object(s.useRef)(),S=Object(s.useRef)(),k=Object(s.useRef)();return document.addEventListener("click",(function(e){e.target!==k.current&&(d(!1),f(!1))})),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("i",{ref:k,onClick:function(e){g(t.msgid),d(!r)},className:t.senderid===c.uid?"fal fa-ellipsis-v-alt rightdots":"fal fa-ellipsis-v-alt leftdots"}),Object(O.jsxs)("div",{onContextMenu:function(e){return e.preventDefault()},onClick:function(e){return e.stopPropagation()},className:"flexrow optionsEdit",ref:N,"data-id":t.msgid,style:{display:r?"flex":"none"},children:[Object(O.jsxs)("div",{className:"emojisdiv",children:[Object(O.jsx)(ce,{classNames:"laugn",icon:"fad fa-laugh",setState:f,re:S}),Object(O.jsx)("div",{onClick:function(e){return e.stopPropagation()},className:"emojisrow flexrow bs",style:{display:m?"flex":"none",zIndex:"var(--high-priority)"},children:y})]}),Object(O.jsx)(ce,{classNames:"copy",icon:"fad fa-copy",function1:function(){return function(){var e=document.createRange(),t=document.querySelector("#".concat(p," .msg"));t&&(e.selectNode(t),window.getSelection().removeAllRanges(),window.getSelection().addRange(e),document.execCommand("copy"),window.getSelection().removeAllRanges(),d(!1))}()}}),Object(O.jsx)(ce,{classNames:"delete",icon:"fad fa-trash",function1:function(){n&&n.map((function(e){if(p===e.msgid&&e.senderid===c.uid){var t=n.indexOf(e);n.splice(t,1),u.collection("conversations").doc(a).update({messages:n}),d(!1)}}))}})]})]})},ne=c(72),ae=(c(148),c(73)),ie=c.n(ae);var oe=function(e){var t=Object(s.useContext)(h),c=t.themecolor,n=t.notifi,a=t.setNotifi,i=t.notificont,o=t.setNotificont,r=Object(s.useState)(!1),j=Object(l.a)(r,2),b=j[0],x=j[1],p=Object(s.useState)([]),g=Object(l.a)(p,2),v=g[0],y=g[1],N=Object(s.useState)(""),S=Object(l.a)(N,2),w=S[0],F=S[1],E=Object(s.useState)(0),T=Object(l.a)(E,2),L=(T[0],T[1]),A=Object(s.useState)(!1),U=Object(l.a)(A,2),I=U[0],R=U[1],D=Object(s.useState)(!1),B=Object(l.a)(D,2),M=(B[0],B[1],Object(s.useState)("")),P=Object(l.a)(M,2),z=(P[0],P[1],Object(s.useState)(!1)),G=Object(l.a)(z,2),J=(G[0],G[1]),K=Object(s.useState)(""),Y=Object(l.a)(K,2),X=(Y[0],Y[1]),Q=Object(s.useState)(""),$=Object(l.a)(Q,2),Z=($[0],$[1]),ce=Object(s.useState)(""),ae=Object(l.a)(ce,2),oe=(ae[0],ae[1]),re=Object(s.useState)(""),le=Object(l.a)(re,2),de=(le[0],le[1]),je=Object(s.useState)(""),ue=Object(l.a)(je,2),be=ue[0],me=ue[1],fe=Object(s.useState)(""),Oe=Object(l.a)(fe,2),he=(Oe[0],Oe[1]),xe=Object(s.useState)(!1),pe=Object(l.a)(xe,2),ge=pe[0],ve=pe[1],ye=Object(s.useState)(!1),Ne=Object(l.a)(ye,2),Se=Ne[0],ke=Ne[1],we=Object(s.useState)({top:0,left:0}),Ce=Object(l.a)(we,2),Fe=Ce[0],Ee=(Ce[1],Object(s.useState)(!0)),Te=Object(l.a)(Ee,2),Le=Te[0],Ae=Te[1],Ue=Object(s.useState)(""),Ie=Object(l.a)(Ue,2),Re=Ie[0],De=Ie[1],Be=Object(s.useState)(!0),Me=Object(l.a)(Be,2),Pe=Me[0],ze=Me[1],Ve=Object(s.useState)(!0),qe=Object(l.a)(Ve,2),_e=qe[0],He=qe[1],Ge=Object(s.useState)(""),We=Object(l.a)(Ge,2),Je=We[0],Ke=We[1],Ye=Object(s.useState)(""),Xe=Object(l.a)(Ye,2),Qe=(Xe[0],Xe[1]),$e=Object(s.useState)(!1),Ze=Object(l.a)($e,2),et=(Ze[0],Ze[1]),tt=Object(s.useState)(""),ct=Object(l.a)(tt,2),st=ct[0],nt=ct[1],at=Object(s.useState)(!1),it=Object(l.a)(at,2),ot=(it[0],it[1],Object(s.useState)("")),rt=Object(l.a)(ot,2),lt=rt[0],dt=rt[1],jt=Object(s.useState)(""),ut=Object(l.a)(jt,2),bt=ut[0],mt=ut[1],ft=Object(s.useState)(""),Ot=Object(l.a)(ft,2),ht=Ot[0],xt=Ot[1],pt=Object(s.useState)(""),gt=Object(l.a)(pt,2),vt=gt[0],yt=gt[1],Nt=Object(s.useState)(""),St=Object(l.a)(Nt,2),kt=(St[0],St[1]),wt=Object(s.useState)(""),Ct=Object(l.a)(wt,2),Ft=(Ct[0],Ct[1]),Et=Object(s.useState)(""),Tt=Object(l.a)(Et,2),Lt=Tt[0],At=Tt[1],Ut=Object(s.useState)([]),It=Object(l.a)(Ut,2),Rt=It[0],Dt=It[1],Bt=Object(s.useState)(!1),Mt=Object(l.a)(Bt,2),Pt=Mt[0],zt=Mt[1],Vt=e.chatuser,qt=e.setState,_t=e.icon,Ht=e.type,Gt=e.diag.messages,Wt=e.diag.convoinfo,Jt=Wt.convoid,Kt=Wt.creatorid,Yt=Wt.recipientid,Xt=d.a.auth().currentUser,Qt=d.a.firestore.FieldValue.serverTimestamp(),$t=Object(s.useRef)(),Zt=(u.collection("users").doc().id,/((?:(?!(?:https?|ftp):\/\/[\S]*\.(?:png|jpe?g|gif|svg|webp)).)+)|((?:https?|ftp):\/\/[\S]*\.(?:png|jpe?g|gif|svg|webp)(?:\?\S+=\S*(?:&\S+=\S*)*)?)/gm),ec=/(?:https?|ftp):\/\/[\S]*\.(?:png|jpe?g|gif|svg|webp)/g;function tc(e){return!!e.match(/(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?/)&&RegExp.$1}function cc(e){if(e.base64)return Object(O.jsx)(_,{src:e.message,link:!0});if(e.file)return Object(O.jsx)(H,{name:e.name,link:e.message});if(e.audio)return Object(O.jsx)(W,{src:e.message});if(e.video)return Object(O.jsx)(q,{type:"video",link:e.message});if(tc(e.message))return Object(O.jsx)(q,{link:"https://www.youtube.com/embed/"+tc(e.message)});var t=e.message.replace(Zt,(function(e,t,c){return t?"<p>".concat(t.trim(),"</p>"):'<img src="'.concat(c,'"/>')}));return Object(O.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})}function sc(e){return Xt.uid===e.senderid?e.file?"msg file":e.video?"msg video":e.audio?"msg audio":e.emoji?"msg emojimsg":e.nobackground?"no-bg msg":tc(e.message)?"msg youtube":"msg":e.file?"msg file trans":e.video?"msg video trans":e.audio?"msg audio trans":e.emoji?"msg emojimsg trans":e.nobackground?"no-bg msg trans":tc(e.message)?"msg youtube trans":"msg trans"}var nc=Object(s.useState)(!1),ac=Object(l.a)(nc,2);ac[0],ac[1];var ic=Object(s.useState)(!1),oc=Object(l.a)(ic,2),rc=oc[0],lc=oc[1],dc=Object(s.useRef)(),jc=Object(s.useState)(""),uc=Object(l.a)(jc,2),bc=(uc[0],uc[1]),mc=Gt&&Gt.slice(0).reverse().map((function(e){return Object(O.jsxs)("div",{id:e.msgid,className:e.senderid===Xt.uid?"right m":"left m",onContextMenu:function(e){return function(e){var t=document.querySelector(".contextmenu");t.getBoundingClientRect();if(e.preventDefault(),mt(e.currentTarget.getAttribute("id")),ke(!0),"small"===Ht)t.style.top="".concat(e.pageY-201,"px"),t.style.left="".concat(0,"px");else{t.getBoundingClientRect();t.style.top="".concat(e.pageY-200,"px"),t.style.left="".concat(e.pageX-150,"px")}""===!st&&yc()}(e)},children:[Object(O.jsxs)("div",{className:"flex",children:[Object(O.jsxs)("p",{className:sc(e),contentEditable:!1,style:e.nobackground||e.emoji||tc(e.message)?{backgroundColor:"transparent"}:e.senderid===Xt.uid?{backgroundColor:Je}:null,onClick:function(e){return function(e){e.target.querySelector(".controls");var t=e.target.closest("VIDEO"),c=(e.target.querySelector(".fa-play"),e.target.closest("IMG"));if(c&&e.currentTarget.contains(c)){lc(!0);var s=document.querySelector(".modal img");bc(c.getAttribute("src")),s.setAttribute("src",c.getAttribute("src"))}t&&e.currentTarget.contains(t)}(e)},children:["    ",cc(e)]}),Object(O.jsx)(se,{msgs:v,user:Xt,msg:e,convoid:Jt}),Object(O.jsx)("small",{className:e.senderid===Xt.uid?"alignRight elapsedtime":"alignLeft elapsedtime",children:Object(O.jsx)(te.a,{date:e.msgdate.toDate()})}),Object(O.jsxs)("div",{className:"reaction",style:{display:e.reaction1||e.reaction2?"flex":"none",width:""===e.reaction1||""===e.reaction2?"22px":"42px"},children:[Object(O.jsx)("i",{className:"fad fa-heart"===e.reaction1?"emoj fas fa-"+e.reaction1:"emoj fad fa-"+e.reaction1}),Object(O.jsx)("i",{style:{marginLeft:""===e.reaction2?"":"5px"},className:"fad fa-heart"===e.reaction2?"emoj fas fa-"+e.reaction2:"emoj fad fa-"+e.reaction2})]})]}),Object(O.jsx)("img",{src:e.senderid===Xt.uid?be:vt,alt:""})]})})),fc=Object(s.useRef)(),Oc=Object(s.useRef)(),hc=Object(s.useState)(),xc=Object(l.a)(hc,2),pc=(xc[0],xc[1],Object(s.useRef)());function gc(e){var t=document.querySelector(".".concat(e,"file")).files[0];if(t){var c=t.name.lastIndexOf(".")+1,s=t.name.substr(c,t.name.length).toLowerCase(),n=d.a.storage().ref("".concat(Jt,"/").concat(t.name));n.put(t).on("state_changes",(function(e){fc.current.style.display="flex";var t=e.bytesTransferred/e.totalBytes*100;Oc.current.style.height="".concat(t,"%")}),(function(e){}),(function(){if("image"===e)if("jpg"===s||"jpeg"===s||"png"===s){var c={message:"https://firebasestorage.googleapis.com/v0/b/".concat(n.bucket,"/o/").concat(Jt,"%2F").concat(t.name,"?alt=media"),reaction1:"",reaction2:"",msgdate:d.a.firestore.Timestamp.now(),msgid:u.collection("conversations").doc().id,read:!1,senderid:Xt.uid,editing:!1,nobackground:!0,emoji:!0,base64:!0},i={notifimsg:"https://firebasestorage.googleapis.com/v0/b/".concat(n.bucket,"/o/").concat(Jt,"%2F").concat(t.name,"?alt=media"),notifidate:d.a.firestore.Timestamp.now(),read:!1,sender:Xt.displayName,base64:!0,id:Jt,senderid:Xt.uid,notifiid:u.collection("users").doc().id};Le&&u.collection("notifications").doc(Vt).update({notifications:d.a.firestore.FieldValue.arrayUnion(i)}),u.collection("conversations").doc(Jt).update({lastmsgdate:Qt,messages:d.a.firestore.FieldValue.arrayUnion(c)})}else a(!0),o({emoji:"fal fa-exclamation-circle",msg:"Only Images are allowed!"}),setTimeout((function(){a(!1)}),300500);else if("paperclip"===e){var r={message:"https://firebasestorage.googleapis.com/v0/b/".concat(n.bucket,"/o/").concat(Jt,"%2F").concat(t.name,"?alt=media"),reaction1:"",reaction2:"",msgdate:d.a.firestore.Timestamp.now(),msgid:u.collection("conversations").doc().id,read:!1,senderid:Xt.uid,editing:!1,nobackground:!0,emoji:!0,file:!0,name:t.name,base64:!1},l={notifimsg:"https://firebasestorage.googleapis.com/v0/b/".concat(n.bucket,"/o/").concat(Jt,"%2F").concat(t.name,"?alt=media"),notifidate:d.a.firestore.Timestamp.now(),read:!1,sender:Xt.displayName,file:!0,id:Jt,senderid:Xt.uid,notifiid:u.collection("users").doc().id};Le&&u.collection("notifications").doc(Vt).update({notifications:d.a.firestore.FieldValue.arrayUnion(l)}),u.collection("conversations").doc(Jt).update({lastmsgdate:Qt,messages:d.a.firestore.FieldValue.arrayUnion(r)})}else if("microphone"===e);else if("film"===e){var j={message:"https://firebasestorage.googleapis.com/v0/b/".concat(n.bucket,"/o/").concat(Jt,"%2F").concat(t.name,"?alt=media"),reaction1:"",reaction2:"",msgdate:d.a.firestore.Timestamp.now(),msgid:u.collection("conversations").doc().id,read:!1,senderid:Xt.uid,editing:!1,nobackground:!0,emoji:!0,video:!0},b={notifimsg:"https://firebasestorage.googleapis.com/v0/b/".concat(n.bucket,"/o/").concat(Jt,"%2F").concat(t.name,"?alt=media"),notifidate:d.a.firestore.Timestamp.now(),read:!1,sender:Xt.displayName,video:!0,id:Jt,senderid:Xt.uid,notifiid:u.collection("users").doc().id};Le&&u.collection("notifications").doc(Vt).update({notifications:d.a.firestore.FieldValue.arrayUnion(b)}),u.collection("conversations").doc(Jt).update({lastmsgdate:Qt,messages:d.a.firestore.FieldValue.arrayUnion(j)})}fc.current.style.display="none"}))}}var vc=[{icon:"image",type:"file"},{icon:"film",type:"file"},{icon:"paperclip",type:"file"},{icon:"microphone",type:"microphone"}].map((function(e){return Object(O.jsx)(V,{progressbar:fc,progresswidth:Oc,classNames:"",icon:e.icon,type:e.type,special:!0,sendFile:gc,convoid:Jt,inputref:pc})}));function yc(){v&&v.map((function(e){if(bt===e.msgid){var t=v.indexOf(e);v[t].message=st,u.collection("conversations").doc(Jt).update({messages:v})}}))}var Nc=Object(s.useRef)();function Sc(){Nc.current.scrollIntoView({behavior:"smooth",block:"start"});if(null!=w.match(ec)){var e={message:w,reaction1:"",reaction2:"",msgdate:d.a.firestore.Timestamp.now(),msgid:u.collection("conversations").doc().id,read:!1,senderid:Xt.uid,editing:!1,nobackground:!0,emoji:!1};u.collection("conversations").doc(Jt).update({lastmsgdate:Qt,messages:d.a.firestore.FieldValue.arrayUnion(e)});var t={notifimsg:w,notifidate:d.a.firestore.Timestamp.now(),read:!1,sender:Xt.displayName,id:Jt,senderid:Xt.uid,notifiid:u.collection("users").doc().id};if(!Le)return null;u.collection("notifications").doc(Vt).update({notifications:d.a.firestore.FieldValue.arrayUnion(t)}),F(""),$t.current.setAttribute("style","height: 50px")}else if(w.replace(/\s/g,"").length){var c={message:w,reaction1:"",reaction2:"",msgdate:d.a.firestore.Timestamp.now(),msgid:u.collection("conversations").doc().id,read:!1,senderid:Xt.uid,editing:!1,nobackground:!1,emoji:!1},s={notifimsg:w,notifidate:d.a.firestore.Timestamp.now(),read:!1,sender:Xt.displayName,id:Jt,senderid:Xt.uid,notifiid:u.collection("users").doc().id};Le&&u.collection("notifications").doc(Vt).update({notifications:d.a.firestore.FieldValue.arrayUnion(s)}),u.collection("conversations").doc(Jt).update({lastmsgdate:d.a.firestore.Timestamp.now(),messages:d.a.firestore.FieldValue.arrayUnion(c)}),F(""),$t.current.setAttribute("style","height: 50px")}}var kc=Object(s.useRef)(),wc=Object(s.useState)(1),Cc=Object(l.a)(wc,2),Fc=Cc[0],Ec=Cc[1];function Tc(e){"in"===e.type?Ec((function(e){return e+.1})):Fc>1&&Ec((function(e){return e-.1}))}return Object(s.useEffect)((function(){var e=setInterval((function(){L((function(e){return e+1}))}),6e4);return function(){clearInterval(e)}}),[]),Object(s.useEffect)((function(){var e=setInterval((function(){R(!1)}),4e3);return function(){clearInterval(e)}}),[I]),Object(s.useEffect)((function(){u.collection("users").doc(Kt).onSnapshot((function(e){var t=e.data();X(t.userinfo.name),Z(t.userinfo.cover),oe(t.userinfo.city),de(t.userinfo.country)})),u.collection("users").doc(Yt).onSnapshot((function(e){var t=e.data();me(t.userinfo.cover),he(t.userinfo.name)})),u.collection("users").doc(Vt).onSnapshot((function(e){var t=e.data();xt(t.userinfo.name),yt(t.userinfo.cover),kt(t.userinfo.city),Ft(t.userinfo.country),At(t.online),J(t.userinfo.online),He(!1)}))}),[Kt,Yt,Vt]),Object(s.useEffect)((function(){u.collection("users").doc(Xt.uid).onSnapshot((function(e){var t=e.data();Ke(t.customization.color),me(t.userinfo.cover)}))}),[Je,Vt]),Object(s.useEffect)((function(){u.collection("users").doc(Vt).onSnapshot((function(e){var t=e.data();Qe(t.customization.chatcolor)}))}),[Vt]),Object(s.useEffect)((function(){u.collection("conversations").doc(Jt).get().then((function(t){var c=t.data();y(c.messages),ze(!1),dt(c.customizedconvo.theme),De(c.customizedconvo.emoji),Xt.uid===e.diag.convoinfo.creatorid?(Ae(c.notifications2),Dt(c.nickname1)):(Ae(c.notifications1),Dt(c.nickname2))}))}),[Jt]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"top br-l",children:[Object(O.jsxs)("div",{className:"profilepic",children:[Object(O.jsx)("div",{className:"relative",children:_e?Object(O.jsx)("div",{className:"loader blue reloader",children:Object(O.jsxs)("div",{class:"lds-ring",children:[Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{})]})}):[Object(O.jsx)("img",{src:vt,alt:""}),Object(O.jsx)("div",{className:"notifi",style:{backgroundColor:Lt?"rgb(44, 255, 44)":"#FF3D3D"}})]}),Object(O.jsxs)("div",{children:[""===Rt?Object(O.jsx)("p",{className:"username",children:ht.length>15?ht.slice(0,15)+"...":ht}):Object(O.jsx)("p",{className:"username",children:Rt}),Object(O.jsx)("small",{children:Lt?"Online":"Offline"})]})]}),Object(O.jsxs)("div",{className:"controls",children:[Object(O.jsx)("i",{class:"fal fa-phone-alt",style:{color:c}}),Object(O.jsx)("i",{class:"fal fa-video",style:{color:c}}),_t&&"fal fa-times"===_t?Object(O.jsx)("i",{className:_t,style:{padding:"0 5px",color:c},onClick:function(){return qt(!1)}}):Object(O.jsx)(m.b,{exact:!0,to:"/chatsettings/"+Jt,children:Object(O.jsx)("i",{style:{padding:"0 5px",color:c},class:"fal fa-ellipsis-v"})})]})]}),Object(O.jsx)(f.b,{render:function(e){e.location;return Object(O.jsx)("div",{className:lt?"https://i.imgur.com/4hzNTTq.png"===lt?"msgs black":"msgs":"msgs black",style:lt?{backgroundImage:"url("+lt+")"}:{backgroundImage:"url(https://i.imgur.com/4hzNTTq.png)"},children:Object(O.jsxs)("div",{className:"grid",children:[Object(O.jsx)("div",{className:"scrollto",ref:Nc}),Pe?Object(O.jsx)("div",{className:Pe?"loader opa":"loader",children:Object(O.jsxs)("div",{class:"lds-ring",children:[Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{})]})}):mc]})})}}),Object(O.jsxs)("div",{className:"search whiteb br-l",children:[Object(O.jsxs)("div",{className:"plus",children:[Object(O.jsx)("i",{class:ge?"fal fa-minus":"fal fa-plus",style:{color:c},onClick:function(){return ve(!ge)}}),Object(O.jsx)(k.a,{in:ge,timeout:300,classNames:"iconshover",unmountOnExit:!0,children:Object(O.jsxs)("div",{className:"icons",children:[vc,Object(O.jsx)("span",{className:"uploader bs",ref:fc,children:Object(O.jsx)("span",{className:"percent",ref:Oc})})]})})]}),Object(O.jsxs)("div",{className:"textarea flexrow",children:[Object(O.jsx)("textarea",{type:"text",placeholder:"Send a message...",onKeyUp:function(e){return function(e){13!==e.keyCode||e.shiftKey||(e.preventDefault(),Sc())}(e)},ref:$t,value:w,onChange:function(e){F(e.target.value)},onInput:function(){}}),Object(O.jsxs)("div",{className:"gif_emoji",children:[Object(O.jsx)("i",{className:"fal fa-laugh",onClick:function(){$t.current.focus(),zt(!Pt)}}),Object(O.jsx)("i",{class:"fal fa-comment-alt-smile",onClick:function(){return x(!b)}})]})]}),Object(O.jsxs)("div",{className:"flexrow",children:[Object(O.jsx)("span",{role:"img","aria-label":"emoji",onClick:function(){return function(e){var t={message:e,reaction1:"",reaction2:"",msgdate:d.a.firestore.Timestamp.now(),msgid:u.collection("conversations").doc().id,read:!1,senderid:Xt.uid,editing:!1,nobackground:!1,emoji:!0};u.collection("conversations").doc(Jt).update({lastmsgdate:Qt,messages:d.a.firestore.FieldValue.arrayUnion(t)});var c={notifimsg:e,notifidate:d.a.firestore.Timestamp.now(),read:!1,sender:Xt.displayName,id:Jt,senderid:Xt.uid,notifiid:u.collection("users").doc().id};Le&&u.collection("notifications").doc(Vt).update({notifications:d.a.firestore.FieldValue.arrayUnion(c)}),F(""),$t.current.setAttribute("style","height: 50px")}(Re)},style:{cursor:"pointer"},children:Re}),Object(O.jsx)("i",{class:"fal fa-paper-plane",style:{color:c},onClick:function(){Sc(),zt(!1)}})]})]}),Object(O.jsx)(C,{setShowinput:et,editMsg:yc,setUpdatedMsg:nt,convoid:Jt,type:"msg",msgid:bt,setMsgid:mt,setContextmenu:ke,contextmenu:Se,contextstyle:Fe}),Object(O.jsx)(k.a,{in:b,unmountOnExit:!0,classNames:"gif",timeout:300,children:Object(O.jsx)(ee,{chatimg:vt,setGif:x,convoid:Jt,notifibool:Le,chatuser:Vt})}),Object(O.jsx)(k.a,{in:n,timeout:300,classNames:"displayerror",unmountOnExit:!0,children:Object(O.jsxs)("div",{className:"errormsg bs diagmsg",children:[Object(O.jsx)("i",{className:i.emoji,style:{position:"absolute",left:"20px"}})," ",Object(O.jsx)("p",{children:i.msg}),Object(O.jsx)("i",{className:"far fa-times",style:{color:c},onClick:function(){return a(!1)}})]})}),Object(O.jsx)(k.a,{in:rc,classNames:"modal",timeout:0,children:Object(O.jsxs)("div",{className:"modal overflowimgcontainer",children:[Object(O.jsxs)("div",{className:"buttons",children:[Object(O.jsx)("i",{className:"fal fa-search-minus",onClick:function(){return Tc({type:"out"})}}),Object(O.jsx)("i",{class:"fal fa-redo-alt",onClick:function(){return Ec(1)}}),Object(O.jsx)("i",{class:"fal fa-search-plus",onClick:function(){return Tc({type:"in"})}})]}),Object(O.jsx)(ne.a,{className:"grabbercontainer",hideScrollbars:!0,children:Object(O.jsx)("img",{src:"",alt:"",ref:dc,style:{width:100*Fc+"%",height:100*Fc+"%"}})}),Object(O.jsx)("i",{className:"fal fa-times",onClick:function(){lc(!1),Ec(1)}})]})}),Object(O.jsx)(k.a,{in:Pt,classNames:"emojipicker",timeout:300,children:Object(O.jsxs)("div",{className:"emojipicker",ref:kc,onMouseOver:function(){return $t.current.focus()},onClick:function(){return $t.current.focus()},children:[Object(O.jsxs)("div",{className:"times",children:[" ",Object(O.jsx)("i",{className:"fal fa-times",onClick:function(){return zt(!1)}})]}),Object(O.jsx)(ie.a,{onEmojiClick:function(e,t){F(w+t.emoji)}})]})})]})};var re=function(e){var t=Object(s.useContext)(h).themecolor,c=(d.a.auth().currentUser,e.chatuser),n=e.diag.convoinfo,a=(n.convoid,n.creatorid,n.recipientid),i=Object(s.useState)(""),o=Object(l.a)(i,2),r=o[0],j=o[1],b=Object(s.useState)(""),m=Object(l.a)(b,2),f=m[0],x=m[1],p=Object(s.useState)(""),g=Object(l.a)(p,2),v=g[0],y=g[1],N=Object(s.useState)(""),S=Object(l.a)(N,2),w=S[0],C=S[1],F=Object(s.useState)(""),E=Object(l.a)(F,2),T=E[0],L=E[1],A=Object(s.useState)(""),U=Object(l.a)(A,2),I=U[0],R=U[1],D=Object(s.useState)(""),B=Object(l.a)(D,2),M=B[0],P=B[1],z=Object(s.useState)(""),V=Object(l.a)(z,2),q=V[0],_=V[1],H=Object(s.useState)(!1),G=Object(l.a)(H,2),W=G[0],J=G[1],K=Object(s.useState)(!1),Y=Object(l.a)(K,2),X=Y[0],Q=Y[1],$=Object(s.useState)(!0),Z=Object(l.a)($,2),ee=Z[0],te=Z[1];return Object(s.useEffect)((function(){u.collection("users").doc(c).onSnapshot((function(e){var t=e.data();j(t.userinfo.name),x(t.userinfo.cover),y(t.userinfo.city),C(t.userinfo.country),L(t.userinfo.job),R(t.userinfo.phone),P(t.userinfo.email),_(t.userinfo.website),Q(t.online),te(!1)}))}),[a,c]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"profilepic profilepiccol br-l",children:[Object(O.jsx)("div",{className:"relative",children:ee?Object(O.jsx)("div",{className:"loader blue reloader",children:Object(O.jsxs)("div",{class:"lds-ring",children:[Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{})]})}):[Object(O.jsx)("img",{src:f,alt:""}),Object(O.jsx)("div",{className:"notifi",style:{backgroundColor:X?"rgb(44, 255, 44)":"#FF3D3D"}})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{children:r.length>17?r.slice(0,17)+"...":r}),Object(O.jsxs)("small",{children:["Job: ",""===T?"Not provided":T]})]}),Object(O.jsx)("i",{className:"fal fa-cog",style:{color:t}})]}),Object(O.jsxs)("div",{className:"personalinfo br-l flex",children:[Object(O.jsxs)("div",{className:"flexrow",children:[Object(O.jsx)("p",{children:"Personal info"}),Object(O.jsx)("i",{className:W?"fal fa-chevron-up rotate":"fal fa-chevron-up",onClick:function(){return J(!W)}})]}),Object(O.jsx)(k.a,{in:W,classNames:"extended",timeout:0,unmountOnExit:!0,children:Object(O.jsxs)("div",{className:"extendoff",children:[Object(O.jsx)("hr",{}),Object(O.jsxs)("div",{className:"flex",children:[Object(O.jsxs)("div",{className:"flexrow flexinfo",children:[Object(O.jsx)("p",{children:"Phone #"})," ",Object(O.jsx)("p",{children:""===I?"N/A":I})]}),Object(O.jsxs)("div",{className:"flexrow flexinfo",children:[Object(O.jsx)("p",{children:"Email"}),Object(O.jsx)("p",{children:M})]}),Object(O.jsxs)("div",{className:"flexrow flexinfo",children:[Object(O.jsx)("p",{children:"Country"}),Object(O.jsx)("p",{children:""===w?"N/A":w})]}),Object(O.jsxs)("div",{className:"flexrow flexinfo",children:[Object(O.jsx)("p",{children:"City"}),Object(O.jsx)("p",{children:""===v?"N/A":v})]})]})]})})]}),Object(O.jsxs)("div",{className:"mutualcontacts br-l pdng flexrow",children:[Object(O.jsx)("i",{class:"fal fa-users"}),Object(O.jsx)("p",{children:"Mutual Contacts"}),Object(O.jsx)("i",{class:"fal fa-ellipsis-h-alt"})]}),Object(O.jsxs)("div",{className:"br-l pdng flexrow",children:["https://"===q.toLocaleLowerCase()?Object(O.jsx)("i",{class:"fal fa-external-link"}):Object(O.jsx)("a",{href:q,children:Object(O.jsx)("i",{class:"fal fa-external-link"})}),Object(O.jsx)("p",{children:"View Site"})]})]})};var le,de=function(e){var t=Object(s.useContext)(h).themecolor,c=e.allusers,n=e.setRecipientname,a=e.setRecipientid,i=e.recipientid,o=e.setMessage,r=e.sendMessage,d=e.msgpersonids,j=e.adduser,u=e.setAdduser,b=e.message,m=Object(s.useState)(""),f=Object(l.a)(m,2),x=f[0],p=f[1];function g(e){return d&&d.includes(e.uid)?Object(O.jsx)("i",{className:"fal fa-exclamation-circle"}):i===e.uid?Object(O.jsx)("i",{className:"fal fa-check slct"}):Object(O.jsx)("span",{className:"slct",style:{color:t,border:"solid 1px"+t},onMouseOver:function(e){return e.target.style.cssText="background-color:".concat(t,"; border: solid 1px transparent")},onMouseLeave:function(e){return e.target.style.cssText="background-color: transparent; border: solid 1px ".concat(t,"; color: ").concat(t)},children:"Select"})}var v=new RegExp("\\b"+x.replace(/[\W_]+/g,""),"i"),y=c&&c.map((function(e){if(v.test(e.userinfo.name.toLowerCase()))return Object(O.jsxs)("div",{className:d&&d.includes(e.uid)?"profilepic selected":"profilepic",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("img",{src:e.userinfo.cover?e.userinfo.cover:"https://www.gettyimages.ca/gi-resources/images/500px/983794168.jpg",alt:""}),Object(O.jsx)("p",{children:e.userinfo.name})]}),Object(O.jsx)("small",{onClick:d&&d.includes(e.uid)?function(){u(!j)}:function(){a(e.uid),n(e.userinfo.name)},className:i===e.uid?"usersrowselected":"",children:g(e)})]})}));return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"adduser",onClick:function(){return e.setAdduser()}}),Object(O.jsxs)("div",{className:"userlist bs",children:[Object(O.jsxs)("div",{className:"hd",children:[Object(O.jsx)("h2",{children:"Add Contact"}),Object(O.jsx)("div",{className:"search",children:Object(O.jsx)("input",{type:"text",placeholder:"Search",onChange:function(e){return p(e.target.value)}})})]}),Object(O.jsx)("div",{className:"overflow flex",children:y}),Object(O.jsxs)("div",{className:"search",children:[Object(O.jsx)("input",{type:"text",placeholder:"Send a message...",onChange:function(e){return o(e.target.value)},value:b}),Object(O.jsx)("button",{className:"themeBtn",onClick:function(){i?r():(o(""),u(!j))},style:{color:"white",border:"solid 3px transparent",backgroundColor:t},onMouseOver:function(e){return e.target.style.cssText="background-color: transparent; border: solid 3px ".concat(t,"; color: ").concat(t)},onMouseLeave:function(e){return e.target.style.cssText="background-color: ".concat(t,"; border: solid 3px transparent; color: white")},children:"Send Message"})]}),Object(O.jsx)("i",{className:"fal fa-times",onClick:function(){return e.setAdduser()},style:{color:t}})]})]})};var je=E.a.input(le||(le=Object(y.a)([" \n      &:valid {\n         border: solid 2px ","\n      }\n      &:focus {\n         border: solid 2px ","\n      }\n"])),(function(e){return e.color}),(function(e){return e.color}));var ue=function(e){var t=Object(s.useContext)(h).themecolor,c=e.disabled,n=e.determineDelete,a=e.updateProfile,i=e.age,o=e.setAge,r=e.name,l=e.setName,j=e.city,b=e.setCity,m=e.phonenumber,f=e.setPhonenumber,x=e.website,p=e.setWebsite,g=e.country,v=e.setCountry,y=d.a.auth().currentUser;return Object(O.jsxs)("div",{className:"inputs inps",children:[Object(O.jsxs)("label",{children:[Object(O.jsx)("span",{children:"Name"}),Object(O.jsx)(je,{type:"text",value:r,onChange:function(e){return l(e.target.value)},required:!0,placeholder:"Name",color:t})]}),Object(O.jsxs)("label",{children:[Object(O.jsx)("span",{children:"Age"}),Object(O.jsx)(je,{color:t,type:"number",value:i,onChange:function(e){return o(e.target.value)},min:"1",required:!0,placeholder:"Age"})]}),Object(O.jsxs)("label",{children:[Object(O.jsx)("span",{children:"Phone Number"}),Object(O.jsx)(je,{color:t,type:"number",value:m,onChange:function(e){return f(e.target.value)},required:!0,placeholder:"Phone Number"})]}),Object(O.jsxs)("label",{children:[Object(O.jsx)("span",{children:"City"}),Object(O.jsx)(je,{color:t,type:"text",value:j,onChange:function(e){return b(e.target.value)},required:!0,placeholder:"City"})]}),Object(O.jsxs)("label",{children:[Object(O.jsx)("span",{children:"Country"}),Object(O.jsx)(je,{color:t,type:"text",value:g,onChange:function(e){return v(e.target.value)},required:!0,placeholder:"Country"})]}),Object(O.jsxs)("label",{children:[Object(O.jsx)("span",{children:"Website URL"}),Object(O.jsx)(je,{color:t,type:"text",value:x,onChange:function(e){return p(e.target.value)},required:!0,placeholder:"https://example.com"})]}),Object(O.jsx)("label",{className:"btnContainer",children:Object(O.jsx)("button",{className:"themeBtn",onClick:function(){return a()},style:{color:"white",border:"solid 3px transparent",backgroundColor:t},onMouseOver:function(e){return e.target.style.cssText="background-color: transparent; border: solid 3px ".concat(t,"; color: ").concat(t)},onMouseLeave:function(e){return e.target.style.cssText="background-color: ".concat(t,"; border: solid 3px transparent; color: white")},children:"Save"})}),Object(O.jsxs)("label",{children:[Object(O.jsx)("span",{children:Object(O.jsx)("strong",{children:"Delete Account"})}),Object(O.jsx)(je,{color:t,required:!0,onChange:function(e){return n(e)},placeholder:"Type in "+y.displayName+" to delete account."}),Object(O.jsxs)("small",{children:["Key: ",y.displayName]}),Object(O.jsx)("button",{disabled:c,className:"themeBtn warning",onClick:function(){return u.collection("users").doc(y.uid).delete(),u.collection("notifications").doc(y.uid).delete(),void y.delete().then((function(){})).catch((function(e){}))},children:"Delete Account"})]})]})};var be=function(e){var t=d.a.auth().currentUser,c=Object(s.useState)(""),n=Object(l.a)(c,2),a=(n[0],n[1],Object(s.useState)("")),i=Object(l.a)(a,2),o=i[0],r=i[1],j=Object(s.useState)(""),b=Object(l.a)(j,2),m=b[0],f=b[1],x=Object(s.useState)(""),p=Object(l.a)(x,2),g=p[0],v=p[1],y=Object(s.useState)(""),N=Object(l.a)(y,2),S=N[0],k=N[1],w=Object(s.useState)(""),C=Object(l.a)(w,2),F=C[0],E=C[1],T=Object(s.useState)(""),L=Object(l.a)(T,2),A=L[0],U=L[1],I=Object(s.useState)(!1),R=Object(l.a)(I,2),D=R[0],B=R[1],M=Object(s.useState)(""),P=Object(l.a)(M,2),z=P[0],V=P[1],q=Object(s.useState)(""),_=Object(l.a)(q,2),H=_[0],G=_[1],W=Object(s.useState)(""),J=Object(l.a)(W,2),K=J[0],Y=J[1],X=Object(s.useState)(""),Q=Object(l.a)(X,2),$=(Q[0],Q[1],Object(s.useContext)(h)),Z=($.notifi,$.setNotifi),ee=($.notificont,$.setNotificont),te=Object(s.useState)(!0),ce=Object(l.a)(te,2),se=ce[0],ne=ce[1];function ae(){var e={age:m,city:S,country:F,phone:g,website:A,cover:z,name:o,email:H,job:K};u.collection("users").doc(t.uid).update({userinfo:e}).then((function(){Z(!0),ee({msg:"Profile was updated!",emoji:"fal fa-check-circle"})})).catch((function(e){Z(!0),ee({msg:"Image is too large",emoji:"fal fa-exclamation-circle"})})),setTimeout((function(){Z(!1)}),3500)}var ie=Object(s.useState)(!0),oe=Object(l.a)(ie,2),re=oe[0],le=oe[1];return Object(s.useEffect)((function(){u.collection("users").doc(t.uid).onSnapshot((function(e){var t=e.data();r(t.userinfo.name),f(t.userinfo.age),v(t.userinfo.phone),k(t.userinfo.city),E(t.userinfo.country),U(t.userinfo.website),V(t.userinfo.cover),G(t.userinfo.email),Y(t.userinfo.job),ne(!1)}))}),[]),Object(O.jsxs)("div",{className:"account",children:[Object(O.jsx)("div",{className:"head",children:Object(O.jsx)("h2",{children:"Account"})}),Object(O.jsxs)("div",{className:"profilepic",children:[se?Object(O.jsx)("div",{className:"loader blue reloader width",children:Object(O.jsxs)("div",{class:"lds-ring",children:[Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{})]})}):Object(O.jsx)("img",{src:z,alt:""}),Object(O.jsxs)("div",{className:"btnprof flexrow",children:[D?Object(O.jsx)("button",{className:"settingBtn",onClick:function(){return B(!D),void ae()},children:"Save"}):Object(O.jsxs)("label",{children:[Object(O.jsx)("div",{className:"settingBtn",onClick:function(){return Z(!1)},children:"Upload"}),Object(O.jsx)("input",{className:"uploadpic",onChange:function(){return function(){var e=document.querySelector(".uploadpic").files[0],c=d.a.storage().ref("".concat(t.uid,"/").concat(e.name));c.put(e).on("state_changes",(function(){ne(!0)}),(function(){}),(function(){ne(!1),V("https://firebasestorage.googleapis.com/v0/b/".concat(c.bucket,"/o/").concat(t.uid,"%2F").concat(e.name,"?alt=media")),B(!D)}))}()},type:"file",style:{display:"none"}})]}),Object(O.jsx)("button",{className:"settingBtn warning",onClick:function(){return function(){B(!1),ae(),t.updateProfile({displayName:o});var e={job:K,age:m,city:S,country:F,phone:g,website:A,name:o,email:H,cover:"https://www.gettyimages.ca/gi-resources/images/500px/983794168.jpg"};u.collection("users").doc(t.uid).update({userinfo:e})}()},children:"Remove"})]})]}),Object(O.jsx)("hr",{}),Object(O.jsx)(ue,{name:o,setName:r,age:m,setAge:f,phonenumber:g,setPhonenumber:v,city:S,setCity:k,country:F,setCountry:E,website:A,setWebsite:U,updateProfile:ae,determineDelete:function(e){e.target.value===t.displayName?le(!1):le(!0)},disabled:re})]})};var me=function(e){var t=e.checked,c=e.setChecked,s=e.function1;return Object(O.jsx)("div",{className:"switchdiv",children:Object(O.jsxs)("div",{className:"flexrow switchdiv",children:[Object(O.jsx)("p",{children:e.title}),Object(O.jsxs)("label",{className:"form-switch",children:[Object(O.jsx)("input",{type:"checkbox",checked:t,onChange:function(e){c&&c(e.target.checked),s&&s()}}),Object(O.jsx)("i",{})]})]})})};var fe=function(e){Object(s.useContext)(h).themecolor;var t=e.type,c=e.title,n=e.value,a=e.setValue,i=e.placeholder,o=e.changeCSSVar;return Object(O.jsxs)("div",{className:"input flexrow sb",children:[Object(O.jsx)("p",{children:c}),"text"===t?Object(O.jsx)("input",{required:!0,onBlur:function(e){return e.target.style.border="solid 2px #eee"},onFocus:function(e){return e.target.style.border="solid 2px ".concat(n)},placeholder:i,type:t,value:n,onChange:function(e){a(e.target.value)}}):Object(O.jsx)("input",{required:!0,onBlur:function(e){return e.target.style.border="solid 2px #eee"},onFocus:function(e){return e.target.style.border="solid 2px ".concat(n)},placeholder:i,type:t,value:n,onChange:function(e){a(e.target.value),o(e)}})]})};var Oe=function(e){var t=e.emoji,c=e.state1,s=(e.setState1,e.setState2),n=(e.style,e.function1),a=e.type,i=e.title,o=(e.addstyle,e.state3,e.setState3);return e.stylebtn,Object(O.jsxs)("div",{className:"flexrow sb",children:["button"===a?Object(O.jsx)("div",{}):Object(O.jsx)("p",{children:i}),"button"===a?Object(O.jsx)("button",{className:"btn",onClick:function(){n()},children:"Save"}):Object(O.jsx)("i",{class:t,onClick:function(){e.setState1(!c),s&&s(!0)},onMouseOver:function(){return o&&o(!0)},onMouseLeave:function(){return o&&o(!1)}}),"fad fa-adjust"!==t&&"button"!==a?Object(O.jsx)("span",{role:"img","aria-label":"emoji",onClick:function(){e.setState1(!c),s&&s(!0)},children:t}):""]})};var he=function(e){d.a.auth().currentUser;var t=e.function1,c=e.input1,n=e.input2,a=e.input3,i=e.input4,o=e.setInput4,r=e.setInput1,j=e.setInput2,u=e.setInput3,b=Object(s.useState)(!1),m=Object(l.a)(b,2),f=m[0],h=m[1];return Object(O.jsxs)("div",{className:"customize",children:[Object(O.jsx)("div",{children:Object(O.jsx)("h2",{children:"Customize"})}),Object(O.jsx)("small",{children:"Customize your chat settings."}),Object(O.jsx)("hr",{}),Object(O.jsx)("div",{className:"spacer1"}),Object(O.jsxs)("div",{className:"flex",children:[Object(O.jsx)(me,{title:"Dark Mode",checked:c,setChecked:r}),Object(O.jsx)(me,{title:"Wide Sidebar",checked:n,setChecked:j}),Object(O.jsx)(fe,{type:"color",title:"Chat Color",value:a,setValue:u,changeCSSVar:function(e){document.documentElement.style.setProperty("--chat-color",e.target.value)}}),Object(O.jsx)(fe,{type:"color",title:"Theme Color",value:i,setValue:o,changeCSSVar:function(e){document.documentElement.style.setProperty("--theme-color",e.target.value)}}),Object(O.jsx)(Oe,{type:"button",state1:f,setState1:h,style:i,function1:t,addstyle:!0})]})]})};var xe=function(e){var t=e.variable,c=e.title;return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"flexrow sb",style:{margin:"10px 0"},children:[Object(O.jsxs)("p",{children:[c,":"]}),Object(O.jsx)("p",{className:"light",children:t||"N/A"})]})})};var pe=function(e){var t=e.chatuser,c=Object(s.useState)(""),n=Object(l.a)(c,2),a=n[0],i=n[1],o=Object(s.useState)(""),r=Object(l.a)(o,2),d=r[0],j=r[1],b=Object(s.useState)(""),m=Object(l.a)(b,2),f=m[0],h=m[1],x=Object(s.useState)(""),p=Object(l.a)(x,2),g=p[0],v=p[1],y=Object(s.useState)(""),N=Object(l.a)(y,2),S=N[0],k=N[1],w=Object(s.useState)(""),C=Object(l.a)(w,2),F=C[0],E=C[1],T=Object(s.useState)(""),L=Object(l.a)(T,2),A=L[0],U=L[1],I=Object(s.useState)(""),R=Object(l.a)(I,2),D=R[0],B=R[1],M=Object(s.useState)(""),P=Object(l.a)(M,2),z=P[0],V=P[1];return Object(s.useEffect)((function(){u.collection("users").doc(t).onSnapshot((function(e){var t=e.data();i(t.userinfo.name),j(t.userinfo.age),h(t.userinfo.city),v(t.userinfo.country),k(t.userinfo.cover),E(t.userinfo.email),U(t.userinfo.job),B(t.userinfo.phone),V(t.userinfo.website)}))}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"flexrow sb",children:[Object(O.jsxs)("h2",{className:"capitalize",children:["About ",a]}),Object(O.jsx)("div",{className:"profilepic",children:Object(O.jsx)("img",{src:S,alt:"profilepicture"})})]}),Object(O.jsx)("hr",{}),Object(O.jsx)("h3",{style:{marginBottom:"10px"},children:"Personal Info"}),Object(O.jsx)(xe,{variable:d,title:"Age"}),Object(O.jsx)(xe,{variable:A,title:"Job"}),Object(O.jsx)(xe,{variable:D,title:"Phone"}),Object(O.jsx)(xe,{variable:g,title:"Country"}),Object(O.jsx)(xe,{variable:f,title:"City"}),Object(O.jsx)("h3",{style:{margin:"10px 0"},children:"Other Info"}),Object(O.jsx)(xe,{variable:F,title:"Email"}),Object(O.jsxs)("div",{className:"flexrow sb",style:{margin:"10px 0"},children:[Object(O.jsx)("p",{children:"Website:"}),Object(O.jsx)("p",{className:"light",children:"https://"===z?"N/A":Object(O.jsxs)("a",{href:z,rel:"noreferrer",target:"_blank",children:[" ",Object(O.jsx)("i",{class:"fal fa-external-link-alt"})]})})]})]})};var ge=function(){return Object(O.jsx)(O.Fragment,{children:"asd"})};var ve=function(e){var t=Object(s.useContext)(h),c=t.themecolor,n=(t.notifi,t.setNotifi),a=(t.notificont,t.setNotificont),i=d.a.auth().currentUser,o=(e.themeimg,e.setThemeimg),r=e.themebool,j=e.setEmojibool,b=e.setThemebool,m=Object(s.useState)(!1),f=Object(l.a)(m,2),x=(f[0],f[1],Object(s.useState)("")),p=Object(l.a)(x,2),g=p[0],v=p[1],y=Object(s.useState)(""),N=Object(l.a)(y,2),S=N[0],k=N[1],w=e.creatorid,C=e.convoid,F=e.setEmojitype,E=e.emojitype,T=e.miniview,L=e.setMiniview;return Object(s.useEffect)((function(){u.collection("conversations").doc(C).onSnapshot((function(e){var t=e.data();o(t.customizedconvo.theme),F(t.customizedconvo.emoji),i.uid===w?v(t.nickname1):v(t.nickname2)}))}),[C]),Object(O.jsxs)("div",{className:"customize",children:[Object(O.jsx)("div",{children:Object(O.jsx)("h2",{children:"Themes"})}),Object(O.jsx)("small",{children:"Customize your conversation settings."}),Object(O.jsx)("hr",{}),Object(O.jsx)("div",{className:"spacer1"}),Object(O.jsxs)("div",{className:"flex",children:[Object(O.jsx)(Oe,{type:"emoji",emoji:"fad fa-adjust",title:"Theme",setState1:b,state1:r,state3:T,setState3:L}),Object(O.jsx)(Oe,{type:"emoji",emoji:E,title:"Emoji",state1:S,setState1:k,setState2:j}),Object(O.jsx)(fe,{placeholder:"Nickname",type:"text",title:"Nickname",value:g,setValue:v}),Object(O.jsxs)("div",{className:"flexrow sb",children:[Object(O.jsx)("span",{}),Object(O.jsx)("button",{className:"btn",style:{color:"white",border:"solid 3px transparent",backgroundColor:c},onMouseOver:function(e){return e.target.style.cssText="background-color: transparent; border: solid 3px ".concat(c,"; color: ").concat(c)},onMouseLeave:function(e){return e.target.style.cssText="background-color: ".concat(c,"; border: solid 3px transparent; color: white")},onClick:function(){return n(!0),a({msg:"Profile was updated!",emoji:"fal fa-check-circle"}),i.uid===w?u.collection("conversations").doc(C).update({nickname1:g}):u.collection("conversations").doc(C).update({nickname2:g}),void setTimeout((function(){n(!1)}),3500)},children:"Save"})]})]})]})};var ye=function(e){var t=d.a.auth().currentUser,c=e.notifibool,s=(e.setNotifibool,e.convoid),n=e.creatorid;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h2",{o:!0,children:"Chat Configurations"}),Object(O.jsx)("hr",{}),Object(O.jsx)(me,{title:"Notifications",checked:c,function1:function(){t.uid===n?u.collection("conversations").doc(s).update({notifications1:!c}):u.collection("conversations").doc(s).update({notifications2:!c})}})]})};var Ne=function(){return Object(O.jsx)(O.Fragment,{})};var Se,ke,we=function(e){u.collection("users").doc().id;var t=Object(s.useState)(""),c=Object(l.a)(t,2),n=c[0],a=c[1],i=new RegExp("\\b"+n.replace(/[\W_]+/g,""),"i"),o=(Object(f.g)(),e.settings,e.type),r=e.link,j=e.linklabel,b=(e.BrowserHistory,Object(s.useState)(!1)),x=Object(l.a)(b,2),p=x[0],g=x[1],v=Object(s.useState)(!1),y=Object(l.a)(v,2),N=y[0],S=y[1],w=Object(s.useState)(!1),F=Object(l.a)(w,2),E=F[0],T=F[1],L=Object(s.useContext)(h),A=L.darkmode,U=L.notifi,I=L.setNotifi,R=L.notificont,D=L.setNotificont,B=d.a.auth().currentUser,M=Object(s.useState)(""),P=Object(l.a)(M,2),z=P[0],V=P[1],q=Object(s.useState)(""),_=Object(l.a)(q,2),H=_[0],G=_[1],W=Object(s.useState)(""),J=Object(l.a)(W,2),K=J[0],Y=J[1],X=Object(s.useState)(!1),Q=Object(l.a)(X,2),$=Q[0],ee=Q[1],te=Object(s.useState)(!0),ce=Object(l.a)(te,2),se=ce[0],ne=ce[1],ae=Object(s.useState)(!1),ie=Object(l.a)(ae,2),oe=ie[0],re=ie[1],le=Object(s.useState)(""),de=Object(l.a)(le,2),je=de[0],ue=de[1],me=Object(s.useState)(!1),fe=Object(l.a)(me,2),Oe=fe[0],xe=fe[1],Se=Object(s.useState)({top:0,left:0}),ke=Object(l.a)(Se,2),we=ke[0],Ce=(ke[1],[{img:"https://wallpaperaccess.com/full/1288078.jpg",type:"background"},{img:"https://www.setaswall.com/wp-content/uploads/2019/08/Whatsapp-Wallpaper-072.jpg",type:"background"},{img:"http://images.unsplash.com/photo-1518531933037-91b2f5f229cc?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max",type:"background"},{img:"https://i.imgur.com/05HfuHW.jpg",type:"background"},{img:"https://i.imgur.com/Frdc6vv.jpg",type:"background"},{img:"https://i.imgur.com/3St6WoQ.jpg",type:"background"},{img:"https://i.imgur.com/R4TMmVd.jpg",type:"background"},{img:"https://i.imgur.com/8UIUZae.jpg",type:"background"},{img:"https://i.imgur.com/yfwxwo1.jpg",type:"gradient"},{img:"https://i.imgur.com/HTQ2T1O.jpg",type:"gradient"},{img:"https://i.imgur.com/z0zjGrS.jpg",type:"gradient"},{img:"https://i.imgur.com/NXUqzHa.jpg",type:"gradient"},{img:"https://i.imgur.com/bT0t5lL.jpg",type:"gradient"},{img:"https://i.imgur.com/TE4sKjU.jpg",type:"gradient"},{img:"https://i.imgur.com/4hzNTTq.png",type:"default"}]),Fe=["\ud83d\ude00","\ud83d\ude03","\ud83d\ude04","\ud83d\ude01","\ud83d\ude06","\ud83d\ude05","\ud83e\udd7a","\ud83d\ude22","\ud83d\ude2d","\ud83d\ude24","\ud83d\ude20","\ud83d\ude21","\ud83e\udd2c","\ud83e\udd2f","\ud83d\ude33","\ud83e\udd75","\ud83e\udd76","\ud83d\ude31","\ud83d\ude28","\ud83d\ude30","\ud83d\ude25","\ud83d\ude13","\ud83e\udd17","\ud83e\udd14","\ud83e\udd2d","\ud83e\udd2b","\ud83e\udd25","\ud83d\ude36","\ud83d\ude10","\ud83d\ude11","\ud83d\ude2c","\ud83d\ude44","\ud83d\ude2f","\ud83d\ude26","\ud83d\ude27","\ud83d\ude11","\ud83d\ude2c","\ud83d\ude44","\ud83d\ude2f","\ud83d\ude26","\ud83d\ude27","\ud83d\ude2e","\ud83d\ude32","\ud83e\udd71","\ud83d\ude34","\ud83e\udd24","\ud83d\ude2a","\ud83d\ude35","\ud83e\udd10","\ud83e\udd74","\ud83d\ude2c","\ud83d\ude44","\ud83d\ude2f","\ud83d\ude26","\ud83d\ude27","\ud83d\ude2e","\ud83d\ude32","\ud83e\udd71","\ud83d\ude34","\ud83e\udd24","\ud83d\ude2a","\ud83d\ude35","\ud83e\udd10","\ud83e\udd74","\ud83e\udd22 ","\ud83e\udd2e","\ud83e\udd27","\ud83d\ude37","\ud83e\udd12","\ud83e\udd15","\ud83e\udd11","\ud83e\udd20","\ud83d\ude08","\ud83d\udc7f"],Ee=Fe&&Fe.map((function(t){return Object(O.jsx)("div",{style:{cursor:"pointer"},className:"emojidiv",onClick:function(){return Y(c=t),I(!0),D({emoji:c,msg:"Emoji selected!"}),u.collection("conversations").doc(e.diag.convoinfo.convoid).update({customizedconvo:{theme:H,emoji:c}}),setTimeout((function(){I(!1)}),3500),void S(!1);var c},children:Object(O.jsx)("span",{role:"img","aria-label":"emoji",children:t})})})),Te=Ce&&Ce.map((function(t){if(i.test(t.type.toLowerCase()))return Object(O.jsxs)("div",{className:"theme bs flex",children:[Object(O.jsxs)("div",{className:"img",children:[" ",Object(O.jsx)("img",{src:t.img,alt:""})]}),Object(O.jsxs)("div",{className:"select flexrow",children:[Object(O.jsx)("p",{children:"Select this theme:"}),Object(O.jsx)("i",{className:"fal fa-check-circle",onClick:function(){var c;c=t.img,G(c),I(!0),D({emoji:"fal fa-check-circle",msg:"Theme selected!"}),u.collection("conversations").doc(e.diag.convoinfo.convoid).update({customizedconvo:{theme:c,emoji:K}}),setTimeout((function(){I(!1)}),3500),g(!1)},style:{color:z}})]})]})}));return Object(s.useEffect)((function(){"chatsettings"===o&&u.collection("conversations").doc(e.diag.convoinfo.convoid).onSnapshot((function(t){var c=t.data();B.uid===e.diag.convoinfo.creatorid?ne(c.notifications1):ne(c.notifications2)}))}),[]),Object(s.useEffect)((function(){u.collection("users").doc(B.uid).onSnapshot((function(e){var t=e.data();ee(t.customization.darkmode),re(t.customization.widemode),ue(t.customization.color),V(t.customization.themecolor)}))}),[]),Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{onContextMenu:function(e){return function(e){var t=document.querySelector(".contextmenu");t.getBoundingClientRect(),e.preventDefault(),xe(!0),t.style.top="".concat(e.pageY-t.clientHeight,"px"),t.style.left="".concat(e.pageX-t.clientWidth,"px")}(e)},className:A?"settingsgrid flex darkmode":"settingsgrid flex",children:[Object(O.jsxs)("div",{className:"links  flex",children:[Object(O.jsxs)("div",{className:"section1 flex",children:[Object(O.jsx)("h2",{children:"Settings"}),Object(O.jsx)(m.c,{onClick:function(){return I(!1)},activeStyle:{color:z},activeClassName:"bs",exact:!0,to:"/"+r.link0,children:j.link0}),Object(O.jsx)(m.c,{onClick:function(){return I(!1)},activeStyle:{color:z},activeClassName:"bs",to:"/".concat(o,"/").concat(r.link1),children:j.link1})]}),Object(O.jsx)("hr",{}),Object(O.jsxs)("div",{className:"section2 flex",children:[Object(O.jsx)(m.c,{onClick:function(){return I(!1)},activeStyle:{color:z},activeClassName:"bs",to:"/".concat(o,"/").concat(r.link2),children:j.link2}),Object(O.jsx)(m.c,{onClick:function(){return I(!1)},activeStyle:{color:z},activeClassName:"bs",to:"/".concat(o,"/").concat(r.link3),children:j.link3}),"settings"===o?"":Object(O.jsx)("hr",{}),"settings"===o?"":Object(O.jsx)(m.b,{to:"/chat/"+e.diag.convoinfo.convoid,style:{marginTop:"5px"},children:"Return to Chat"})]})]}),Object(O.jsx)("div",{className:"paths bs",children:Object(O.jsxs)(f.d,{children:[Object(O.jsx)(f.b,{exact:!0,path:"/".concat(r.link0),children:"settings"===o?Object(O.jsx)(be,{notifi:U,notificont:R,setNotifi:I,setNotificont:D}):Object(O.jsx)(ve,{setEmojitype:Y,emojitype:K,setEmojibool:S,themeimg:H,setThemeimg:G,themebool:p,setThemebool:g,chatuser:e.chatuser,notifi:U,notificont:R,setNotifi:I,setNotificont:D,convoid:e.diag.convoinfo.convoid,creatorid:e.diag.convoinfo.creatorid,miniview:E,setMiniview:T})}),Object(O.jsx)(f.b,{path:"/".concat(o,"/").concat(r.link1),children:"settings"===o?Object(O.jsx)(ge,{}):Object(O.jsx)(ye,{notifibool:se,setNotifibool:ne,convoid:e.diag.convoinfo.convoid,creatorid:e.diag.convoinfo.creatorid})}),Object(O.jsx)(f.b,{path:"/".concat(o,"/").concat(r.link2),children:"settings"===o?Object(O.jsx)(he,{function1:function(){var e={darkmode:$,widemode:oe,color:je,themecolor:z};u.collection("users").doc(B.uid).update({customization:e}).then((function(){I(!0),D({emoji:"fal fa-check-circle",msg:"Profile has been updated!"})})),setTimeout((function(){I(!1)}),3500)},input1:$,input3:je,input4:z,input2:oe,setInput1:ee,setInput4:V,setThemecolor:V,setInput3:ue,setInput2:re}):""}),Object(O.jsx)(f.b,{path:"/".concat(o,"/").concat(r.link3),children:"settings"===o?Object(O.jsx)(Ne,{}):Object(O.jsx)(pe,{chatuser:e.chatuser})})]})}),Object(O.jsx)(k.a,{in:U,timeout:300,classNames:"displayerror",unmountOnExit:!0,children:Object(O.jsxs)("div",{className:"errormsg bs",children:[Object(O.jsx)("span",{role:"img","aria-label":"emoji",children:K})," ",Object(O.jsx)("p",{children:R.msg}),Object(O.jsx)("i",{className:"far fa-times",style:{color:z},onClick:function(){return I(!1)}})]})}),Object(O.jsx)(k.a,{in:p,timeout:300,classNames:"themesdisplay",unmountOnExit:!0,children:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"screen",onClick:function(){return g(!1)}}),Object(O.jsxs)("div",{className:"themes bs flex",children:[Object(O.jsxs)("div",{className:"filterBtn flex",children:[Object(O.jsx)("h2",{style:{textAlign:"center"},children:"Filter: "}),Object(O.jsxs)("div",{className:"flexrow center",children:[Object(O.jsx)(Z,{state:n,setState:a,type:"",text:"All"}),Object(O.jsx)(Z,{state:n,setState:a,type:"background",text:"Images"}),Object(O.jsx)(Z,{state:n,setState:a,type:"gradient",text:"Gradients"}),Object(O.jsx)(Z,{state:n,setState:a,type:"default",text:"Default"})]})]}),Object(O.jsxs)("div",{className:"flex",children:[Object(O.jsx)("p",{className:"themestitle",children:"Themes: "}),Te]})]})]})}),Object(O.jsx)(k.a,{in:N,timeout:300,classNames:"emojidisplay",unmountOnExit:!0,children:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"screen",onClick:function(){return S(!1)},onContextMenu:function(){return xe(!1)}}),Object(O.jsx)("div",{className:"emojiwindow bs flexrow",children:Object(O.jsxs)("div",{className:"emojistitle",children:[Object(O.jsx)("h2",{children:"Select Emoji"}),Object(O.jsx)("div",{className:"flexrow flexwrap",children:Ee})]})})]})}),Object(O.jsx)(k.a,{in:E,timeout:300,classNames:"miniviewdisplay",unmountOnExit:!0,children:Object(O.jsx)("div",{className:"miniviewdisplay bs",children:Object(O.jsx)("img",{src:H,alt:""})})}),Object(O.jsx)(C,{emojitype:K,setEmojibool:S,emojibool:N,themebool:p,setThemebool:g,contextstyle:we,type:"settings",contextmenu:Oe,setContextmenu:xe})]})})},Ce=c(32),Fe=E.a.i(Se||(Se=Object(y.a)(["\ncolor: ","\n"])),(function(e){return e.color})),Ee=E.a.span(ke||(ke=Object(y.a)(["\n    background-color: red;\n    &:hover {\n      background-color: ",";\n      span {\n        color: white;\n      }\n      i {\n        color: white;\n      }\n    }\n"])),(function(e){return e.color}));var Te=function(e){var t=Object(s.useContext)(h).themecolor,c=(e.num,e.icon),n=(e.type,e.classNames),a=(e.setState,e.state,e.lnk),i=e.txt,o=e.clk;return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(m.b,{to:a,onClick:o,children:Object(O.jsxs)(Ee,{color:t,className:n,children:[Object(O.jsx)("span",{children:i}),Object(O.jsx)(Fe,{color:t,className:c})]})})})},Le=c(33),Ae=c(34);function Ue(e){Object(s.useContext)(h).themecolor;var t=d.a.auth().currentUser,c=Object(s.useState)(""),n=Object(l.a)(c,2),a=(n[0],n[1]),i=Object(s.useState)(""),o=Object(l.a)(i,2),r=(o[0],o[1],e.handleLogout),j=Object(s.useState)(0),m=Object(l.a)(j,2),f=(m[0],m[1],[{icon:"fal fa-comment-alt",txt:"Comment"},{icon:"fal fa-bell",txt:"Notifications"},{icon:"fal fa-cog",txt:"Settings"},{icon:"fal fa-cog",txt:"Adddraft"},{icon:"fal fa-sign-out",txt:"Logout"}]),x=(u.collection("users").doc().id,f&&f.map((function(e){return Object(O.jsx)(Te,{icon:e.icon,txt:e.txt,handleLogout:r})})),Object(s.useState)({})),p=Object(l.a)(x,2),g=p[0],v=p[1],y=function(e){var t=e.target.name,c=e.target.value;v((function(e){return Object(Ae.a)(Object(Ae.a)({},e),{},Object(Le.a)({},t,c))}))};return Object(s.useEffect)((function(){t&&u.collection("users").doc(t.uid).onSnapshot((function(e){var t=e.data();a(t.role),console.log("home set role.."+t.role)}))}),[]),Object(O.jsxs)("div",{className:"home",children:[Object(O.jsx)("div",{className:"header flex sb",children:Object(O.jsx)("h2",{style:{color:"black"},children:"Email Linkage"})}),Object(O.jsx)("div",{className:"flex fe sticky",children:Object(O.jsx)("div",{className:"gridobjects  bs marginBottom",children:Object(O.jsx)(Te,{icon:"fal fa-sign-out",txt:"Logout",classNames:"blueback all flexrow sa",lnk:"/",clk:function(){return e.handleLogout()}})})}),Object(O.jsx)("div",{class:"container",children:Object(O.jsxs)("div",{class:"row",children:[Object(O.jsx)("div",{class:"col align-self-center",children:Object(O.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(g),console.log(g.serviceid),console.log(g.templateid),console.log(g.key),b.ref("/EmailLinkage").push({serviceid:g.serviceid,templateid:g.templateid,key:g.key})},children:[Object(O.jsxs)("label",{children:["ServiceID",Object(O.jsx)("input",{type:"text",name:"serviceid",value:g.serviceid||"",placeholder:" Enter ServiceID",onChange:y})]}),Object(O.jsxs)("label",{children:["TemplateID",Object(O.jsx)("input",{type:"text",name:"templateid",value:g.templateid||"",placeholder:" Enter TemplateID",onChange:y})]}),Object(O.jsxs)("label",{children:["Key (Provide Private Key if You Check the Secured Mode in EmailJS)",Object(O.jsx)("input",{type:"text",name:"key",value:g.key||"",placeholder:" Enter Key",onChange:y})]}),Object(O.jsx)("input",{type:"submit",class:"btn btn-primary",id:"draft_submit",value:"Submit"})]})}),Object(O.jsx)("a",{href:"https://www.emailjs.com",children:Object(O.jsx)("button",{className:"btn btn-primary",id:"linkage_btn",children:"EmailJS Linkage"})})]})}),Object(O.jsx)("div",{className:"homeside"})]})}var Ie=function(e){Object(s.useContext)(h).themecolor;var t=d.a.auth().currentUser,c=Object(s.useState)(""),n=Object(l.a)(c,2),a=n[0],i=n[1],o=Object(s.useState)(""),r=Object(l.a)(o,2),j=(r[0],r[1],e.handleLogout),b=Object(s.useState)(0),m=Object(l.a)(b,2),x=(m[0],m[1],[{icon:"fal fa-comment-alt",txt:"Comment"},{icon:"fal fa-bell",txt:"Notifications"},{icon:"fal fa-cog",txt:"Settings"},{icon:"fal fa-sign-out",txt:"Logout"}]);return u.collection("users").doc().id,x&&x.map((function(e){return Object(O.jsx)(Te,{icon:e.icon,txt:e.txt,handleLogout:j})})),Object(s.useRef)(),Object(f.g)(),Object(s.useEffect)((function(){t&&u.collection("users").doc(t.uid).onSnapshot((function(e){var t=e.data();i(t.role),console.log("home set role.."+t.role)}))}),[]),Object(O.jsxs)("div",{className:"home",children:[Object(O.jsx)("div",{className:"header flex sb",children:Object(O.jsx)("h2",{className:"marginBottom",children:function(){if(t)return function(){var e=new Date;return e.getHours()>=6&&e.getHours()<12?"Good Morning,":e.getHours()>=12&&e.getHours()<17?"Good Afternoon,":e.getHours()>=17&&e.getHours()<20?"Good Evening,":e.getHours()>=20&&e.getHours()<=23||e.getHours()>=0&&e.getHours()<6?"Good Night,":void 0}()+" "+a+" "+t.displayName+" (login type: "+t.providerData[0].providerId+")"}()})}),Object(O.jsx)("div",{className:"flex fe sticky",children:Object(O.jsx)("div",{className:"gridobjects  bs marginBottom",children:Object(O.jsx)(Te,{icon:"fal fa-sign-out",txt:"Logout",classNames:"blueback all flexrow sa",lnk:"/",clk:function(){return e.handleLogout()}})})}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{className:"homeside"})]})};var Re=function(e){Object(s.useContext)(h).themecolor;var t=d.a.auth().currentUser,c=Object(s.useState)(""),n=Object(l.a)(c,2),a=(n[0],n[1]),i=Object(s.useState)(""),o=Object(l.a)(i,2),r=(o[0],o[1],e.handleLogout),j=Object(s.useState)(0),m=Object(l.a)(j,2),f=(m[0],m[1],[{icon:"fal fa-comment-alt",txt:"Comment"},{icon:"fal fa-bell",txt:"Notifications"},{icon:"fal fa-cog",txt:"Settings"},{icon:"fal fa-cog",txt:"Adddraft"},{icon:"fal fa-sign-out",txt:"Logout"}]),x=(u.collection("users").doc().id,f&&f.map((function(e){return Object(O.jsx)(Te,{icon:e.icon,txt:e.txt,handleLogout:r})})),Object(s.useState)()),p=Object(l.a)(x,2),g=p[0],v=p[1],y=Object(s.useState)({}),N=Object(l.a)(y,2),S=N[0],k=N[1],w=function(e){var t=e.target.name,c=e.target.value;k((function(e){return Object(Ae.a)(Object(Ae.a)({},e),{},Object(Le.a)({},t,c))}))};return Object(s.useEffect)((function(){t&&u.collection("users").doc(t.uid).onSnapshot((function(e){var t=e.data();a(t.role),console.log("home set role.."+t.role)}))}),[]),Object(O.jsxs)("div",{className:"home",children:[Object(O.jsx)("div",{className:"header flex sb",children:Object(O.jsx)("h2",{style:{color:"black"},children:"Add Draft"})}),Object(O.jsx)("div",{className:"flex fe sticky",children:Object(O.jsx)("div",{className:"gridobjects  bs marginBottom",children:Object(O.jsx)(Te,{icon:"fal fa-sign-out",txt:"Logout",classNames:"blueback all flexrow sa",lnk:"/",clk:function(){return e.handleLogout()}})})}),Object(O.jsx)("div",{class:"container",children:Object(O.jsx)("div",{class:"row",children:Object(O.jsx)("div",{class:"col align-self-center",children:Object(O.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(S),console.log(g),console.log(t.displayName),console.log(S.subject),console.log(S.recipient),console.log(S.CC),console.log(S.BCC),b.ref("/draft").push({username:t.displayName,subject:S.subject,recipient:S.recipient,cc:S.CC,bcc:S.BCC,message:g})},children:[Object(O.jsxs)("label",{children:["Subject",Object(O.jsx)("input",{type:"text",name:"subject",value:S.subject||"",placeholder:" enter email subject",onChange:w})]}),Object(O.jsxs)("label",{children:["TO",Object(O.jsx)("input",{type:"text",name:"recipient",value:S.recipient||"",placeholder:" enter the recipient's address",onChange:w})]}),Object(O.jsxs)("label",{children:["CC",Object(O.jsx)("input",{type:"text",name:"CC",value:S.CC||"",placeholder:" enter the Carbon Copy",onChange:w})]}),Object(O.jsxs)("label",{children:["BCC",Object(O.jsx)("input",{type:"text",name:"BCC",value:S.BCC||"",placeholder:" enter the Blind Carbon Copy",onChange:w})]}),Object(O.jsxs)("label",{children:["Message",Object(O.jsx)("textarea",{value:g||"",rows:"10",onChange:function(e){v(e.target.value)}})]}),Object(O.jsx)("input",{type:"submit",class:"btn btn-primary",id:"draft_submit",value:"Submit"})]})})})}),Object(O.jsx)("div",{className:"homeside"})]})};var De=function(e){Object(s.useContext)(h).themecolor;var t=d.a.auth().currentUser,c=Object(s.useState)(""),n=Object(l.a)(c,2),a=(n[0],n[1]),i=Object(s.useState)(""),o=Object(l.a)(i,2),r=(o[0],o[1],e.handleLogout),j=Object(s.useState)(0),b=Object(l.a)(j,2),m=(b[0],b[1],[{icon:"fal fa-comment-alt",txt:"Comment"},{icon:"fal fa-bell",txt:"Notifications"},{icon:"fal fa-cog",txt:"Settings"},{icon:"fal fa-sign-out",txt:"Logout"}]),f=(u.collection("users").doc().id,m&&m.map((function(e){return Object(O.jsx)(Te,{icon:e.icon,txt:e.txt,handleLogout:r})})),Object(s.useRef)());return Object(s.useEffect)((function(){t&&u.collection("users").doc(t.uid).onSnapshot((function(e){var t=e.data();a(t.role),console.log("home set role.."+t.role)}))}),[]),Object(O.jsxs)("div",{className:"home",children:[Object(O.jsx)("div",{className:"header flex sb",children:Object(O.jsx)("h2",{style:{color:"black"},children:"MailSend"})}),Object(O.jsx)("div",{className:"flex fe sticky",children:Object(O.jsx)("div",{className:"gridobjects  bs marginBottom",children:Object(O.jsx)(Te,{icon:"fal fa-sign-out",txt:"Logout",classNames:"blueback all flexrow sa",lnk:"/",clk:function(){return e.handleLogout()}})})}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{class:"container",children:Object(O.jsx)("div",{class:"row",children:Object(O.jsx)("div",{class:"col align-self-center",children:Object(O.jsxs)("form",{action:"",ref:f,onSubmit:function(e){e.preventDefault(),Ce.a.sendForm("service_k0epgii","template_a0nogel",f.current,"J14Ld2x5lECND_Nx1").then((function(e){console.log(e.text),alert("SUCCESS!")}),(function(e){console.log(e.text),alert("FAILED...",e)}))},children:[Object(O.jsx)("div",{class:"form-group",children:Object(O.jsxs)("label",{for:"subject",children:["Subject",Object(O.jsx)("input",{type:"subject",name:"subject",class:"form-control-xlg ",id:"subject",placeholder:" enter email subject"})]})}),Object(O.jsx)("div",{class:"form-group",children:Object(O.jsxs)("label",{for:"recipient",children:["TO",Object(O.jsx)("input",{type:"recipient",name:"recipient",class:"form-control-xlg",id:"recipient",placeholder:" enter the recipient's address"})]})}),Object(O.jsx)("div",{class:"form-group",children:Object(O.jsxs)("label",{for:"cc",children:["CC",Object(O.jsx)("input",{type:"cc",name:"cc",class:"form-control-xlg",id:"cc",placeholder:" enter the Carbon Copy"})]})}),Object(O.jsx)("div",{class:"form-group",children:Object(O.jsxs)("label",{for:"bcc",children:["BCC",Object(O.jsx)("input",{type:"bcc",name:"bcc",class:"form-control-xlg",id:"bcc",placeholder:" enter the Blind Carbon Copy"})]})}),Object(O.jsx)("div",{class:"form-group",children:Object(O.jsxs)("label",{htmlFor:"message",children:["Message",Object(O.jsx)("textarea",{class:"form-control-xlg",name:"message",id:"message",rows:"10"})]})}),Object(O.jsx)("button",{type:"submit",class:"btn btn-primary",id:"submit_form",children:"Submit"})]})})})}),Object(O.jsx)("div",{className:"homeside"})]})};c(77),c(74),c(75);var Be=function(e){var t=Object(s.useContext)(h).themecolor,c=e.setChatuser,n=d.a.auth().currentUser,a=Object(s.useState)(""),i=Object(l.a)(a,2),o=i[0],r=i[1],j=Object(s.useState)(0),b=Object(l.a)(j,2),f=(b[0],b[1]),x=Object(s.useState)([]),p=Object(l.a)(x,2),g=p[0],v=p[1],y=/(?:https?|ftp):\/\/[\S]*\.(?:png|jpe?g|gif|svg|webp)/g;function N(e){g&&g.map((function(t){if(e.notifiid===t.notifiid){var c=g.indexOf(t);g.splice(c,1),u.collection("notifications").doc(n.uid).update({notifications:g})}}))}u.collection("users").doc().id;var S=g&&g.slice(0).reverse().map((function(e){return Object(O.jsxs)("div",{children:[Object(O.jsx)(m.b,{to:"/chat/"+e.id,onClick:function(){c(e.senderid),N(e)},children:Object(O.jsxs)("div",{className:"notification flex",children:[Object(O.jsx)("div",{className:"userprofile",children:Object(O.jsx)("img",{src:o,alt:""})}),Object(O.jsxs)("strong",{children:[" ",Object(O.jsxs)("p",{children:["From: ",e.sender]})]}),Object(O.jsxs)("span",{children:["Message: ",(t=e,t.gif?"Sent a GIF":t.file?"Sent a file":t.video?"Sent a video":t.base64||null!=t.notifimsg.match(y)?"Sent a photo":t.notifimsg)]}),Object(O.jsxs)("span",{children:["Sent: ",Object(O.jsx)(te.a,{date:e.notifidate.toDate(),locale:"en-US"})]})]})}),Object(O.jsx)("i",{className:"fal fa-times",onClick:function(){return N(e)}})]});var t}));return Object(s.useEffect)((function(){u.collection("notifications").doc(n.uid).onSnapshot((function(e){var t=e.data();f(t.notifications.length),v(t.notifications),r(t.notifications.cover)}))}),[]),Object(O.jsxs)("div",{className:"notificationspage",children:[Object(O.jsxs)("div",{className:"tp",children:[Object(O.jsxs)("div",{className:"header flexrow ",children:[Object(O.jsx)("i",{class:"far fa-inbox",style:{color:t,cursor:"auto"}}),Object(O.jsx)("h2",{children:"Your Notifications"})]}),Object(O.jsx)("hr",{style:{width:"100%"}})]}),Object(O.jsxs)("div",{className:"notificationsrow flex",children:[Object(O.jsx)("div",{className:"notifiBtnCont",children:Object(O.jsx)("button",{className:" themeBtn notifiBtn",onClick:function(){u.collection("notifications").doc(n.uid).update({notifications:[]})},children:"Clear Notifications "})}),S]})]})};var Me=function(e){var t=e.chatsettings,c=e.convoinfo,n=e.onedialogue,a=e.setConvoinfo,i=e.adduser,o=e.setAdduser,r=e.userprofile,l=e.chatuser,d=e.setChatuser,j=Object(s.useContext)(h),u=j.darkmode,b=j.themecolor;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(f.b,{path:"/chat",children:Object(O.jsx)("div",{className:u?"conversations darkmode":"conversations",style:{backgroundColor:b},children:Object(O.jsxs)("div",{className:"chatcontainer",children:[Object(O.jsx)("div",{className:"userrow spanall ",children:Object(O.jsx)(S,{chatuser:l,setChatuser:d,convoinfo:c,setConvoinfo:a,setAdduser:function(){return o(!i)}})}),Object(O.jsx)("div",{className:"dialogue spanall",children:Object(O.jsx)(f.d,{children:n})}),Object(O.jsx)("div",{className:"userprofile spanall",children:Object(O.jsx)(f.d,{children:r})})]})})}),Object(O.jsx)(f.b,{path:"/home",children:Object(O.jsx)("div",{className:u?"conversations darkmode":"conversations",style:{backgroundColor:b},children:Object(O.jsx)(Ie,{handleLogout:e.handleLogout})})}),Object(O.jsx)(f.d,{children:t}),Object(O.jsx)(f.b,{path:"/notifications",children:Object(O.jsx)(Be,{setChatuser:d})}),Object(O.jsx)(f.b,{path:"/settings",children:Object(O.jsx)(we,{settings:"settings",type:"settings",link:{link0:"settings",link1:"preferences",link2:"themes",link3:"support"},linklabel:{link0:"Account",link1:"Preferences",link2:"Customize",link3:"Support"}})}),Object(O.jsx)(f.b,{path:"/adddraft",children:Object(O.jsx)("div",{className:u?"conversations darkmode":"conversations",style:{backgroundColor:b},children:Object(O.jsx)(Re,{handleLogout:e.handleLogout})})}),Object(O.jsx)(f.b,{path:"/linkage",children:Object(O.jsx)("div",{className:u?"conversations darkmode":"conversations",style:{backgroundColor:b},children:Object(O.jsx)(Ue,{handleLogout:e.handleLogout})})}),Object(O.jsx)(f.b,{path:"/MailSend",children:Object(O.jsx)("div",{className:u?"conversations darkmode":"conversations",style:{backgroundColor:b},children:Object(O.jsx)(De,{handleLogout:e.handleLogout})})})]})};var Pe,ze=function(e){e.lnk,e.convoinfo,e.setConvoinfo;var t=e.el,c=e.setChatuser,n=e.chatuser,a=e.setChatstarted,i=e.setChatview,o=Object(s.useState)(""),r=Object(l.a)(o,2),j=r[0],b=r[1],h=Object(s.useState)(""),x=Object(l.a)(h,2),p=x[0],g=x[1],v=Object(s.useState)(""),y=Object(l.a)(v,2),N=y[0],S=y[1],k=Object(s.useState)(!1),w=Object(l.a)(k,2),C=(w[0],w[1]),F=Object(s.useState)(""),E=Object(l.a)(F,2),T=E[0],L=E[1],A=Object(s.useState)(!1),U=Object(l.a)(A,2),I=U[0],R=U[1],D=Object(s.useState)(!1),B=Object(l.a)(D,2),M=B[0],P=B[1],z=Object(s.useState)(!0),q=Object(l.a)(z,2),_=q[0],H=q[1],G=Object(s.useState)(""),W=Object(l.a)(G,2),J=(W[0],W[1]),K=(Object(f.h)(),d.a.auth().currentUser);return Object(s.useEffect)((function(){u.collection("users").doc(t.convoinfo.recipientid).onSnapshot((function(e){var t=e.data();g(t.userinfo.name),b(t.userinfo.cover),C(t.userinfo.online),H(!1),P(t.online)})),u.collection("users").doc(t.convoinfo.creatorid).onSnapshot((function(e){var t=e.data();S(t.userinfo.name),L(t.userinfo.cover),H(!1),R(t.online)})),u.collection("conversations").doc(t.convoinfo.convoid).onSnapshot((function(e){var t=e.data();J(t.messages[t.messages.length-1])}))}),[t.convoinfo.recipientid,t,n]),Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(m.b,{onClick:function(){c(t.convoinfo.creatorid===K.uid?t.convoinfo.recipientid:t.convoinfo.creatorid)},children:[_?Object(O.jsxs)("div",{class:"lds-ring",children:[Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{})]}):Object(O.jsxs)("div",{className:"flexrow",onClick:function(){return a(!0)},children:[" ",Object(O.jsx)("img",{src:t.convoinfo.creatorid===K.uid?j:T,alt:""}),"  ",Object(O.jsx)("small",{children:t.convoinfo.creatorid===K.uid?p:N}),"    ",Object(O.jsx)("div",{className:"notifi",style:{backgroundColor:t.convoinfo.creatorid===K.uid?M?"rgb(44, 255, 44)":"#FF3D3D":I?"rgb(44, 255, 44)":"#FF3D3D"}})," "]}),Object(O.jsx)(V,{icon:"ellipsis-h-alt",classNames:"white",type:"link",lnk:"/chatsettings/".concat(t.convoinfo.convoid),setState:i,setState2:a})]})})},Ve=E.a.div(Pe||(Pe=Object(y.a)([" \n      ::selection {\n        background-color: ",";\n        color: white;\n      }\n"])),(function(e){return e.color}));var qe=function(e){var t=Object(f.h)(),c=d.a.auth().currentUser,n=Object(s.useState)({unreadmsgs:0}),a=Object(l.a)(n,2),i=a[0],o=a[1],r=Object(s.useState)([]),j=Object(l.a)(r,2),b=j[0],m=j[1],x=Object(s.useContext)(h),g=x.darkmode,v=x.widemode,y=x.themecolor,N=x.chatcolor,S=Object(s.useState)(""),w=Object(l.a)(S,2),C=w[0],F=w[1],E=e.handleLogout,T=e.setLoading,L=Object(s.useState)([]),A=Object(l.a)(L,2),U=A[0],I=A[1],R=Object(s.useState)(!1),D=Object(l.a)(R,2),B=D[0],M=D[1],P=Object(s.useState)([]),z=Object(l.a)(P,2),q=z[0],_=z[1],H=Object(s.useState)([]),G=Object(l.a)(H,2),W=(G[0],G[1]),J=Object(s.useState)([]),K=Object(l.a)(J,2),Y=K[0],X=K[1],Q=Object(s.useState)(""),$=Object(l.a)(Q,2),Z=$[0],ee=$[1],te=Object(s.useState)(""),ce=Object(l.a)(te,2),se=ce[0],ne=ce[1],ae=Object(s.useState)(""),ie=Object(l.a)(ae,2),le=ie[0],je=ie[1],ue=Object(s.useState)(!1),be=Object(l.a)(ue,2),me=be[0],fe=be[1],Oe=Object(s.useState)(!1),he=Object(l.a)(Oe,2),xe=he[0],pe=he[1],ge=Object(s.useState)(!1),ve=Object(l.a)(ge,2),ye=(ve[0],ve[1],q&&q.map((function(e){return Object(O.jsx)(f.b,{exact:!0,path:"/chat/"+e.convoinfo.convoid,children:Object(O.jsx)(oe,{diag:e,chatuser:C})})}))),Ne=Object(s.useState)(!1),Se=Object(l.a)(Ne,2),ke=Se[0],Ce=Se[1],Fe=q&&q.map((function(e){if(c&&C===(c.uid===e.convoinfo.creatorid?e.convoinfo.recipientid:e.convoinfo.creatorid))return Object(O.jsx)(oe,{type:"small",chatuser:C,diag:e,icon:"fal fa-times",setState:pe})})),Ee=b&&b.sort((function(e,t){return t.lastmsgdate-e.lastmsgdate})).map((function(e){return Object(O.jsx)("div",{className:"profilepic",children:Object(O.jsx)(ze,{el:e,setChatopen:Ce,chatopen:ke,chatuser:C,setChatuser:F,convoinfo:i,lnk:t.pathname.split("/").slice(1,2)[0],setChatstarted:pe,setChatview:fe})})})),Te=q&&q.map((function(e){return Object(O.jsx)(f.b,{path:"/chatsettings/"+e.convoinfo.convoid,children:Object(O.jsx)(we,{chatuser:C,diag:e,settings:"chat",type:"chatsettings",link:{link0:"chatsettings/"+e.convoinfo.convoid,link1:e.convoinfo.convoid+"/actions",link2:e.convoinfo.convoid+"/privacy",link3:e.convoinfo.convoid+"/support"},linklabel:{link0:"Themes",link1:"Actions",link2:"Privacy",link3:"About"}})})})),Le=q&&q.map((function(e){return Object(O.jsx)(f.b,{exact:!0,path:"/chat/"+e.convoinfo.convoid,children:Object(O.jsx)(re,{diag:e,chatuser:C})})}));return Object(s.useEffect)((function(){u.collection("users").doc(c.uid).onSnapshot((function(e){var t=e.data();W(t),u.collection("conversations").onSnapshot((function(e){var c=[];e.forEach((function(e){t.msgids.includes(e.id)&&c.push(e.data())})),m(c)}))}))}),[]),Object(s.useEffect)((function(){c&&(u.collection("users").doc(c.uid).onSnapshot((function(e){var t=e.data();I(t.msgpersonids),W(t),u.collection("conversations").onSnapshot((function(e){var c=[];e.forEach((function(e){t.msgids.includes(e.id)&&c.push(e.data())})),_(c)}))})),u.collection("users").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),X(t)}))),T(!1)}),[]),Object(O.jsxs)(Ve,{color:y,className:v?"body widebody":"body",style:{backgroundColor:y},children:[Object(O.jsx)("div",{className:"sidebar",children:Object(O.jsx)(p,{updateProfile:function(){u.collection("users").doc(c.uid).update({customization:{widemode:!v,darkmode:g,color:N,themecolor:y}})},chatFuncDisplay:function(){pe(!1),setTimeout((function(){fe(!1)}),400)},setChatview:fe,setChatstarted:pe,handleLogout:E})}),Object(O.jsx)(f.d,{children:Object(O.jsx)(Me,{handleLogout:E,chatsettings:Te,chatuser:C,setChatuser:F,userprofile:Le,onedialogue:ye,convoinfo:i,setConvoinfo:o,adduser:B,setAdduser:function(){return M(!B)}})}),"/chat"===t.pathname.slice(0,5)?Object(O.jsx)("div",{className:"chattab"}):Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(V,{classNames:"chatdiv flex bs",icon:"comment",state:me,setState:fe})}),Object(O.jsx)(k.a,{in:me,timeout:300,unmountOnExit:!0,classNames:"chatusers",children:Object(O.jsxs)("div",{className:"chatusers bs",children:[Object(O.jsx)("h2",{children:"Chat"}),Object(O.jsxs)("div",{className:"users flexrow",children:[Object(O.jsx)("i",{className:"fal fa-times",onClick:function(){return fe(!1)},style:{color:"var(--theme-color)",position:"absolute",top:"15px",right:"20px"}}),Ee]})]})}),Object(O.jsx)(k.a,{in:xe,classNames:"chatview",unmountOnExit:!0,timeout:300,children:Object(O.jsx)("div",{className:"chatview bs",style:{right:me?"330px":"50px"},children:Object(O.jsx)("div",{className:"",children:Object(O.jsx)("div",{className:"dialogue",children:Fe})})})}),Object(O.jsx)(k.a,{in:B,classNames:"adduser",unmountOnExit:!0,timeout:300,children:Object(O.jsx)(de,{setRecipientname:je,message:Z,msgpersonids:U,sendMessage:function(){if(Z.length){M(!B);var e=u.collection("conversations").doc().id;!function(e,t,c,s){var n=d.a.auth().currentUser,a=d.a.firestore.FieldValue.serverTimestamp(),i={convoid:c,creatorid:n.uid,creatorname:n.displayName,recipientid:e,recipientname:s,typerid:n.uid,userref:u.collection("users").doc(e)},o={message:t,reaction1:"",reaction2:"",msgdate:d.a.firestore.Timestamp.now(),msgid:u.collection("conversations").doc().id,read:!1,senderid:n.uid,sendername:n.displayName,editing:!1},r={notifimsg:t,notifidate:d.a.firestore.Timestamp.now(),read:!1,sender:n.displayName,id:c,senderid:n.uid,notifiid:u.collection("users").doc().id};u.collection("notifications").doc(e).update({notifications:d.a.firestore.FieldValue.arrayUnion(r)}),u.collection("users").doc(n.uid).update({msgids:d.a.firestore.FieldValue.arrayUnion(c),msgpersonids:d.a.firestore.FieldValue.arrayUnion(e)}),u.collection("users").doc(e).update({msgids:d.a.firestore.FieldValue.arrayUnion(c),msgpersonids:d.a.firestore.FieldValue.arrayUnion(n.uid)}),u.collection("conversations").doc(c).set({lastmsgdate:a,convoinfo:i,messages:d.a.firestore.FieldValue.arrayUnion(o),customizedconvo:{theme:"https://i.imgur.com/4hzNTTq.png",emoji:"\ud83e\udd17"},nickname1:"",notifications1:!0,nickname2:"",notifications2:!0})}(se,Z,e,le)}},setMessage:ee,setRecipientid:ne,allusers:Y,setAdduser:M,recipientid:se,adduser:B})})]})},_e=c(76);var He=function(){var e=Object(s.useState)(0),t=Object(l.a)(e,2),c=(t[0],t[1],Object(s.useState)("")),n=Object(l.a)(c,2),a=n[0],i=n[1],o=Object(s.useState)(""),r=Object(l.a)(o,2),j=r[0],b=r[1],h=Object(s.useState)(""),p=Object(l.a)(h,2),g=p[0],y=p[1],N=Object(s.useState)(""),S=Object(l.a)(N,2),k=S[0],w=S[1],C=Object(s.useState)(""),F=Object(l.a)(C,2),E=F[0],T=F[1],L=Object(s.useState)(""),A=Object(l.a)(L,2),U=A[0],I=A[1],R=Object(s.useState)(!0),D=Object(l.a)(R,2),B=D[0],M=D[1],P="assistant",z=Object(s.useState)(""),V=Object(l.a)(z,2),q=V[0],_=V[1],H=Object(s.useState)([]),G=Object(l.a)(H,2),W=(G[0],G[1],Object(s.useState)([])),J=Object(l.a)(W,2),K=(J[0],J[1],Object(s.useState)("https://www.gettyimages.ca/gi-resources/images/500px/983794168.jpg")),Y=Object(l.a)(K,2),X=Y[0],Q=(Y[1],Object(s.useState)(!1)),$=Object(l.a)(Q,2),Z=($[0],$[1],Object(s.useState)([""])),ee=Object(l.a)(Z,2),te=ee[0],ce=(ee[1],Object(s.useState)(!1)),se=Object(l.a)(ce,2),ne=se[0],ae=se[1],ie=function(){T(""),I("")},oe=function(){d.a.auth().onAuthStateChanged((function(e){e?(y(""),w(""),i(e),u.collection("users").doc(e.uid).update({online:!0}),d.a.auth().onAuthStateChanged((function(e){u.collection("users").doc(e.uid).set({role:P}),console.log("Final role.."+P)}))):i("")}))};function re(){for(var e=document.querySelectorAll("input[type='radio']:checked"),t=0;t<e.length;t++)P=e[0].id,console.log("Checkbox is checked.."+P);var c=new d.a.auth.GoogleAuthProvider;c.addScope("email"),d.a.auth().signInWithPopup(c).then((function(e){if(e.additionalUserInfo.isNewUser){e.credential.accessToken;var t=e.user;u.collection("users").doc(t.uid).set({created:new Date,msgids:te,uid:t.uid,online:!0,userinfo:{name:t.displayName,cover:t.photoURL,age:"",phone:t.phoneNumber,city:"",country:"",website:"https://",job:"",email:t.email},customization:{color:"#10325c",themecolor:"#0f6ce6",darkmode:!1,widemode:!1}}),u.collection("notifications").doc(t.uid).set({notifications:"Google"})}})).catch((function(e){e.code,e.message,e.email,e.credential;T(e.message),setTimeout((function(){T("")}),3e3)}))}function le(){var e=new d.a.auth.FacebookAuthProvider;e.addScope("email"),d.a.auth().signInWithPopup(e).then((function(e){if(e.additionalUserInfo.isNewUser){e.credential.accessToken;var t=e.user;u.collection("users").doc(t.uid).set({created:new Date,msgids:te,uid:t.uid,online:!0,userinfo:{name:t.displayName,cover:t.photoURL,age:"",phone:t.phoneNumber,city:"",country:"",website:"https://",job:"",email:t.email},customization:{color:"#10325c",themecolor:"#0f6ce6",darkmode:!1,widemode:!1}}),u.collection("notifications").doc(t.uid).set({notifications:"Facebook"})}})).catch((function(e){var t=e.code,c=(e.message,e.email);e.credential;T(c),setTimeout((function(){T("")}),3e3),console.log(t)}))}return Object(_e.a)((function(){a&&u.collection("users").doc(a.uid).update({online:!1})})),Object(s.useEffect)((function(){return oe(),window.addEventListener("onbeforeunload",(function(){a&&u.collection("users").doc(a.uid).update({online:!1})})),a&&u.collection("users").doc(a.uid).update({online:!0}),function(){return!0}}),[]),Object(O.jsx)(m.a,{children:Object(O.jsx)("div",{className:"App",children:a?Object(O.jsx)(x,{children:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(qe,{setLoading:ae,handleLogout:function(){a&&u.collection("users").doc(a.uid).update({online:!1}),P="assistant",console.log("handle logout.."+P),window.location.host,d.a.auth().signOut()}}),Object(O.jsx)(f.a,{to:"/Home"})]})}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(v,{loginwithFacebook:function(){return le},loginwithGoogle:function(){return re},loading:ne,name:j,setName:b,lname:q,setlName:_,email:g,setEmail:y,password:k,setPassword:w,handleLogin:function(){ie();for(var e=document.querySelectorAll("input[type='radio']:checked"),t=0;t<e.length;t++)P=e[0].id,console.log("Checkbox is checked.."+P);d.a.auth().signInWithEmailAndPassword(g,k).then((function(){ae(!0)})).catch((function(e){switch(e.code){case"auth/invalid-email":T(e.message);break;case"auth/user/disabled":case"auth/user-not-found":T("Email does not exist");break;case"auth/wrong-password":I("Incorrect Password")}}))},handleSignup:function(){console.log("signup"),ie(),d.a.auth().createUserWithEmailAndPassword(g,k).catch((function(e){switch(e.code){case"auth/email-already-in-use":case"auth/invalid-email":T(e.message);break;case"auth/weak-password":I(e.message);break;default:T("Invalid")}})),d.a.auth().onAuthStateChanged((function(e){e?(e.updateProfile({displayName:j}),u.collection("users").doc(e.uid).set({created:new Date,msgids:te,uid:d.a.auth().currentUser.uid,online:!0,userinfo:{name:j,cover:X,age:"",phone:"",city:"",country:"",website:"https://",job:"",email:g},customization:{color:"#10325c",themecolor:"#0f6ce6",darkmode:!1,widemode:!1}}),u.collection("notifications").doc(e.uid).set({notifications:"email"})):i("")}))},hasAccount:B,setHasAccount:M,emailError:E,passwordError:U}),Object(O.jsx)(f.a,{to:"/"})]})})})};o.a.addDefaultLocale(r),o.a.addLocale(r);var Ge=document.getElementById("root");i.a.render(Object(O.jsx)(s.StrictMode,{children:Object(O.jsx)(He,{})}),Ge)},84:function(e,t,c){}},[[153,1,2]]]);
//# sourceMappingURL=main.c895962e.chunk.js.map