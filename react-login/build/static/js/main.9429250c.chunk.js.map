{"version":3,"sources":["Fire.js","ContextAPI.js","components/Sidebar.js","components/Forgotpassword.js","components/Login.js","components/Users.js","components/Userrow.js","components/Hoverabletexticonflexrow.js","components/Contextmenu.js","components/Elapsedtime.js","components/Recorder.js","components/Hoverableiconsdiv.js","components/msgcomponents/Iframe.js","components/msgcomponents/Img.js","components/msgcomponents/File.js","components/msgcomponents/Recording.js","components/Gifs.js/Search.js","components/Hoverablebutton.js","components/Gifs.js/Gif.js","components/msgcomponents/Contextoptions.js","components/msgcomponents/Threedots.js","components/Dialogue.js","components/Userprofile.js","components/Adduser.js","components/Inputs.js","components/settings/Account.js","components/Switches.js","components/Input.js","components/Button.js","components/settings/Personalization.js","components/settings/Infocontainer.js","components/settings/Aboutchatuser.js","components/settings/Preferences.js","components/settings/Themes.js","components/settings/Actions.js","components/settings/Support.js","components/Usersettings.js","components/Hoverlink.js","components/linkage.js","components/Home.js","components/adddraft.js","components/MailSend.js","components/Notifications.js","components/Paths.js","components/Chatviewrow.js","components/Body.js","components/StartConvo.js","App.js","index.js"],"names":["firebaseApp","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","databaseURL","db","firestore","realtime_db","database","ContextApp","createContext","ContextAppProvider","props","user","auth","currentUser","useState","darkmode","widemode","chatcolor","themecolor","notifi","setNotifi","emoji","msg","notificont","setNotificont","collection","doc","uid","onSnapshot","snap","data","Provider","value","children","Sidebar","useContext","updateProfile","handleLogout","chatFuncDisplay","setChatview","setChatstarted","className","msgids","activeClassName","exact","to","class","onClick","Forgotpassword","email","setEmail","onSubmit","e","preventDefault","type","placeholder","onChange","target","sendPasswordResetEmail","then","window","alert","catch","err","code","errormsg","message","Login","loginwithTwitter","loginwithFacebook","loginwithGoogle","setRoleType","setlName","lname","name","setName","password","setPassword","handleLogin","handleSignup","hasAccount","setHasAccount","emailError","passwordError","path","src","alt","style","display","id","for","loading","textAlign","cursor","marginBottom","Users","convoinfo","setConvoinfo","el","setChatuser","chatuser","recipimg","setRecipimg","recipname","setRecipname","sendername","setSendername","setActivestatus","senderimg","setSenderimg","setLoading","setMsg","reg","determineMsgtype","undefined","base64","file","audio","match","RegExp","$1","replace","_","text","img","trim","useEffect","recipientid","userinfo","cover","online","creatorid","convoid","msgs","messages","length","slice","dangerouslySetInnerHTML","__html","senderid","lastMsg","Userrow","keyword","setUserlist","convos","setConvos","allconvos","sort","a","b","lastmsgdate","map","userlist","forEach","includes","push","color","setAdduser","onFocus","Hoverabletexticonflexrow","icon","classNames","functionOne","Contextmenu","themebool","emojibool","setUpdatedMsg","copy","contextmenu","setContextmenu","contextstyle","msgid","visible","setVisible","setMsgs","contextmenuSelector","useRef","history","useLocation","useHistory","sendReaction","opt","itemindex","indexOf","reaction1","update","reaction2","emojisrow","allemojisrow","document","addEventListener","current","ref","onContextMenu","left","top","onMouseOver","onMouseLeave","CSSTransition","in","timeout","unmountOnExit","r","createRange","querySelector","selectNode","getSelection","removeAllRanges","addRange","execCommand","copyFunc","splice","setThemebool","setEmojibool","emojitype","location","reload","goForward","goBack","ElapsedTime","Iconspecial","styled","i","Recorder","progressbar","progresswidth","record","setRecord","clicked","setClicked","reset","setReset","stop","RecordState","STOP","time","setTime","intervalId","setIntervalId","startRecord","START","setInterval","prev","state","onStop","audioData","require","storage","reader","FileReader","readAsDataURL","blob","onloadend","url","filename","mimeType","base64data","result","fetch","res","arrayBuffer","buf","File","storageRef","put","on","percentage","bytesTransferred","totalBytes","height","msgobject","bucket","reaction","msgdate","Timestamp","now","read","editing","nobackground","FieldValue","arrayUnion","clearInterval","Button","button","Icon","Span","span","Hoverableicondiv","inputref","sendFile","setImg","special","setState","lnk","setState2","handleEvent","setTimeout","zIndex","accept","Iframe","link","controls","allowFullScreen","Img","fontSize","position","href","Recording","video","playBtn","progress","onLoadedData","duration","toFixed","onTimeUpdate","currentTime","width","ended","updateProgress","paused","play","pause","togglePlayPause","Math","round","determineMinSecH","Search","search","setSearch","fetchData","setTitle","Hoverablebutton","Gif","setGif","notifibool","chatimg","React","setData","title","loader","setLoader","offset","setOffset","limit","setTotalCount","trending","setTrending","trendSearch","setTrendSearch","tSearch","date","serverTimestamp","URL","axios","fetchGif","fetchRes","status","pagination","total_count","content","onTop","scrollTo","behavior","g","notificationobj","notifimsg","notifidate","sender","displayName","gif","notifiid","notifications","sendGif","images","fixed_height","fixed_width","t","toUpperCase","s","Contextoptions","function1","re","stopPropagation","Threedots","emojis","setEmojis","msgidedit","setMsgidedit","allemojis","contextoption","emojiref","threedots","copyMsg","Dialogue","msgstring","setMsgstring","setUpdateelapsed","typing","setTyping","setRecipcity","setRecipcountry","userimg","setUserimg","setUsername","setNotifibool","setEmojitype","setChatcolor","setUserchatcolor","setShowinput","updatedMsg","theme","setTheme","setMsgid","chatname","setChatname","setChatimg","setChatcity","setChatcountry","chatactive","setChatactive","nickname","setNickname","emojipicker","setEmojipicker","diag","typerRef","imageRegexB","ytVidId","sm","determineClass","modal","setModal","imgsrc","setImgSrcModal","allmsgs","reverse","customcontext","getBoundingClientRect","currentTarget","getAttribute","pageY","pageX","editMsg","contextMenu","contentEditable","backgroundColor","closest","contains","setAttribute","clickHandler","ReactTimeAgo","toDate","marginLeft","files","idxDot","lastIndexOf","extFile","substr","toLowerCase","iconsrow","scrollto","sendMessage","scrollIntoView","block","emojipickerref","zoomamount","setZoomamount","zoom","timer","city","country","customization","get","use","customizedconvo","notifications2","nickname1","notifications1","nickname2","padding","render","backgroundImage","onKeyUp","keyCode","shiftKey","triggerSend","onInput","focus","role","sendEmoji","hideScrollbars","onEmojiClick","event","emojiobject","Userprofile","recipcity","recipcountry","recipjob","setRecipjob","recipnumber","setRecipnumber","recipemail","setRecipemail","recipwebsite","setRecipwebsite","extend","setExtend","active","setActive","job","phone","website","toLocaleLowerCase","Adduser","allusers","setRecipientname","setRecipientid","setMessage","msgpersonids","adduser","setKeyword","determineDisplay","border","cssText","pattern","allusersrow","test","Input","input","Inputs","disabled","determineDelete","age","setAge","setCity","phonenumber","setPhonenumber","setWebsite","setCountry","required","min","delete","Account","uploaded","setUploaded","setCover","setJob","userobj","setDisabled","uploadImg","removeImg","Switches","checked","setChecked","setValue","changeCSSVar","onBlur","state1","setState1","setState3","addstyle","state3","stylebtn","Personalization","input1","input2","input3","input4","setInput4","setInput1","setInput2","setInput3","hovered","setHovered","documentElement","setProperty","Infocontainer","variable","margin","Aboutchatuser","setPhone","rel","Preferences","Themes","setThemeimg","themeimg","setEmoji","miniview","setMiniview","convo","Actions","o","Support","Usersettings","settings","linklabel","BrowserHistory","setThemecolor","darkmode1","setDarkmode","setWidemode","themes","themesrow","clientHeight","clientWidth","activeStyle","link0","link1","link2","link3","marginTop","updateObj","Hoverlink","num","txt","clk","Linkage","lnks","inputs","setInputs","handleChange","values","console","log","serviceid","templateid","key","Body","d","Date","getHours","determineTime","providerData","providerId","determinetext","Adddraft","textarea","setTextarea","subject","recipient","CC","BCC","username","cc","bcc","rows","MailSend","form","action","emailjs","sendForm","error","htmlFor","Notifications","setNotifLength","setNotifications","deleteNotifi","noti","notificationsrow","locale","Paths","chatsettings","onedialogue","userprofile","Home","senderonline","setSenderonline","reciponline","setReciponline","Div","div","unreadmsgs","setMsgpersonids","convolist","setConvolist","setAllusers","recipientname","chatview","chatstarted","chatopen","setChatopen","dialoguerow","usersrow","Chatviewrow","pathname","split","users","right","creatorname","typerid","userref","set","StartConvo","App","setUser","setEmailError","setPasswordError","loginType","clearErrors","authListener","onAuthStateChanged","provider","GoogleAuthProvider","addScope","signInWithPopup","additionalUserInfo","isNewUser","credential","accessToken","created","photoURL","phoneNumber","FacebookAuthProvider","usergoogle","errorCode","useBeforeunload","host","signOut","createUserWithEmailAndPassword","signInWithEmailAndPassword","TimeAgo","addDefaultLocale","en","addLocale","rootElement","getElementById","ReactDOM"],"mappings":"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","file":"static/js/main.9429250c.chunk.js","sourcesContent":["import firebase from 'firebase'\r\n\r\nconst  firebaseApp = firebase.initializeApp ({\r\n  apiKey: \"AIzaSyBtw3coit5Y_E2gJInz7RavYXuthmhh35Q\",\r\n  authDomain: \"authentic-idea-365202.firebaseapp.com\",\r\n  projectId: \"authentic-idea-365202\",\r\n  storageBucket: \"authentic-idea-365202.appspot.com\",\r\n  messagingSenderId: \"497585289385\",\r\n  appId: \"1:497585289385:web:a9ee5f59c4a17b793bd1b8\",\r\n  measurementId: \"G-2HBL5FQBGG\",\r\n  databaseURL: \"https://authentic-idea-365202-default-rtdb.firebaseio.com\"\r\n});\r\n\r\nconst db= firebaseApp.firestore()\r\nconst realtime_db = firebaseApp.database()\r\nconst Fire = firebaseApp\r\nexport  {db, realtime_db, Fire}\r\n","import React, { createContext, useState, useEffect } from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport firebase from 'firebase'\r\nimport { db } from './Fire'\r\nexport let ContextApp=createContext()\r\nlet ContextAppProvider=(props)=>{\r\n  const user = firebase.auth().currentUser\r\n  const [darkmode, setDarkmode]=useState(false)\r\n  const [widemode, setWidemode]=useState(false)\r\n  const [chatcolor, setChatcolor]=useState('')\r\n  const [themecolor, setThemecolor]=useState('')\r\n  const [notifi, setNotifi]=useState(false)\r\n  const [notificont, setNotificont]=useState({\r\n    emoji: '',\r\n    msg: ''\r\n  })\r\n  if(user) {\r\n    db.collection('users').doc(user.uid).onSnapshot(snap=>{\r\n      let user = snap.data()\r\n      /*\r\n      setDarkmode(user.customization.darkmode)\r\n      setWidemode(user.customization.widemode)\r\n      setChatcolor(user.customization.color)\r\n      setThemecolor(user.customization.themecolor)\r\n      */\r\n    })\r\n  }\r\n  return (\r\n    <ContextApp.Provider value={{darkmode, widemode, chatcolor, themecolor, notificont, notifi, setNotificont, setNotifi}}>\r\n      {props.children}\r\n    </ContextApp.Provider>\r\n  )\r\n}\r\nexport default ContextAppProvider","import React, {useState, useEffect, useContext} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport firebase from 'firebase'\r\nimport { db } from '../Fire'\r\nimport {ContextApp} from '../ContextAPI'\r\nfunction Sidebar (props) {\r\n  const {darkmode, chatcolor, widemode, themecolor}=useContext(ContextApp)\r\n\r\n  const {updateProfile,chatFuncDisplay,handleLogout, setChatview, setChatstarted}=props\r\n  const [userimg, setUserimg]=useState('')\r\n  const [username, setUsername]=useState('')\r\n  const [loader, setLoader]=useState(true)\r\n  const user = firebase.auth().currentUser\r\n  const [extend, setExtend]=useState(false)\r\n/*\r\n  useEffect(()=>{\r\n    db.collection('users').doc(user.uid).onSnapshot(snap=>{\r\n      const user = snap.data()  \r\n      setUserimg(user.userinfo.cover)\r\n      setUsername(user.userinfo.name)\r\n      setLoader(false)\r\n    })\r\n  },[userimg])\r\n  */\r\n  return (\r\n   <>\r\n  \r\n    <div className=\"profilepic profilepiccol\">\r\n    {\r\n\r\n        }\r\n        </div>\r\n  \r\n        <div>\r\n          {(() => {\r\n            if (user.msgids === \"assistant\") {\r\n              return (\r\n                <div className=\"icons\">\r\n                  <NavLink activeClassName='activelink' exact to='/home'><span><i class=\"far fa-home\"></i>{widemode?<p className='widemodeElement'>Home</p>:''}</span></NavLink>\r\n                  <NavLink activeClassName='activelink'  to='/adddraft'><span><i class=\"fal fa-cog\"></i>{widemode?<p className='widemodeElement'>Adddraft</p>:''}</span></NavLink>\r\n                  {/*<NavLink activeClassName='activelink'  to='/MailSend'><span><i class=\"far fa-bell\"></i>{widemode?<p className='widemodeElement'>MailSending</p>:''}</span></NavLink>\r\n                  <NavLink activeClassName='activelink' to='/linkage'><span><i class=\"fal fa-podcast\"></i>{widemode?<p className='widemodeElement'>Linkage</p>:''}</span></NavLink>\r\n                  <NavLink activeClassName='activelink' onClick={()=>{chatFuncDisplay()}}  to='/chat'><span><i class=\"far fa-comment-alt\"></i>{widemode?<p className='widemodeElement'>Chat</p>:''}</span></NavLink>\r\n                  <NavLink activeClassName='activelink'  to='/notifications'><span><i class=\"far fa-bell\"></i>{widemode?<p className='widemodeElement'>Notifications</p>:''}</span></NavLink>\r\n                  <NavLink activeClassName='activelink' to='/podcast'><span><i class=\"fal fa-podcast\"></i>{widemode?<p className='widemodeElement'>Podcast</p>:''}</span></NavLink>\r\n                  <NavLink activeClassName='activelink'  to='/settings'><span><i class=\"fal fa-cog\"></i>{widemode?<p className='widemodeElement'>Settings</p>:''}</span></NavLink>\r\n                  */}\r\n                  <NavLink exact to='/Login' onClick={()=>{handleLogout()}}><span> <i  class=\"fal fa-sign-out-alt\"></i>{widemode?<p className='widemodeElement'>Logout</p>:''}</span></NavLink> \r\n                  <a onClick={()=>{updateProfile()}} className='widemodeElement' ><i class={widemode?\"fal fa-chevron-double-right rotate\":'fal fa-chevron-double-right'}></i></a>\r\n                </div>\r\n              )\r\n            } else {\r\n              return (\r\n                <div className=\"icons\">\r\n                  <NavLink activeClassName='activelink' exact to='/home'><span><i class=\"far fa-home\"></i>{widemode?<p className='widemodeElement'>Home</p>:''}</span></NavLink>\r\n                  {/*<NavLink activeClassName='activelink'  to='/adddraft'><span><i class=\"fal fa-cog\"></i>{widemode?<p className='widemodeElement'>Adddraft</p>:''}</span></NavLink>*/}\r\n                  <NavLink activeClassName='activelink'  to='/MailSend'><span><i class=\"far fa-bell\"></i>{widemode?<p className='widemodeElement'>MailSending</p>:''}</span></NavLink>\r\n                  <NavLink activeClassName='activelink' to='/linkage'><span><i class=\"fal fa-podcast\"></i>{widemode?<p className='widemodeElement'>Linkage</p>:''}</span></NavLink>\r\n                  {/*<NavLink activeClassName='activelink' onClick={()=>{chatFuncDisplay()}}  to='/chat'><span><i class=\"far fa-comment-alt\"></i>{widemode?<p className='widemodeElement'>Chat</p>:''}</span></NavLink>\r\n                  <NavLink activeClassName='activelink'  to='/notifications'><span><i class=\"far fa-bell\"></i>{widemode?<p className='widemodeElement'>Notifications</p>:''}</span></NavLink>\r\n                  <NavLink activeClassName='activelink' to='/podcast'><span><i class=\"fal fa-podcast\"></i>{widemode?<p className='widemodeElement'>Podcast</p>:''}</span></NavLink>\r\n                  <NavLink activeClassName='activelink'  to='/settings'><span><i class=\"fal fa-cog\"></i>{widemode?<p className='widemodeElement'>Settings</p>:''}</span></NavLink>\r\n                  */}\r\n                  <NavLink exact to='/Login' onClick={()=>{handleLogout()}}><span> <i  class=\"fal fa-sign-out-alt\"></i>{widemode?<p className='widemodeElement'>Logout</p>:''}</span></NavLink> \r\n                  <a onClick={()=>{updateProfile()}} className='widemodeElement' ><i class={widemode?\"fal fa-chevron-double-right rotate\":'fal fa-chevron-double-right'}></i></a>\r\n                </div>\r\n              )\r\n            }\r\n          })()}\r\n            {/*<NavLink activeClassName='activelink' exact to='/home'><span><i class=\"far fa-home\"></i>{widemode?<p className='widemodeElement'>Home</p>:''}</span></NavLink>\r\n            <NavLink activeClassName='activelink'  to='/adddraft'><span><i class=\"fal fa-cog\"></i>{widemode?<p className='widemodeElement'>Adddraft</p>:''}</span></NavLink>\r\n            <NavLink activeClassName='activelink'  to='/MailSend'><span><i class=\"far fa-bell\"></i>{widemode?<p className='widemodeElement'>MailSending</p>:''}</span></NavLink>\r\n            <NavLink activeClassName='activelink' to='/linkage'><span><i class=\"fal fa-podcast\"></i>{widemode?<p className='widemodeElement'>Linkage</p>:''}</span></NavLink>\r\n            <NavLink activeClassName='activelink' onClick={()=>{chatFuncDisplay()}}  to='/chat'><span><i class=\"far fa-comment-alt\"></i>{widemode?<p className='widemodeElement'>Chat</p>:''}</span></NavLink>\r\n            <NavLink activeClassName='activelink'  to='/notifications'><span><i class=\"far fa-bell\"></i>{widemode?<p className='widemodeElement'>Notifications</p>:''}</span></NavLink>\r\n            <NavLink activeClassName='activelink' to='/podcast'><span><i class=\"fal fa-podcast\"></i>{widemode?<p className='widemodeElement'>Podcast</p>:''}</span></NavLink>\r\n            <NavLink activeClassName='activelink'  to='/settings'><span><i class=\"fal fa-cog\"></i>{widemode?<p className='widemodeElement'>Settings</p>:''}</span></NavLink>\r\n            \r\n            <NavLink exact to='/' onClick={()=>{handleLogout()}}><span> <i  class=\"fal fa-sign-out-alt\"></i>{widemode?<p className='widemodeElement'>Logout</p>:''}</span></NavLink> \r\n        <a onClick={()=>{updateProfile()}} className='widemodeElement' ><i class={widemode?\"fal fa-chevron-double-right rotate\":'fal fa-chevron-double-right'}></i></a>*/}\r\n        </div>    \r\n       { widemode?'':<><div className='widemodeElement spac'></div>\r\n        <div className='widemodeElement spac'></div></>}\r\n\r\n\r\n  </>\r\n  )\r\n}\r\nexport default Sidebar","import React, {useState, useEffect} from 'react'\r\nimport firebase from 'firebase'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink } from \"react-router-dom\" \r\n\r\nfunction Forgotpassword (props){\r\n  let [email, setEmail]=useState('')\r\n  function sendEmail(){\r\n      if(email!==''){\r\n       firebase.auth().sendPasswordResetEmail(email).then(()=>{\r\n          window.alert('email has been sent')\r\n       })\r\n       .catch(err=>{\r\n          let errorcode = err.code\r\n          let errormsg = err.message\r\n          window.alert(errormsg)\r\n       })\r\n      }else {\r\n        window.alert('Please input an email')\r\n      }\r\n  }\r\nreturn (\r\n  <div className='forgotpassword'>\r\n         <div className='login'>\r\n<div className=\"spacer1\"></div>\r\n\r\n    <div className=\"title\">\r\n    <i class=\"fa-unlock fad\"></i>\r\n      <h1>Forgot Password</h1>\r\n    </div>\r\n    <div className=\"spacer1\"></div>\r\n      <div className=\"logincontainer\">\r\n        <form onSubmit={(e)=>e.preventDefault()}>\r\n          <label >\r\n            <span>Email</span>\r\n            <input type=\"text\" placeholder='example@mail.com' onChange={(e)=>setEmail(e.target.value)}/>\r\n          </label>\r\n            <button className='themeBtn' onClick={()=>sendEmail()}>Send email</button>\r\n         \r\n        </form> \r\n   \r\n       <Link to='/' className='forgotPasswordButton'>Return to login page</Link>\r\n      </div>\r\n    \r\n  </div>\r\n  </div>\r\n)\r\n}\r\nexport default Forgotpassword","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport {db} from '../Fire'\r\nimport firebase from 'firebase'\r\nimport Forgotpassword from './Forgotpassword'\r\nimport GoogleButton from 'react-google-button'\r\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props'\r\nimport ReactFacebookLogin from 'react-facebook-login'\r\n\r\nfunction Login(props){\r\n  const {loginwithTwitter,loginwithFacebook,loginwithGoogle,setlName,lname,name, setRoleType, setName, email, setEmail, password, setPassword, handleLogin, handleSignup, hasAccount, setHasAccount, emailError, passwordError } = props\r\n  function determineLoading (){\r\n      if(props.loading) {\r\n       return <div class=\"lds-ring\"><div></div><div></div><div></div><div></div></div>\r\n      }else {\r\n        return 'Log in'\r\n      }\r\n  }\r\n\r\n  return (\r\n    <>\r\n     <Route exact path='/'>\r\n     <div className='image'>\r\n     <img src=\"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.webp\" class=\"img-fluid\" alt=\"Sample image\" />\r\n     </div>\r\n     <div className='login'>    \r\n        <div className='icon'>\r\n          <label style={{display: hasAccount?'flex': 'none'}}>  \r\n            <button className='login-btn gog-btn' onClick={loginwithGoogle()}> <i class=\"fab fa-google\"></i></button>\r\n            <button className='login-btn fb-btn' onClick={loginwithFacebook()}><i className=\"fab fa-facebook\"></i></button>\r\n          </label>    \r\n        </div>  \r\n        <div className=\"sub_title\" style={{display: hasAccount?'flex': 'none'}}>\r\n            <p className=\"text-center\">Or</p>\r\n        </div>\r\n\r\n        <div className=\"title\">\r\n        <h2>{hasAccount?'Log In':'Register'}</h2>\r\n        </div>        \r\n        <div className=\"spacer1\"></div>\r\n            <fieldset className=\"choose_role\">\r\n                <legend>Choose your role</legend>\r\n                <div>\r\n                  <input type=\"radio\" id=\"assistant\" name=\"interest\" class=\"slectOne\" value=\"assistant\" onChange={(e)=>setRoleType(e.target.value)} />\r\n                  <label for=\"assistant\" >Assistant</label>\r\n                </div>\r\n                <div>\r\n                  <input type=\"radio\" id=\"executive\" name=\"interest\" class=\"slectOne\" value=\"executive\" onChange={(e)=>setRoleType(e.target.value)} />\r\n                  <label for=\"executive\" >Executive</label>\r\n                </div>\r\n            </fieldset>  \r\n          <div className=\"logincontainer\">\r\n            <form onSubmit={(e)=>e.preventDefault()}>\r\n              <label style={{display: hasAccount?'none': 'flex'}}>   \r\n                <span>Name</span>\r\n                <input type=\"text\" placeholder='Jennifer Chang' onChange={(e)=>setName(e.target.value)}/>\r\n              </label>\r\n\r\n              <label>\r\n                <span>Email address</span>\r\n                <input type=\"text\" value={email} placeholder='username@mail.com' onChange={(e)=>setEmail(e.target.value)}/>\r\n                <p className='errormsgLogin'>{emailError}</p>\r\n              </label>\r\n              <label>\r\n                <span>Password</span>\r\n                <input type=\"password\" placeholder='password' value={password}onChange={(e)=>setPassword(e.target.value)}/>\r\n                <p className='errormsgLogin'>{passwordError}</p>\r\n              </label>\r\n              {hasAccount?\r\n              <div className='btnContainer'>\r\n                <button className='themeBtn' onClick={handleLogin}>{determineLoading()}</button>\r\n             <div className='flex' style={{textAlign: 'center'}}>\r\n             <Link exact to='/forgotpassword' className='forgotPasswordButton' >Forgot your password?</Link>\r\n             </div>\r\n             <div className='flex_warn' style={{textAlign: 'center'}}>\r\n             <small>Don't have an account<span onClick={()=>setHasAccount(!hasAccount)} style={{cursor: 'pointer'}}>? Register</span></small>\r\n             </div>\r\n              </div>:\r\n              \r\n              <div className='btnContainer'>\r\n                  <button className='themeBtn' style={{marginBottom: '10px'}} onClick={handleSignup}>Register</button>\r\n                  <div className='flexrow'>\r\n                  <small>Already have an account<span onClick={()=>setHasAccount(!hasAccount)} style={{cursor:'pointer'}}>? Sign in</span></small>\r\n                  </div>\r\n                  \r\n              </div>}\r\n              \r\n            </form> \r\n             \r\n          </div>\r\n        \r\n      </div>\r\n\r\n\r\n      <div className=\"footer\">\r\n        <div className=\"text-white mb-3 mb-md-0\">\r\n          Copyright  2022. MOON AND CAKE.\r\n        </div>\r\n      </div>\r\n\r\n     </Route>\r\n     <Route exact path='/forgotpassword'>\r\n          <Forgotpassword />\r\n     </Route>\r\n     </>\r\n  )\r\n}\r\nexport default Login\r\n","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport firebase from 'firebase'\r\nimport {db} from '../Fire'\r\nfunction Users (props) {\r\n  // const [name, setName]=useState('')\r\n  // const [img, setImg]=useState('')\r\n  // const [city, setCity]=useState('')\r\n  // const [country, setCountry]=useState('')\r\n  // const [job, setJob]=useState('')\r\n  // const [recipnumber, setRecipnumber]=useState('')\r\n  // const [recipemail, setRecipemail]=useState('')\r\n  // const [recipwebsite, setRecipwebsite]=useState('')\r\n  // const [extend, setExtend]=useState(false)\r\n    const {convoinfo, setConvoinfo, el, setChatuser, chatuser}=props\r\n    const [recipimg, setRecipimg]=useState('')\r\n    // const {recipname, setRecipname, sendername, setSendername}=props\r\n    const [recipname, setRecipname] = useState('')\r\n    const [sendername, setSendername]=useState('')\r\n    const [activestatus, setActivestatus]=useState(false)\r\n    const [senderimg, setSenderimg]=useState('')\r\n    const [loading, setLoading]=useState(true)\r\n    const [msg, setMsg]=useState('')\r\n    const reg = /((?:(?!(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)).)+)|((?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)(?:\\?\\S+=\\S*(?:&\\S+=\\S*)*)?)/gm\r\n    function ytVidId(url) {\r\n      var p = /^(?:https?:\\/\\/)?(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?$/;\r\n    return (url.match(p)) ? RegExp.$1 : false\r\n    }\r\n    let user = firebase.auth().currentUser\r\n    function determineMsgtype(msg){\r\n      if(msg.message!==undefined){\r\n        if(msg.base64){\r\n          return `<span style='font-size: 0px; position: absolute'>${msg.message}</span><img src=\"${msg.message}\"/>`\r\n        }else if(msg.file){\r\n        return 'Sent a File'\r\n        }else if(msg.audio){\r\n            return 'Sent a recording'\r\n        }\r\n        else if(ytVidId(msg.message)){\r\n          return 'Sent a Video'\r\n        }\r\n        else {\r\n          return msg.message.replace(reg, (_, text, img) => text ? `<p>${text.trim()}</p>` : `<img src=\"${img}\" />`)\r\n\r\n        }\r\n      }\r\n\r\n    }\r\n    function lastMsg(msg) {\r\n      if(msg) {\r\n        if(msg.senderid===user.uid) {\r\n          return `<p>You:</p> ${determineMsgtype(msg)}`\r\n        }else {\r\n          return determineMsgtype(msg)\r\n       }\r\n      }\r\n     \r\n    }\r\n    useEffect(()=>{\r\n      db.collection('users').doc(el.convoinfo.recipientid).onSnapshot(snap=>{\r\n        const user = snap.data()\r\n        setRecipname(user.userinfo.name)\r\n        setRecipimg(user.userinfo.cover)\r\n        setActivestatus(user.userinfo.online)\r\n        setLoading(false)\r\n      })\r\n      db.collection('users').doc(el.convoinfo.creatorid).onSnapshot(snap=>{\r\n        const user = snap.data()\r\n        setSendername(user.userinfo.name)\r\n        setSenderimg(user.userinfo.cover)\r\n        setLoading(false)\r\n      })\r\n      db.collection('conversations').doc(el.convoinfo.convoid).onSnapshot(snap=>{\r\n        const msgs = snap.data()  \r\n        setMsg(msgs.messages[msgs.messages.length-1])\r\n      })\r\n    },[el.convoinfo.recipientid, el, chatuser])\r\n    return (\r\n   <>\r\n  <NavLink activeClassName='activelink' to={'/chat/'+el.convoinfo.convoid} onClick={()=>{setChatuser(el.convoinfo.creatorid===user.uid?el.convoinfo.recipientid:el.convoinfo.creatorid)}}>\r\n      <div className=\"user\">\r\n          <div className=\"profilepic\">\r\n          {loading?<div class=\"lds-ring\"><div></div><div></div><div></div><div></div></div>: <img src={el.convoinfo.creatorid===user.uid?recipimg:senderimg} alt=\"\"/>}\r\n          </div>\r\n        <div className=\"info flex\">\r\n          <p className='username'>{el.convoinfo.creatorid===user.uid?recipname.length>15?recipname.slice(0, 15)+'...':recipname:sendername.length>15?sendername.slice(0, 15)+'...':sendername}</p>\r\n          <small dangerouslySetInnerHTML={{__html: lastMsg(msg)}}></small>        \r\n          </div>\r\n      </div>\r\n  </NavLink>\r\n  </>\r\n  )\r\n}\r\nexport default Users","import React, {useState, useEffect, useContext} from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport Users from './Users'\r\nimport {db} from '../Fire'\r\nimport firebase from 'firebase'\r\nimport { ContextApp } from '../ContextAPI'\r\n\r\nfunction Userrow (props) {\r\n  const {themecolor}=useContext(ContextApp)\r\n  const [keyword, setKeyword]=useState('')\r\n  const pattern = new RegExp('\\\\b' + keyword.replace(/[\\W_]+/g,\"\"), 'i')\r\n\r\n    const {convoinfo, setConvoinfo, setChatuser, chatuser}= props \r\n    const [userlist, setUserlist]=useState([])\r\n    const [convos, setConvos]=useState([])\r\n    const id =db.collection('users').doc().id\r\n    const  user = firebase.auth().currentUser\r\n    const allconvos = convos && convos.sort((a, b) => b.lastmsgdate - a.lastmsgdate).map(el=>{\r\n      if(user){\r\n          return <Users   chatuser={chatuser} setChatuser={setChatuser} el={el} convoinfo={convoinfo} setConvoinfo={setConvoinfo}/>    \r\n\r\n      }else {\r\n        return null\r\n      }\r\n    })\r\n    useEffect(()=>{\r\n     db.collection('users').doc(user.uid).onSnapshot(user=>{\r\n       const userlist = user.data()\r\n       setUserlist(userlist)\r\n       db.collection('conversations').onSnapshot(snap=>{\r\n         let convos = []\r\n          snap.forEach(doc=>{\r\n            if(userlist.msgids.includes(doc.id)){\r\n              convos.push(doc.data())\r\n            }\r\n          })\r\n          setConvos(convos)\r\n       })\r\n     })\r\n    },[])\r\n  return (\r\n   <>\r\n    <h2>Chats</h2>\r\n     <div className=\"search abs\">\r\n      \r\n       <i class=\"far fa-plus\" style={{color: themecolor}} onClick={()=>props.setAdduser()}></i>\r\n       <input type=\"text\" placeholder='Search' onFocus={()=>props.setAdduser()}/>\r\n     </div> \r\n   \r\n     <div className=\"users\">\r\n     {allconvos}     \r\n     </div>\r\n    \r\n  </>\r\n  )\r\n}\r\nexport default Userrow","import React, { useState, useEffect, useContext } from \"react\";\r\nimport { ContextApp } from \"../ContextAPI\";\r\n\r\nfunction Hoverabletexticonflexrow(props) {\r\n  const { themecolor } = useContext(ContextApp);\r\n  const { icon, classNames, text, functionOne } = props;\r\n  return (\r\n    <div\r\n     \r\n      className={`${classNames} white`}\r\n      onClick={functionOne}\r\n    >\r\n      <i className={\"whiteel fad fa-\" + icon} ></i>\r\n        <p className='white' >{text}</p>\r\n    </div>\r\n  );\r\n}\r\nexport default Hoverabletexticonflexrow;\r\n","import React, { useContext, useEffect, useRef, useState } from 'react'\r\nimport {CSSTransition} from 'react-transition-group'\r\nimport { db } from '../Fire'\r\nimport firebase from 'firebase'\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\nimport { ContextApp } from '../ContextAPI'\r\nimport Hoverabletexticonflexrow from './Hoverabletexticonflexrow'\r\n\r\nfunction Contextmenu(props){\r\n  const user =firebase.auth().currentUser\r\n  const {themebool, emojibool,type,setUpdatedMsg,copy,convoid,contextmenu, setContextmenu, contextstyle, msgid}=props\r\n  const [events, setEvents]=useState(false)\r\n  const [visible, setVisible]=useState(false)\r\n  const emojis = ['smile','angry','sad-cry','surprise']\r\n  const [msgs, setMsgs]=useState([])\r\n  const contextmenuSelector = useRef()\r\n  const location = useLocation()\r\n  const history = useHistory()\r\n  const {themecolor}=useContext(ContextApp)\r\n  const allemojis = [{\r\n    class: 'surprise yellow',\r\n    msg: 'Surprised'\r\n  },{\r\n    class: 'tired blue',\r\n    msg: 'Tired'\r\n  },\r\n  {\r\n    class: 'smile-wink yellow',\r\n    msg: 'Wink'\r\n  },\r\n  {\r\n    class: 'kiss-beam red',\r\n    msg: 'Love'\r\n  },\r\n  {\r\n    class: 'grin-stars yellow',\r\n    msg: 'Stars'\r\n  },\r\n  {\r\n    class: 'grin-squint-tears yellow',\r\n    msg: 'Laugh'\r\n  },\r\n  {\r\n    class: 'grimace yellow',\r\n    msg: 'Grimace'\r\n  }, \r\n  {\r\n    class: 'frown red',\r\n    msg: 'Frown'\r\n  },\r\n  {\r\n    class: 'heart red',\r\n    msg: 'Like'\r\n  }\r\n    ] \r\n \r\n  function sendReaction(opt){\r\n    let messages = {\r\n    reaction: `fad fa-${opt}`\r\n    }\r\n  msgs && msgs.map(msg=>{\r\n      if(msgid===msg.msgid){\r\n        let itemindex = msgs.indexOf(msg)\r\n        if(msg.senderid===user.uid){\r\n          msgs[itemindex].reaction1=`fad fa-${opt}`\r\n          db.collection('conversations').doc(convoid).update({\r\n              messages: msgs\r\n          })\r\n        }\r\n        else {\r\n          msgs[itemindex].reaction2=`fad fa-${opt}`\r\n          db.collection('conversations').doc(convoid).update({\r\n              messages: msgs\r\n          })\r\n        }\r\n      }\r\n  })\r\n    setContextmenu(false)\r\n  }\r\n  function copyFunc(msgid){\r\n    var r = document.createRange()\r\n    let text = document.querySelector(`#${msgid} .msg`)\r\n    r.selectNode(text)\r\n    window.getSelection().removeAllRanges()\r\n    window.getSelection().addRange(r)\r\n    document.execCommand('copy')\r\n    window.getSelection().removeAllRanges()\r\n    setContextmenu(false)\r\n  }\r\n\r\n  function deleteFunc(){\r\n    msgs && msgs.map(msg=>{\r\n      if(msgid===msg.msgid&&msg.senderid===user.uid){\r\n        let itemindex = msgs.indexOf(msg)\r\n        msgs.splice(itemindex, 1) \r\n        db.collection('conversations').doc(convoid).update({\r\n            messages: msgs\r\n        })\r\n      }\r\n  })\r\n    setContextmenu(false)\r\n  }\r\n  function editFunc(){\r\n          let edit = document.querySelector(`#${msgid} p`)\r\n          edit.setAttribute('contentEditable', 'true')\r\n\r\n          edit.oninput=(e)=>{\r\n            setUpdatedMsg(e.currentTarget.textContent)\r\n          }\r\n\r\n          setContextmenu(false)\r\n\r\n    }\r\n  const emojisrow = emojis.map(opt=>{\r\n    return <div onClick={()=>sendReaction(opt)}> <i className={'fad fa-'+(opt==='cry'?'sad-cry':opt)} ></i>  </div>\r\n\r\n  })\r\n  const allemojisrow = allemojis.map(emoji=>{\r\n    return <div onClick={()=>sendReaction(emoji.class)}>\r\n        <i className={emoji.class==='heart red'?'fas fa-'+emoji.class:'fad fa-'+emoji.class}></i>\r\n        <p>{emoji.msg}</p>\r\n    </div>\r\n  })\r\n  document.addEventListener('click', function(e){\r\n      const target = e.target\r\n      if(target!==contextmenuSelector.current){\r\n        setContextmenu(false)\r\n      }\r\n  })\r\n  useEffect(()=>{\r\n    if(type==='msg'){\r\n      db.collection('conversations').doc(convoid).onSnapshot(snap=>{\r\n        setMsgs(snap.data().messages)\r\n      })\r\n    }\r\n   \r\n  },[convoid])\r\n\r\n\r\n  return (\r\n    <>\r\n    {\r\n      type==='msg'?   <div  ref={contextmenuSelector}  onContextMenu={(e)=>e.preventDefault()} className=\"contextmenu bs\" style={{display: contextmenu?'flex':'none', left: contextstyle.left+'px', top: contextstyle.top+'px'}}>\r\n       <div className='emojis'>{emojisrow}</div>\r\n       <div className={'option laugh' } onMouseOver={()=>setVisible(true)} onMouseLeave={()=>setVisible(false)}>\r\n         <i className='fad fa-laugh'></i> <p>Reaction</p>\r\n         <CSSTransition\r\n          in={visible}\r\n          timeout={200}\r\n          classNames=\"drophover\"\r\n          unmountOnExit\r\n          >\r\n        <div className='dropmenu bs'>\r\n        {allemojisrow}\r\n        </div>\r\n        </CSSTransition>\r\n        </div>\r\n    <div className={'option copy'} onClick={()=>copyFunc(msgid)}>\r\n    <i className='fal fa-copy'></i> <p>Copy</p>\r\n   </div>    \r\n   {/* <div className={'option edit'} onClick={()=>editFunc()}>\r\n    <i className='fal fa-edit'></i> <p>Edit</p>\r\n   </div> */}\r\n\r\n   <div className={'option delete'} onClick={()=>deleteFunc()}>\r\n    <i className='fal fa-trash'></i> <p>Delete</p>\r\n   </div>\r\n    </div>\r\n    :type==='settings'?\r\n    <div ref={contextmenuSelector}  onContextMenu={(e)=>e.preventDefault()} className=\"contextmenu bs\" style={{display: contextmenu?'flex':'none', left: contextstyle.left+'px', top: contextstyle.top+'px'}}>\r\n        \r\n        {(emojibool ===true ||  themebool===true ||type==='settings')?'':<>\r\n        <Hoverabletexticonflexrow classNames={'option'} functionOne={()=>props.setThemebool(true)} icon={'adjust'} text={'Theme'}/>\r\n        <Hoverabletexticonflexrow classNames={'option'} functionOne={()=>props.setEmojibool(true)} icon={props.emojitype} text={'Emoji'}/>\r\n        </> }\r\n        <Hoverabletexticonflexrow classNames={'option'} functionOne={()=>window.location.reload()} icon={'sync'} text={'Reload'}/>\r\n        <Hoverabletexticonflexrow classNames={'option'} functionOne={()=>history.goForward()} icon={'long-arrow-alt-right'} text={'Forward'}/>\r\n        <Hoverabletexticonflexrow classNames={'option'} functionOne={()=>history.goBack()} icon={'undo'} text={'Previous'}/>\r\n       \r\n    </div>\r\n    :\r\n    ''\r\n    }\r\n    </>\r\n  )\r\n}\r\nexport default Contextmenu","import React, {useState, useEffect} from 'react'\r\n\r\nfunction ElapsedTime(props) {\r\n \r\n  const [elapsedTime, setElapsedTime] = useState('')\r\n  const [regdate, setRegDate] = useState('')\r\n  const [providedtime, setProvidedTime] = useState(props.providedtime)\r\n\r\n  function msToTime(duration) {\r\n    let date = new Date()\r\n    let minutes = Math.floor((duration / (1000 * 60)) % 60),\r\n    hours = Math.floor((duration / (1000 * 60 * 60)) % 24)\r\n    let pday = providedtime.getDate()\r\n    let pmonth = providedtime.getMonth()\r\n    let pyear = providedtime.getFullYear()\r\n    let day = date.getDate()\r\n    let month = date.getMonth()\r\n    let year = date.getFullYear() \r\n    if(pday===day && pmonth===month && pyear===year && hours < 24) {\r\n      if(hours < 1) {\r\n        if(minutes < 1)\r\n          return \"A few seconds ago\"\r\n        else if (minutes === 1)\r\n          return \"A minute ago\"\r\n        else \r\n          return minutes+\" minutes ago\"\r\n      }\r\n      else if(hours === 1) \r\n        return \"One hour ago\"\r\n      else \r\n        return hours+\" hours ago\"\r\n    }\r\n    else {\r\n      return providedtime.toString().split(' ').slice(1,4).toString().replaceAll(',',' ') \r\n    }\r\n  } \r\n\r\n  useEffect(() => {\r\n    var storedDate = new Date(providedtime)\r\n    var nowDate = new Date()\r\n    var elapsedTime = nowDate.getTime() - storedDate.getTime()\r\n    setElapsedTime(msToTime(elapsedTime))\r\n  },[props.updateelapsed, providedtime])\r\n\r\n  return <>{elapsedTime}</> \r\n}\r\n\r\nexport default ElapsedTime","import React, { Component, useContext, useState } from 'react'\r\nimport { saveAs } from 'file-saver';\r\n\r\nimport AudioReactRecorder, { RecordState } from 'audio-react-recorder'\r\nimport styled from 'styled-components'  \r\nimport { ContextApp } from '../ContextAPI'\r\nimport firebase from 'firebase'\r\nimport { db } from '../Fire'\r\n\r\nconst Iconspecial = styled.i `\r\ncolor: ${props=>props.color};\r\nbackground-color: white;\r\n&:hover {\r\n  color: white;\r\n  background-color:  ${props=>props.color};\r\n}\r\n`\r\nfunction Recorder(props) {\r\n  \r\n  const user = firebase.auth().currentUser\r\n  const {convoid, progressbar, progresswidth}=props\r\n  const {themecolor}= useContext(ContextApp)\r\n  const [record, setRecord] = useState(null)\r\n  const [audio, setAudio] = useState('blob:https://5guz4.csb.app/2ff8746b-44d6-4c3f-b531-480291e7aa84')\r\n  const [update, setUpdate]=useState(0)\r\n  const [clicked, setClicked]=useState(false)\r\n  const [reset, setReset]=useState(false)\r\n  let id = db.collection('conversations').doc().id\r\n\r\n  function start() {\r\n    setRecord(RecordState.START)\r\n  }\r\n \r\n  function stop() {\r\n      setRecord(RecordState.STOP)\r\n  }\r\n  //audioData contains blob and blobUrl\r\n    const onStop = (audioData) => {\r\n    if(!reset){\r\n      var FileSaver = require('file-saver');\r\n      const storageRef =  firebase.storage().ref(`${convoid}/recording.mp3`)\r\n      var reader = new FileReader();\r\n      reader.readAsDataURL(audioData.blob); \r\n      reader.onloadend = function() {\r\n          var base64data = reader.result;                \r\n          function urltoFile(url, filename, mimeType){\r\n            return (fetch(url)\r\n                .then(function(res){return res.arrayBuffer();})\r\n                .then(function(buf){return new File([buf], filename,{type:mimeType});})\r\n            );\r\n        }\r\n        \r\n        //Usage example:\r\n        urltoFile(base64data, 'recording.wav','audio/wav')\r\n        .then(\r\n          function(file){ \r\n\r\n              const storageRef =  firebase.storage().ref(`${convoid}/${id}.wav`)\r\n\r\n    const task =  storageRef.put(file)\r\n      task.on('state_changes',\r\n\r\n        function progress(snap){\r\n          progressbar.current.style.display='flex'\r\n          const percentage =( snap.bytesTransferred/snap.totalBytes)*100\r\n         progresswidth.current.style.height=`${percentage}%`\r\n        }, \r\n        function error(err){\r\n\r\n        },\r\n        function complete(){\r\n  \r\n              let msgobject = {\r\n            message: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${id}.wav?alt=media`,\r\n            reaction: \"\",\r\n            msgdate: firebase.firestore.Timestamp.now(),\r\n            msgid: db.collection(\"conversations\").doc().id,\r\n            read: false,\r\n            senderid: user.uid,\r\n            editing: false,\r\n            nobackground: true,\r\n            emoji: true,\r\n            base64: false,\r\n            audio: true\r\n          };\r\n          db.collection(\"conversations\")\r\n          .doc(convoid)\r\n          .update({\r\n            messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n          });\r\n          progressbar.current.style.display='none'\r\n\r\n    })    \r\n          });\r\n\r\n}\r\n\r\n    }else {\r\n      setReset(false)\r\n    }\r\n  }\r\n  \r\n  const [time, setTime] = useState(0)\r\n  const [intervalId, setIntervalId] = useState();\r\n  function startRecord() {\r\n      start()\r\n      setClicked(true)\r\n      setIntervalId(setInterval(() => {\r\n          setTime(prev => prev + 1)\r\n      }, 1000));\r\n  }\r\n  \r\n  function stopRecord() {\r\n      setTime(0)\r\n      stop()\r\n      setClicked(false)\r\n      clearInterval(intervalId);\r\n  }\r\n  function resetRecord(){\r\n    setReset(true)\r\n    stop()\r\n  }\r\n    return (\r\n      <>\r\n        <AudioReactRecorder state={record} onStop={onStop} />\r\n        {!clicked?<Iconspecial color={themecolor} className='icondiv fal fa-microphone' onClick={()=>{startRecord(); }}></Iconspecial>:\r\n        <div class=\"spinner-wave\" onClick={()=>{stopRecord(); }}>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n       \r\n        <span className=\"time\">\r\n          {time}\r\n        </span>\r\n        <Iconspecial color={themecolor} className=\"left fal fa-times-circle\" onClick={()=>resetRecord()}></Iconspecial>\r\n\r\n      </div>\r\n      }\r\n        {/* <button onClick={()=>start()}>Start</button>\r\n        <button onClick={()=>stop()}>Stop</button> */}\r\n      </>\r\n    )\r\n  }\r\n\r\nexport default Recorder","import React, { useState, useEffect, useContext } from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  NavLink,\r\n  Redirect\r\n} from \"react-router-dom\";\r\nimport { ContextApp } from \"../ContextAPI\";\r\nimport styled from 'styled-components'  \r\nimport Recorder from \"./Recorder\";\r\n\r\nconst Button =  styled.button `\r\n&:hover {\r\n  background-color: ${props=>props.color}\r\n}\r\n`\r\nconst Icon = styled.i `\r\ncolor: ${props=>props.color};\r\n\r\n`;\r\nconst Iconspecial = styled.i `\r\ncolor: ${props=>props.color};\r\nz-index: 10;\r\nbackground-color: white;\r\n&:hover {\r\n  color: white;\r\n  background-color:  ${props=>props.color};\r\n}\r\n`\r\nconst Span = styled.span `\r\n&:hover {\r\n  background-color: ${props=>props.color}\r\n}\r\n`;\r\nfunction Hoverableicondiv(props) {\r\n  const { inputref,progresswidth, progressbar,convoid,setImg,sendFile,special,icon,type, classNames, setState, state, lnk, setState2, handleEvent } = props;\r\n  const { themecolor } = useContext(ContextApp);\r\n  function chatFuncDisplay(){\r\n    setState2(false);\r\n     setTimeout(()=>{\r\n      setState(false)\r\n     },400)\r\n  }\r\n  return  (\r\n    <>\r\n    { type && type==='link'?    \r\n      <Link  to={lnk} id='sth' onClick={()=>{chatFuncDisplay()}}>\r\n      <Span color={themecolor} className={`icondiv ${classNames}`}>\r\n      <Icon color={themecolor} className={\" fal fa-\" + icon}></Icon>\r\n     </Span>\r\n    </Link>\r\n    :special?\r\n    <label style={{zIndex: 4, cursor: 'pointer'}}>\r\n        {type==='microphone'?<Recorder convoid={convoid} progressbar={progressbar} progresswidth={progresswidth}/>: \r\n        <><input type={type} ref={inputref} className={`${icon}file`}style={{display: 'none'}} onChange={()=>sendFile(icon)} accept={icon==='image'?\"image/*\":icon==='film'?'\"video/mp4,video/x-m4v,video/*, mp4\"':''}/>\r\n         <Iconspecial color={themecolor} className={\"icondiv fal fa-\" + icon} ></Iconspecial></>}\r\n\r\n    </label>\r\n    :\r\n    <Button color={themecolor} className={`icondiv ${classNames}`} onClick={()=>{setState && setState(!state); handleEvent&&handleEvent()}}>\r\n         <Icon color={themecolor} className={\" fal fa-\" + icon} ></Icon>\r\n      </Button>\r\n  }\r\n    </>\r\n\r\n  );\r\n}\r\nexport default Hoverableicondiv;\r\n","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction Iframe (props) {\r\n  const {link, type}= props\r\n  return (\r\n<>\r\n  {\r\n    type==='video'?\r\n      <video controls src={link}  allowFullScreen>\r\n         \r\n      </video>\r\n      :\r\n      <iframe src={link} allowFullScreen>\r\n\r\n      </iframe>\r\n}\r\n</>\r\n  )\r\n}\r\nexport default Iframe","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction Img (props) {\r\n  const {src, link}= props\r\n  return (\r\n    <>\r\n    {link?   <span style={{fontSize: '0px', position:'absolute'}}>{src}</span>:''}\r\n    <img src={src}/>\r\n    </>\r\n  )\r\n}\r\nexport default Img","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction File (props) {\r\n  const {link, name}= props\r\n  return (\r\n\r\n      <a href={link} target='_blank' className='file'><i className='fal fa-file'> </i><span>Download {name}</span></a>\r\n\r\n  )\r\n}\r\nexport default File","import React, {useState, useEffect, useRef} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction Recording (props) {\r\n  const {src}= props\r\n  const video =useRef()  \r\n  const playBtn = useRef()\r\n  const progress = useRef()\r\n  const playPause = useState(false)\r\n  function togglePlayPause(e){\r\n    if(video.current.paused){\r\n      video.current.play()\r\n      e.target.className='fal fa-pause'\r\n    }\r\n    else {\r\n      video.current.pause()\r\n      e.target.className='fal fa-play'\r\n    }\r\n  }\r\nfunction updateProgress(){\r\n    const progresswidth = video.current.currentTime/video.current.duration\r\n    setTime((video.current.duration-video.current.currentTime).toFixed(1))\r\n    progress.current.style.width=progresswidth*100+'%'\r\n    if(video.current.ended){\r\n      playBtn.current.className='fal fa-play'\r\n    }\r\n    }\r\n    const [time, setTime]=useState('')\r\n    function determineMinSecH(time){\r\n      if(time>60){\r\n        return (time / 60).toFixed(0) +' m'\r\n      }else if (time>3600){\r\n        return (time/3600).toFixed(1) + ' h'\r\n      }else {\r\n        return Math.round(time) + ' s'\r\n      }\r\n    }\r\n  return (\r\n    <div className='videoContainer'> \r\n      <video onLoadedData={()=>setTime(video.current.duration.toFixed(1))} onTimeUpdate={()=>updateProgress()} src={src} id='video' ref={video}></video>\r\n        <div className=\"controls\">\r\n          <i className=\"fal fa-play\" ref={playBtn} onClick={(e)=>togglePlayPause(e)}></i>\r\n          <div className=\"progressvideo\">\r\n            <div className=\"progress\" ref={progress}></div>\r\n          </div>\r\n          <small>{determineMinSecH(time)}</small>\r\n        </div>\r\n    </div>\r\n   \r\n  )\r\n}\r\nexport default Recording","import React from 'react'\r\n\r\nexport function Search({search, setSearch, fetchData, setTitle}) {\r\n// Handle Submit\r\nconst handleSubmit = (e)=>{\r\n    // Prevent default\r\n    e.preventDefault();\r\n    // Set Title\r\n    setTitle(search);\r\n    // Fetch\r\n    fetchData(search);\r\n    // Reset form search value\r\n    setSearch('');\r\n}\r\n\r\n// RETURN    \r\n    return (\r\n\r\n            <form className='gif-search flexrow' onSubmit={handleSubmit}>\r\n              <div className=\"gifform flexrow\">\r\n              <button className='themeBtn'>\r\n            <i className=\"fal fa-search\"></i>\r\n            </button>\r\n              <input \r\n            className='inputgif'\r\n            type=\"text\"\r\n            value={search}\r\n            onChange={ e => {setSearch(e.target.value)}}\r\n            placeholder='Search GIFs'\r\n            /> \r\n       \r\n              </div>\r\n            </form>\r\n    )\r\n}\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\n\r\nimport { ContextApp } from \"../ContextAPI\";\r\nimport styled from 'styled-components'\r\nconst Button = styled.button ` \r\nbackground-color: ${props=>props.color};\r\nborder: solid 3px transparent;\r\n  &:hover {\r\n    background-color: white;\r\n    border: solid 3px ${props=>props.color}\r\n  }\r\n`\r\nfunction Hoverablebutton(props) {\r\n  const { themecolor } = useContext(ContextApp);\r\n  const { state, setState, type, text } = props;\r\n\r\n  return (      \r\n      <Button \r\n      color={themecolor}\r\n       className={state===type?'themeBtn active':'themeBtn'}\r\n        onClick={()=>setState(type)}\r\n      > \r\n        {text}\r\n      </Button>\r\n    );\r\n}\r\nexport default Hoverablebutton;\r\n","import React from 'react'\r\nimport axios from 'axios'\r\n\r\nimport {Search} from './Search'\r\nimport Hoverablebutton from '../Hoverablebutton';\r\nimport Hoverableicondiv from '../Hoverableiconsdiv';\r\nimport firebase from 'firebase'\r\nimport {db} from '../../Fire'\r\n\r\nexport default function Gif(props) {\r\n    // STATEs\r\n    const {setGif, convoid, chatuser, notifibool, chatimg}=props\r\n    const [data, setData] = React.useState([]);\r\n    const [title, setTitle] = React.useState('Gif');\r\n    const [loader, setLoader] = React.useState(true);\r\n    const [offset, setOffset] = React.useState(0);\r\n    const [limit, setLimit] = React.useState(10)\r\n    const [totalCount, setTotalCount] = React.useState(0)\r\n    const [search, setSearch] = React.useState('');\r\n    const [trending, setTrending] = React.useState(false)\r\n    const [trendSearch, setTrendSearch] = React.useState(false)\r\n    const [tSearch, setTsearch] = React.useState([])\r\n    const date = firebase.firestore.FieldValue.serverTimestamp()\r\n    const user =firebase.auth().currentUser\r\n//\r\n//  FETCH \r\nconst fetchData = async (title)=>{\r\nlet URL = `https://api.giphy.com/v1/gifs/search?q=${title}&api_key=nn7ZohI4KJCwSXdYVpViEi7RkUmJacV3&limit=${limit}&offset=${offset}`;\r\n// Try and catch\r\ntry{\r\n    let fetchGif = await axios(URL);\r\n    let fetchRes = await fetchGif;\r\n    if(fetchRes.status === 200){\r\n    // Set Data\r\n    setData(fetchRes.data.data)\r\n    // Set Total Count\r\n    setTotalCount(fetchRes.data.pagination.total_count)\r\n    // Set loader false\r\n    setLoader(false)\r\n     // Call new content\r\n     content()\r\n     // Set fetch random false\r\n     if(trending){\r\n     setTrending(false)\r\n    // Reset offset\r\n    setOffset(0)\r\n     }\r\n     // Set trend searching\r\n     setTrendSearch(false)\r\n    \r\n    }\r\n}\r\ncatch(error){\r\n    if(error) throw error\r\n}\r\n\r\n}\r\n// Remove image\r\n// const removeImage = id => {\r\n//     setData(\r\n//      data.filter(gif => gif.id !== id)\r\n//     )\r\n//   }\r\n// USE EFFECT on offset change fetch new data\r\nReact.useEffect(()=>{\r\n\r\n    if(!trending){\r\n    fetchData(title)\r\n    }\r\n},[offset])\r\n\r\n //\r\n //  HANDLE DOWNLOAD \r\n     \r\nconst handleDownload = (url)=>{\r\n    var xhr = new XMLHttpRequest();\r\n    xhr.open(\"GET\", url, true);\r\n    xhr.responseType = \"blob\";\r\n    xhr.onload = function(){\r\n        let urlCreator = window.URL || window.webkitURL;\r\n        let imageUrl = urlCreator.createObjectURL(this.response);\r\n        let tag = document.createElement('a');\r\n        tag.href = imageUrl;\r\n        tag.download = title.charAt(0).toUpperCase() + title.slice(1);\r\n        document.body.appendChild(tag);\r\n        tag.click();\r\n        document.body.removeChild(tag);\r\n    }\r\n    xhr.send();\r\n}\r\n\r\n// Scroll on top function\r\nconst onTop = () => {\r\n    let options = { top: 0, left: 0, behavior: 'smooth' };\r\n    window.scrollTo(options);\r\n}\r\n\r\n// Handle Next Pagination\r\nconst handleNext = ()=>{\r\n    // Set loader true\r\n    setLoader(true);\r\n    // Add one page\r\n    setOffset(offset + limit)\r\n    // Go on top\r\n    onTop()\r\n}\r\n// Handle prev Pagination\r\nconst handlePrev = ()=>{\r\n    // Loader true\r\n    setLoader(true);\r\n    // One page\r\n    setOffset(offset - limit) \r\n    // Go on top\r\n    onTop()\r\n}\r\nfunction sendGif(img){\r\n    let msgobject = {\r\n        message: img,\r\n        reaction1: \"\",\r\n        reaction2: \"\",\r\n        msgdate: firebase.firestore.Timestamp.now(),\r\n        msgid: db.collection(\"conversations\").doc().id,\r\n        read: false,\r\n        senderid: user.uid,\r\n        editing: false,\r\n        nobackground: true,\r\n        emoji: true,\r\n        base64: true\r\n      };\r\n      db.collection(\"conversations\")\r\n        .doc(convoid)\r\n        .update({\r\n          lastmsgdate: date,\r\n          messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n        });\r\n        let notificationobj = {\r\n            notifimsg: img,\r\n            notifidate: firebase.firestore.Timestamp.now(),\r\n            read: false,\r\n            sender: user.displayName,\r\n            gif: true,\r\n            id: convoid,\r\n            senderid: user.uid,\r\n            notifiid: db.collection('users').doc().id          }      \r\n          if(notifibool){\r\n            db.collection('notifications').doc(chatuser).update({\r\n              notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n            })\r\n          }\r\n}\r\n //\r\n //  RENDER CONTENT \r\n     \r\nconst content = () => {\r\n    switch(true) {\r\n    // If loader is true show loader spinner\r\n      case loader:\r\n        return <div>Loading...</div>\r\n    // If data array more than zero loop through\r\n      case data.length > 0:\r\n        return  data.map(g=> {\r\n            return (\r\n                <div className='gif-card' key={g.id}>\r\n                <img className='image' onClick={()=>sendGif(g.images.fixed_height.url)} src={g.images.fixed_width.url} alt=\"gif\"/>\r\n                </div>\r\n            )\r\n        })\r\n\r\n    // Otherwise return default\r\n      default:\r\n        return data\r\n    }\r\n  }\r\n\r\n//\r\n//  RETURN \r\n    \r\nreturn (\r\n    <div className='gif bs'>\r\n        <header>\r\n        <i className=\"fal fa-times\" onClick={()=>setGif(false)}></i>\r\n        <h2>Search GIFs</h2>\r\n        <Search search={search} setSearch={setSearch} fetchData={fetchData} setTitle={setTitle}/>\r\n\r\n        </header>\r\n    \r\n        <div className='gif-wrap'>\r\n      \r\n        {trendSearch ? \r\n        (\r\n            <div className='gif-trend-search'>\r\n            <ul> \r\n            {tSearch.map((t,i)=> <li key={i}><strong>{i + 1}</strong> {t.toUpperCase()}</li>)}\r\n            </ul>\r\n            </div>\r\n        )\r\n        :\r\n        ''\r\n        }\r\n          {content()}\r\n        </div>\r\n        <div className=\"flexrow np-btn\">\r\n        <button className='themeBtn flex' s onClick={handlePrev}><i class=\"fad fa-backward\"></i></button>\r\n        <button className='themeBtn flex' onClick={handleNext}><i class=\"fad fa-forward\"></i></button>\r\n        </div>\r\n\r\n       \r\n    </div>\r\n)\r\n}\r\n","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction Contextoptions (props) {\r\n  const {text,classNames, icon, function1, setState, re}= props\r\n  return (\r\n    <div className={classNames} ref={re &&re}onClick={(e)=>{setState && setState(prev=>!prev);e.stopPropagation(); function1 && function1()}}>\r\n    <i className={icon} ></i>\r\n    </div>\r\n  )\r\n}\r\nexport default Contextoptions","\r\nimport React, {useState, useEffect, useRef} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport Contextoptions from './Contextoptions'\r\nimport {db} from '../../Fire'\r\nimport Contextmenu from '../Contextmenu'\r\nimport { displayName } from 'react-addons-css-transition-group'\r\nfunction Threedots (props) {\r\n  const {msg, user, msgs, convoid}= props\r\n  const [visible, setVisible]=useState(false)\r\n  const [emojis, setEmojis]=useState(false)\r\n  const [msgidedit, setMsgidedit]=useState('')\r\n  const allemojis = [\r\n  {\r\n    class: 'smile-wink yellow',\r\n    msg: 'Wink'\r\n  },\r\n  {\r\n    class: 'kiss-beam red',\r\n    msg: 'Love'\r\n  },\r\n  {\r\n    class: 'grin-stars yellow',\r\n    msg: 'Stars'\r\n  },\r\n  {\r\n    class: 'grin-squint-tears yellow',\r\n    msg: 'Laugh'\r\n  },\r\n  {\r\n    class: 'frown red',\r\n    msg: 'Frown'\r\n  },\r\n  {\r\n    class: 'heart red',\r\n    msg: 'Like'\r\n  }\r\n    ] \r\n    function sendReaction(opt){\r\n      msgs && msgs.map(msg=>{\r\n          if(msgidedit===msg.msgid){\r\n            let itemindex = msgs.indexOf(msg)\r\n            if(msg.senderid===user.uid){\r\n              msgs[itemindex].reaction1=`fad fa-${opt}`\r\n              db.collection('conversations').doc(convoid).update({\r\n                  messages: msgs\r\n              })\r\n            }else {\r\n              msgs[itemindex].reaction2=`fad fa-${opt}`\r\n              db.collection('conversations').doc(convoid).update({\r\n                  messages: msgs\r\n              })\r\n            }\r\n          }\r\n      })\r\n    }\r\n    const emojisrow = allemojis && allemojis.map(emoji=>{\r\n      return <i  className={'fad fa-'+emoji.class} onClick={()=>{sendReaction(emoji.class); setVisible(false)}}></i>\r\n    })\r\n    const contextoption = useRef()\r\n    const emojiref = useRef()\r\n\r\n  // function reactionMsg(msgid){\r\n  //   msgs && msgs.map(msg=>{\r\n  //     if(msgid===msg.msgid){\r\n  //       let itemindex = msgs.indexOf(msg)\r\n  //       msgs[itemindex].reaction=`fad fa-${opt}`\r\n  //       db.collection('conversations').doc(convoid).update({\r\n  //           messages: msgs\r\n  //       })\r\n  //     }\r\n  // })\r\n  // }\r\n\r\n  function copyMsg(){\r\n    var r = document.createRange()\r\n    let text = document.querySelector(`#${msgidedit} .msg`)\r\n    if(text){\r\n      r.selectNode(text)\r\n      window.getSelection().removeAllRanges()\r\n      window.getSelection().addRange(r)\r\n      document.execCommand('copy')\r\n      window.getSelection().removeAllRanges()\r\n      setVisible(false)\r\n    }\r\n  }\r\n  function deleteMsg(){\r\n    msgs && msgs.map(msg=>{\r\n      if(msgidedit===msg.msgid&&msg.senderid===user.uid){\r\n        let itemindex = msgs.indexOf(msg)\r\n        msgs.splice(itemindex, 1) \r\n        db.collection('conversations').doc(convoid).update({\r\n            messages: msgs\r\n        })\r\n        setVisible(false)\r\n      }\r\n  })\r\n\r\n  }\r\n \r\n  function msgOptions(msg){\r\n\r\n  }\r\n  const threedots = useRef()\r\n  document.addEventListener('click', function(e){\r\n  if(e.target!==threedots.current){\r\n    setVisible(false)\r\n    setEmojis(false)\r\n  }\r\n})\r\n  return (\r\n    <>\r\n      <i ref={threedots}onClick={(e)=>{msgOptions(msg); setMsgidedit(msg.msgid); setVisible(!visible)}} className={msg.senderid === user.uid ?\"fal fa-ellipsis-v-alt rightdots\":'fal fa-ellipsis-v-alt leftdots'}></i>\r\n      <div onContextMenu={(e)=>e.preventDefault()} onClick={(e)=>e.stopPropagation()} className='flexrow optionsEdit' ref={contextoption} data-id={msg.msgid} style={{display: visible?'flex':'none'}}>\r\n      <div className=\"emojisdiv\">\r\n      <Contextoptions classNames={'laugn'} icon={'fad fa-laugh'} setState={setEmojis} re={emojiref}/>\r\n      <div  onClick={(e)=>e.stopPropagation()} className=\"emojisrow flexrow bs\" style={{display: emojis?'flex':'none',  zIndex: 'var(--high-priority)'}}>\r\n        {emojisrow}\r\n      </div>\r\n      </div>\r\n       <Contextoptions classNames={'copy'} icon={'fad fa-copy'} function1={()=>copyMsg()}/>\r\n       <Contextoptions classNames={'delete'} icon={'fad fa-trash'} function1={()=>deleteMsg()}/>\r\n      </div>\r\n    </>\r\n      )\r\n}\r\nexport default Threedots","import React, { useState, useEffect, useRef, useContext } from \"react\";\r\nimport { NavLink, Route, Link } from \"react-router-dom\";\r\nimport Users from \"./Users\";\r\nimport firebase from \"firebase\";\r\nimport { db } from \"../Fire\";\r\nimport Contextmenu from \"./Contextmenu\";\r\nimport { FilePond, File, registerPlugin } from \"react-filepond\";\r\nimport \"filepond/dist/filepond.min.css\";\r\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\r\nimport ElapsedTime from \"./Elapsedtime\";\r\nimport { ContextApp } from \"../ContextAPI\";\r\nimport Hoverableicondiv from \"./Hoverableiconsdiv\";\r\nimport InnerImageZoom from \"react-inner-image-zoom\";\r\nimport Iframe from \"./msgcomponents/Iframe\";\r\nimport Img from './msgcomponents/Img'\r\nimport Filemsg from './msgcomponents/File'\r\nimport P from './msgcomponents/P'\r\nimport Recording from \"./msgcomponents/Recording\";\r\nimport Gif from \"./Gifs.js/Gif\";\r\nimport ReactTimeAgo from 'react-time-ago'\r\nimport ReactImageMagnify from 'react-image-magnify';\r\nimport Contextoptions from \"./msgcomponents/Contextoptions\";\r\nimport Threedots from \"./msgcomponents/Threedots\";\r\nimport ScrollContainer from 'react-indiana-drag-scroll';\r\nimport { ReactTinyLink } from 'react-tiny-link'\r\nimport Picker from 'emoji-picker-react';\r\n\r\nfunction Dialogue(props) {\r\n  const {\r\n    themecolor,\r\n    notifi,\r\n    setNotifi,\r\n    notificont,\r\n    setNotificont\r\n  } = useContext(ContextApp);\r\n  const [gif, setGif]=useState(false)\r\n  const [msgs, setMsgs] = useState([]);\r\n  const [msgstring, setMsgstring] = useState(\"\");\r\n  const [updateelapsed, setUpdateelapsed] = useState(0);\r\n  const [typing, setTyping] = useState(false);\r\n  const [realtyping, setRealtyping] = useState(false);\r\n  const [typerid, setTyperid] = useState(\"\");\r\n  const [activestatus, setActivestatus] = useState(false);\r\n  const [recipname, setRecipname] = useState(\"\");\r\n  const [recipimg, setRecipimg] = useState(\"\");\r\n  const [recipcity, setRecipcity] = useState(\"\");\r\n  const [recipcountry, setRecipcountry] = useState(\"\");\r\n  const [userimg, setUserimg] = useState(\"\");\r\n  const [username, setUsername] = useState(\"\");\r\n  const [visible, setVisible] = useState(false);\r\n  const [contextmenu, setContextmenu] = useState(false);\r\n  const [contextstyle, setContextstyle] = useState({\r\n    top: 0,\r\n    left: 0\r\n  });\r\n  const [notifibool, setNotifibool]=useState(true)\r\n  const [emojitype, setEmojitype] = useState(\"\");\r\n  const [loader, setLoader] = useState(true);\r\n  const [loading, setLoading] = useState(true);\r\n  const [chatcolor, setChatcolor] = useState(\"\");\r\n  const [userChatcolor, setUserchatcolor] = useState(\"\");\r\n  const [showinput, setShowinput] = useState(false);\r\n  const [updatedMsg, setUpdatedMsg] = useState(\"\");\r\n  const [emojilist, setEmojilist] = useState(false);\r\n  const [theme, setTheme] = useState(\"\");\r\n  const [msgid, setMsgid] = useState(\"\");\r\n  const [chatname, setChatname] = useState(\"\");\r\n  const [chatimg, setChatimg] = useState(\"\");\r\n  const [chatcity, setChatcity] = useState(\"\");\r\n  const [chatcountry, setChatcountry] = useState(\"\");\r\n  const [chatactive, setChatactive] = useState(\"\");\r\n  const [nickname, setNickname] = useState([]);\r\n  const [emojipicker, setEmojipicker]=useState(false)\r\n  const emojis = []\r\n  const { chatuser, setState, icon, type } = props;\r\n  const { messages } = props.diag;\r\n  const { convoid, creatorid, recipientid } = props.diag.convoinfo;\r\n  const user = firebase.auth().currentUser;\r\n  const date = firebase.firestore.FieldValue.serverTimestamp()\r\n  const typerRef = useRef();\r\n  const id =db.collection('users').doc().id\r\n  const reg = /((?:(?!(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)).)+)|((?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)(?:\\?\\S+=\\S*(?:&\\S+=\\S*)*)?)/gm;\r\n  const imageRegexB = /(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)/g;\r\n  var urlreg = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/g;\r\n  var ureg = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/g;\r\n\r\n  function ytVidId(url) {\r\n    var p = /(?:https?:\\/\\/)?(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?/;\r\n    return url.match(p) ? RegExp.$1 : false;\r\n  }\r\n\r\n  \r\n  function determineMsgtype(msg) {\r\n    if (msg.base64) {\r\n      return <Img src={msg.message} link={true}/>\r\n     \r\n    }\r\n    else if (msg.file) {\r\n      return <Filemsg name={msg.name} link={msg.message}/>\r\n    } else if (msg.audio) {\r\n      return <Recording src={msg.message}/>\r\n      \r\n    } else if (msg.video){\r\n      return <Iframe type='video' link={msg.message}/>\r\n    }\r\n    else if (ytVidId(msg.message)) {\r\n      return <Iframe link={\"https://www.youtube.com/embed/\" + ytVidId(msg.message)} />\r\n\r\n    }\r\n    // else if(urlreg.test(msg.message)){\r\n    //   const stringWithOnlyURLS = msg.message.match(urlreg).join(' ');\r\n    //   const string = msg.message.replace(stringWithOnlyURLS, ' ')\r\n    //   return <>\r\n    //   <p className='bg'>{string}</p>\r\n    //     <div>\r\n    //     <ReactTinyLink\r\n    //   cardSize=\"small\" \r\n    //   showGraphic={true}\r\n    //   maxLine={2}\r\n    //   minLine={1}\r\n    //   url={stringWithOnlyURLS}\r\n    //   />\r\n    //     </div>\r\n    //   </>\r\n    // }  \r\n    else {\r\n      const sm = msg.message.replace(reg, (_, text, img)  => \r\n      text ?  `<p>${text.trim()}</p>`:`<img src=\"${img}\"/>`\r\n      ) \r\n      return  <div dangerouslySetInnerHTML={{__html:sm}} ></div>\r\n    }\r\n  }\r\n  function determineClass(msg) {\r\n    var urreg = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/g;\r\n    if(user.uid===msg.senderid){\r\n      if (msg.file) {\r\n        return \"msg file\";\r\n      }else if (msg.video) {\r\n        return 'msg video'\r\n      }\r\n       else if (msg.audio) {\r\n        return \"msg audio\";\r\n      } else if (msg.emoji) {\r\n        return \"msg emojimsg\";\r\n      } else if (msg.nobackground) {\r\n        return \"no-bg msg\";\r\n      } else if (ytVidId(msg.message)) {\r\n        return `msg youtube`;\r\n      }\r\n      //   else if(urreg.test(msg.message)){\r\n      //   return 'msg emojimsg imp'\r\n      // }\r\n      else {\r\n        return \"msg\";\r\n      }\r\n    }else {\r\n      if (msg.file) {\r\n        return \"msg file trans\";\r\n      }else if (msg.video) {\r\n        return 'msg video trans'\r\n      }\r\n       else if (msg.audio) {\r\n        return \"msg audio trans\";\r\n      } else if (msg.emoji) {\r\n        return \"msg emojimsg trans\";\r\n      } else if (msg.nobackground) {\r\n        return \"no-bg msg trans\";\r\n      } else if (ytVidId(msg.message)) {\r\n        return `msg youtube trans`;\r\n      }\r\n      //   else if(urreg.test(msg.message)){\r\n      //   return 'msg emojimsg imp'\r\n      // }\r\n      else {\r\n        return \"msg trans\";\r\n      }\r\n    }\r\n  }\r\n  const [opti, setOpti]=useState(false)\r\n  function msgOptions(msg){\r\n    const allel = document.querySelectorAll('.optionsEdit')\r\n    allel.forEach(el=>{\r\n      el.style.display='none'\r\n    })\r\n    const el = document.querySelector(`div[data-id=\"${msg.msgid}\"]`)\r\n    el.style.display='flex'\r\n  }\r\n  const [modal, setModal] = useState(false);\r\n  const imgsrc = useRef();\r\n  const [imgSrcModal, setImgSrcModal]=useState('')\r\n  function clickHandler(e) {\r\n    const audio = e.target.querySelector(\".controls\");\r\n    const video = e.target.closest(\"VIDEO\");\r\n\r\n    const play = e.target.querySelector(\".fa-play\");\r\n    const el = e.target.closest(\"IMG\");\r\n    if (el && e.currentTarget.contains(el)) {\r\n      setModal(true);\r\n      const imgsrc = document.querySelector(\".modal img\");\r\n      setImgSrcModal(el.getAttribute('src'))\r\n      imgsrc.setAttribute(\"src\", el.getAttribute(\"src\"));\r\n    }\r\n    if (video && e.currentTarget.contains(video)) {\r\n    }\r\n  }\r\n  const allmsgs =\r\n    messages &&\r\n    messages\r\n      .slice(0)\r\n      .reverse()\r\n      .map((msg) => {\r\n        return (\r\n          <div\r\n            id={msg.msgid}\r\n            className={msg.senderid === user.uid ? \"right m\" : \"left m\"}\r\n            onContextMenu={(e) => contextMenu(e)}\r\n          >\r\n            <div className=\"flex\">\r\n              <p\r\n                className={determineClass(msg)}\r\n                contentEditable={false}\r\n                style={\r\n                  msg.nobackground\r\n                    ? { backgroundColor: \"transparent\" }\r\n                    : msg.emoji\r\n                    ? { backgroundColor: \"transparent\" }\r\n                    : ytVidId(msg.message)\r\n                    ? { backgroundColor: \"transparent\" }\r\n                    : msg.senderid === user.uid\r\n                    ? { backgroundColor: chatcolor }\r\n                    : null\r\n                }\r\n                onClick={(e) => clickHandler(e)}\r\n     \r\n              >    { determineMsgtype(msg) }</p>\r\n\r\n             <Threedots msgs={msgs} user={user} msg={msg} convoid={convoid}/>\r\n\r\n                <small\r\n                className={\r\n                  msg.senderid === user.uid\r\n                    ? \"alignRight elapsedtime\"\r\n                    : \"alignLeft elapsedtime\"\r\n                }\r\n              ><ReactTimeAgo date={msg.msgdate.toDate()}/></small>\r\n              <div\r\n                className=\"reaction\"\r\n                style={{ display: (msg.reaction1||msg.reaction2) ? \"flex\" : \"none\", width: (msg.reaction1===''||msg.reaction2==='')?'22px':'42px' }}\r\n              >\r\n                <i className={ msg.reaction1 === \"fad fa-heart\"? \"emoj fas fa-\" + msg.reaction1: \"emoj fad fa-\" + msg.reaction1 }></i>\r\n                <i style={{marginLeft: msg.reaction2===''?'':'5px'}}className={ msg.reaction2 === \"fad fa-heart\"? \"emoj fas fa-\" + msg.reaction2: \"emoj fad fa-\" + msg.reaction2}></i>\r\n              </div>\r\n            </div>\r\n            <img src={msg.senderid === user.uid ? userimg : chatimg} alt=\"\" />\r\n          </div>\r\n        );\r\n      });\r\n  const progressbar = useRef();\r\n  const progresswidth = useRef();\r\n  const [img, setImg] = useState();\r\n  const inputref = useRef()\r\n  function sendFile(type) {\r\n    let file = document.querySelector(`.${type}file`).files[0];\r\n    if (file) {\r\n      var idxDot = file.name.lastIndexOf(\".\") + 1;\r\n      var extFile = file.name.substr(idxDot, file.name.length).toLowerCase();\r\n\r\n      const storageRef = firebase.storage().ref(`${convoid}/${file.name}`);\r\n      const task = storageRef.put(file);\r\n      task.on(\r\n        \"state_changes\",\r\n\r\n        function progress(snap) {\r\n          progressbar.current.style.display = \"flex\";\r\n          const percentage = (snap.bytesTransferred / snap.totalBytes) * 100;\r\n          progresswidth.current.style.height = `${percentage}%`;\r\n        },\r\n        function error(err) {},\r\n        function complete() {\r\n          if (type === \"image\") {\r\n            if (extFile === \"jpg\" || extFile === \"jpeg\" || extFile === \"png\") {\r\n              let msgobject = {\r\n                message: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n                reaction1: \"\",\r\n                reaction2: \"\",\r\n                msgdate: firebase.firestore.Timestamp.now(),\r\n                msgid: db.collection(\"conversations\").doc().id,\r\n                read: false,\r\n                senderid: user.uid,\r\n                editing: false,\r\n                nobackground: true,\r\n                emoji: true,\r\n                base64: true\r\n              };\r\n              let notificationobj = {\r\n                notifimsg: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n                notifidate: firebase.firestore.Timestamp.now(),\r\n                read: false,\r\n                sender: user.displayName,\r\n                base64: true,\r\n                id: convoid,\r\n                senderid: user.uid,\r\n                notifiid: db.collection('users').doc().id              }      \r\n                if(notifibool){\r\n                  db.collection('notifications').doc(chatuser).update({\r\n                    notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n                  })\r\n                }\r\n              db.collection(\"conversations\")\r\n                .doc(convoid)\r\n                .update({\r\n                  lastmsgdate: date,\r\n                  messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n                });\r\n            } else {\r\n              setNotifi(true);\r\n              setNotificont({\r\n                emoji: \"fal fa-exclamation-circle\",\r\n                msg: \"Only Images are allowed!\"\r\n              });\r\n              setTimeout(() => {\r\n                setNotifi(false);\r\n              }, 300500);\r\n            }\r\n          } else if (type === \"paperclip\") {\r\n            let msgobject = {\r\n              message: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n              reaction1: \"\",\r\n              reaction2: \"\",\r\n              msgdate: firebase.firestore.Timestamp.now(),\r\n              msgid: db.collection(\"conversations\").doc().id,\r\n              read: false,\r\n              senderid: user.uid,\r\n              editing: false,\r\n              nobackground: true,\r\n              emoji: true,\r\n              file: true,\r\n              name: file.name,\r\n              base64: false\r\n            };\r\n            let notificationobj = {\r\n              notifimsg: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n              notifidate: firebase.firestore.Timestamp.now(),\r\n              read: false,\r\n              sender: user.displayName,\r\n              file: true,\r\n              id: convoid,\r\n              senderid: user.uid,\r\n              notifiid: db.collection('users').doc().id            }      \r\n            if(notifibool){\r\n              db.collection('notifications').doc(chatuser).update({\r\n                notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n              })\r\n            }\r\n            db.collection(\"conversations\")\r\n              .doc(convoid)\r\n              .update({\r\n                lastmsgdate: date,\r\n                messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n              });\r\n          } else if (type === \"microphone\") {\r\n          }else if(type==='film') {\r\n              if(extFile==='mp4'||'gif'||'avi'){\r\n                let msgobject = {\r\n                  message: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n                  reaction1: \"\",\r\n                  reaction2: \"\",\r\n                  msgdate: firebase.firestore.Timestamp.now(),\r\n                  msgid: db.collection(\"conversations\").doc().id,\r\n                  read: false,\r\n                  senderid: user.uid,\r\n                  editing: false,\r\n                  nobackground: true,\r\n                  emoji: true,\r\n                  video: true\r\n                };\r\n                let notificationobj = {\r\n                  notifimsg: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n                  notifidate: firebase.firestore.Timestamp.now(),\r\n                  read: false,\r\n                  sender: user.displayName,\r\n                  video: true,\r\n                  id: convoid,\r\n                  senderid: user.uid,\r\n                  notifiid: db.collection('users').doc().id                }      \r\n                if(notifibool){\r\n                  db.collection('notifications').doc(chatuser).update({\r\n                    notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n                  })\r\n                }\r\n                db.collection(\"conversations\")\r\n                  .doc(convoid)\r\n                  .update({\r\n                    lastmsgdate: date,\r\n                    messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n                  });\r\n              }else {\r\n\r\n              }\r\n          }\r\n          progressbar.current.style.display = \"none\";\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  const icons = [\r\n    { icon: \"image\", type: \"file\" },\r\n    {icon: 'film', type:'file'},\r\n    { icon: \"paperclip\", type: \"file\" },\r\n    { icon: \"microphone\", type: \"microphone\" },\r\n\r\n  ];\r\n\r\n  let iconsrow = icons.map((icon) => {\r\n    return (\r\n      <Hoverableicondiv\r\n        progressbar={progressbar}\r\n        progresswidth={progresswidth}\r\n        classNames=\"\"\r\n        icon={icon.icon}\r\n        type={icon.type}\r\n        special={true}\r\n        sendFile={sendFile}\r\n        convoid={convoid}\r\n        inputref={inputref}\r\n        \r\n      />\r\n    );\r\n  });\r\n\r\n  function editMsg() {\r\n    msgs &&\r\n      msgs.map((msg) => {\r\n        if (msgid === msg.msgid) {\r\n          let itemindex = msgs.indexOf(msg);\r\n          msgs[itemindex].message = updatedMsg;\r\n          db.collection(\"conversations\").doc(convoid).update({\r\n            messages: msgs\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  function contextMenu(e) {\r\n    let customcontext = document.querySelector(\".contextmenu\");\r\n    const bounding = customcontext.getBoundingClientRect();\r\n    e.preventDefault();\r\n    setMsgid(e.currentTarget.getAttribute(\"id\"));\r\n    setContextmenu(true);\r\n    if (type === \"small\") {\r\n      customcontext.style.top = `${e.pageY - 201}px`;\r\n      customcontext.style.left = `${0}px`;\r\n    } else {\r\n    const bounding = customcontext.getBoundingClientRect()\r\n    customcontext.style.top = `${e.pageY -200}px`;\r\n    customcontext.style.left = `${e.pageX -150 }px`;\r\n    }\r\n\r\n    if (!updatedMsg === \"\") {\r\n      editMsg();\r\n    }\r\n  }\r\n  function sendEmoji(emoji) {\r\n    let msgobject = {\r\n      message: emoji,\r\n      reaction1: \"\",\r\n      reaction2: \"\",\r\n      msgdate: firebase.firestore.Timestamp.now(),\r\n      msgid: db.collection(\"conversations\").doc().id,\r\n      read: false,\r\n      senderid: user.uid,\r\n      editing: false,\r\n      nobackground: false,\r\n      emoji: true\r\n    };\r\n    db.collection(\"conversations\")\r\n      .doc(convoid)\r\n      .update({\r\n        lastmsgdate: date,\r\n        messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n      });\r\n      let notificationobj = {\r\n        notifimsg: emoji,\r\n        notifidate: firebase.firestore.Timestamp.now(),\r\n        read: false,\r\n        sender: user.displayName,\r\n        id: convoid,\r\n        senderid: user.uid,\r\n        notifiid: db.collection('users').doc().id\r\n      }      \r\n      if(notifibool){\r\n        db.collection('notifications').doc(chatuser).update({\r\n          notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n        })\r\n      }\r\n    setMsgstring(\"\");\r\n    typerRef.current.setAttribute(\"style\", \"height: 50px\");\r\n  }\r\n  const scrollto = useRef()\r\n  function  sendMessage() {\r\n    scrollto.current.scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n    const imageRegex = /(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)/g;\r\n    if (msgstring.match(imageRegexB) != null) {\r\n      let msgobject = {\r\n        message: msgstring,\r\n        reaction1: \"\",\r\n        reaction2: '',\r\n        msgdate: firebase.firestore.Timestamp.now(),\r\n        msgid: db.collection(\"conversations\").doc().id,\r\n        read: false,\r\n        senderid: user.uid,\r\n        editing: false,\r\n        nobackground: true,\r\n        emoji: false\r\n      };\r\n      db.collection(\"conversations\")\r\n        .doc(convoid)\r\n        .update({\r\n          lastmsgdate: date,\r\n          messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n        });\r\n        let notificationobj = {\r\n          notifimsg: msgstring,\r\n          notifidate: firebase.firestore.Timestamp.now(),\r\n          read: false,\r\n          sender: user.displayName,\r\n          id: convoid,\r\n          senderid: user.uid,\r\n          notifiid: db.collection('users').doc().id,\r\n\r\n        }      \r\n        if(notifibool){\r\n          db.collection('notifications').doc(chatuser).update({\r\n            notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n          })\r\n        }else {\r\n          return null\r\n        }\r\n      setMsgstring(\"\");\r\n      typerRef.current.setAttribute(\"style\", \"height: 50px\");\r\n    } else if (msgstring.replace(/\\s/g, \"\").length) {\r\n      let msgobject = {\r\n        message: msgstring,\r\n        reaction1: \"\",\r\n        reaction2: \"\",\r\n        msgdate: firebase.firestore.Timestamp.now(),\r\n        msgid: db.collection(\"conversations\").doc().id,\r\n        read: false,\r\n        senderid: user.uid,\r\n        editing: false,\r\n        nobackground: false,\r\n        emoji: false\r\n      };\r\n      let notificationobj = {\r\n        notifimsg: msgstring,\r\n        notifidate: firebase.firestore.Timestamp.now(),\r\n        read: false,\r\n        sender: user.displayName,\r\n        id: convoid,\r\n        senderid: user.uid,\r\n        notifiid: db.collection('users').doc().id\r\n      }      \r\n      if(notifibool){\r\n        db.collection('notifications').doc(chatuser).update({\r\n          notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n        })\r\n      }\r\n      db.collection(\"conversations\")\r\n        .doc(convoid)\r\n        .update({\r\n          lastmsgdate: firebase.firestore.Timestamp.now(),\r\n          messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n        });\r\n      setMsgstring(\"\");\r\n      typerRef.current.setAttribute(\"style\", \"height: 50px\");\r\n    }\r\n  }\r\n  function triggerSend(e) {\r\n    if (e.keyCode === 13 && !e.shiftKey) {\r\n      e.preventDefault();\r\n      sendMessage();\r\n    }\r\n  }\r\n  function formatTextarea() {\r\n\r\n    // setTyping(true)\r\n    // showTypingAnim()\r\n  }\r\n  const emojipickerref = useRef()\r\n  function inputFunc(){\r\n    typerRef.current.focus()\r\n    setEmojipicker(!emojipicker)\r\n  }\r\n  function showTypingAnim() {\r\n    setTyperid(user.uid);\r\n    let infoobj = {\r\n      convoid,\r\n      creatorid,\r\n      recipientid,\r\n      usertyping: typing,\r\n      userref: db.collection(\"users\").doc(recipientid),\r\n      typerid\r\n    };\r\n    db.collection(\"conversations\")\r\n      .doc(convoid)\r\n      .update({\r\n        // convoinfo: infoobj\r\n      })\r\n      .then(() => {\r\n        db.collection(\"conversations\")\r\n          .doc(convoid)\r\n          .onSnapshot((snap) => {\r\n            // setTyperid(snap.data().convoinfo.typerid)\r\n            // setRealtyping(snap.data().convoinfo.usertyping)\r\n          });\r\n      });\r\n  }\r\n  const [zoomamount, setZoomamount]=useState(1)\r\n  function zoom(el){\r\n   if(el.type==='in'){\r\n    setZoomamount(prev=>prev+ 0.1);\r\n   }else {\r\n    if(zoomamount>1){\r\n      setZoomamount(prev=>prev- 0.1);\r\n    }\r\n   }\r\n\r\n  }\r\n  const onEmojiClick = (event, emojiobject)=>{\r\n   setMsgstring(msgstring + emojiobject.emoji)\r\n  }\r\n  useEffect(() => {\r\n    let timer = setInterval(() => {\r\n      setUpdateelapsed((prev) => prev + 1);\r\n    }, 60000);\r\n    return () => {\r\n      clearInterval(timer);\r\n    };\r\n  }, []);\r\n  useEffect(() => {\r\n    let timer = setInterval(() => {\r\n      setTyping(false);\r\n    }, 4000);\r\n    // showTypingAnim()\r\n    return () => {\r\n      clearInterval(timer);\r\n    };\r\n  }, [typing]);\r\n\r\n  useEffect(() => {\r\n    db.collection(\"users\")\r\n      .doc(creatorid)\r\n      .onSnapshot((snap) => {\r\n        const user = snap.data();\r\n        setRecipname(user.userinfo.name);\r\n        setRecipimg(user.userinfo.cover);\r\n        setRecipcity(user.userinfo.city);\r\n        setRecipcountry(user.userinfo.country);\r\n      });\r\n    db.collection(\"users\")\r\n      .doc(recipientid)\r\n      .onSnapshot((snap) => {\r\n        const user = snap.data();\r\n        setUserimg(user.userinfo.cover);\r\n        setUsername(user.userinfo.name);\r\n      });\r\n    db.collection(\"users\")\r\n      .doc(chatuser)\r\n      .onSnapshot((snap) => {\r\n        const user = snap.data();\r\n        setChatname(user.userinfo.name);\r\n        setChatimg(user.userinfo.cover);\r\n        setChatcity(user.userinfo.city);\r\n        setChatcountry(user.userinfo.country);\r\n        setChatactive(user.online);\r\n        setActivestatus(user.userinfo.online);\r\n        setLoading(false);\r\n      });\r\n  }, [creatorid, recipientid, chatuser]);\r\n  useEffect(() => {\r\n    db.collection(\"users\")\r\n      .doc(user.uid)\r\n      .onSnapshot((snap) => {\r\n        const user = snap.data();\r\n        setChatcolor(user.customization.color);\r\n        setUserimg(user.userinfo.cover);\r\n      });\r\n  }, [chatcolor, chatuser]);\r\n  useEffect(() => {\r\n    db.collection(\"users\")\r\n      .doc(chatuser)\r\n      .onSnapshot((snap) => {\r\n        let user = snap.data();\r\n        setUserchatcolor(user.customization.chatcolor);\r\n      });\r\n  }, [chatuser]);\r\n  useEffect(() => {\r\n\r\n    db.collection(\"conversations\")\r\n    .doc(convoid)\r\n    .get().then((snap) => {\r\n      let use = snap.data();\r\n      setMsgs(use.messages);\r\n      setLoader(false);\r\n      setTheme(use.customizedconvo.theme);\r\n      setEmojitype(use.customizedconvo.emoji);\r\n      if(user.uid===props.diag.convoinfo.creatorid) {\r\n        setNotifibool(use.notifications2)\r\n        setNickname(use.nickname1)\r\n      }else {\r\n        setNotifibool(use.notifications1)\r\n        setNickname(use.nickname2)\r\n      }\r\n    }); \r\n\r\n  \r\n  }, [convoid]);\r\n\r\n  return (\r\n\r\n    <>  \r\n\r\n         <div className=\"top br-l\">\r\n        <div className=\"profilepic\">\r\n          <div className=\"relative\">\r\n            {loading ? (\r\n              <div className={\"loader blue reloader\"}>\r\n                <div class=\"lds-ring\">\r\n                  <div></div>\r\n                  <div></div>\r\n                  <div></div>\r\n                  <div></div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              [\r\n                <img src={chatimg} alt=\"\" />,\r\n                <div\r\n                  className=\"notifi\"\r\n                  style={{\r\n                    backgroundColor: chatactive ? \"rgb(44, 255, 44)\" : \"#FF3D3D\"\r\n                  }}\r\n                ></div>\r\n              ]\r\n            )}\r\n          </div>\r\n          <div>\r\n            {nickname===''?<p className='username'>{chatname.length>15?chatname.slice(0, 15)+'...':chatname}</p>:<p className='username'>{nickname}</p>}\r\n            <small>{chatactive ? \"Online\" : \"Offline\"}</small>\r\n          </div>\r\n        </div>\r\n        <div className=\"controls\">\r\n          <i class=\"fal fa-phone-alt\" style={{ color: themecolor }}></i>\r\n          <i class=\"fal fa-video\" style={{ color: themecolor }}></i>\r\n          {icon && icon === \"fal fa-times\" ? (\r\n            <i\r\n              className={icon}\r\n              style={{ padding: \"0 5px\", color: themecolor }}\r\n              onClick={() => setState(false)}\r\n            ></i>\r\n          ) : (\r\n            <Link exact to={\"/chatsettings/\" + convoid}>\r\n              <i\r\n                style={{ padding: \"0 5px\", color: themecolor }}\r\n                class=\"fal fa-ellipsis-v\"\r\n              ></i>\r\n            </Link>\r\n          )}\r\n        </div>\r\n      </div>\r\n \r\n      <Route\r\n        render={({ location }) => (\r\n          <div\r\n            className={!theme?\"msgs black\":theme==='https://i.imgur.com/4hzNTTq.png'?'msgs black':'msgs'}\r\n            style={\r\n              theme\r\n                ? { backgroundImage: \"url(\" + theme + \")\" }\r\n                : { backgroundImage: \"url(https://i.imgur.com/4hzNTTq.png)\" }\r\n            }\r\n          >\r\n            <div className=\"grid\">\r\n              <div className=\"scrollto\" ref={scrollto}></div>\r\n\r\n              {loader ? (\r\n                <div className={loader ? \"loader opa\" : \"loader\"}>\r\n                  <div class=\"lds-ring\">\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                allmsgs\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      />\r\n   <div className=\"search whiteb br-l\">\r\n    <div className=\"plus\">\r\n      <i\r\n        class={visible ? \"fal fa-minus\" : \"fal fa-plus\"}\r\n        style={{ color: themecolor }}\r\n        onClick={() => setVisible(!visible)}\r\n      ></i>\r\n      <CSSTransition\r\n        in={visible}\r\n        timeout={300}\r\n        classNames=\"iconshover\"\r\n        unmountOnExit\r\n      >\r\n        <div className={\"icons\"}>\r\n          {iconsrow}\r\n          <span className=\"uploader bs\" ref={progressbar}>\r\n            <span className=\"percent\" ref={progresswidth}></span>\r\n          </span>\r\n        </div>\r\n      </CSSTransition>\r\n    </div>\r\n    <div className=\"textarea flexrow\">\r\n    <textarea\r\n      type=\"text\"\r\n      placeholder=\"Send a message...\"\r\n      onKeyUp={(e) => triggerSend(e)}\r\n      ref={typerRef}\r\n      value={msgstring}\r\n      onChange={(e) => {\r\n        setMsgstring(e.target.value);\r\n\r\n      }}\r\n      onInput={()=>formatTextarea()}\r\n\r\n    ></textarea>\r\n    <div className=\"gif_emoji\">\r\n    <i className=\"fal fa-laugh\" onClick={()=>{inputFunc()}}></i>\r\n    <i class=\"fal fa-comment-alt-smile\" onClick={()=>setGif(!gif)}></i>\r\n    </div>\r\n\r\n   </div>\r\n      <div className=\"flexrow\">\r\n      <span\r\n      role=\"img\"\r\n      aria-label=\"emoji\"\r\n      onClick={() => sendEmoji(emojitype)}\r\n      style={{ cursor: \"pointer\" }}\r\n    >\r\n      {emojitype}\r\n    </span>\r\n    <i\r\n      class=\"fal fa-paper-plane\"\r\n      style={{ color: themecolor }}\r\n      onClick={() => {sendMessage();setEmojipicker(false)}}\r\n    ></i>\r\n      </div>\r\n  </div>\r\n \r\n      <Contextmenu\r\n        setShowinput={setShowinput}\r\n        editMsg={editMsg}\r\n        setUpdatedMsg={setUpdatedMsg}\r\n        convoid={convoid}\r\n        type={\"msg\"}\r\n        msgid={msgid}\r\n        setMsgid={setMsgid}\r\n        setContextmenu={setContextmenu}\r\n        contextmenu={contextmenu}\r\n        contextstyle={contextstyle}\r\n      />\r\n\r\n      <CSSTransition in={gif} unmountOnExit classNames='gif' timeout={300}>\r\n        <Gif chatimg={chatimg} setGif={setGif} convoid={convoid} notifibool={notifibool} chatuser={chatuser}/>\r\n      </CSSTransition>\r\n      <CSSTransition\r\n        in={notifi}\r\n        timeout={300}\r\n        classNames=\"displayerror\"\r\n        unmountOnExit\r\n      >\r\n        <div className=\"errormsg bs diagmsg\">\r\n          <i\r\n            className={notificont.emoji}\r\n            style={{ position: \"absolute\", left: \"20px\" }}\r\n          ></i>{\" \"}\r\n          <p>{notificont.msg}</p>\r\n          <i\r\n            className=\"far fa-times\"\r\n            style={{ color: themecolor }}\r\n            onClick={() => setNotifi(false)}\r\n          ></i>\r\n        </div>\r\n      </CSSTransition>\r\n      <CSSTransition in={modal} classNames=\"modal\" timeout={0}>\r\n        <div className=\"modal overflowimgcontainer\">\r\n         <div className=\"buttons\">\r\n         \r\n         <i className=\"fal fa-search-minus\" onClick={()=>zoom({type: 'out'})}></i>\r\n         <i class=\"fal fa-redo-alt\" onClick={()=>setZoomamount(1)}></i>\r\n         <i class=\"fal fa-search-plus\" onClick={()=>zoom({type: 'in'})}></i>\r\n         </div>\r\n          <ScrollContainer className='grabbercontainer' hideScrollbars={true}>\r\n          <img src=\"\" alt=\"\" ref={imgsrc}style={{width: 100*zoomamount+'%', height: 100*zoomamount+'%'}} />\r\n          </ScrollContainer>\r\n          <i className=\"fal fa-times\" onClick={() => {setModal(false); setZoomamount(1)}}></i>\r\n        </div>\r\n      </CSSTransition>\r\n      <CSSTransition in={emojipicker}  classNames='emojipicker' timeout={300} >\r\n       <div className=\"emojipicker\" ref={emojipickerref} onMouseOver={()=>typerRef.current.focus()} onClick={()=>typerRef.current.focus()}>\r\n        <div className=\"times\"> <i className=\"fal fa-times\" onClick={()=>setEmojipicker(false)}></i></div>\r\n       <Picker onEmojiClick={onEmojiClick}/>\r\n       </div>\r\n      </CSSTransition>\r\n    </>\r\n  );\r\n}\r\nexport default Dialogue;\r\n","\r\nimport React, {useState, useEffect, useContext} from 'react'\r\nimport firebase from 'firebase'\r\nimport { db } from '../Fire'\r\nimport { CSSTransition } from 'react-transition-group'\r\nimport { ContextApp } from '../ContextAPI'\r\nfunction Userprofile (props) {\r\n  const link = <a href='google.com'>asd</a>\r\n  const {themecolor}=useContext(ContextApp)\r\n  const user = firebase.auth().currentUser\r\n  const {chatuser}=props\r\n  const {convoid, creatorid, recipientid} = props.diag.convoinfo\r\n  const [recipname, setRecipname]=useState('')\r\n  const [recipimg, setRecipimg]=useState('')\r\n  const [recipcity, setRecipcity]=useState('')\r\n  const [recipcountry, setRecipcountry]=useState('')\r\n  const [recipjob, setRecipjob]=useState('')\r\n  const [recipnumber, setRecipnumber]=useState('')\r\n  const [recipemail, setRecipemail]=useState('')\r\n  const [recipwebsite, setRecipwebsite]=useState('')\r\n  const [extend, setExtend]=useState(false)\r\n  const [active, setActive]=useState(false)\r\n  const [loading, setLoading]=useState(true)\r\n\r\n  useEffect(()=>{\r\n    db.collection('users').doc(chatuser).onSnapshot(snap=>{\r\n        const user = snap.data()\r\n        setRecipname(user.userinfo.name)\r\n        setRecipimg(user.userinfo.cover)\r\n        setRecipcity(user.userinfo.city)\r\n        setRecipcountry(user.userinfo.country)\r\n        setRecipjob(user.userinfo.job)\r\n        setRecipnumber(user.userinfo.phone)\r\n        setRecipemail(user.userinfo.email)\r\n        setRecipwebsite(user.userinfo.website)\r\n        setActive(user.online)\r\n        setLoading(false)\r\n\r\n    })\r\n  },[recipientid, chatuser])\r\n  return (\r\n   <>\r\n    <div className=\"profilepic profilepiccol br-l\">\r\n        <div className='relative'>\r\n        {loading?<div className={'loader blue reloader'}><div class=\"lds-ring\"><div></div><div></div><div></div><div></div></div></div>:[<img src={recipimg} alt=\"\"/>, <div className=\"notifi\" style={{backgroundColor:active?'rgb(44, 255, 44)':'#FF3D3D'}}></div>]}\r\n          \r\n        </div>\r\n        <div>\r\n          <p>{recipname.length>17?recipname.slice(0, 17)+'...':recipname}</p>\r\n          <small>Job: {recipjob===''?'Not provided':recipjob}</small>\r\n        </div>\r\n        <i className=\"fal fa-cog\" style={{color: themecolor}}></i>\r\n    </div> \r\n    <div className=\"personalinfo br-l flex\">\r\n     <div className='flexrow'><p>Personal info</p>\r\n      <i className={extend?`fal fa-chevron-up rotate`:'fal fa-chevron-up'} onClick={()=>setExtend(!extend)}></i>\r\n      </div>\r\n      <CSSTransition in={extend} classNames='extended' timeout={0} unmountOnExit>\r\n        <div className='extendoff'>\r\n        <hr />\r\n         <div className='flex'>\r\n           <div className=\"flexrow flexinfo\"><p>Phone #</p> <p>{recipnumber===''?'N/A':recipnumber}</p></div>\r\n           <div className=\"flexrow flexinfo\"><p>Email</p><p>{recipemail}</p></div>\r\n           <div className=\"flexrow flexinfo\"><p>Country</p><p>{recipcountry===''?'N/A':recipcountry}</p></div>\r\n           <div className=\"flexrow flexinfo\"><p>City</p><p>{recipcity===''?'N/A':recipcity}</p></div>\r\n         </div>\r\n        </div>\r\n      </CSSTransition>\r\n    </div>\r\n    <div className=\"mutualcontacts br-l pdng flexrow\">\r\n    <i class=\"fal fa-users\"></i>\r\n      <p>Mutual Contacts</p>\r\n      <i class=\"fal fa-ellipsis-h-alt\"></i>\r\n      </div>\r\n      <div className=\"br-l pdng flexrow\">\r\n        {recipwebsite.toLocaleLowerCase()==='https://'?<i class=\"fal fa-external-link\"></i>:\r\n          <a href={recipwebsite}><i class=\"fal fa-external-link\"></i></a>}\r\n          <p>View Site</p>\r\n         \r\n      </div>\r\n    </>\r\n  )\r\n}\r\nexport default Userprofile","import React, {useState, useEffect, useContext} from 'react'\r\nimport {ContextApp} from '../ContextAPI'\r\nimport Hoverablebutton from './Hoverablebutton'\r\nfunction Adduser (props) {\r\n  const {themecolor}= useContext(ContextApp)\r\nlet {allusers, setRecipientname,setRecipientid, recipientid, setMessage, sendMessage, msgpersonids, adduser,setAdduser, message} = props\r\nconst [keyword, setKeyword]=useState('')\r\n\r\nfunction determineDisplay(user){\r\n  if(msgpersonids && msgpersonids.includes(user.uid)){\r\n    return <i className=\"fal fa-exclamation-circle\"></i>\r\n  }\r\nelse if(recipientid===user.uid){\r\n  return <i className=\"fal fa-check slct\" ></i>\r\n}else {\r\n  return <span className='slct' style={{color: themecolor, border: 'solid 1px'+themecolor}} onMouseOver={(e)=>e.target.style.cssText=`background-color:${themecolor}; border: solid 1px transparent`} onMouseLeave={(e)=>e.target.style.cssText=`background-color: transparent; border: solid 1px ${themecolor}; color: ${themecolor}`}>Select</span>\r\n}\r\n\r\n}\r\nconst pattern = new RegExp('\\\\b' + keyword.replace(/[\\W_]+/g,\"\"), 'i')\r\nconst allusersrow = allusers && allusers.map(user=>{\r\n  if(pattern.test(user.userinfo.name.toLowerCase())) {\r\n    return  <div className={msgpersonids && msgpersonids.includes(user.uid)?\"profilepic selected\":'profilepic'}>\r\n      <div>\r\n      <img src={user.userinfo.cover?user.userinfo.cover:\"https://www.gettyimages.ca/gi-resources/images/500px/983794168.jpg\"} alt=\"\"/>\r\n       <p>{user.userinfo.name}</p>\r\n      </div>\r\n      <small onClick={msgpersonids && msgpersonids.includes(user.uid)?() => {setAdduser(!adduser);}:() => {setRecipientid(user.uid); setRecipientname(user.userinfo.name)}} className={recipientid===user.uid?\"usersrowselected\":\"\"}>\r\n        {determineDisplay(user)}\r\n      </small>\r\n</div>\r\n  }\r\n  })\r\n  function actions (){\r\n    setMessage('')\r\n    setAdduser(!adduser)\r\n  }\r\n  return (\r\n    <>\r\n    <div className=\"adduser\"onClick={()=>props.setAdduser()}>\r\n      \r\n    </div>\r\n    <div className=\"userlist bs\" >\r\n          <div className=\"hd\">\r\n          <h2>Add Contact</h2>\r\n          <div className=\"search\">\r\n            <input type=\"text\" placeholder='Search' onChange={(e)=>setKeyword(e.target.value)}/>\r\n          </div>\r\n          </div>\r\n          <div className=\"overflow flex\">\r\n       {allusersrow}\r\n          </div>\r\n          <div className=\"search\">\r\n          <input type=\"text\" placeholder='Send a message...' onChange={(e)=>setMessage(e.target.value)} value={message}/>\r\n          <button className=\"themeBtn\"  onClick={()=>{recipientid?sendMessage():actions()}}  style={{color: 'white', border: `solid 3px transparent`, backgroundColor: themecolor}} onMouseOver={(e)=>e.target.style.cssText=`background-color: transparent; border: solid 3px ${themecolor}; color: ${themecolor}`} onMouseLeave={(e)=>e.target.style.cssText=`background-color: ${themecolor}; border: solid 3px transparent; color: white`}>Send Message</button>\r\n          </div>\r\n          <i className=\"fal fa-times\" onClick={()=>props.setAdduser()} style={{color: themecolor}}></i>\r\n      </div>\r\n    \r\n    </>\r\n  )\r\n}\r\nexport default Adduser","import React, {useState, useEffect, useContext} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport {db} from '../Fire'\r\nimport firebase from 'firebase'\r\nimport {ContextApp} from '../ContextAPI'\r\nimport styled from 'styled-components'  \r\n\r\nconst Input = styled.input ` \r\n      &:valid {\r\n         border: solid 2px ${props=>props.color}\r\n      }\r\n      &:focus {\r\n         border: solid 2px ${props=>props.color}\r\n      }\r\n`\r\nfunction Inputs (props) {\r\n   const {themecolor}=useContext(ContextApp)\r\n    const {disabled, determineDelete, updateProfile,age, setAge, name, setName, city, setCity, phonenumber, setPhonenumber, website, setWebsite, country, setCountry}=props\r\n    const user = firebase.auth().currentUser\r\n   function deleteUser(){\r\n      db.collection('users').doc(user.uid).delete()\r\n      db.collection('notifications').doc(user.uid).delete()\r\n      user.delete().then(()=>{\r\n\r\n      }).catch(err=>{\r\n\r\n      })\r\n   }\r\n return (\r\n<div className=\"inputs inps\">\r\n  <label>\r\n    <span>Name</span>\r\n    <Input type='text' value={name} onChange={(e)=>setName(e.target.value)} required placeholder='Name' color={themecolor}/>\r\n  </label>\r\n  <label>\r\n      <span>Age</span>\r\n     <Input color={themecolor} type=\"number\" value={age}onChange={(e)=>setAge(e.target.value)} min='1' required placeholder='Age'/>\r\n  </label>\r\n  <label>\r\n      <span>Phone Number</span>\r\n      <Input  color={themecolor} type=\"number\" value={phonenumber} onChange={(e)=>setPhonenumber(e.target.value)} required placeholder='Phone Number' />\r\n  </label>\r\n  <label>\r\n      <span>City</span>\r\n     <Input  color={themecolor} type=\"text\" value={city} onChange={(e)=>setCity(e.target.value)} required placeholder='City'/>\r\n  </label>\r\n  <label>\r\n     <span>Country</span>\r\n     <Input  color={themecolor} type=\"text\" value={country} onChange={(e)=>setCountry(e.target.value)} required placeholder='Country' />\r\n  </label>\r\n  <label>\r\n     <span>Website URL</span>\r\n     <Input  color={themecolor} type=\"text\" value={website}  onChange={(e)=>setWebsite(e.target.value)} required placeholder='https://example.com'/>\r\n  </label>\r\n    <label className='btnContainer'>\r\n    <button className=\"themeBtn\" onClick={()=>updateProfile()}style={{color: 'white', border: `solid 3px transparent`, backgroundColor: themecolor}} onMouseOver={(e)=>e.target.style.cssText=`background-color: transparent; border: solid 3px ${themecolor}; color: ${themecolor}`} onMouseLeave={(e)=>e.target.style.cssText=`background-color: ${themecolor}; border: solid 3px transparent; color: white`}>Save</button>\r\n    </label>\r\n    <label>\r\n       <span><strong>Delete Account</strong></span>\r\n       <Input color={themecolor} required onChange={e=>determineDelete(e)} placeholder={'Type in '+user.displayName+' to delete account.'}/>\r\n      <small >Key: {user.displayName}</small>\r\n      <button disabled={disabled} className='themeBtn warning' onClick={()=>deleteUser()}>Delete Account</button>\r\n    </label>\r\n</div>\r\n  )\r\n}\r\nexport default Inputs","import React, {useState, useEffect, useContext} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport Inputs from '../Inputs'\r\nimport firebase from 'firebase'\r\nimport {db} from '../../Fire'\r\nimport {CSSTransition, TransitionGroup} from 'react-transition-group'\r\nimport { ContextApp } from '../../ContextAPI'\r\n\r\nfunction Account (props) {\r\n  const user = firebase.auth().currentUser\r\n  const [deleteuser, setDeleteuser]=useState('')\r\n  const [name, setName]=useState('')\r\n  const [age, setAge]=useState('')\r\n  const [phonenumber, setPhonenumber]=useState('')\r\n  const [city, setCity]=useState('')\r\n  const [country, setCountry]=useState('')\r\n  const [website, setWebsite]=useState('')\r\n  const [uploaded, setUploaded]=useState(false)\r\n  const [cover, setCover]=useState('')\r\n  const [email, setEmail]=useState('')\r\n  const [job, setJob]=useState('')\r\n  const [deleteaccountstring, setDeleteaccountstring]=useState('')\r\n  const {notifi, setNotifi, notificont, setNotificont}=useContext(ContextApp)\r\n\r\n  const [loading, setLoading]=useState(true)\r\n  function uploadImg(){\r\n   \r\n    let file = document.querySelector('.uploadpic').files[0]\r\n    const storageRef = firebase.storage().ref(`${user.uid}/${file.name}`);\r\n    const task = storageRef.put(file);\r\n    task.on('state_changes',\r\n      function progress(){\r\n        setLoading(true)\r\n      },\r\n      function error(){\r\n      \r\n      },\r\n      function complete(){\r\n      setLoading(false)\r\n        setCover(`https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${user.uid}%2F${file.name}?alt=media`,)\r\n         setUploaded(!uploaded)\r\n      }\r\n    )\r\n  \r\n  }  // if(file.size <=2097152){ \r\n    //   setUploaded(!uploaded)\r\n    //   let reader = new FileReader()\r\n    //   reader.onloadend = function (){\r\n    //     setCover(reader.result)\r\n    //   }\r\n    //   if(file){\r\n    //     reader.readAsDataURL(file)\r\n    //   }\r\n    // }else {\r\n    //   setNotifi(true)\r\n    //   setNotificont({\r\n    //     msg: 'Image is too large',\r\n    //     emoji: 'fal fa-exclamation-circle'\r\n    //   })\r\n\r\n    //   setTimeout(()=>{\r\n    //     setNotifi(false)\r\n    //   },3500)\r\n    // }\r\n  function saveImg(){\r\n    setUploaded(!uploaded)\r\n    updateProfile()\r\n  }\r\n  function removeImg(){\r\n    setUploaded(false)  \r\n    updateProfile()\r\n    user.updateProfile({\r\n      displayName: name,\r\n    })\r\n    const userobj = {\r\n      job,\r\n      age,\r\n      city,\r\n      country,\r\n      phone: phonenumber,\r\n      website, \r\n      name, \r\n      email,\r\n      cover: 'https://www.gettyimages.ca/gi-resources/images/500px/983794168.jpg'\r\n    }\r\n    db.collection('users').doc(user.uid).update({\r\n        userinfo: userobj\r\n    })    \r\n\r\n  }\r\n  function updateProfile(){\r\n    const userobj = {\r\n      age,\r\n      city,\r\n      country,\r\n      phone: phonenumber,\r\n      website, \r\n      cover, \r\n      name, \r\n      email,\r\n      job,\r\n    }\r\n    db.collection('users').doc(user.uid).update({\r\n        userinfo: userobj\r\n    }).then(()=>{ \r\n        setNotifi(true)\r\n        setNotificont({\r\n          msg: 'Profile was updated!',\r\n          emoji: 'fal fa-check-circle'\r\n        })\r\n    }).catch(err=>{\r\n      setNotifi(true)\r\n      setNotificont({\r\n        msg: 'Image is too large',\r\n        emoji: 'fal fa-exclamation-circle'\r\n      })\r\n    })\r\n    setTimeout(()=>{\r\n      setNotifi(false)\r\n    },3500)\r\n  \r\n  }\r\n  const [disabled, setDisabled]=useState(true)\r\n  function determineDelete(e){\r\n    if(e.target.value===user.displayName){\r\n      setDisabled(false)\r\n    }else {\r\n      setDisabled(true)\r\n    }\r\n  }\r\n  useEffect(()=>{\r\n    db.collection('users').doc(user.uid).onSnapshot(snap=>{\r\n      const user = snap.data()\r\n      setName(user.userinfo.name)\r\n      setAge(user.userinfo.age)\r\n      setPhonenumber(user.userinfo.phone)\r\n      setCity(user.userinfo.city)\r\n      setCountry(user.userinfo.country)\r\n      setWebsite(user.userinfo.website)\r\n      setCover(user.userinfo.cover)\r\n      setEmail(user.userinfo.email)\r\n      setJob(user.userinfo.job)\r\n      setLoading(false)\r\n    })\r\n  },[])\r\n\r\n  return (\r\n   <div className='account'>\r\n      <div className=\"head\">\r\n        <h2>Account</h2>\r\n      </div>\r\n      <div className=\"profilepic\">\r\n          {loading?<div className={\"loader blue reloader width\"}>\r\n                <div class=\"lds-ring\">\r\n                  <div></div>\r\n                  <div></div>\r\n                  <div></div>\r\n                  <div></div>\r\n                </div>\r\n              </div>:  <img src={cover} alt=\"\"/>}\r\n          <div className=\"btnprof flexrow\">\r\n          {!uploaded?\r\n            <label>\r\n            <div className=\"settingBtn\" onClick={()=>setNotifi(false)}>Upload</div>\r\n            <input className='uploadpic' onChange={()=>uploadImg()} type=\"file\" style={{display: 'none'}}/>\r\n          </label>:\r\n            <button className='settingBtn' onClick={()=>saveImg()}>Save</button>\r\n        }\r\n            <button className='settingBtn warning' onClick={()=>removeImg()}>Remove</button>\r\n          </div>\r\n      </div>\r\n      <hr/>\r\n        <Inputs \r\n        name={name}\r\n        setName={setName}\r\n        age={age}\r\n        setAge={setAge}\r\n        phonenumber={phonenumber}\r\n        setPhonenumber={setPhonenumber}\r\n        city={city}\r\n        setCity={setCity}\r\n        country={country}\r\n        setCountry={setCountry}\r\n        website={website}\r\n        setWebsite={setWebsite}\r\n        updateProfile={updateProfile}\r\n        determineDelete={determineDelete}\r\n        disabled={disabled}\r\n       />\r\n\r\n        {/* <div className=\"flexrow inps\">\r\n        <label>\r\n          <span style={{marginBottom: '10px'}}>Delete Account</span>\r\n          <small>If you delete your account, all your data will be lost.</small>\r\n         <input style={{width: '80%'}} placeholder={'Type in '+user.displayName} type=\"text\" required onChange={(e)=>{setDeleteuser(e.target.value);}}/>\r\n        </label>\r\n        <label>\r\n        <button  className={deleteuser===user.displayName?'themeBtn warning':'themeBtn warning disabled'} disabled={deleteUser===user.displayName?'false':'true'} style={{marginTop: '10px', width: '80%'}}  onClick={()=>deleteUser()}>Delete Account</button>\r\n        </label>\r\n        </div> */}\r\n  </div>\r\n  )\r\n}\r\nexport default Account","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction Switches (props) {\r\n  const {checked, setChecked, function1} =props\r\n  return (\r\n   <div className='switchdiv'>\r\n  <div className=\"flexrow switchdiv\">\r\n  <p>{props.title}</p>\r\n  <label className='form-switch'>\r\n  <input type=\"checkbox\" checked={checked} onChange={(e)=>{setChecked && setChecked(e.target.checked); function1 && function1()}}/>\r\n  <i></i>\r\n  </label>\r\n  </div>\r\n  </div>\r\n  )\r\n}\r\nexport default Switches","import React, {useState, useEffect, useContext} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport {ContextApp} from '../ContextAPI'\r\nimport {createGlobalStyle, createglobalStyle} from 'styled-components'\r\n\r\nfunction Input (props) {\r\n  const {themecolor}=useContext(ContextApp)\r\n  const {type, title, value, setValue, placeholder, changeCSSVar} = props\r\n\r\n  return (\r\n   <div className='input flexrow sb'>\r\n     <p>{title}</p>\r\n     {type==='text'?<input required onBlur={(e)=>e.target.style.border='solid 2px #eee'} onFocus={(e)=>e.target.style.border=`solid 2px ${value}`} placeholder={placeholder} type={type} value={value} onChange={(e)=>{setValue(e.target.value)}}/>:\r\n         <input required onBlur={(e)=>e.target.style.border='solid 2px #eee'} onFocus={(e)=>e.target.style.border=`solid 2px ${value}`} placeholder={placeholder} type={type} value={value} onChange={(e)=>{setValue(e.target.value); changeCSSVar(e)}}/>\r\n    }\r\n    </div>\r\n  )\r\n}\r\nexport default Input","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport firebase from 'firebase'\r\n\r\n\r\n\r\nfunction Button (props) {\r\n  const {emoji,state1, setState1, setState2,style, function1, type, title, addstyle, state3, setState3, stylebtn}=props\r\n  function styleFunc(){\r\n    if(addstyle){\r\n      if(state1){\r\n        return {backgroundColor: 'transparent', border: 'solid 3px'+style, color: style}\r\n      }else {\r\n        return {backgroundColor: style, border: 'solid 3px transparent'}\r\n      }\r\n    }\r\n  }\r\n  return (\r\n      <div className='flexrow sb'>\r\n      {type==='button'?<div></div>:<p>{title}</p>}\r\n      {type==='button'?<button className='btn'   onClick={()=>{function1()}} >Save</button>:<i class={emoji} onClick={()=>{props.setState1(!state1); setState2 && setState2(true)}} onMouseOver={()=>setState3 && setState3(true)} onMouseLeave={()=>setState3 && setState3(false)}></i>}\r\n      {(emoji!=='fad fa-adjust'&&type!=='button')?<span role='img' aria-label='emoji' onClick={()=>{props.setState1(!state1); setState2 && setState2(true)}}>{emoji}</span>:''}\r\n      </div>\r\n  )\r\n}\r\nexport default Button\r\n","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport Switches from '../Switches'\r\nimport Input from '../Input'\r\nimport firebase from 'firebase'\r\nimport { db } from '../../Fire'\r\nimport Button from '../Button'\r\n\r\nfunction Personalization (props) {\r\n  const user = firebase.auth().currentUser\r\n  const {function1, input1, input2, input3,input4, setInput4, setInput1, setInput2, setInput3} = props\r\n  const [hovered, setHovered]=useState(false)\r\n\r\n  function changeCSSVar(e){\r\n    document.documentElement.style.setProperty(\r\n      '--theme-color', e.target.value\r\n    )\r\n}\r\nfunction changeCSSVarChat(e){\r\n  document.documentElement.style.setProperty(\r\n    '--chat-color', e.target.value\r\n  )\r\n}\r\n  return (\r\n   <div className='customize'>\r\n <div><h2>Customize</h2></div>\r\n    <small>Customize your chat settings.</small>\r\n    <hr/>\r\n      <div className=\"spacer1\"></div>\r\n    <div className=\"flex\">\r\n      <Switches title={'Dark Mode'} checked={input1} setChecked={setInput1}/>\r\n      <Switches title={'Wide Sidebar'} checked={input2} setChecked={setInput2}/>\r\n      <Input type={'color'} title={'Chat Color'} value={input3} setValue={setInput3} changeCSSVar={changeCSSVarChat}/>\r\n      <Input type={'color'} title={'Theme Color'} value={input4} setValue={setInput4} changeCSSVar={changeCSSVar}/>\r\n      <Button type={'button'} state1={hovered} setState1={setHovered} style={input4}  function1={function1} addstyle={true} />\r\n    </div>\r\n  </div>\r\n  )\r\n}\r\nexport default Personalization","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction Infocontainer (props) {\r\n  const {variable, title}=props\r\n  return (\r\n   <>\r\n      <div className=\"flexrow sb\" style={{margin: '10px 0'}}>\r\n      <p>{title}:</p>\r\n      <p className='light'>{variable?variable:'N/A'}</p>\r\n    </div>\r\n  </>\r\n  )\r\n}\r\nexport default Infocontainer","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport { db } from '../../Fire'\r\nimport Infocontainer from './Infocontainer'\r\n\r\nfunction Aboutchatuser (props) {\r\n  let {chatuser}=props\r\n  const [name, setName]=useState('')\r\n  const [age, setAge]=useState('')\r\n  const [city, setCity]=useState('')\r\n  const [country, setCountry]=useState('')\r\n  const [cover, setCover]=useState('')\r\n  const [email, setEmail]=useState('')\r\n  const [job, setJob]=useState('')\r\n  const [phone, setPhone]=useState('')\r\n  const [website, setWebsite]=useState('')\r\n  useEffect(()=>{\r\n    db.collection('users').doc(chatuser).onSnapshot(snap=>{\r\n      let data = snap.data()\r\n      setName(data.userinfo.name)\r\n      setAge(data.userinfo.age)\r\n      setCity(data.userinfo.city)\r\n      setCountry(data.userinfo.country)\r\n      setCover(data.userinfo.cover)\r\n      setEmail(data.userinfo.email)\r\n      setJob(data.userinfo.job)\r\n      setPhone(data.userinfo.phone)\r\n      setWebsite(data.userinfo.website)\r\n    })\r\n\r\n  },[])\r\n  return (\r\n   <>\r\n    <div className=\"flexrow sb\">\r\n    <h2 className='capitalize'>About {name}</h2>\r\n    <div className=\"profilepic\">\r\n      <img src={cover} alt=\"profilepicture\"/>\r\n    </div>\r\n    </div>\r\n    <hr/>\r\n    <h3 style={{marginBottom: '10px'}}>Personal Info</h3>\r\n\r\n    <Infocontainer variable={age} title={'Age'}/>\r\n    <Infocontainer variable={job} title={'Job'}/>\r\n    <Infocontainer variable={phone} title={'Phone'}/>\r\n    <Infocontainer variable={country} title={'Country'}/>\r\n    <Infocontainer variable={city} title={'City'}/>\r\n    <h3 style={{margin: '10px 0'}}>Other Info</h3>\r\n    <Infocontainer variable={email} title={'Email'}/>\r\n    <div className=\"flexrow sb\" style={{margin: '10px 0'}}>\r\n      <p>Website:</p>\r\n      <p className='light'>{website==='https://'?'N/A':<a href={website} rel='noreferrer' target=\"_blank\"> <i class=\"fal fa-external-link-alt\"></i></a>}</p>\r\n    </div>\r\n\r\n  </>\r\n  )\r\n}\r\nexport default Aboutchatuser","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction Preferences () {\r\n\r\n  return (\r\n   <>\r\n   asd\r\n  </>\r\n  )\r\n}\r\nexport default Preferences","import React, {useState, useEffect, useContext} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport Switches from '../Switches'\r\nimport Input from '../Input'\r\nimport firebase from 'firebase'\r\nimport { db } from '../../Fire'\r\nimport Button from '../Button'\r\nimport {ContextApp} from '../../ContextAPI'\r\nfunction Themes (props) {\r\n  const  {themecolor,notifi, setNotifi, notificont, setNotificont}=useContext(ContextApp)\r\n  const user = firebase.auth().currentUser\r\n  const {themeimg,setThemeimg,themebool,setEmojibool,setThemebool} = props\r\n  const [hovered, setHovered]=useState(false)\r\n  const [nickname, setNickname]=useState('')\r\n  const [emoji, setEmoji]=useState('')\r\n  const {creatorid,convoid, setEmojitype, emojitype, miniview, setMiniview}=props\r\n  function updateProfile(){\r\n    setNotifi(true)\r\n    setNotificont({\r\n      msg: 'Profile was updated!',\r\n      emoji: 'fal fa-check-circle'\r\n    })\r\n\r\n    if(user.uid===creatorid){\r\n      db.collection('conversations').doc(convoid).update({\r\n        nickname1: nickname,\r\n      })\r\n    }\r\n    else {\r\n      db.collection('conversations').doc(convoid).update({\r\n        nickname2: nickname,\r\n      })\r\n    }\r\n    setTimeout(()=>{\r\n      setNotifi(false)\r\n    },3500)\r\n  }\r\n  useEffect(()=>{\r\n    db.collection('conversations').doc(convoid).onSnapshot(snap=>{\r\n        const convo =  snap.data()\r\n        setThemeimg(convo.customizedconvo.theme) \r\n        setEmojitype(convo.customizedconvo.emoji)\r\n        if(user.uid===creatorid) {\r\n          setNickname(convo.nickname1)\r\n        }\r\n        else {\r\n          setNickname(convo.nickname2)\r\n        }\r\n      })\r\n  },[convoid])\r\n  return (\r\n   <div className='customize'>\r\n <div><h2>Themes</h2></div>\r\n    <small>Customize your conversation settings.</small>\r\n    <hr/>\r\n      <div className=\"spacer1\"></div>\r\n    <div className=\"flex\">\r\n       <Button type='emoji' emoji='fad fa-adjust' title={'Theme'} setState1={setThemebool} state1={themebool} state3={miniview} setState3={setMiniview}/>\r\n       <Button type={'emoji'} emoji={emojitype} title={'Emoji'} state1={emoji} setState1={setEmoji} setState2={setEmojibool}/>\r\n       <Input  placeholder={'Nickname'} type={'text'}  title={'Nickname'} value={nickname} setValue={setNickname} />\r\n        <div className='flexrow sb'><span></span><button className='btn' style={{color: 'white', border: `solid 3px transparent`, backgroundColor: themecolor}} onMouseOver={(e)=>e.target.style.cssText=`background-color: transparent; border: solid 3px ${themecolor}; color: ${themecolor}`} onMouseLeave={(e)=>e.target.style.cssText=`background-color: ${themecolor}; border: solid 3px transparent; color: white`} onClick={()=>updateProfile()}>Save</button></div>\r\n    </div>\r\n  </div>\r\n  )\r\n}\r\nexport default Themes","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport Input from '../Input'\r\nimport Switches from '../Switches'\r\nimport {db} from '../../Fire'\r\nimport firebase from 'firebase'\r\nfunction Actions (props) {\r\n  const user = firebase.auth().currentUser\r\n  const {notifibool, setNotifibool, convoid, creatorid}=props\r\n  function changeNotifi(){\r\n   \r\n      if(user.uid===creatorid){\r\n        db.collection('conversations').doc(convoid).update({\r\n          notifications1: !notifibool\r\n        })\r\n     }else {\r\n       db.collection('conversations').doc(convoid).update({\r\n         notifications2: !notifibool\r\n       })\r\n\r\n     }\r\n    \r\n}\r\n  return (\r\n   <>\r\n    <h2 o>Chat Configurations</h2>\r\n    <hr/>\r\n   <Switches title='Notifications' checked={notifibool}  function1={changeNotifi}/>\r\n  </>\r\n  )\r\n}\r\nexport default Actions","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\n\r\nfunction Support () {\r\n\r\n  return (\r\n   <>\r\n   \r\n  </>\r\n  )\r\n}\r\nexport default Support","import React, {useState, useEffect, useContext} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport firebase from 'firebase'\r\nimport {db} from '../Fire'\r\nimport Account from './settings/Account'\r\nimport Personalization from './settings/Personalization'\r\nimport Aboutchatuser from './settings/Aboutchatuser'\r\nimport Preferences from './settings/Preferences'\r\nimport { CSSTransition } from 'react-transition-group'\r\nimport Themes from './settings/Themes'\r\nimport {ContextApp} from '../ContextAPI'\r\nimport {useHistory} from 'react-router-dom'\r\nimport Contextmenu from './Contextmenu'\r\nimport Hoverablebutton from './Hoverablebutton'\r\nimport Actions from './settings/Actions'\r\nimport Support from './settings/Support'\r\n\r\nfunction Usersettings (props) {\r\n  const id =db.collection('users').doc().id\r\n  const [keyword, setKeyword]=useState('')\r\n  const pattern = new RegExp('\\\\b' + keyword.replace(/[\\W_]+/g,\"\"), 'i')\r\n  const history = useHistory()\r\n  const {settings, type, link, linklabel, BrowserHistory}=props\r\n  const [themebool, setThemebool]=useState(false)\r\n  const [emojibool, setEmojibool]=useState(false)\r\n  const [miniview, setMiniview]=useState(false)\r\n  const {darkmode, notifi, setNotifi, notificont, setNotificont}=useContext(ContextApp)\r\n  const user = firebase.auth().currentUser\r\n\r\n  const [themecolor, setThemecolor]=useState('')\r\n  const [themeimg, setThemeimg]=useState('')\r\n  const [emojitype, setEmojitype]=useState('')\r\n  const [darkmode1, setDarkmode]=useState(false)\r\n  const [notifibool, setNotifibool]=useState(true)\r\n  const [widemode, setWidemode]=useState(false)\r\n  const [chatcolor, setChatcolor]=useState('')\r\n  const [contextmenu, setContextmenu]=useState(false)\r\n  const [contextstyle, setContextstyle]=useState({\r\n    top: 0,\r\n    left: 0,\r\n  })\r\n  const themes = [\r\n    {img:'https://wallpaperaccess.com/full/1288078.jpg', type: 'background'},\r\n    {img:'https://www.setaswall.com/wp-content/uploads/2019/08/Whatsapp-Wallpaper-072.jpg',type: 'background'},\r\n    {img:'http://images.unsplash.com/photo-1518531933037-91b2f5f229cc?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max', type: 'background'},\r\n    {img:'https://i.imgur.com/05HfuHW.jpg',type: 'background'},\r\n    {img:'https://i.imgur.com/Frdc6vv.jpg',type: 'background'},\r\n    {img:'https://i.imgur.com/3St6WoQ.jpg',type: 'background'},\r\n    {img: 'https://i.imgur.com/R4TMmVd.jpg', type: 'background'},\r\n    {img: 'https://i.imgur.com/8UIUZae.jpg', type: 'background'},\r\n    {img:'https://i.imgur.com/yfwxwo1.jpg' , type: 'gradient'},\r\n    {img:'https://i.imgur.com/HTQ2T1O.jpg', type: 'gradient'},\r\n    {img:'https://i.imgur.com/z0zjGrS.jpg', type: 'gradient'},\r\n    {img:'https://i.imgur.com/NXUqzHa.jpg', type: 'gradient'},\r\n    {img:'https://i.imgur.com/bT0t5lL.jpg' , type: 'gradient'},\r\n    {img: 'https://i.imgur.com/TE4sKjU.jpg', type: 'gradient'},\r\n    {img: 'https://i.imgur.com/4hzNTTq.png', type: 'default'},  \r\n]\r\nconst emojis= [\r\n  '', '' ,'', '', '' ,'' ,\r\n     '', '', '' ,'' ,'', '' ,\r\n     '' ,'','', '', '', \r\n     '', '','', '', '' ,'' ,\r\n     '', '', '' ,'' ,'', '',\r\n     '', '', '' ,'', '', '',\r\n      '', '', '' ,'', '', '',\r\n       '', '' ,'' ,'', '',\r\n        '' ,'', '', \"\",\r\n        '' ,'', '' ,'' ,\r\n        '', '' ,'', '' ,\r\n        '' ,'' ,'', '',\r\n         '', '', ' ','' ,\r\n         '', '', \"\", \"\", '', \r\n         \"\", '', \"\"\r\n] \r\n  function selectEmoji(el){\r\n    setEmojitype(el)\r\n    setNotifi(true)\r\n  setNotificont({\r\n    emoji: el,\r\n    msg: 'Emoji selected!'\r\n  })\r\n  db.collection('conversations').doc(props.diag.convoinfo.convoid).update({\r\n    customizedconvo : {\r\n     theme: themeimg,\r\n     emoji: el,\r\n    }\r\n   })\r\n  setTimeout(()=>{\r\n    setNotifi(false)\r\n  },3500)\r\n  setEmojibool(false)\r\n  }\r\nfunction selectTheme(el){\r\n  setThemeimg(el)\r\n  setNotifi(true)\r\n  setNotificont({\r\n    emoji: 'fal fa-check-circle',\r\n    msg: 'Theme selected!'\r\n  })\r\n  \r\n    db.collection('conversations').doc(props.diag.convoinfo.convoid).update({\r\n     customizedconvo : {\r\n      theme: el,\r\n      emoji: emojitype,\r\n     }\r\n    })\r\n  \r\n  setTimeout(()=>{\r\n    setNotifi(false)\r\n  },3500)\r\n  setThemebool(false)\r\n}\r\n  let emojisrow = emojis &&emojis.map(emoji=>{\r\n      return <div  style={{cursor: 'pointer'}} className=\"emojidiv\"  onClick={()=>selectEmoji(emoji)}>\r\n          <span role='img' aria-label='emoji'>{emoji}</span>\r\n      </div>\r\n  })\r\n\r\n    let themesrow = themes && themes.map(theme=>{\r\n        if(pattern.test(theme.type.toLowerCase())){\r\n          return <div  className=\"theme bs flex\">\r\n          <div className=\"img\"> <img src={theme.img} alt=''/></div>\r\n           <div className=\"select flexrow\">\r\n           <p>Select this theme:</p>\r\n           <i className='fal fa-check-circle'  onClick={()=>{selectTheme(theme.img)}} style={{color: themecolor}}></i>\r\n           </div>\r\n       </div>\r\n        }\r\n    })\r\n\r\n  function updateProfile(){\r\n    const updateObj ={\r\n      darkmode: darkmode1,\r\n      widemode,\r\n      color: chatcolor,\r\n      themecolor\r\n    }\r\n    db.collection('users').doc(user.uid).update({\r\n      customization :  updateObj  \r\n    }).then(()=>{\r\n      setNotifi(true)\r\n      setNotificont({\r\n        emoji: 'fal fa-check-circle',\r\n        msg: 'Profile has been updated!'\r\n      })\r\n    })\r\n    setTimeout(()=>{\r\n      setNotifi(false)\r\n    },3500)\r\n  }\r\n\r\n  function contextMenu(e){\r\n    let customcontext = document.querySelector('.contextmenu')\r\n    const bounding = customcontext.getBoundingClientRect();\r\n      e.preventDefault() \r\n      setContextmenu(true)\r\n      customcontext.style.top= `${e.pageY-customcontext.clientHeight}px`\r\n      customcontext.style.left= `${e.pageX-customcontext.clientWidth}px`\r\n\r\n    }\r\n    useEffect(()=>{\r\n      if(type==='chatsettings'){\r\n        db.collection('conversations').doc(props.diag.convoinfo.convoid).onSnapshot(snap=>{\r\n            const convo = snap.data()\r\n            if(user.uid===props.diag.convoinfo.creatorid) {\r\n              setNotifibool(convo.notifications1)\r\n            }else {\r\n              setNotifibool(convo.notifications2)\r\n            }\r\n        })\r\n      }\r\n\r\n    },[])\r\n  useEffect(()=>{\r\n    db.collection('users').doc(user.uid).onSnapshot(snap=>{\r\n      const user = snap.data()\r\n      setDarkmode(user.customization.darkmode)\r\n      setWidemode(user.customization.widemode)\r\n      setChatcolor(user.customization.color)\r\n      setThemecolor(user.customization.themecolor)\r\n    })\r\n  },[])\r\n\r\n    return (\r\n   <>\r\n    <div onContextMenu={(e)=>contextMenu(e)} className={darkmode?\"settingsgrid flex darkmode\":'settingsgrid flex'}>\r\n        <div className=\"links  flex\">\r\n            <div className=\"section1 flex\">\r\n              <h2>Settings</h2>\r\n            <NavLink onClick={()=>setNotifi(false)} activeStyle={{color: themecolor}} activeClassName='bs' exact to={'/'+link.link0}>{linklabel.link0}</NavLink>\r\n            <NavLink onClick={()=>setNotifi(false)} activeStyle={{color: themecolor}} activeClassName='bs'  to={`/${type}/${link.link1}`}>{linklabel.link1}</NavLink>\r\n            </div>\r\n            <hr/>\r\n            <div className=\"section2 flex\">\r\n            <NavLink onClick={()=>setNotifi(false)} activeStyle={{color: themecolor}} activeClassName='bs'  to={`/${type}/${link.link2}`}>{linklabel.link2}</NavLink>\r\n            <NavLink onClick={()=>setNotifi(false)}activeStyle={{color: themecolor}} activeClassName='bs' to={`/${type}/${link.link3}`}>{linklabel.link3}</NavLink>\r\n              {type==='settings'?'':<hr/>}\r\n             {type==='settings'?'':  <Link  to={'/chat/'+props.diag.convoinfo.convoid} style={{marginTop:'5px'}}>Return to Chat</Link>}\r\n            </div>\r\n        </div>\r\n        <div className=\"paths bs\">\r\n          <Switch>\r\n          <Route exact path={`/${link.link0}`}>\r\n            {type==='settings'?<Account  notifi={notifi} notificont={notificont} setNotifi={setNotifi} setNotificont={setNotificont}/>:<Themes setEmojitype={setEmojitype} emojitype={emojitype} setEmojibool={setEmojibool} themeimg={themeimg} setThemeimg={setThemeimg} themebool={themebool} setThemebool={setThemebool} chatuser={props.chatuser} notifi={notifi} notificont={notificont} setNotifi={setNotifi} setNotificont={setNotificont} convoid={props.diag.convoinfo.convoid} creatorid={props.diag.convoinfo.creatorid} miniview={miniview} setMiniview={setMiniview}/>}\r\n          </Route>\r\n          <Route  path={`/${type}/${link.link1}`}>\r\n             {type==='settings'? <Preferences />:<Actions notifibool={notifibool} setNotifibool={setNotifibool} convoid={props.diag.convoinfo.convoid} creatorid={props.diag.convoinfo.creatorid}/>}\r\n          </Route>\r\n          <Route  path={`/${type}/${link.link2}`}>\r\n            {type==='settings'?<Personalization function1={updateProfile} input1={darkmode1} input3={chatcolor} input4={themecolor} input2={widemode} setInput1={setDarkmode} setInput4={setThemecolor} setThemecolor={setThemecolor} setInput3={setChatcolor} setInput2={setWidemode}/>:''}\r\n          </Route>\r\n          <Route path={`/${type}/${link.link3}`}>\r\n              {type==='settings'?<Support />:<Aboutchatuser chatuser={props.chatuser}/>}\r\n          </Route>\r\n\r\n          </Switch>\r\n        \r\n        </div>\r\n       <CSSTransition in={notifi} timeout={300} classNames='displayerror' unmountOnExit>\r\n       <div className=\"errormsg bs\" >\r\n       <span role='img' aria-label='emoji'>{emojitype}</span> <p>{notificont.msg}</p>\r\n        <i className=\"far fa-times\" style={{color: themecolor}} onClick={()=>setNotifi(false)}></i>    \r\n        </div>\r\n       </CSSTransition>\r\n        <CSSTransition in={themebool} timeout={300} classNames={\"themesdisplay\"} unmountOnExit>\r\n          <>\r\n        <div className=\"screen\" onClick={()=>setThemebool(false)}></div> \r\n          \r\n        <div className='themes bs flex'>\r\n          \r\n      \r\n          <div className=\"filterBtn flex\">\r\n            <h2 style={{textAlign: 'center'}}>Filter: </h2>\r\n              <div className=\"flexrow center\">\r\n                <Hoverablebutton  state={keyword} setState={setKeyword} type='' text='All'/>\r\n                <Hoverablebutton  state={keyword} setState={setKeyword} type='background' text='Images'/>\r\n                <Hoverablebutton  state={keyword} setState={setKeyword} type='gradient' text='Gradients'/>\r\n                <Hoverablebutton  state={keyword} setState={setKeyword} type='default' text='Default'/>\r\n              </div>\r\n            </div>\r\n        \r\n          <div className=\"flex\">  \r\n         <p className='themestitle'>Themes: </p>\r\n         {themesrow}\r\n          </div>\r\n          </div>\r\n          </>\r\n        </CSSTransition>\r\n        <CSSTransition in={emojibool} timeout={300} classNames={\"emojidisplay\"} unmountOnExit>\r\n          <>\r\n          <div className=\"screen\" onClick={()=>setEmojibool(false)} onContextMenu={()=>setContextmenu(false)}></div> \r\n          \r\n        <div className='emojiwindow bs flexrow'>\r\n            <div className=\"emojistitle\">\r\n              <h2>Select Emoji</h2>\r\n              <div className=\"flexrow flexwrap\">\r\n              {emojisrow}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          </>\r\n        </CSSTransition>\r\n        <CSSTransition in={miniview} timeout={300} classNames={'miniviewdisplay'} unmountOnExit>\r\n            <div className=\"miniviewdisplay bs\" >\r\n              <img src={themeimg} alt=\"\"/>\r\n            </div>\r\n        </CSSTransition>\r\n      \r\n          <Contextmenu emojitype={emojitype} setEmojibool={setEmojibool} emojibool={emojibool} themebool={themebool} setThemebool={setThemebool} contextstyle={contextstyle} type={'settings'} contextmenu={contextmenu} setContextmenu={setContextmenu}/>\r\n    </div>\r\n  </>\r\n  )\r\n}\r\nexport default Usersettings","import React, { useState, useEffect, useContext } from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  NavLink,\r\n  Redirect\r\n} from \"react-router-dom\";\r\nimport { ContextApp } from \"../ContextAPI\";\r\nimport styled from 'styled-components'\r\nconst Icon = styled.i `\r\ncolor: ${props=>props.color}\r\n`;\r\nconst Span = styled.span `\r\n    background-color: red;\r\n    &:hover {\r\n      background-color: ${props=>props.color};\r\n      span {\r\n        color: white;\r\n      }\r\n      i {\r\n        color: white;\r\n      }\r\n    }\r\n`;\r\n\r\nfunction Hoverlink(props) {\r\n  const { themecolor } = useContext(ContextApp);\r\n  const { num,icon,type, classNames, setState, state, lnk, txt, clk } = props;\r\n\r\n\r\n  return  (\r\n    <>\r\n        <Link to={lnk} onClick={clk }>\r\n            <Span color={themecolor} className={classNames}>\r\n            <span>{txt}</span>\r\n            <Icon color={themecolor} className={icon}></Icon>\r\n            </Span>\r\n        </Link>\r\n    </>\r\n\r\n  );\r\n}\r\nexport default Hoverlink;\r\n","import React, { useState, useEffect, useRef, useContext } from \"react\";\nimport firebase from \"firebase\";\nimport { db,realtime_db } from \"../Fire\";\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  NavLink,\n  Redirect,\n  useLocation\n} from \"react-router-dom\";\nimport ReactTimeAgo from 'react-time-ago'\nimport emailjs from 'emailjs-com'\nimport Usersettings from \"./Usersettings\";\nimport { ContextApp } from \"../ContextAPI\";\nimport Hoverlink from \"./Hoverlink\";\n\n\nexport default function Linkage(props) {\n    const { themecolor } = useContext(ContextApp)\n    const user = firebase.auth().currentUser\n    const [roleType, setRoleType] = useState('')\n    //var roleType = 'assistant'\n    const [cover, setCover] = useState(\"\")\n    const { handleLogout } = props\n    const links = [\"comment\", \"notifications\", \"settings\", \"adddraft\", \"logout\"]\n    const [notifi, setNotifLength]=useState(0)\n    const lnks = [\n        { icon: \"fal fa-comment-alt\", txt: \"Comment\" },\n        { icon: \"fal fa-bell\", txt: \"Notifications\" },\n        { icon: \"fal fa-cog\", txt: \"Settings\" },\n        { icon: \"fal fa-cog\", txt: \"Adddraft\" },\n        { icon: \"fal fa-sign-out\", txt: \"Logout\" }\n    ];\n    const id =db.collection('users').doc().id\n    const lnksrow =\n        lnks &&\n        lnks.map((lnk) => {\n        return (\n            <Hoverlink  icon={lnk.icon} txt={lnk.txt} handleLogout={handleLogout} />\n        );\n        });\n\n    const [inputs, setInputs] = useState({})\n    const handleChange = (event) => {\n        const name = event.target.name;\n        const value = event.target.value;\n        setInputs(values => ({...values, [name]: value}))\n    }\n\n    const handleSubmit = (event) => {\n        event.preventDefault();\n        console.log(inputs);\n        console.log(inputs.serviceid);\n        console.log(inputs.templateid);\n        console.log(inputs.key);\n\n        var tutorialsRef = realtime_db.ref(\"/EmailLinkage\");\n        tutorialsRef.push({\n        serviceid: inputs.serviceid,\n        templateid: inputs.templateid,\n        key: inputs.key\n        });\n    }\n\n\n    function determineTime() {\n        const d = new Date();\n        if (d.getHours() >= 6 && d.getHours() < 12) {\n        return \"Good Morning,\";\n        } else if (d.getHours() >= 12 && d.getHours() < 17) {\n        return \"Good Afternoon,\";\n        } else if (d.getHours() >= 17 && d.getHours() < 20) {\n        return \"Good Evening,\";\n        } else if (d.getHours() >= 20 && d.getHours() <= 23) {\n        return \"Good Night,\";\n        } else if (d.getHours() >= 0 && d.getHours() < 6) {\n        return \"Good Night,\";\n        }\n    }\n\n    function determinetext() {\n        if (user) {\n            return determineTime() + \" \" + user.msgids + \" \" + user.displayName + \" (login type: \" + user.providerData[0].providerId + \")\"\n        }\n    }\n\n    /*function Button({children}) {\n        return <button>{children}</button>;\n    }*/\n\n    return (\n        <div className=\"home\">\n        <div className=\"header flex sb\">\n            {/*<h2 className=\"marginBottom\">{determinetext()}</h2>*/}\n            <h2 style={{color: 'black'}}>Email Linkage</h2>\n        </div>\n        \n        <div className=\"flex fe sticky\">\n            <div className=\"gridobjects  bs marginBottom\">\n            <Hoverlink\n                icon=\"fal fa-sign-out\"\n                txt=\"Logout\"\n                classNames=\"blueback all flexrow sa\"\n                lnk=\"/\"\n                clk={() => props.handleLogout()}\n            />\n            </div>\n        </div>\n        <div class=\"container\">\n            <div class=\"row\">\n            <div class=\"col align-self-center\">\n            <form onSubmit={handleSubmit}>\n                <label>ServiceID\n                <input \n                type=\"text\" \n                name=\"serviceid\" \n                value={inputs.serviceid || \"\"} \n                placeholder=\" Enter ServiceID\"\n                onChange={handleChange}\n                />\n                </label>\n                <label>TemplateID\n                <input \n                    type=\"text\" \n                    name=\"templateid\" \n                    value={inputs.templateid || \"\"} \n                    placeholder=\" Enter TemplateID\"\n                    onChange={handleChange}\n                />\n                </label>\n                <label>Key (Provide Private Key if You Check the Secured Mode in EmailJS)\n                <input \n                    type=\"text\" \n                    name=\"key\" \n                    value={inputs.key || \"\"} \n                    placeholder=\" Enter Key\"\n                    onChange={handleChange}\n                />\n\n                </label>\n                <input type=\"submit\" class=\"btn btn-primary\" id='draft_submit' value='Submit' />\n\n            </form>\n\n\n            </div>\n                <a href=\"https://www.emailjs.com\">\n                    <button className=\"btn btn-primary\" id=\"linkage_btn\">EmailJS Linkage</button>\n                </a>\n            </div>\n        </div>\n        <div className=\"homeside\">\n\n        </div>\n        </div>\n    );\n}\n","import React, { useState, useEffect, useRef, useContext } from \"react\";\r\nimport firebase from \"firebase\";\r\nimport { db, realtime_db } from \"../Fire\";\r\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  useHistory,\r\n  Link,\r\n  NavLink,\r\n  Redirect,\r\n  useLocation\r\n} from \"react-router-dom\";\r\nimport ReactTimeAgo from 'react-time-ago'\r\nimport emailjs from 'emailjs-com'\r\nimport Usersettings from \"./Usersettings\";\r\nimport { ContextApp } from \"../ContextAPI\";\r\nimport Hoverlink from \"./Hoverlink\";\r\nimport linkage from \"./linkage\";\r\nfunction Body(props) {\r\n  const { themecolor } = useContext(ContextApp)\r\n  const user = firebase.auth().currentUser\r\n  const [cover, setCover] = useState(\"\")\r\n  //const [print_role, setRoleType] = useState(\"\")\r\n  const { handleLogout } = props\r\n  const links = [\"comment\", \"notifications\", \"settings\", \"logout\"]\r\n  const [notifi, setNotifLength]=useState(0)\r\n  const lnks = [\r\n    { icon: \"fal fa-comment-alt\", txt: \"Comment\" },\r\n    { icon: \"fal fa-bell\", txt: \"Notifications\" },\r\n    { icon: \"fal fa-cog\", txt: \"Settings\" },\r\n    { icon: \"fal fa-sign-out\", txt: \"Logout\" }\r\n  ];\r\n  const id =db.collection('users').doc().id\r\n  const lnksrow =\r\n    lnks &&\r\n    lnks.map((lnk) => {\r\n      return (\r\n        <Hoverlink  icon={lnk.icon} txt={lnk.txt} handleLogout={handleLogout} />\r\n      );\r\n    });\r\n\r\n  const form = useRef();\r\n  function MailSending(e){\r\n    e.preventDefault();\r\n\r\n    emailjs.sendForm(\r\n      \"service_k0epgii\",\r\n      \"template_a0nogel\",\r\n      form.current,\r\n      \"J14Ld2x5lECND_Nx1\"\r\n    )\r\n    .then(\r\n      (result) => {\r\n        console.log(result.text);\r\n        alert(\"SUCCESS!\");\r\n      },\r\n      (error) => {\r\n        console.log(error.text);\r\n        alert(\"FAILED...\", error);\r\n      }\r\n    );\r\n  }\r\n\r\n  const history = useHistory();\r\n  const nav2emaillinkage = () => {\r\n    history.push('/linkage');\r\n  };\r\n\r\n\r\n\r\n  function determineTime() {\r\n    const d = new Date();\r\n    if (d.getHours() >= 6 && d.getHours() < 12) {\r\n      return \"Good Morning,\";\r\n    } else if (d.getHours() >= 12 && d.getHours() < 17) {\r\n      return \"Good Afternoon,\";\r\n    } else if (d.getHours() >= 17 && d.getHours() < 20) {\r\n      return \"Good Evening,\";\r\n    } else if (d.getHours() >= 20 && d.getHours() <= 23) {\r\n      return \"Good Night,\";\r\n    } else if (d.getHours() >= 0 && d.getHours() < 6) {\r\n      return \"Good Night,\";\r\n    }\r\n  }\r\n\r\n /* \r\n  useEffect(()=>{\r\n      if (user){\r\n      db.collection('users').doc(user.uid).onSnapshot(snap=>{\r\n        const tmp = snap.data()\r\n        setRoleType(tmp.msgids)\r\n        console.log(\"home set role..\" + tmp.msgids)\r\n      })\r\n      }\r\n    })\r\n*/\r\n  function determinetext() {\r\n    if (user) {\r\n        return determineTime() + \" \" + user.msgids + \" \" + user.displayName + \" (login type: \" + user.providerData[0].providerId + \")\"\r\n    }\r\n  }\r\n\r\n  return (\r\n\r\n    <div className=\"home\">\r\n      <div className=\"header flex sb\">\r\n        <h2 className=\"marginBottom\">{determinetext()}</h2>\r\n      </div>\r\n      \r\n      <div className=\"flex fe sticky\">\r\n        <div className=\"gridobjects  bs marginBottom\">\r\n          <Hoverlink\r\n            icon=\"fal fa-sign-out\"\r\n            txt=\"Logout\"\r\n            classNames=\"blueback all flexrow sa\"\r\n            lnk=\"/\"\r\n            clk={() => props.handleLogout()}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div>\r\n        {/*\r\n        <button className=\"btn btn-success\" onClick={nav2emaillinkage}>\r\n          Email Linkage\r\n        </button>\r\n        */}\r\n      </div>\r\n      {/*\r\n      <div class=\"container\">\r\n        <div class=\"row\">\r\n          <div class=\"col align-self-center\">\r\n            <form action=\"\" ref={form} onSubmit={MailSending}> \r\n              <div class=\"form-group\">\r\n                <label for=\"subject\">Subject</label>\r\n                <input\r\n                  type=\"subject\"\r\n                  name=\"subject\"\r\n                  class=\"form-control-lg \"\r\n                  id=\"subject\"\r\n                  placeholder=\" enter email subject\"\r\n                />\r\n              </div>\r\n\r\n              <div class=\"form-group\">\r\n                <label for=\"recipient\">TO: </label>\r\n                <input\r\n                  type=\"recipient\"\r\n                  name=\"recipient\"\r\n                  class=\"form-control-lg\"\r\n                  id=\"recipient\"\r\n                  placeholder=\" enter the recipient's address\"\r\n                />\r\n              </div>\r\n\r\n              <div class=\"form-group\">\r\n                <label for=\"cc\">CC:</label>\r\n                <input\r\n                  type=\"cc\"\r\n                  name=\"cc\"\r\n                  class=\"form-control-lg\"\r\n                  id=\"cc\"\r\n                  placeholder=\" enter the Carbon Copy\"\r\n                />\r\n              </div>\r\n\r\n              <div class=\"form-group\">\r\n                <label for=\"bcc\">BCC:</label>\r\n                <input\r\n                  type=\"bcc\"\r\n                  name=\"bcc\"\r\n                  class=\"form-control-lg\"\r\n                  id=\"bcc\"\r\n                  placeholder=\" enter the Blind Carbon Copy\"\r\n                />\r\n              </div>\r\n\r\n              <div class=\"form-group\">\r\n                <label htmlFor=\"message\">Message</label>\r\n                <textarea\r\n                  class=\"form-control-lg\"\r\n                  name=\"message\"\r\n                  id=\"message\"\r\n                  rows=\"5\"\r\n                ></textarea>\r\n              </div>\r\n                \r\n              <button type=\"submit\" class=\"btn btn-primary\" id=\"submit_form\">Submit</button>\r\n\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      */}\r\n      <div className=\"homeside\">\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default Body;\r\n","import React, { useState, useEffect, useRef, useContext } from \"react\";\nimport firebase from \"firebase\";\nimport { db,realtime_db } from \"../Fire\";\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  NavLink,\n  Redirect,\n  useLocation\n} from \"react-router-dom\";\nimport ReactTimeAgo from 'react-time-ago'\nimport emailjs from 'emailjs-com'\nimport Usersettings from \"./Usersettings\";\nimport { ContextApp } from \"../ContextAPI\";\nimport Hoverlink from \"./Hoverlink\";\nfunction Adddraft(props) {\n  const { themecolor } = useContext(ContextApp)\n  const user = firebase.auth().currentUser\n  const [roleType, setRoleType] = useState('')\n  const [cover, setCover] = useState(\"\")\n  const { handleLogout } = props\n  const links = [\"comment\", \"notifications\", \"settings\", \"adddraft\", \"logout\"]\n  const [notifi, setNotifLength]=useState(0)\n  const lnks = [\n    { icon: \"fal fa-comment-alt\", txt: \"Comment\" },\n    { icon: \"fal fa-bell\", txt: \"Notifications\" },\n    { icon: \"fal fa-cog\", txt: \"Settings\" },\n    { icon: \"fal fa-cog\", txt: \"Adddraft\" },\n    { icon: \"fal fa-sign-out\", txt: \"Logout\" }\n  ];\n  const id =db.collection('users').doc().id\n  const lnksrow =\n    lnks &&\n    lnks.map((lnk) => {\n      return (\n        <Hoverlink  icon={lnk.icon} txt={lnk.txt} handleLogout={handleLogout} />\n      );\n    });\n\n  const [textarea, setTextarea] = useState();\n  const [inputs, setInputs] = useState({})\n  const handleChange = (event) => {\n    const name = event.target.name;\n    const value = event.target.value;\n    setInputs(values => ({...values, [name]: value}))\n  }\n\n  const handle_textarea_Change = (event) => {\n    setTextarea(event.target.value)\n  }\n\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    console.log(inputs);\n    console.log(textarea);\n    console.log(user.displayName);\n    console.log(inputs.subject);\n    console.log(inputs.recipient);\n    console.log(inputs.CC);\n    console.log(inputs.BCC);\n\n    var tutorialsRef = realtime_db.ref(\"/draft\");\n    tutorialsRef.push({\n      username: user.displayName,\n      subject: inputs.subject,\n      recipient: inputs.recipient,\n      cc: inputs.CC,\n      bcc: inputs.BCC,\n      message: textarea,\n    });\n\n\n  }\n  \n\n  function determineTime() {\n    const d = new Date();\n    if (d.getHours() >= 6 && d.getHours() < 12) {\n      return \"Good Morning,\";\n    } else if (d.getHours() >= 12 && d.getHours() < 17) {\n      return \"Good Afternoon,\";\n    } else if (d.getHours() >= 17 && d.getHours() < 20) {\n      return \"Good Evening,\";\n    } else if (d.getHours() >= 20 && d.getHours() <= 23) {\n      return \"Good Night,\";\n    } else if (d.getHours() >= 0 && d.getHours() < 6) {\n      return \"Good Night,\";\n    }\n  }\n\n  function determinetext() {\n    if (user) {\n      return determineTime() + \" \" + user.msgids + \" \" + user.displayName + \" (login type: \" + user.providerData[0].providerId + \")\"\n    }\n  }\n\n  return (\n    <div className=\"home\">\n      <div className=\"header flex sb\">\n        {/*<h2 className=\"marginBottom\">{determinetext()}</h2>*/}\n        <h2 style={{color: 'black'}}>Add Draft</h2>\n      </div>\n      \n      <div className=\"flex fe sticky\">\n        <div className=\"gridobjects  bs marginBottom\">\n          <Hoverlink\n            icon=\"fal fa-sign-out\"\n            txt=\"Logout\"\n            classNames=\"blueback all flexrow sa\"\n            lnk=\"/\"\n            clk={() => props.handleLogout()}\n          />\n        </div>\n      </div>\n      <div class=\"container\">\n        <div class=\"row\">\n          <div class=\"col align-self-center\">\n          <form onSubmit={handleSubmit}>\n            <label>Subject\n            <input \n              type=\"text\" \n              name=\"subject\" \n              value={inputs.subject || \"\"} \n              placeholder=\" enter email subject\"\n              onChange={handleChange}\n            />\n            </label>\n            <label>TO\n              <input \n                type=\"text\" \n                name=\"recipient\" \n                value={inputs.recipient || \"\"} \n                placeholder=\" enter the recipient's address\"\n                onChange={handleChange}\n            />\n            </label>\n            <label>CC\n              <input \n                type=\"text\" \n                name=\"CC\" \n                value={inputs.CC || \"\"} \n                placeholder=\" enter the Carbon Copy\"\n                onChange={handleChange}\n            />\n            </label>\n            <label>BCC\n              <input \n                type=\"text\" \n                name=\"BCC\" \n                value={inputs.BCC || \"\"} \n                placeholder=\" enter the Blind Carbon Copy\"\n                onChange={handleChange}\n            />\n            </label>\n\n            <label>Message<textarea value={textarea  || \"\"} rows=\"10\" onChange={handle_textarea_Change} />\n            </label>\n              <input type=\"submit\" class=\"btn btn-primary\" id='draft_submit' value='Submit' />\n\n\n          </form>\n\n\n          </div>\n        </div>\n      </div>\n      <div className=\"homeside\">\n\n      </div>\n    </div>\n  );\n}\nexport default Adddraft;\n","import React, { useState, useEffect, useRef, useContext } from \"react\";\nimport firebase from \"firebase\";\nimport { db, realtime_db } from \"../Fire\";\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  useHistory,\n  Link,\n  NavLink,\n  Redirect,\n  useLocation\n} from \"react-router-dom\";\nimport ReactTimeAgo from 'react-time-ago'\nimport emailjs from 'emailjs-com'\nimport Usersettings from \"./Usersettings\";\nimport { ContextApp } from \"../ContextAPI\";\nimport Hoverlink from \"./Hoverlink\";\n\nfunction MailSend(props) {\n  const { themecolor } = useContext(ContextApp)\n  const user = firebase.auth().currentUser\n  const [roleType, setRoleType] = useState('')\n  const [cover, setCover] = useState(\"\")\n  const { handleLogout } = props\n  const links = [\"comment\", \"notifications\", \"settings\", \"logout\"]\n  const [notifi, setNotifLength]=useState(0)\n  const lnks = [\n    { icon: \"fal fa-comment-alt\", txt: \"Comment\" },\n    { icon: \"fal fa-bell\", txt: \"Notifications\" },\n    { icon: \"fal fa-cog\", txt: \"Settings\" },\n    { icon: \"fal fa-sign-out\", txt: \"Logout\" }\n  ];\n  const id =db.collection('users').doc().id\n  const lnksrow =\n    lnks &&\n    lnks.map((lnk) => {\n      return (\n        <Hoverlink  icon={lnk.icon} txt={lnk.txt} handleLogout={handleLogout} />\n      );\n    });\n\n  const form = useRef();\n  function MailSending(e){\n    e.preventDefault();\n\n    emailjs.sendForm(\n      \"service_k0epgii\",\n      \"template_a0nogel\",\n      form.current,\n      \"J14Ld2x5lECND_Nx1\"\n    )\n    .then(\n      (result) => {\n        console.log(result.text);\n        alert(\"SUCCESS!\");\n      },\n      (error) => {\n        console.log(error.text);\n        alert(\"FAILED...\", error);\n      }\n    );\n  }\n\n  /*const history = useHistory();\n  const nav2emaillinkage = () => {\n    history.push('/linkage');\n  };*/\n\n\n  function determineTime() {\n    const d = new Date();\n    if (d.getHours() >= 6 && d.getHours() < 12) {\n      return \"Good Morning,\";\n    } else if (d.getHours() >= 12 && d.getHours() < 17) {\n      return \"Good Afternoon,\";\n    } else if (d.getHours() >= 17 && d.getHours() < 20) {\n      return \"Good Evening,\";\n    } else if (d.getHours() >= 20 && d.getHours() <= 23) {\n      return \"Good Night,\";\n    } else if (d.getHours() >= 0 && d.getHours() < 6) {\n      return \"Good Night,\";\n    }\n  }\n\n  function determinetext() {\n    if (user) {\n        return determineTime() + \" \" + user.msgids + \" \" + user.displayName + \" (login type: \" + user.providerData[0].providerId + \")\"\n    }\n  }\n\n  return (\n    <div className=\"home\">\n      <div className=\"header flex sb\">\n        {/*<h2 className=\"marginBottom\">{determinetext()}</h2>*/}\n        <h2 style={{color: 'black'}}>MailSend</h2>\n      </div>\n      \n      <div className=\"flex fe sticky\">\n        <div className=\"gridobjects  bs marginBottom\">\n          <Hoverlink\n            icon=\"fal fa-sign-out\"\n            txt=\"Logout\"\n            classNames=\"blueback all flexrow sa\"\n            lnk=\"/\"\n            clk={() => props.handleLogout()}\n          />\n        </div>\n      </div>\n      <div>\n        {/*\n        <button className=\"btn btn-success\" onClick={nav2emaillinkage}>\n          Email Linkage\n        </button>\n        */}\n      </div>\n\n      <div class=\"container\">\n        <div class=\"row\">\n          <div class=\"col align-self-center\">\n            <form action=\"\" ref={form} onSubmit={MailSending}> \n            \n              <div class=\"form-group\">\n                <label for=\"subject\">Subject\n                <input\n                  type=\"subject\"\n                  name=\"subject\"\n                  class=\"form-control-xlg \"\n                  id=\"subject\"\n                  placeholder=\" enter email subject\"\n                />\n                </label>\n              </div>\n\n              <div class=\"form-group\">\n                <label for=\"recipient\">TO\n                <input\n                  type=\"recipient\"\n                  name=\"recipient\"\n                  class=\"form-control-xlg\"\n                  id=\"recipient\"\n                  placeholder=\" enter the recipient's address\"\n                />\n                </label>\n              </div>\n\n              <div class=\"form-group\">\n                <label for=\"cc\">CC\n                <input\n                  type=\"cc\"\n                  name=\"cc\"\n                  class=\"form-control-xlg\"\n                  id=\"cc\"\n                  placeholder=\" enter the Carbon Copy\"\n                />\n                </label>\n              </div>\n\n              <div class=\"form-group\">\n                <label for=\"bcc\">BCC\n                <input\n                  type=\"bcc\"\n                  name=\"bcc\"\n                  class=\"form-control-xlg\"\n                  id=\"bcc\"\n                  placeholder=\" enter the Blind Carbon Copy\"\n                />\n                </label>\n              </div>\n\n              <div class=\"form-group\">\n                <label htmlFor=\"message\">Message\n                <textarea\n                  class=\"form-control-xlg\"\n                  name=\"message\"\n                  id=\"message\"\n                  rows=\"10\"\n                ></textarea>\n                </label>\n              </div>\n                \n              <button type=\"submit\" class=\"btn btn-primary\" id=\"submit_form\">Submit</button>\n\n            </form>\n          </div>\n        </div>\n      </div>\n      <div className=\"homeside\">\n\n      </div>\n    </div>\n  );\n}\nexport default MailSend;\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport firebase from \"firebase\";\r\nimport { db } from \"../Fire\";\r\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  NavLink,\r\n  Redirect,\r\n  useLocation\r\n} from \"react-router-dom\";\r\nimport Usersettings from \"./Usersettings\";\r\nimport { ContextApp } from \"../ContextAPI\";\r\nimport Calendars from \"./Calendars\";\r\nimport Hoverlink from \"./Hoverlink\";\r\nimport ElapsedTime from \"./Elapsedtime\";\r\nimport ReactTimeAgo from 'react-time-ago'\r\nfunction Notifications(props) {\r\n  const { themecolor } = useContext(ContextApp);\r\n  const {setChatuser} = props\r\n  const user = firebase.auth().currentUser;\r\n  const [cover, setCover] = useState(\"\");\r\n  const [notifi, setNotifLength]=useState(0)\r\n  const [notifications, setNotifications]=useState([])\r\n\r\n  const imageRegexB = /(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)/g;\r\n\r\n  function determineNotiMsg(msg){\r\n    if(msg.gif){\r\n      return 'Sent a GIF'\r\n    }else if(msg.file){\r\n      return 'Sent a file'\r\n    }else if(msg.video){\r\n      return 'Sent a video'\r\n    }else if(msg.base64||msg.notifimsg.match(imageRegexB) != null){\r\n      return 'Sent a photo'\r\n    }\r\n    else {\r\n      return msg.notifimsg\r\n    }\r\n  }\r\n  const id =db.collection('users').doc().id\r\n  function deleteNotifi(el){\r\n      notifications && notifications.map(noti=>{\r\n        if(el.notifiid===noti.notifiid){\r\n          let itemindex = notifications.indexOf(noti)\r\n          notifications.splice(itemindex, 1)\r\n          db.collection('notifications').doc(user.uid).update({\r\n            notifications: notifications\r\n          })\r\n        }\r\n      })\r\n  }\r\n  function deleteAllNotifi(){\r\n    db.collection('notifications').doc(user.uid).update({\r\n      notifications: []\r\n    })\r\n  }\r\n  const notificationsrow = notifications && notifications.slice(0).reverse().map(noti=>{\r\n    return <div ><Link to={'/chat/'+noti.id} onClick={()=>{setChatuser(noti.senderid); deleteNotifi(noti)}}>\r\n    <div className=\"notification flex\">\r\n      <div className=\"userprofile\">\r\n        <img src={cover} alt=\"\"/>\r\n      </div>\r\n     <strong> <p>From: {noti.sender}</p></strong>\r\n      <span>Message: {determineNotiMsg(noti)}</span>\r\n      <span>Sent: <ReactTimeAgo date={noti.notifidate.toDate()} locale='en-US'/></span>\r\n      \r\n   </div>\r\n    </Link>\r\n    <i className=\"fal fa-times\" onClick={()=>deleteNotifi(noti)}></i></div>\r\n  })\r\n  useEffect(()=>{\r\n    \r\n    db.collection('notifications').doc(user.uid).onSnapshot(snap=>{\r\n      const notifi = snap.data()\r\n      setNotifLength(notifi.notifications.length)\r\n      setNotifications(notifi.notifications)\r\n      setCover(notifi.notifications.cover)\r\n    }) \r\n  },[])\r\n  return (\r\n    <div className=\"notificationspage\">\r\n      <div className=\"tp\">\r\n      <div className=\"header flexrow \">\r\n      <i class=\"far fa-inbox\" style={{color: themecolor, cursor: 'auto'}}></i>\r\n        <h2>Your Notifications</h2>\r\n      </div>   \r\n       <hr style={{width: '100%'}}/>\r\n      </div>\r\n      <div className=\"notificationsrow flex\">\r\n        <div className='notifiBtnCont'>\r\n          <button className=' themeBtn notifiBtn' onClick={()=>deleteAllNotifi()}>Clear Notifications </button>\r\n          </div>\r\n        {notificationsrow}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default Notifications;\r\n","import React, {useState, useEffect, useContext} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport firebase from 'firebase'\r\nimport {db, realtime_db} from '../Fire'\r\nimport Usernav from './Usernav'\r\nimport Userrow from './Userrow'\r\nimport Userprofile from './Userprofile'\r\nimport Usersettings from './Usersettings'\r\nimport Home from './Home'\r\nimport Adddraft from './adddraft'\r\nimport Linkage from './linkage'\r\nimport MailSend from './MailSend'\r\nimport Notifications from './Notifications'\r\nimport {CSSTransition, TransitionGroup} from 'react-transition-group'\r\nimport {ContextApp} from '../ContextAPI'\r\nfunction Paths (props) {\r\n    let {chatsettings,convoinfo, onedialogue, setConvoinfo,adduser, setAdduser, userprofile, chatuser, setChatuser} =props\r\n    const {darkmode, themecolor}=useContext(ContextApp)\r\n    return (\r\n   <>\r\n   \r\n    <Route  path='/chat'>\r\n        <div className={darkmode?\"conversations darkmode\":'conversations'} style={{backgroundColor: themecolor}}>\r\n\r\n          <div className={\"chatcontainer\"}>\r\n          <div className={\"userrow spanall \"}>\r\n            <Userrow chatuser={chatuser} setChatuser={setChatuser} convoinfo={convoinfo} setConvoinfo={setConvoinfo} setAdduser={()=>setAdduser(!adduser)}/>\r\n        </div>\r\n        \r\n          <div className='dialogue spanall'>\r\n                  <Switch >\r\n                  {onedialogue}\r\n                  </Switch>  \r\n          </div>\r\n            \r\n        \r\n        <div className=\"userprofile spanall\">\r\n        <Switch>\r\n         {userprofile}\r\n         </Switch>\r\n        </div>\r\n        \r\n          </div>\r\n      </div>\r\n    </Route>\r\n      <Route  path='/home'>\r\n        <div className={darkmode? \"conversations darkmode\":'conversations'} style={{backgroundColor: themecolor}}>\r\n          <Home handleLogout={props.handleLogout}/>\r\n        </div>\r\n      </Route>\r\n    <Switch>\r\n          {chatsettings}\r\n    </Switch> \r\n      <Route path='/notifications'>\r\n        <Notifications setChatuser={setChatuser}/>\r\n      </Route>\r\n    <Route  path='/settings'>\r\n      <Usersettings  settings={'settings'} type={'settings'} link={{link0: 'settings',link1: 'preferences', link2:'themes', link3: 'support'}} linklabel={{link0: 'Account',link1: 'Preferences', link2: 'Customize', link3: 'Support'}}/>\r\n    </Route>\r\n      <Route  path='/adddraft'>\r\n        <div className={darkmode? \"conversations darkmode\":'conversations'} style={{backgroundColor: themecolor}}>\r\n          <Adddraft handleLogout={props.handleLogout}/>\r\n        </div>\r\n      </Route>\r\n\r\n      <Route  path='/linkage'>\r\n        <div className={darkmode? \"conversations darkmode\":'conversations'} style={{backgroundColor: themecolor}}>\r\n          <Linkage handleLogout={props.handleLogout}/>\r\n        </div>\r\n      </Route>\r\n\r\n      <Route  path='/MailSend'>\r\n        <div className={darkmode? \"conversations darkmode\":'conversations'} style={{backgroundColor: themecolor}}>\r\n          <MailSend handleLogout={props.handleLogout}/>\r\n        </div>\r\n      </Route>\r\n  </>\r\n  )\r\n}\r\nexport default Paths","import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect, useLocation } from \"react-router-dom\" \r\nimport firebase from 'firebase'\r\nimport {db} from '../Fire'\r\nimport Hoverableicondiv from './Hoverableiconsdiv'\r\nfunction Users (props) {\r\n  // const [name, setName]=useState('')\r\n  // const [img, setImg]=useState('')\r\n  // const [city, setCity]=useState('')\r\n  // const [country, setCountry]=useState('')\r\n  // const [job, setJob]=useState('')\r\n  // const [recipnumber, setRecipnumber]=useState('')\r\n  // const [recipemail, setRecipemail]=useState('')\r\n  // const [recipwebsite, setRecipwebsite]=useState('')\r\n  // const [extend, setExtend]=useState(false)\r\n    const {lnk,convoinfo, setConvoinfo, el, setChatuser, chatuser, setChatstarted, setChatview}=props\r\n    const [recipimg, setRecipimg]=useState('')\r\n    // const {recipname, setRecipname, sendername, setSendername}=props\r\n    const [recipname, setRecipname] = useState('')\r\n    const [sendername, setSendername]=useState('')\r\n    const [activestatus, setActivestatus]=useState(false)\r\n    const [senderimg, setSenderimg]=useState('')\r\n    const [senderonline, setSenderonline]=useState(false)\r\n    const [reciponline, setReciponline]=useState(false)\r\n    const [loading, setLoading]=useState(true)\r\n    const [msg, setMsg]=useState('')\r\n    const location = useLocation()\r\n    let user = firebase.auth().currentUser\r\n  function colorFunc(){\r\n    if(el.convoinfo.creatorid===user.uid){\r\n        if(reciponline){\r\n          return 'rgb(44, 255, 44)'\r\n        }else {\r\n          return '#FF3D3D'\r\n        }\r\n    }else {\r\n      if(senderonline){\r\n        return 'rgb(44, 255, 44)'\r\n      }else {\r\n        return '#FF3D3D'\r\n      }\r\n    }\r\n  }\r\n    useEffect(()=>{\r\n      db.collection('users').doc(el.convoinfo.recipientid).onSnapshot(snap=>{\r\n        const user = snap.data()\r\n        setRecipname(user.userinfo.name)\r\n        setRecipimg(user.userinfo.cover)\r\n        setActivestatus(user.userinfo.online)\r\n        setLoading(false)\r\n        setReciponline(user.online)\r\n      })\r\n      db.collection('users').doc(el.convoinfo.creatorid).onSnapshot(snap=>{\r\n        const user = snap.data()\r\n        setSendername(user.userinfo.name)\r\n        setSenderimg(user.userinfo.cover)\r\n        setLoading(false)\r\n        setSenderonline(user.online)\r\n      })\r\n      db.collection('conversations').doc(el.convoinfo.convoid).onSnapshot(snap=>{\r\n        const msgs = snap.data()  \r\n        setMsg(msgs.messages[msgs.messages.length-1])\r\n      })\r\n    \r\n    },[el.convoinfo.recipientid, el, chatuser])\r\n    return (\r\n   <>\r\n  <Link   onClick={()=>{setChatuser(el.convoinfo.creatorid===user.uid?el.convoinfo.recipientid:el.convoinfo.creatorid)}} >\r\n    {loading?<div class=\"lds-ring\"><div></div><div></div><div></div><div></div></div>:<div className='flexrow' onClick={()=>setChatstarted(true)}> <img src={el.convoinfo.creatorid===user.uid?recipimg:senderimg} alt=\"\"/>  <small>{el.convoinfo.creatorid===user.uid?recipname:sendername}</small>    <div className=\"notifi\" style={{backgroundColor: colorFunc()}}></div> </div>}\r\n\r\n      <Hoverableicondiv icon={'ellipsis-h-alt'} classNames={'white'} type={'link'} lnk={`/chatsettings/${el.convoinfo.convoid}`} setState={setChatview} setState2={setChatstarted}/>\r\n  </Link>\r\n  </>\r\n  )\r\n}\r\nexport default Users","import React, { useState, useEffect, useContext } from \"react\";\r\nimport Sidebar from \"./Sidebar\";\r\nimport firebase from \"firebase\";\r\nimport { db } from \"../Fire\";\r\nimport Usernav from \"./Usernav\";\r\nimport Userrow from \"./Userrow\";\r\nimport Dialogue from \"./Dialogue\";\r\nimport Userprofile from \"./Userprofile\";\r\nimport Adduser from \"./Adduser\";\r\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  NavLink,\r\n  Redirect,\r\n  useLocation\r\n} from \"react-router-dom\";\r\nimport { StartConvo } from \"./StartConvo\";\r\nimport styled from 'styled-components'\r\nimport Paths from \"./Paths\";\r\nimport Account from \"./settings/Account\";\r\nimport Personalization from \"./settings/Personalization\";\r\nimport Chatsettings from \"./Chatsettings\";\r\nimport Usersettings from \"./Usersettings\";\r\nimport { ContextApp } from \"../ContextAPI\";\r\nimport Hoverableicondiv from \"./Hoverableiconsdiv\";\r\nimport Chatviewrow from './Chatviewrow'\r\nconst Div = styled.div ` \r\n      ::selection {\r\n        background-color: ${props=>props.color};\r\n        color: white;\r\n      }\r\n`\r\nfunction Body(props) {\r\n  const location = useLocation();\r\n  const user = firebase.auth().currentUser;\r\n  const [convoinfo, setConvoinfo] = useState({\r\n    unreadmsgs: 0\r\n  });\r\n  const [convos, setConvos]=useState([])\r\n  const { darkmode, widemode, themecolor,chatcolor } = useContext(ContextApp);\r\n  const [chatuser, setChatuser] = useState(\"\");\r\n  const { handleLogout, setLoading } = props;\r\n  const [msgpersonids, setMsgpersonids] = useState([]);\r\n  const [adduser, setAdduser] = useState(false);\r\n  const [convolist, setConvolist] = useState([]);\r\n  const [userlist, setUserlist] = useState([]);\r\n  const [allusers, setAllusers] = useState([]);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [recipientid, setRecipientid] = useState(\"\");\r\n  const [recipientname, setRecipientname] = useState(\"\");\r\n  const [chatview, setChatview]=useState(false)\r\n  const [chatstarted, setChatstarted]=useState(false)\r\n  const [sidebar, setSidebar]=useState(false)\r\n\r\n  const onedialogue =convolist && convolist.map((diag) => {\r\n    return (\r\n        <Route  exact path={\"/chat/\" + diag.convoinfo.convoid}>\r\n          <Dialogue diag={diag} chatuser={chatuser}/>\r\n        </Route>\r\n      );\r\n    });\r\n    const [chatopen, setChatopen]=useState(false)\r\n    const dialoguerow = convolist && convolist.map(diag=>{\r\n        if(user) {\r\n          if(chatuser===(user.uid===diag.convoinfo.creatorid?diag.convoinfo.recipientid:diag.convoinfo.creatorid)){\r\n            return ( \r\n              <Dialogue  type={'small'} chatuser={chatuser} diag={diag} icon='fal fa-times' setState={setChatstarted} />     \r\n              )\r\n           }\r\n        }\r\n    })\r\n    const usersrow = convos && convos.sort((a, b) => b.lastmsgdate - a.lastmsgdate).map(el=>{\r\n      return <div className=\"profilepic\"><Chatviewrow el={el} setChatopen={setChatopen} chatopen={chatopen} chatuser={chatuser} setChatuser={setChatuser} convoinfo={convoinfo} lnk={location.pathname.split('/').slice(1, 2)[0]} setChatstarted={setChatstarted} setChatview={setChatview} /></div>\r\n    })\r\n  const chatsettings = \r\n    convolist &&\r\n    convolist.map((diag) => {\r\n      return (\r\n        <Route path={\"/chatsettings/\" + diag.convoinfo.convoid}>\r\n          <Usersettings\r\n            chatuser={chatuser}\r\n            diag={diag}\r\n            settings={\"chat\"}\r\n            type={\"chatsettings\"}\r\n            link={{\r\n              link0: \"chatsettings/\" + diag.convoinfo.convoid,\r\n              link1: diag.convoinfo.convoid + \"/actions\",\r\n              link2: diag.convoinfo.convoid + \"/privacy\",\r\n              link3: diag.convoinfo.convoid + \"/support\"\r\n            }}\r\n            linklabel={{\r\n              link0: \"Themes\",\r\n              link1: \"Actions\",\r\n              link2: \"Privacy\",\r\n              link3: \"About\"\r\n            }}\r\n            \r\n          />\r\n        </Route>\r\n      );\r\n    });\r\n  const userprofile =\r\n    convolist &&\r\n    convolist.map((diag) => {\r\n      return (\r\n        <Route exact path={\"/chat/\" + diag.convoinfo.convoid}>\r\n          <Userprofile diag={diag} chatuser={chatuser} />\r\n        </Route>\r\n      );\r\n    });\r\n    const imageRegexB = /(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)/g;\r\n    const photo = true\r\n  function sendMessage() {\r\n if (message.length) {\r\n      setAdduser(!adduser);\r\n      let convoid = db.collection(\"conversations\").doc().id;\r\n      StartConvo(recipientid, message, convoid, recipientname);\r\n    }\r\n  }\r\n  function chatFuncDisplay(){\r\n    setChatstarted(false)\r\n    setTimeout(()=>{\r\n      setChatview(false); \r\n    },400)\r\n  }\r\n  function updateProfile(){\r\n    db.collection('users').doc(user.uid).update({\r\n        customization: {\r\n          widemode: !widemode,\r\n          darkmode,\r\n          color: chatcolor,\r\n          themecolor\r\n        }\r\n    })\r\n}\r\n\r\n  useEffect(()=>{\r\n    db.collection('users').doc(user.uid).onSnapshot(user=>{\r\n      const userlist = user.data()\r\n      setUserlist(userlist)\r\n      db.collection('conversations').onSnapshot(snap=>{\r\n        let convos = []\r\n         snap.forEach(doc=>{\r\n           if(userlist.msgids.includes(doc.id)){\r\n             convos.push(doc.data())\r\n           }\r\n         })\r\n         setConvos(convos)\r\n      })\r\n    })\r\n   },[])\r\n  useEffect(() => {\r\n    if(user){\r\n      db.collection(\"users\")\r\n      .doc(user.uid)\r\n      .onSnapshot((user) => {\r\n        const userlist = user.data();\r\n        setMsgpersonids(userlist.msgpersonids);\r\n        setUserlist(userlist);\r\n        db.collection(\"conversations\").onSnapshot((snap) => {\r\n          let convos = [];\r\n          snap.forEach((doc) => {\r\n            if (userlist.msgids.includes(doc.id)) convos.push(doc.data());\r\n          });\r\n          setConvolist(convos);\r\n        });\r\n      });\r\n    db.collection(\"users\")\r\n   \r\n      .onSnapshot((snap) => {\r\n        const users = [];\r\n        snap.forEach((el) => {\r\n          users.push(el.data());\r\n        });\r\n        setAllusers(users);\r\n      });\r\n      /*\r\n      db.collection('users').doc(user.uid).onSnapshot(snap=>{\r\n        const user = snap.data()\r\n        document.documentElement.style.setProperty(\r\n          '--theme-color', user.customization.themecolor\r\n        )\r\n        document.documentElement.style.setProperty(\r\n          '--chat-color', user.customization.color\r\n        )\r\n      })\r\n      */\r\n    }\r\n    setLoading(false);\r\n  }, []);\r\n  function deleteAccount(){\r\n    var user = firebase.auth().currentUser;\r\n    user.delete().then(()=>{\r\n      db.collection('users').doc(user.uid).delete()\r\n    }).catch(err=>{\r\n\r\n    })\r\n  }\r\n  return (\r\n    <Div\r\n    color={themecolor}  \r\n    className={widemode ? \"body widebody\" : \"body\"}\r\n      style={{ backgroundColor: themecolor }}\r\n    >\r\n      <div className='sidebar'\r\n      >\r\n        <Sidebar updateProfile={updateProfile} chatFuncDisplay={chatFuncDisplay} setChatview={setChatview} setChatstarted={setChatstarted} handleLogout={handleLogout} />\r\n      </div>\r\n      <Switch>\r\n        <Paths\r\n          handleLogout={handleLogout}\r\n          chatsettings={chatsettings}\r\n          chatuser={chatuser}\r\n          setChatuser={setChatuser}\r\n          userprofile={userprofile}\r\n          onedialogue={onedialogue}\r\n          convoinfo={convoinfo}\r\n          setConvoinfo={setConvoinfo}\r\n          adduser={adduser}\r\n          setAdduser={() => setAdduser(!adduser)}\r\n        />\r\n      </Switch>\r\n     \r\n        {location.pathname.slice(0, 5)==='/chat'?<div className='chattab'></div>:<><Hoverableicondiv  classNames={\"chatdiv flex bs\"} icon={\"comment\"} state={chatview} setState={setChatview}/></>}\r\n\r\n        <CSSTransition in={chatview} timeout={300} unmountOnExit classNames='chatusers'>\r\n      <div className=\"chatusers bs\">\r\n        <h2>Chat</h2>\r\n        <div className=\"users flexrow\">\r\n          <i className=\"fal fa-times\" onClick={()=>setChatview(false)} style={{color: 'var(--theme-color)', position: 'absolute', top: '15px',right: '20px'}}></i>\r\n                {usersrow}\r\n              </div>\r\n        </div>\r\n      </CSSTransition>\r\n      <CSSTransition \r\n      in={chatstarted}\r\n      classNames='chatview'\r\n      unmountOnExit \r\n      timeout={300}\r\n      >\r\n        <div className='chatview bs' style={{right: chatview?'330px':'50px'}}>\r\n            <div className=\"\">\r\n              <div className=\"dialogue\">\r\n                {dialoguerow}\r\n              </div>\r\n            </div>\r\n        </div>\r\n      </CSSTransition>\r\n      <CSSTransition\r\n        in={adduser}\r\n        classNames={\"adduser\"}\r\n        unmountOnExit\r\n        timeout={300}\r\n      >\r\n        <Adduser\r\n          setRecipientname={setRecipientname}\r\n          message={message}\r\n          msgpersonids={msgpersonids}\r\n          sendMessage={sendMessage}\r\n          setMessage={setMessage}\r\n          setRecipientid={setRecipientid}\r\n          allusers={allusers}\r\n          setAdduser={setAdduser}\r\n          recipientid={recipientid}\r\n          adduser={adduser}\r\n        />\r\n      </CSSTransition>\r\n      \r\n    </Div>\r\n  );\r\n}\r\nexport default Body;\r\n","import { db } from \"../Fire\";\r\nimport firebase from \"firebase\";\r\n\r\nexport function StartConvo(recipientid, message, convoid, recipientname) {\r\n  const user = firebase.auth().currentUser;\r\n  const date = firebase.firestore.FieldValue.serverTimestamp()\r\n  let convoinfo = {\r\n    convoid,\r\n    creatorid: user.uid,\r\n    creatorname: user.displayName,\r\n    recipientid,\r\n    recipientname,\r\n    typerid: user.uid,\r\n    userref: db.collection(\"users\").doc(recipientid)\r\n    // usertyping: false,\r\n  };\r\n  let customizedconvo = {\r\n    theme: \"https://i.imgur.com/4hzNTTq.png\",\r\n    emoji: \"\"\r\n  };\r\n  let nicknames = {\r\n    nickname1: \"\",\r\n    nickname2: \"\"\r\n  };\r\n  let messages = {\r\n    message,\r\n    reaction1: \"\",\r\n    reaction2: \"\",\r\n    msgdate: firebase.firestore.Timestamp.now(),\r\n    msgid: db.collection(\"conversations\").doc().id,\r\n    read: false,\r\n    senderid: user.uid,\r\n    sendername: user.displayName,\r\n    editing: false\r\n  };\r\n  let notificationobj = {\r\n    notifimsg: message,\r\n    notifidate: firebase.firestore.Timestamp.now(),\r\n    read: false,\r\n    sender: user.displayName,\r\n    id: convoid,\r\n    senderid: user.uid,\r\n    notifiid: db.collection('users').doc().id\r\n  }      \r\n    db.collection('notifications').doc(recipientid).update({\r\n      notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n    })\r\n  db.collection(\"users\")\r\n    .doc(user.uid)\r\n    .update({\r\n      msgids: firebase.firestore.FieldValue.arrayUnion(convoid),\r\n      msgpersonids: firebase.firestore.FieldValue.arrayUnion(recipientid)\r\n    });\r\n  db.collection(\"users\")\r\n    .doc(recipientid)\r\n    .update({\r\n      msgids: firebase.firestore.FieldValue.arrayUnion(convoid),\r\n      msgpersonids: firebase.firestore.FieldValue.arrayUnion(user.uid)\r\n    });\r\n  db.collection(\"conversations\")\r\n    .doc(convoid)\r\n    .set({\r\n      lastmsgdate : date,\r\n      convoinfo,\r\n      messages: firebase.firestore.FieldValue.arrayUnion(messages),\r\n      customizedconvo,\r\n      nickname1: '',\r\n      notifications1: true,\r\n      nickname2: '',\r\n      notifications2: true,\r\n    });\r\n}\r\n","import React, {useState, useEffect} from \"react\";\nimport \"./styles.css\";\nimport {db, Fire} from './Fire';\nimport firebase from \"firebase\";\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \nimport Sidebar from './components/Sidebar'\nimport Login from './components/Login'\nimport Body from './components/Body'\nimport adddraft from './components/adddraft'\nimport ContextAppProvider from './ContextAPI'\nimport { useBeforeunload } from 'react-beforeunload'\nimport emailjs from 'emailjs-com'\n\nfunction App() {\n  const [update, setUpdate]=useState(0)\n  const [user, setUser]=useState('')\n  const [name, setName]=useState('')\n  const [email, setEmail]=useState('')\n  const [password, setPassword]=useState('')\n  const [emailError, setEmailError]=useState('')\n  const [passwordError, setPasswordError]=useState('')\n  const [hasAccount, setHasAccount]=useState(true)\n  const [loginType, setRoleType]=useState('')\n  const [lname, setlName]=useState('')\n  const [userinfo, setUserinfo]=useState([])\n  const [users, setUsers]=useState([])\n  const [cover, setCover]=useState('https://www.gettyimages.ca/gi-resources/images/500px/983794168.jpg')\n  const [forgotpassword, setForgotpassword]=useState(false)\n  //const [msgids, setMsgIds] = useState([''])\n  const [loading, setLoading]=useState(false)\n  const clearInputs = () => {\n    setEmail('')\n    setPassword('')\n  }\n  const clearErrors = () => {\n    setEmailError('')\n    setPasswordError('')\n  }\n  const handleLogin = () => {\n    clearErrors()\n\n    \n    firebase.auth().signInWithEmailAndPassword(email, password)\n    .then(()=>{\n      //db.collection('users').doc(user.uid).update({msgids: loginType})\n      firebase.auth().currentUser.msgids = loginType\n      console.log(\"login success..\" + firebase.auth().currentUser.msgids)\n      setLoading(true)\n    })\n    .catch(err => {\n      switch(err.code) {\n        case \"auth/invalid-email\":\n          setEmailError(err.message)\n          break\n        case \"auth/user/disabled\":\n        case \"auth/user-not-found\":\n          setEmailError('Email does not exist')\n        break\n        case \"auth/wrong-password\":\n          setPasswordError('Incorrect Password')\n        break\n        default:\n      }  \n    })\n  } \n\n  const handleSignup = () => {\n    console.log('signup')\n    clearErrors()\n    firebase.auth().createUserWithEmailAndPassword(email, password)\n    .then(()=>{\n      firebase.auth().currentUser.updateProfile({\n        displayName: name,\n      }) \n      //authListener()\n    })\n    .catch(err => {\n        \n        switch(err.code) {\n        case \"auth/email-already-in-use\":\n          setEmailError(err.message)\n          break\n        case \"auth/invalid-email\":\n          setEmailError(err.message)\n        break\n        case \"auth/weak-password\":\n          setPasswordError(err.message)\n        break\n        default: \n        setEmailError('Invalid')\n      }\n    })\n    firebase.auth().onAuthStateChanged(user => {\n      if(user) {\n          user.updateProfile({\n            displayName: name,\n          }) \n          db.collection('users').doc(user.uid).set({\n              created: new Date(), \n              msgids: loginType,\n              uid: firebase.auth().currentUser.uid,\n              online: true,\n              userinfo: {\n                name,\n                cover,\n                age: '', \n                phone: '', \n                city: '',\n                country: '',\n                website: 'https://',\n                job: '',\n                email,\n              },\n              customization: {\n                color: '#10325c',\n                themecolor: '#0f6ce6',\n                darkmode: false,\n                widemode: false,\n              }\n          })\n          db.collection('notifications').doc(user.uid).set({\n            notifications: 'email'\n          })\n          firebase.auth().currentUser.msgids = loginType\n          console.log(\"email signup success..\" + firebase.auth().currentUser.msgids)\n      }//if (user)\n      else {\n        setUser('')\n      } \n    }) \n  }\n\n  const handleLogout = () => {\n    if(user) {\n      db.collection('users').doc(user.uid).update({online: false})\n    }\n    console.log(\"handle logout..\" + loginType)\n    window.location.host\n    firebase.auth().signOut()\n  }\n  const authListener = () => {\n    firebase.auth().onAuthStateChanged(user => {   \n      if(user) {\n        clearInputs()\n        setUser(user)\n        db.collection('users').doc(user.uid).update({online: true})\n      }\n      else {\n          setUser('')\n          //db.collection('users').doc(user.uid).update({online: false})\n      }\n    })\n  } \n  \n  function loginwithGoogle(){\n    var provider = new firebase.auth.GoogleAuthProvider();\n    provider.addScope('email');\n\n    firebase.auth()\n    .signInWithPopup(provider)\n    .then((result) => {\n      if(result.additionalUserInfo.isNewUser){\n            /** @type {firebase.auth.OAuthCredential} */\n      var credential = result.credential;\n      // This gives you a Google Access Token. You can use it to access the Google API.\n      var token = credential.accessToken;\n      // The signed-in user info.\n      var user = result.user;\n      // ...\n      db.collection('users').doc(user.uid).set({\n        created: new Date(), \n        msgids: loginType,\n        uid: user.uid,\n        online: true, \n        userinfo: {\n          name: user.displayName,\n          cover: user.photoURL,\n          age: '', \n          phone: user.phoneNumber, \n          city:'',\n          country: '',\n          website: 'https://',\n          job: '',\n          email: user.email\n          \n        },\n        customization: {\n          color: '#10325c',\n          themecolor: '#0f6ce6',\n          darkmode: false,\n          widemode: false,\n        }\n    })\n    db.collection('notifications').doc(user.uid).set({\n      notifications: 'Google'\n    })\n      }\n      firebase.auth().currentUser.msgids = loginType\n      console.log(\"google login success..\" + firebase.auth().currentUser.msgids)\n    }).catch((error) => {\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      // The email of the user's account used.\n      var email = error.email;\n      // The firebase.auth.AuthCredential type that was used.\n      var credential = error.credential;\n      // ...\n      setEmailError(error.message)\n      setTimeout(()=>{\n        setEmailError('')\n      },3000)\n    });\n  }\n  function loginwithFacebook(){\n    var provider = new firebase.auth.FacebookAuthProvider();\n    provider.addScope(\"email\");\n\n    firebase.auth()\n    .signInWithPopup(provider)\n    .then((result) => {\n      if(result.additionalUserInfo.isNewUser){\n        /** @type {firebase.auth.OAuthCredential} */\n        var credential = result.credential;\n        // This gives you a Google Access Token. You can use it to access the Google API.\n        var token = credential.accessToken;\n        // The signed-in user info.\n        var usergoogle = result.user;\n        // ...\n        db.collection('users').doc(usergoogle.uid).set({\n          created: new Date(), \n          msgids: loginType,\n          uid: usergoogle.uid,\n          online: true, \n          userinfo: {\n            name: usergoogle.displayName,\n            cover: usergoogle.photoURL,\n            age: '', \n            phone: usergoogle.phoneNumber, \n            city:'',\n            country: '',\n            website: 'https://',\n            job: '',\n            email: usergoogle.email\n          },\n          customization: {\n            color: '#10325c',\n            themecolor: '#0f6ce6',\n            darkmode: false,\n            widemode: false,\n          }\n      })\n      db.collection('notifications').doc(usergoogle.uid).set({\n        notifications: 'Facebook'\n      })\n    }\n    firebase.auth().currentUser.msgids = loginType\n    console.log(\"facebook login success..\" + firebase.auth().currentUser.msgids)\n    })\n    .catch((error) => {\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      // The email of the user's account used.\n      var email = error.email;\n      // The firebase.auth.AuthCredential type that was used.\n      var credential = error.credential;\n  \n      // ...\n      setEmailError(email)\n      setTimeout(()=>{\n        setEmailError('')\n      },3000)\n      console.log(errorCode)\n    });\n  }\n  useBeforeunload(() => {\n    if(user) {\n      db.collection('users').doc(user.uid).update({online: false})\n    }\n  }) \n\n  useEffect(() => { \n    let cnt = false\n    authListener()\n\n    window.addEventListener('onbeforeunload', removeActiveStatus) \n    function removeActiveStatus() {\n      if(user) {\n        db.collection('users').doc(user.uid).update({online: false})\n        firebase.auth().currentUser.msgids = loginType\n        console.log(\"login success 1..\" + firebase.auth().currentUser.msgids)\n      }\n    }\n    if(user) {\n      db.collection('users').doc(user.uid).update({online: true})\n      firebase.auth().currentUser.msgids = loginType\n      console.log(\"login success 2..\" + firebase.auth().currentUser.msgids)\n    }\n\n    return() => cnt = true\n  },[])  \n\n   return ( \n\n    <Router >\n    <div className=\"App\">\n       {user?\n        <ContextAppProvider>\n        <>\n          <Body setLoading={setLoading} handleLogout={handleLogout} />\n          <Redirect to='/Home'/>\n        </>\n        </ContextAppProvider>\n        :\n        <> \n        <Login loginwithFacebook={()=>loginwithFacebook}loginwithGoogle={()=>loginwithGoogle}  setRoleType={setRoleType} loading={loading} name={name} setName={setName} lname={lname} setlName={setlName}email={email} handleSignup={handleSignup} setEmail={setEmail} password= {password} setPassword={setPassword} handleLogin={handleLogin} hasAccount={hasAccount} setHasAccount={setHasAccount} emailError={emailError} passwordError={passwordError}/>       \n        <Redirect to='/'/>\n     </>\n        }\n    </div>  \n     </Router>\n\n  );\n}\n\nexport default App ","import React, { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport TimeAgo from 'javascript-time-ago'\n\nimport en from 'javascript-time-ago/locale/en'\nimport ru from 'javascript-time-ago/locale/ru'\n\nimport App from \"./App\";\nTimeAgo.addDefaultLocale(en)\nTimeAgo.addLocale(en)\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}