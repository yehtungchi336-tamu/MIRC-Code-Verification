{"ast":null,"code":"import _slicedToArray from\"/Users/jinsonwu/Desktop/MIRC-Code-Verification/react-login/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef,useContext}from\"react\";import{NavLink,Route,Link}from\"react-router-dom\";import Users from\"./Users\";import firebase from\"firebase\";import{db}from\"../Fire\";import Contextmenu from\"./Contextmenu\";import{FilePond,File,registerPlugin}from\"react-filepond\";import\"filepond/dist/filepond.min.css\";import{CSSTransition,TransitionGroup}from\"react-transition-group\";import ElapsedTime from\"./Elapsedtime\";import{ContextApp}from\"../ContextAPI\";import Hoverableicondiv from\"./Hoverableiconsdiv\";import InnerImageZoom from\"react-inner-image-zoom\";import Iframe from\"./msgcomponents/Iframe\";import Img from'./msgcomponents/Img';import Filemsg from'./msgcomponents/File';import P from'./msgcomponents/P';import Recording from\"./msgcomponents/Recording\";import Gif from\"./Gifs.js/Gif\";import ReactTimeAgo from'react-time-ago';import ReactImageMagnify from'react-image-magnify';import Contextoptions from\"./msgcomponents/Contextoptions\";import Threedots from\"./msgcomponents/Threedots\";import ScrollContainer from'react-indiana-drag-scroll';import{ReactTinyLink}from'react-tiny-link';import Picker from'emoji-picker-react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Dialogue(props){var _useContext=useContext(ContextApp),themecolor=_useContext.themecolor,notifi=_useContext.notifi,setNotifi=_useContext.setNotifi,notificont=_useContext.notificont,setNotificont=_useContext.setNotificont;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),gif=_useState2[0],setGif=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),msgs=_useState4[0],setMsgs=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),msgstring=_useState6[0],setMsgstring=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),updateelapsed=_useState8[0],setUpdateelapsed=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),typing=_useState10[0],setTyping=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),realtyping=_useState12[0],setRealtyping=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),typerid=_useState14[0],setTyperid=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),activestatus=_useState16[0],setActivestatus=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),recipname=_useState18[0],setRecipname=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),recipimg=_useState20[0],setRecipimg=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),recipcity=_useState22[0],setRecipcity=_useState22[1];var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),recipcountry=_useState24[0],setRecipcountry=_useState24[1];var _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),userimg=_useState26[0],setUserimg=_useState26[1];var _useState27=useState(\"\"),_useState28=_slicedToArray(_useState27,2),username=_useState28[0],setUsername=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),visible=_useState30[0],setVisible=_useState30[1];var _useState31=useState(false),_useState32=_slicedToArray(_useState31,2),contextmenu=_useState32[0],setContextmenu=_useState32[1];var _useState33=useState({top:0,left:0}),_useState34=_slicedToArray(_useState33,2),contextstyle=_useState34[0],setContextstyle=_useState34[1];var _useState35=useState(true),_useState36=_slicedToArray(_useState35,2),notifibool=_useState36[0],setNotifibool=_useState36[1];var _useState37=useState(\"\"),_useState38=_slicedToArray(_useState37,2),emojitype=_useState38[0],setEmojitype=_useState38[1];var _useState39=useState(true),_useState40=_slicedToArray(_useState39,2),loader=_useState40[0],setLoader=_useState40[1];var _useState41=useState(true),_useState42=_slicedToArray(_useState41,2),loading=_useState42[0],setLoading=_useState42[1];var _useState43=useState(\"\"),_useState44=_slicedToArray(_useState43,2),chatcolor=_useState44[0],setChatcolor=_useState44[1];var _useState45=useState(\"\"),_useState46=_slicedToArray(_useState45,2),userChatcolor=_useState46[0],setUserchatcolor=_useState46[1];var _useState47=useState(false),_useState48=_slicedToArray(_useState47,2),showinput=_useState48[0],setShowinput=_useState48[1];var _useState49=useState(\"\"),_useState50=_slicedToArray(_useState49,2),updatedMsg=_useState50[0],setUpdatedMsg=_useState50[1];var _useState51=useState(false),_useState52=_slicedToArray(_useState51,2),emojilist=_useState52[0],setEmojilist=_useState52[1];var _useState53=useState(\"\"),_useState54=_slicedToArray(_useState53,2),theme=_useState54[0],setTheme=_useState54[1];var _useState55=useState(\"\"),_useState56=_slicedToArray(_useState55,2),msgid=_useState56[0],setMsgid=_useState56[1];var _useState57=useState(\"\"),_useState58=_slicedToArray(_useState57,2),chatname=_useState58[0],setChatname=_useState58[1];var _useState59=useState(\"\"),_useState60=_slicedToArray(_useState59,2),chatimg=_useState60[0],setChatimg=_useState60[1];var _useState61=useState(\"\"),_useState62=_slicedToArray(_useState61,2),chatcity=_useState62[0],setChatcity=_useState62[1];var _useState63=useState(\"\"),_useState64=_slicedToArray(_useState63,2),chatcountry=_useState64[0],setChatcountry=_useState64[1];var _useState65=useState(\"\"),_useState66=_slicedToArray(_useState65,2),chatactive=_useState66[0],setChatactive=_useState66[1];var _useState67=useState([]),_useState68=_slicedToArray(_useState67,2),nickname=_useState68[0],setNickname=_useState68[1];var _useState69=useState(false),_useState70=_slicedToArray(_useState69,2),emojipicker=_useState70[0],setEmojipicker=_useState70[1];var emojis=[];var chatuser=props.chatuser,setState=props.setState,icon=props.icon,type=props.type;var messages=props.diag.messages;var _props$diag$convoinfo=props.diag.convoinfo,convoid=_props$diag$convoinfo.convoid,creatorid=_props$diag$convoinfo.creatorid,recipientid=_props$diag$convoinfo.recipientid;var user=firebase.auth().currentUser;var date=firebase.firestore.FieldValue.serverTimestamp();var typerRef=useRef();var id=db.collection('users').doc().id;var reg=/((?:(?!(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)).)+)|((?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)(?:\\?\\S+=\\S*(?:&\\S+=\\S*)*)?)/gm;var imageRegexB=/(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)/g;var urlreg=/https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/g;var ureg=/https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/g;function ytVidId(url){var p=/(?:https?:\\/\\/)?(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?/;return url.match(p)?RegExp.$1:false;}function determineMsgtype(msg){if(msg.base64){return/*#__PURE__*/_jsx(Img,{src:msg.message,link:true});}else if(msg.file){return/*#__PURE__*/_jsx(Filemsg,{name:msg.name,link:msg.message});}else if(msg.audio){return/*#__PURE__*/_jsx(Recording,{src:msg.message});}else if(msg.video){return/*#__PURE__*/_jsx(Iframe,{type:\"video\",link:msg.message});}else if(ytVidId(msg.message)){return/*#__PURE__*/_jsx(Iframe,{link:\"https://www.youtube.com/embed/\"+ytVidId(msg.message)});}// else if(urlreg.test(msg.message)){\n//   const stringWithOnlyURLS = msg.message.match(urlreg).join(' ');\n//   const string = msg.message.replace(stringWithOnlyURLS, ' ')\n//   return <>\n//   <p className='bg'>{string}</p>\n//     <div>\n//     <ReactTinyLink\n//   cardSize=\"small\" \n//   showGraphic={true}\n//   maxLine={2}\n//   minLine={1}\n//   url={stringWithOnlyURLS}\n//   />\n//     </div>\n//   </>\n// }  \nelse{var sm=msg.message.replace(reg,function(_,text,img){return text?\"<p>\".concat(text.trim(),\"</p>\"):\"<img src=\\\"\".concat(img,\"\\\"/>\");});return/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:sm}});}}function determineClass(msg){var urreg=/https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/g;if(user.uid===msg.senderid){if(msg.file){return\"msg file\";}else if(msg.video){return'msg video';}else if(msg.audio){return\"msg audio\";}else if(msg.emoji){return\"msg emojimsg\";}else if(msg.nobackground){return\"no-bg msg\";}else if(ytVidId(msg.message)){return\"msg youtube\";}//   else if(urreg.test(msg.message)){\n//   return 'msg emojimsg imp'\n// }\nelse{return\"msg\";}}else{if(msg.file){return\"msg file trans\";}else if(msg.video){return'msg video trans';}else if(msg.audio){return\"msg audio trans\";}else if(msg.emoji){return\"msg emojimsg trans\";}else if(msg.nobackground){return\"no-bg msg trans\";}else if(ytVidId(msg.message)){return\"msg youtube trans\";}//   else if(urreg.test(msg.message)){\n//   return 'msg emojimsg imp'\n// }\nelse{return\"msg trans\";}}}var _useState71=useState(false),_useState72=_slicedToArray(_useState71,2),opti=_useState72[0],setOpti=_useState72[1];function msgOptions(msg){var allel=document.querySelectorAll('.optionsEdit');allel.forEach(function(el){el.style.display='none';});var el=document.querySelector(\"div[data-id=\\\"\".concat(msg.msgid,\"\\\"]\"));el.style.display='flex';}var _useState73=useState(false),_useState74=_slicedToArray(_useState73,2),modal=_useState74[0],setModal=_useState74[1];var imgsrc=useRef();var _useState75=useState(''),_useState76=_slicedToArray(_useState75,2),imgSrcModal=_useState76[0],setImgSrcModal=_useState76[1];function clickHandler(e){var audio=e.target.querySelector(\".controls\");var video=e.target.closest(\"VIDEO\");var play=e.target.querySelector(\".fa-play\");var el=e.target.closest(\"IMG\");if(el&&e.currentTarget.contains(el)){setModal(true);var _imgsrc=document.querySelector(\".modal img\");setImgSrcModal(el.getAttribute('src'));_imgsrc.setAttribute(\"src\",el.getAttribute(\"src\"));}if(video&&e.currentTarget.contains(video)){}}var allmsgs=messages&&messages.slice(0).reverse().map(function(msg){return/*#__PURE__*/_jsxs(\"div\",{id:msg.msgid,className:msg.senderid===user.uid?\"right m\":\"left m\",onContextMenu:function onContextMenu(e){return contextMenu(e);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsxs(\"p\",{className:determineClass(msg),contentEditable:false,style:msg.nobackground?{backgroundColor:\"transparent\"}:msg.emoji?{backgroundColor:\"transparent\"}:ytVidId(msg.message)?{backgroundColor:\"transparent\"}:msg.senderid===user.uid?{backgroundColor:chatcolor}:null,onClick:function onClick(e){return clickHandler(e);},children:[\"    \",determineMsgtype(msg)]}),/*#__PURE__*/_jsx(Threedots,{msgs:msgs,user:user,msg:msg,convoid:convoid}),/*#__PURE__*/_jsx(\"small\",{className:msg.senderid===user.uid?\"alignRight elapsedtime\":\"alignLeft elapsedtime\",children:/*#__PURE__*/_jsx(ReactTimeAgo,{date:msg.msgdate.toDate()})}),/*#__PURE__*/_jsxs(\"div\",{className:\"reaction\",style:{display:msg.reaction1||msg.reaction2?\"flex\":\"none\",width:msg.reaction1===''||msg.reaction2===''?'22px':'42px'},children:[/*#__PURE__*/_jsx(\"i\",{className:msg.reaction1===\"fad fa-heart\"?\"emoj fas fa-\"+msg.reaction1:\"emoj fad fa-\"+msg.reaction1}),/*#__PURE__*/_jsx(\"i\",{style:{marginLeft:msg.reaction2===''?'':'5px'},className:msg.reaction2===\"fad fa-heart\"?\"emoj fas fa-\"+msg.reaction2:\"emoj fad fa-\"+msg.reaction2})]})]}),/*#__PURE__*/_jsx(\"img\",{src:msg.senderid===user.uid?userimg:chatimg,alt:\"\"})]});});var progressbar=useRef();var progresswidth=useRef();var _useState77=useState(),_useState78=_slicedToArray(_useState77,2),img=_useState78[0],setImg=_useState78[1];var inputref=useRef();function sendFile(type){var file=document.querySelector(\".\".concat(type,\"file\")).files[0];if(file){var idxDot=file.name.lastIndexOf(\".\")+1;var extFile=file.name.substr(idxDot,file.name.length).toLowerCase();var storageRef=firebase.storage().ref(\"\".concat(convoid,\"/\").concat(file.name));var task=storageRef.put(file);task.on(\"state_changes\",function progress(snap){progressbar.current.style.display=\"flex\";var percentage=snap.bytesTransferred/snap.totalBytes*100;progresswidth.current.style.height=\"\".concat(percentage,\"%\");},function error(err){},function complete(){if(type===\"image\"){if(extFile===\"jpg\"||extFile===\"jpeg\"||extFile===\"png\"){var msgobject={message:\"https://firebasestorage.googleapis.com/v0/b/\".concat(storageRef.bucket,\"/o/\").concat(convoid,\"%2F\").concat(file.name,\"?alt=media\"),reaction1:\"\",reaction2:\"\",msgdate:firebase.firestore.Timestamp.now(),msgid:db.collection(\"conversations\").doc().id,read:false,senderid:user.uid,editing:false,nobackground:true,emoji:true,base64:true};var notificationobj={notifimsg:\"https://firebasestorage.googleapis.com/v0/b/\".concat(storageRef.bucket,\"/o/\").concat(convoid,\"%2F\").concat(file.name,\"?alt=media\"),notifidate:firebase.firestore.Timestamp.now(),read:false,sender:user.displayName,base64:true,id:convoid,senderid:user.uid,notifiid:db.collection('users').doc().id};if(notifibool){db.collection('notifications').doc(chatuser).update({notifications:firebase.firestore.FieldValue.arrayUnion(notificationobj)});}db.collection(\"conversations\").doc(convoid).update({lastmsgdate:date,messages:firebase.firestore.FieldValue.arrayUnion(msgobject)});}else{setNotifi(true);setNotificont({emoji:\"fal fa-exclamation-circle\",msg:\"Only Images are allowed!\"});setTimeout(function(){setNotifi(false);},300500);}}else if(type===\"paperclip\"){var _msgobject={message:\"https://firebasestorage.googleapis.com/v0/b/\".concat(storageRef.bucket,\"/o/\").concat(convoid,\"%2F\").concat(file.name,\"?alt=media\"),reaction1:\"\",reaction2:\"\",msgdate:firebase.firestore.Timestamp.now(),msgid:db.collection(\"conversations\").doc().id,read:false,senderid:user.uid,editing:false,nobackground:true,emoji:true,file:true,name:file.name,base64:false};var _notificationobj={notifimsg:\"https://firebasestorage.googleapis.com/v0/b/\".concat(storageRef.bucket,\"/o/\").concat(convoid,\"%2F\").concat(file.name,\"?alt=media\"),notifidate:firebase.firestore.Timestamp.now(),read:false,sender:user.displayName,file:true,id:convoid,senderid:user.uid,notifiid:db.collection('users').doc().id};if(notifibool){db.collection('notifications').doc(chatuser).update({notifications:firebase.firestore.FieldValue.arrayUnion(_notificationobj)});}db.collection(\"conversations\").doc(convoid).update({lastmsgdate:date,messages:firebase.firestore.FieldValue.arrayUnion(_msgobject)});}else if(type===\"microphone\"){}else if(type==='film'){if(extFile==='mp4'||'gif'||'avi'){var _msgobject2={message:\"https://firebasestorage.googleapis.com/v0/b/\".concat(storageRef.bucket,\"/o/\").concat(convoid,\"%2F\").concat(file.name,\"?alt=media\"),reaction1:\"\",reaction2:\"\",msgdate:firebase.firestore.Timestamp.now(),msgid:db.collection(\"conversations\").doc().id,read:false,senderid:user.uid,editing:false,nobackground:true,emoji:true,video:true};var _notificationobj2={notifimsg:\"https://firebasestorage.googleapis.com/v0/b/\".concat(storageRef.bucket,\"/o/\").concat(convoid,\"%2F\").concat(file.name,\"?alt=media\"),notifidate:firebase.firestore.Timestamp.now(),read:false,sender:user.displayName,video:true,id:convoid,senderid:user.uid,notifiid:db.collection('users').doc().id};if(notifibool){db.collection('notifications').doc(chatuser).update({notifications:firebase.firestore.FieldValue.arrayUnion(_notificationobj2)});}db.collection(\"conversations\").doc(convoid).update({lastmsgdate:date,messages:firebase.firestore.FieldValue.arrayUnion(_msgobject2)});}else{}}progressbar.current.style.display=\"none\";});}}var icons=[{icon:\"image\",type:\"file\"},{icon:'film',type:'file'},{icon:\"paperclip\",type:\"file\"},{icon:\"microphone\",type:\"microphone\"}];var iconsrow=icons.map(function(icon){return/*#__PURE__*/_jsx(Hoverableicondiv,{progressbar:progressbar,progresswidth:progresswidth,classNames:\"\",icon:icon.icon,type:icon.type,special:true,sendFile:sendFile,convoid:convoid,inputref:inputref});});function editMsg(){msgs&&msgs.map(function(msg){if(msgid===msg.msgid){var itemindex=msgs.indexOf(msg);msgs[itemindex].message=updatedMsg;db.collection(\"conversations\").doc(convoid).update({messages:msgs});}});}function contextMenu(e){var customcontext=document.querySelector(\".contextmenu\");var bounding=customcontext.getBoundingClientRect();e.preventDefault();setMsgid(e.currentTarget.getAttribute(\"id\"));setContextmenu(true);if(type===\"small\"){customcontext.style.top=\"\".concat(e.pageY-201,\"px\");customcontext.style.left=\"\".concat(0,\"px\");}else{var _bounding=customcontext.getBoundingClientRect();customcontext.style.top=\"\".concat(e.pageY-200,\"px\");customcontext.style.left=\"\".concat(e.pageX-150,\"px\");}if(!updatedMsg===\"\"){editMsg();}}function sendEmoji(emoji){var msgobject={message:emoji,reaction1:\"\",reaction2:\"\",msgdate:firebase.firestore.Timestamp.now(),msgid:db.collection(\"conversations\").doc().id,read:false,senderid:user.uid,editing:false,nobackground:false,emoji:true};db.collection(\"conversations\").doc(convoid).update({lastmsgdate:date,messages:firebase.firestore.FieldValue.arrayUnion(msgobject)});var notificationobj={notifimsg:emoji,notifidate:firebase.firestore.Timestamp.now(),read:false,sender:user.displayName,id:convoid,senderid:user.uid,notifiid:db.collection('users').doc().id};if(notifibool){db.collection('notifications').doc(chatuser).update({notifications:firebase.firestore.FieldValue.arrayUnion(notificationobj)});}setMsgstring(\"\");typerRef.current.setAttribute(\"style\",\"height: 50px\");}var scrollto=useRef();function sendMessage(){scrollto.current.scrollIntoView({behavior:'smooth',block:'start'});var imageRegex=/(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)/g;if(msgstring.match(imageRegexB)!=null){var msgobject={message:msgstring,reaction1:\"\",reaction2:'',msgdate:firebase.firestore.Timestamp.now(),msgid:db.collection(\"conversations\").doc().id,read:false,senderid:user.uid,editing:false,nobackground:true,emoji:false};db.collection(\"conversations\").doc(convoid).update({lastmsgdate:date,messages:firebase.firestore.FieldValue.arrayUnion(msgobject)});var notificationobj={notifimsg:msgstring,notifidate:firebase.firestore.Timestamp.now(),read:false,sender:user.displayName,id:convoid,senderid:user.uid,notifiid:db.collection('users').doc().id};if(notifibool){db.collection('notifications').doc(chatuser).update({notifications:firebase.firestore.FieldValue.arrayUnion(notificationobj)});}else{return null;}setMsgstring(\"\");typerRef.current.setAttribute(\"style\",\"height: 50px\");}else if(msgstring.replace(/\\s/g,\"\").length){var _msgobject3={message:msgstring,reaction1:\"\",reaction2:\"\",msgdate:firebase.firestore.Timestamp.now(),msgid:db.collection(\"conversations\").doc().id,read:false,senderid:user.uid,editing:false,nobackground:false,emoji:false};var _notificationobj3={notifimsg:msgstring,notifidate:firebase.firestore.Timestamp.now(),read:false,sender:user.displayName,id:convoid,senderid:user.uid,notifiid:db.collection('users').doc().id};if(notifibool){db.collection('notifications').doc(chatuser).update({notifications:firebase.firestore.FieldValue.arrayUnion(_notificationobj3)});}db.collection(\"conversations\").doc(convoid).update({lastmsgdate:firebase.firestore.Timestamp.now(),messages:firebase.firestore.FieldValue.arrayUnion(_msgobject3)});setMsgstring(\"\");typerRef.current.setAttribute(\"style\",\"height: 50px\");}}function triggerSend(e){if(e.keyCode===13&&!e.shiftKey){e.preventDefault();sendMessage();}}function formatTextarea(){// setTyping(true)\n// showTypingAnim()\n}var emojipickerref=useRef();function inputFunc(){typerRef.current.focus();setEmojipicker(!emojipicker);}function showTypingAnim(){setTyperid(user.uid);var infoobj={convoid:convoid,creatorid:creatorid,recipientid:recipientid,usertyping:typing,userref:db.collection(\"users\").doc(recipientid),typerid:typerid};db.collection(\"conversations\").doc(convoid).update({// convoinfo: infoobj\n}).then(function(){db.collection(\"conversations\").doc(convoid).onSnapshot(function(snap){// setTyperid(snap.data().convoinfo.typerid)\n// setRealtyping(snap.data().convoinfo.usertyping)\n});});}var _useState79=useState(1),_useState80=_slicedToArray(_useState79,2),zoomamount=_useState80[0],setZoomamount=_useState80[1];function zoom(el){if(el.type==='in'){setZoomamount(function(prev){return prev+0.1;});}else{if(zoomamount>1){setZoomamount(function(prev){return prev-0.1;});}}}var onEmojiClick=function onEmojiClick(event,emojiobject){setMsgstring(msgstring+emojiobject.emoji);};useEffect(function(){var timer=setInterval(function(){setUpdateelapsed(function(prev){return prev+1;});},60000);return function(){clearInterval(timer);};},[]);useEffect(function(){var timer=setInterval(function(){setTyping(false);},4000);// showTypingAnim()\nreturn function(){clearInterval(timer);};},[typing]);useEffect(function(){db.collection(\"users\").doc(creatorid).onSnapshot(function(snap){var user=snap.data();setRecipname(user.userinfo.name);setRecipimg(user.userinfo.cover);setRecipcity(user.userinfo.city);setRecipcountry(user.userinfo.country);});db.collection(\"users\").doc(recipientid).onSnapshot(function(snap){var user=snap.data();setUserimg(user.userinfo.cover);setUsername(user.userinfo.name);});db.collection(\"users\").doc(chatuser).onSnapshot(function(snap){var user=snap.data();setChatname(user.userinfo.name);setChatimg(user.userinfo.cover);setChatcity(user.userinfo.city);setChatcountry(user.userinfo.country);setChatactive(user.online);setActivestatus(user.userinfo.online);setLoading(false);});},[creatorid,recipientid,chatuser]);useEffect(function(){db.collection(\"users\").doc(user.uid).onSnapshot(function(snap){var user=snap.data();setChatcolor(user.customization.color);setUserimg(user.userinfo.cover);});},[chatcolor,chatuser]);useEffect(function(){db.collection(\"users\").doc(chatuser).onSnapshot(function(snap){var user=snap.data();setUserchatcolor(user.customization.chatcolor);});},[chatuser]);useEffect(function(){db.collection(\"conversations\").doc(convoid).get().then(function(snap){var use=snap.data();setMsgs(use.messages);setLoader(false);setTheme(use.customizedconvo.theme);setEmojitype(use.customizedconvo.emoji);if(user.uid===props.diag.convoinfo.creatorid){setNotifibool(use.notifications2);setNickname(use.nickname1);}else{setNotifibool(use.notifications1);setNickname(use.nickname2);}});},[convoid]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top br-l\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profilepic\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"relative\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"loader blue reloader\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"lds-ring\",children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{})]})}):[/*#__PURE__*/_jsx(\"img\",{src:chatimg,alt:\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"notifi\",style:{backgroundColor:chatactive?\"rgb(44, 255, 44)\":\"#FF3D3D\"}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[nickname===''?/*#__PURE__*/_jsx(\"p\",{className:\"username\",children:chatname.length>15?chatname.slice(0,15)+'...':chatname}):/*#__PURE__*/_jsx(\"p\",{className:\"username\",children:nickname}),/*#__PURE__*/_jsx(\"small\",{children:chatactive?\"Online\":\"Offline\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"controls\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fal fa-phone-alt\",style:{color:themecolor}}),/*#__PURE__*/_jsx(\"i\",{class:\"fal fa-video\",style:{color:themecolor}}),icon&&icon===\"fal fa-times\"?/*#__PURE__*/_jsx(\"i\",{className:icon,style:{padding:\"0 5px\",color:themecolor},onClick:function onClick(){return setState(false);}}):/*#__PURE__*/_jsx(Link,{exact:true,to:\"/chatsettings/\"+convoid,children:/*#__PURE__*/_jsx(\"i\",{style:{padding:\"0 5px\",color:themecolor},class:\"fal fa-ellipsis-v\"})})]})]}),/*#__PURE__*/_jsx(Route,{render:function render(_ref){var location=_ref.location;return/*#__PURE__*/_jsx(\"div\",{className:!theme?\"msgs black\":theme==='https://i.imgur.com/4hzNTTq.png'?'msgs black':'msgs',style:theme?{backgroundImage:\"url(\"+theme+\")\"}:{backgroundImage:\"url(https://i.imgur.com/4hzNTTq.png)\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"scrollto\",ref:scrollto}),loader?/*#__PURE__*/_jsx(\"div\",{className:loader?\"loader opa\":\"loader\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"lds-ring\",children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{})]})}):allmsgs]})});}}),/*#__PURE__*/_jsxs(\"div\",{className:\"search whiteb br-l\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"plus\",children:[/*#__PURE__*/_jsx(\"i\",{class:visible?\"fal fa-minus\":\"fal fa-plus\",style:{color:themecolor},onClick:function onClick(){return setVisible(!visible);}}),/*#__PURE__*/_jsx(CSSTransition,{in:visible,timeout:300,classNames:\"iconshover\",unmountOnExit:true,children:/*#__PURE__*/_jsxs(\"div\",{className:\"icons\",children:[iconsrow,/*#__PURE__*/_jsx(\"span\",{className:\"uploader bs\",ref:progressbar,children:/*#__PURE__*/_jsx(\"span\",{className:\"percent\",ref:progresswidth})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"textarea flexrow\",children:[/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",placeholder:\"Send a message...\",onKeyUp:function onKeyUp(e){return triggerSend(e);},ref:typerRef,value:msgstring,onChange:function onChange(e){setMsgstring(e.target.value);},onInput:function onInput(){return formatTextarea();}}),/*#__PURE__*/_jsxs(\"div\",{className:\"gif_emoji\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fal fa-laugh\",onClick:function onClick(){inputFunc();}}),/*#__PURE__*/_jsx(\"i\",{class:\"fal fa-comment-alt-smile\",onClick:function onClick(){return setGif(!gif);}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flexrow\",children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"emoji\",onClick:function onClick(){return sendEmoji(emojitype);},style:{cursor:\"pointer\"},children:emojitype}),/*#__PURE__*/_jsx(\"i\",{class:\"fal fa-paper-plane\",style:{color:themecolor},onClick:function onClick(){sendMessage();setEmojipicker(false);}})]})]}),/*#__PURE__*/_jsx(Contextmenu,{setShowinput:setShowinput,editMsg:editMsg,setUpdatedMsg:setUpdatedMsg,convoid:convoid,type:\"msg\",msgid:msgid,setMsgid:setMsgid,setContextmenu:setContextmenu,contextmenu:contextmenu,contextstyle:contextstyle}),/*#__PURE__*/_jsx(CSSTransition,{in:gif,unmountOnExit:true,classNames:\"gif\",timeout:300,children:/*#__PURE__*/_jsx(Gif,{chatimg:chatimg,setGif:setGif,convoid:convoid,notifibool:notifibool,chatuser:chatuser})}),/*#__PURE__*/_jsx(CSSTransition,{in:notifi,timeout:300,classNames:\"displayerror\",unmountOnExit:true,children:/*#__PURE__*/_jsxs(\"div\",{className:\"errormsg bs diagmsg\",children:[/*#__PURE__*/_jsx(\"i\",{className:notificont.emoji,style:{position:\"absolute\",left:\"20px\"}}),\" \",/*#__PURE__*/_jsx(\"p\",{children:notificont.msg}),/*#__PURE__*/_jsx(\"i\",{className:\"far fa-times\",style:{color:themecolor},onClick:function onClick(){return setNotifi(false);}})]})}),/*#__PURE__*/_jsx(CSSTransition,{in:modal,classNames:\"modal\",timeout:0,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal overflowimgcontainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fal fa-search-minus\",onClick:function onClick(){return zoom({type:'out'});}}),/*#__PURE__*/_jsx(\"i\",{class:\"fal fa-redo-alt\",onClick:function onClick(){return setZoomamount(1);}}),/*#__PURE__*/_jsx(\"i\",{class:\"fal fa-search-plus\",onClick:function onClick(){return zoom({type:'in'});}})]}),/*#__PURE__*/_jsx(ScrollContainer,{className:\"grabbercontainer\",hideScrollbars:true,children:/*#__PURE__*/_jsx(\"img\",{src:\"\",alt:\"\",ref:imgsrc,style:{width:100*zoomamount+'%',height:100*zoomamount+'%'}})}),/*#__PURE__*/_jsx(\"i\",{className:\"fal fa-times\",onClick:function onClick(){setModal(false);setZoomamount(1);}})]})}),/*#__PURE__*/_jsx(CSSTransition,{in:emojipicker,classNames:\"emojipicker\",timeout:300,children:/*#__PURE__*/_jsxs(\"div\",{className:\"emojipicker\",ref:emojipickerref,onMouseOver:function onMouseOver(){return typerRef.current.focus();},onClick:function onClick(){return typerRef.current.focus();},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"times\",children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"fal fa-times\",onClick:function onClick(){return setEmojipicker(false);}})]}),/*#__PURE__*/_jsx(Picker,{onEmojiClick:onEmojiClick})]})})]});}export default Dialogue;","map":{"version":3,"names":["React","useState","useEffect","useRef","useContext","NavLink","Route","Link","Users","firebase","db","Contextmenu","FilePond","File","registerPlugin","CSSTransition","TransitionGroup","ElapsedTime","ContextApp","Hoverableicondiv","InnerImageZoom","Iframe","Img","Filemsg","P","Recording","Gif","ReactTimeAgo","ReactImageMagnify","Contextoptions","Threedots","ScrollContainer","ReactTinyLink","Picker","Dialogue","props","themecolor","notifi","setNotifi","notificont","setNotificont","gif","setGif","msgs","setMsgs","msgstring","setMsgstring","updateelapsed","setUpdateelapsed","typing","setTyping","realtyping","setRealtyping","typerid","setTyperid","activestatus","setActivestatus","recipname","setRecipname","recipimg","setRecipimg","recipcity","setRecipcity","recipcountry","setRecipcountry","userimg","setUserimg","username","setUsername","visible","setVisible","contextmenu","setContextmenu","top","left","contextstyle","setContextstyle","notifibool","setNotifibool","emojitype","setEmojitype","loader","setLoader","loading","setLoading","chatcolor","setChatcolor","userChatcolor","setUserchatcolor","showinput","setShowinput","updatedMsg","setUpdatedMsg","emojilist","setEmojilist","theme","setTheme","msgid","setMsgid","chatname","setChatname","chatimg","setChatimg","chatcity","setChatcity","chatcountry","setChatcountry","chatactive","setChatactive","nickname","setNickname","emojipicker","setEmojipicker","emojis","chatuser","setState","icon","type","messages","diag","convoinfo","convoid","creatorid","recipientid","user","auth","currentUser","date","firestore","FieldValue","serverTimestamp","typerRef","id","collection","doc","reg","imageRegexB","urlreg","ureg","ytVidId","url","p","match","RegExp","$1","determineMsgtype","msg","base64","message","file","name","audio","video","sm","replace","_","text","img","trim","__html","determineClass","urreg","uid","senderid","emoji","nobackground","opti","setOpti","msgOptions","allel","document","querySelectorAll","forEach","el","style","display","querySelector","modal","setModal","imgsrc","imgSrcModal","setImgSrcModal","clickHandler","e","target","closest","play","currentTarget","contains","getAttribute","setAttribute","allmsgs","slice","reverse","map","contextMenu","backgroundColor","msgdate","toDate","reaction1","reaction2","width","marginLeft","progressbar","progresswidth","setImg","inputref","sendFile","files","idxDot","lastIndexOf","extFile","substr","length","toLowerCase","storageRef","storage","ref","task","put","on","progress","snap","current","percentage","bytesTransferred","totalBytes","height","error","err","complete","msgobject","bucket","Timestamp","now","read","editing","notificationobj","notifimsg","notifidate","sender","displayName","notifiid","update","notifications","arrayUnion","lastmsgdate","setTimeout","icons","iconsrow","editMsg","itemindex","indexOf","customcontext","bounding","getBoundingClientRect","preventDefault","pageY","pageX","sendEmoji","scrollto","sendMessage","scrollIntoView","behavior","block","imageRegex","triggerSend","keyCode","shiftKey","formatTextarea","emojipickerref","inputFunc","focus","showTypingAnim","infoobj","usertyping","userref","then","onSnapshot","zoomamount","setZoomamount","zoom","prev","onEmojiClick","event","emojiobject","timer","setInterval","clearInterval","data","userinfo","cover","city","country","online","customization","color","get","use","customizedconvo","notifications2","nickname1","notifications1","nickname2","padding","location","backgroundImage","value","cursor","position"],"sources":["/Users/jinsonwu/Desktop/MIRC-Code-Verification/react-login/src/components/Dialogue.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useContext } from \"react\";\r\nimport { NavLink, Route, Link } from \"react-router-dom\";\r\nimport Users from \"./Users\";\r\nimport firebase from \"firebase\";\r\nimport { db } from \"../Fire\";\r\nimport Contextmenu from \"./Contextmenu\";\r\nimport { FilePond, File, registerPlugin } from \"react-filepond\";\r\nimport \"filepond/dist/filepond.min.css\";\r\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\r\nimport ElapsedTime from \"./Elapsedtime\";\r\nimport { ContextApp } from \"../ContextAPI\";\r\nimport Hoverableicondiv from \"./Hoverableiconsdiv\";\r\nimport InnerImageZoom from \"react-inner-image-zoom\";\r\nimport Iframe from \"./msgcomponents/Iframe\";\r\nimport Img from './msgcomponents/Img'\r\nimport Filemsg from './msgcomponents/File'\r\nimport P from './msgcomponents/P'\r\nimport Recording from \"./msgcomponents/Recording\";\r\nimport Gif from \"./Gifs.js/Gif\";\r\nimport ReactTimeAgo from 'react-time-ago'\r\nimport ReactImageMagnify from 'react-image-magnify';\r\nimport Contextoptions from \"./msgcomponents/Contextoptions\";\r\nimport Threedots from \"./msgcomponents/Threedots\";\r\nimport ScrollContainer from 'react-indiana-drag-scroll';\r\nimport { ReactTinyLink } from 'react-tiny-link'\r\nimport Picker from 'emoji-picker-react';\r\n\r\nfunction Dialogue(props) {\r\n  const {\r\n    themecolor,\r\n    notifi,\r\n    setNotifi,\r\n    notificont,\r\n    setNotificont\r\n  } = useContext(ContextApp);\r\n  const [gif, setGif]=useState(false)\r\n  const [msgs, setMsgs] = useState([]);\r\n  const [msgstring, setMsgstring] = useState(\"\");\r\n  const [updateelapsed, setUpdateelapsed] = useState(0);\r\n  const [typing, setTyping] = useState(false);\r\n  const [realtyping, setRealtyping] = useState(false);\r\n  const [typerid, setTyperid] = useState(\"\");\r\n  const [activestatus, setActivestatus] = useState(false);\r\n  const [recipname, setRecipname] = useState(\"\");\r\n  const [recipimg, setRecipimg] = useState(\"\");\r\n  const [recipcity, setRecipcity] = useState(\"\");\r\n  const [recipcountry, setRecipcountry] = useState(\"\");\r\n  const [userimg, setUserimg] = useState(\"\");\r\n  const [username, setUsername] = useState(\"\");\r\n  const [visible, setVisible] = useState(false);\r\n  const [contextmenu, setContextmenu] = useState(false);\r\n  const [contextstyle, setContextstyle] = useState({\r\n    top: 0,\r\n    left: 0\r\n  });\r\n  const [notifibool, setNotifibool]=useState(true)\r\n  const [emojitype, setEmojitype] = useState(\"\");\r\n  const [loader, setLoader] = useState(true);\r\n  const [loading, setLoading] = useState(true);\r\n  const [chatcolor, setChatcolor] = useState(\"\");\r\n  const [userChatcolor, setUserchatcolor] = useState(\"\");\r\n  const [showinput, setShowinput] = useState(false);\r\n  const [updatedMsg, setUpdatedMsg] = useState(\"\");\r\n  const [emojilist, setEmojilist] = useState(false);\r\n  const [theme, setTheme] = useState(\"\");\r\n  const [msgid, setMsgid] = useState(\"\");\r\n  const [chatname, setChatname] = useState(\"\");\r\n  const [chatimg, setChatimg] = useState(\"\");\r\n  const [chatcity, setChatcity] = useState(\"\");\r\n  const [chatcountry, setChatcountry] = useState(\"\");\r\n  const [chatactive, setChatactive] = useState(\"\");\r\n  const [nickname, setNickname] = useState([]);\r\n  const [emojipicker, setEmojipicker]=useState(false)\r\n  const emojis = []\r\n  const { chatuser, setState, icon, type } = props;\r\n  const { messages } = props.diag;\r\n  const { convoid, creatorid, recipientid } = props.diag.convoinfo;\r\n  const user = firebase.auth().currentUser;\r\n  const date = firebase.firestore.FieldValue.serverTimestamp()\r\n  const typerRef = useRef();\r\n  const id =db.collection('users').doc().id\r\n  const reg = /((?:(?!(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)).)+)|((?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)(?:\\?\\S+=\\S*(?:&\\S+=\\S*)*)?)/gm;\r\n  const imageRegexB = /(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)/g;\r\n  var urlreg = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/g;\r\n  var ureg = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/g;\r\n\r\n  function ytVidId(url) {\r\n    var p = /(?:https?:\\/\\/)?(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?/;\r\n    return url.match(p) ? RegExp.$1 : false;\r\n  }\r\n\r\n  \r\n  function determineMsgtype(msg) {\r\n    if (msg.base64) {\r\n      return <Img src={msg.message} link={true}/>\r\n     \r\n    }\r\n    else if (msg.file) {\r\n      return <Filemsg name={msg.name} link={msg.message}/>\r\n    } else if (msg.audio) {\r\n      return <Recording src={msg.message}/>\r\n      \r\n    } else if (msg.video){\r\n      return <Iframe type='video' link={msg.message}/>\r\n    }\r\n    else if (ytVidId(msg.message)) {\r\n      return <Iframe link={\"https://www.youtube.com/embed/\" + ytVidId(msg.message)} />\r\n\r\n    }\r\n    // else if(urlreg.test(msg.message)){\r\n    //   const stringWithOnlyURLS = msg.message.match(urlreg).join(' ');\r\n    //   const string = msg.message.replace(stringWithOnlyURLS, ' ')\r\n    //   return <>\r\n    //   <p className='bg'>{string}</p>\r\n    //     <div>\r\n    //     <ReactTinyLink\r\n    //   cardSize=\"small\" \r\n    //   showGraphic={true}\r\n    //   maxLine={2}\r\n    //   minLine={1}\r\n    //   url={stringWithOnlyURLS}\r\n    //   />\r\n    //     </div>\r\n    //   </>\r\n    // }  \r\n    else {\r\n      const sm = msg.message.replace(reg, (_, text, img)  => \r\n      text ?  `<p>${text.trim()}</p>`:`<img src=\"${img}\"/>`\r\n      ) \r\n      return  <div dangerouslySetInnerHTML={{__html:sm}} ></div>\r\n    }\r\n  }\r\n  function determineClass(msg) {\r\n    var urreg = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/g;\r\n    if(user.uid===msg.senderid){\r\n      if (msg.file) {\r\n        return \"msg file\";\r\n      }else if (msg.video) {\r\n        return 'msg video'\r\n      }\r\n       else if (msg.audio) {\r\n        return \"msg audio\";\r\n      } else if (msg.emoji) {\r\n        return \"msg emojimsg\";\r\n      } else if (msg.nobackground) {\r\n        return \"no-bg msg\";\r\n      } else if (ytVidId(msg.message)) {\r\n        return `msg youtube`;\r\n      }\r\n      //   else if(urreg.test(msg.message)){\r\n      //   return 'msg emojimsg imp'\r\n      // }\r\n      else {\r\n        return \"msg\";\r\n      }\r\n    }else {\r\n      if (msg.file) {\r\n        return \"msg file trans\";\r\n      }else if (msg.video) {\r\n        return 'msg video trans'\r\n      }\r\n       else if (msg.audio) {\r\n        return \"msg audio trans\";\r\n      } else if (msg.emoji) {\r\n        return \"msg emojimsg trans\";\r\n      } else if (msg.nobackground) {\r\n        return \"no-bg msg trans\";\r\n      } else if (ytVidId(msg.message)) {\r\n        return `msg youtube trans`;\r\n      }\r\n      //   else if(urreg.test(msg.message)){\r\n      //   return 'msg emojimsg imp'\r\n      // }\r\n      else {\r\n        return \"msg trans\";\r\n      }\r\n    }\r\n  }\r\n  const [opti, setOpti]=useState(false)\r\n  function msgOptions(msg){\r\n    const allel = document.querySelectorAll('.optionsEdit')\r\n    allel.forEach(el=>{\r\n      el.style.display='none'\r\n    })\r\n    const el = document.querySelector(`div[data-id=\"${msg.msgid}\"]`)\r\n    el.style.display='flex'\r\n  }\r\n  const [modal, setModal] = useState(false);\r\n  const imgsrc = useRef();\r\n  const [imgSrcModal, setImgSrcModal]=useState('')\r\n  function clickHandler(e) {\r\n    const audio = e.target.querySelector(\".controls\");\r\n    const video = e.target.closest(\"VIDEO\");\r\n\r\n    const play = e.target.querySelector(\".fa-play\");\r\n    const el = e.target.closest(\"IMG\");\r\n    if (el && e.currentTarget.contains(el)) {\r\n      setModal(true);\r\n      const imgsrc = document.querySelector(\".modal img\");\r\n      setImgSrcModal(el.getAttribute('src'))\r\n      imgsrc.setAttribute(\"src\", el.getAttribute(\"src\"));\r\n    }\r\n    if (video && e.currentTarget.contains(video)) {\r\n    }\r\n  }\r\n  const allmsgs =\r\n    messages &&\r\n    messages\r\n      .slice(0)\r\n      .reverse()\r\n      .map((msg) => {\r\n        return (\r\n          <div\r\n            id={msg.msgid}\r\n            className={msg.senderid === user.uid ? \"right m\" : \"left m\"}\r\n            onContextMenu={(e) => contextMenu(e)}\r\n          >\r\n            <div className=\"flex\">\r\n              <p\r\n                className={determineClass(msg)}\r\n                contentEditable={false}\r\n                style={\r\n                  msg.nobackground\r\n                    ? { backgroundColor: \"transparent\" }\r\n                    : msg.emoji\r\n                    ? { backgroundColor: \"transparent\" }\r\n                    : ytVidId(msg.message)\r\n                    ? { backgroundColor: \"transparent\" }\r\n                    : msg.senderid === user.uid\r\n                    ? { backgroundColor: chatcolor }\r\n                    : null\r\n                }\r\n                onClick={(e) => clickHandler(e)}\r\n     \r\n              >    { determineMsgtype(msg) }</p>\r\n\r\n             <Threedots msgs={msgs} user={user} msg={msg} convoid={convoid}/>\r\n\r\n                <small\r\n                className={\r\n                  msg.senderid === user.uid\r\n                    ? \"alignRight elapsedtime\"\r\n                    : \"alignLeft elapsedtime\"\r\n                }\r\n              ><ReactTimeAgo date={msg.msgdate.toDate()}/></small>\r\n              <div\r\n                className=\"reaction\"\r\n                style={{ display: (msg.reaction1||msg.reaction2) ? \"flex\" : \"none\", width: (msg.reaction1===''||msg.reaction2==='')?'22px':'42px' }}\r\n              >\r\n                <i className={ msg.reaction1 === \"fad fa-heart\"? \"emoj fas fa-\" + msg.reaction1: \"emoj fad fa-\" + msg.reaction1 }></i>\r\n                <i style={{marginLeft: msg.reaction2===''?'':'5px'}}className={ msg.reaction2 === \"fad fa-heart\"? \"emoj fas fa-\" + msg.reaction2: \"emoj fad fa-\" + msg.reaction2}></i>\r\n              </div>\r\n            </div>\r\n            <img src={msg.senderid === user.uid ? userimg : chatimg} alt=\"\" />\r\n          </div>\r\n        );\r\n      });\r\n  const progressbar = useRef();\r\n  const progresswidth = useRef();\r\n  const [img, setImg] = useState();\r\n  const inputref = useRef()\r\n  function sendFile(type) {\r\n    let file = document.querySelector(`.${type}file`).files[0];\r\n    if (file) {\r\n      var idxDot = file.name.lastIndexOf(\".\") + 1;\r\n      var extFile = file.name.substr(idxDot, file.name.length).toLowerCase();\r\n\r\n      const storageRef = firebase.storage().ref(`${convoid}/${file.name}`);\r\n      const task = storageRef.put(file);\r\n      task.on(\r\n        \"state_changes\",\r\n\r\n        function progress(snap) {\r\n          progressbar.current.style.display = \"flex\";\r\n          const percentage = (snap.bytesTransferred / snap.totalBytes) * 100;\r\n          progresswidth.current.style.height = `${percentage}%`;\r\n        },\r\n        function error(err) {},\r\n        function complete() {\r\n          if (type === \"image\") {\r\n            if (extFile === \"jpg\" || extFile === \"jpeg\" || extFile === \"png\") {\r\n              let msgobject = {\r\n                message: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n                reaction1: \"\",\r\n                reaction2: \"\",\r\n                msgdate: firebase.firestore.Timestamp.now(),\r\n                msgid: db.collection(\"conversations\").doc().id,\r\n                read: false,\r\n                senderid: user.uid,\r\n                editing: false,\r\n                nobackground: true,\r\n                emoji: true,\r\n                base64: true\r\n              };\r\n              let notificationobj = {\r\n                notifimsg: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n                notifidate: firebase.firestore.Timestamp.now(),\r\n                read: false,\r\n                sender: user.displayName,\r\n                base64: true,\r\n                id: convoid,\r\n                senderid: user.uid,\r\n                notifiid: db.collection('users').doc().id              }      \r\n                if(notifibool){\r\n                  db.collection('notifications').doc(chatuser).update({\r\n                    notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n                  })\r\n                }\r\n              db.collection(\"conversations\")\r\n                .doc(convoid)\r\n                .update({\r\n                  lastmsgdate: date,\r\n                  messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n                });\r\n            } else {\r\n              setNotifi(true);\r\n              setNotificont({\r\n                emoji: \"fal fa-exclamation-circle\",\r\n                msg: \"Only Images are allowed!\"\r\n              });\r\n              setTimeout(() => {\r\n                setNotifi(false);\r\n              }, 300500);\r\n            }\r\n          } else if (type === \"paperclip\") {\r\n            let msgobject = {\r\n              message: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n              reaction1: \"\",\r\n              reaction2: \"\",\r\n              msgdate: firebase.firestore.Timestamp.now(),\r\n              msgid: db.collection(\"conversations\").doc().id,\r\n              read: false,\r\n              senderid: user.uid,\r\n              editing: false,\r\n              nobackground: true,\r\n              emoji: true,\r\n              file: true,\r\n              name: file.name,\r\n              base64: false\r\n            };\r\n            let notificationobj = {\r\n              notifimsg: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n              notifidate: firebase.firestore.Timestamp.now(),\r\n              read: false,\r\n              sender: user.displayName,\r\n              file: true,\r\n              id: convoid,\r\n              senderid: user.uid,\r\n              notifiid: db.collection('users').doc().id            }      \r\n            if(notifibool){\r\n              db.collection('notifications').doc(chatuser).update({\r\n                notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n              })\r\n            }\r\n            db.collection(\"conversations\")\r\n              .doc(convoid)\r\n              .update({\r\n                lastmsgdate: date,\r\n                messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n              });\r\n          } else if (type === \"microphone\") {\r\n          }else if(type==='film') {\r\n              if(extFile==='mp4'||'gif'||'avi'){\r\n                let msgobject = {\r\n                  message: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n                  reaction1: \"\",\r\n                  reaction2: \"\",\r\n                  msgdate: firebase.firestore.Timestamp.now(),\r\n                  msgid: db.collection(\"conversations\").doc().id,\r\n                  read: false,\r\n                  senderid: user.uid,\r\n                  editing: false,\r\n                  nobackground: true,\r\n                  emoji: true,\r\n                  video: true\r\n                };\r\n                let notificationobj = {\r\n                  notifimsg: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n                  notifidate: firebase.firestore.Timestamp.now(),\r\n                  read: false,\r\n                  sender: user.displayName,\r\n                  video: true,\r\n                  id: convoid,\r\n                  senderid: user.uid,\r\n                  notifiid: db.collection('users').doc().id                }      \r\n                if(notifibool){\r\n                  db.collection('notifications').doc(chatuser).update({\r\n                    notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n                  })\r\n                }\r\n                db.collection(\"conversations\")\r\n                  .doc(convoid)\r\n                  .update({\r\n                    lastmsgdate: date,\r\n                    messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n                  });\r\n              }else {\r\n\r\n              }\r\n          }\r\n          progressbar.current.style.display = \"none\";\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  const icons = [\r\n    { icon: \"image\", type: \"file\" },\r\n    {icon: 'film', type:'file'},\r\n    { icon: \"paperclip\", type: \"file\" },\r\n    { icon: \"microphone\", type: \"microphone\" },\r\n\r\n  ];\r\n\r\n  let iconsrow = icons.map((icon) => {\r\n    return (\r\n      <Hoverableicondiv\r\n        progressbar={progressbar}\r\n        progresswidth={progresswidth}\r\n        classNames=\"\"\r\n        icon={icon.icon}\r\n        type={icon.type}\r\n        special={true}\r\n        sendFile={sendFile}\r\n        convoid={convoid}\r\n        inputref={inputref}\r\n        \r\n      />\r\n    );\r\n  });\r\n\r\n  function editMsg() {\r\n    msgs &&\r\n      msgs.map((msg) => {\r\n        if (msgid === msg.msgid) {\r\n          let itemindex = msgs.indexOf(msg);\r\n          msgs[itemindex].message = updatedMsg;\r\n          db.collection(\"conversations\").doc(convoid).update({\r\n            messages: msgs\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  function contextMenu(e) {\r\n    let customcontext = document.querySelector(\".contextmenu\");\r\n    const bounding = customcontext.getBoundingClientRect();\r\n    e.preventDefault();\r\n    setMsgid(e.currentTarget.getAttribute(\"id\"));\r\n    setContextmenu(true);\r\n    if (type === \"small\") {\r\n      customcontext.style.top = `${e.pageY - 201}px`;\r\n      customcontext.style.left = `${0}px`;\r\n    } else {\r\n    const bounding = customcontext.getBoundingClientRect()\r\n    customcontext.style.top = `${e.pageY -200}px`;\r\n    customcontext.style.left = `${e.pageX -150 }px`;\r\n    }\r\n\r\n    if (!updatedMsg === \"\") {\r\n      editMsg();\r\n    }\r\n  }\r\n  function sendEmoji(emoji) {\r\n    let msgobject = {\r\n      message: emoji,\r\n      reaction1: \"\",\r\n      reaction2: \"\",\r\n      msgdate: firebase.firestore.Timestamp.now(),\r\n      msgid: db.collection(\"conversations\").doc().id,\r\n      read: false,\r\n      senderid: user.uid,\r\n      editing: false,\r\n      nobackground: false,\r\n      emoji: true\r\n    };\r\n    db.collection(\"conversations\")\r\n      .doc(convoid)\r\n      .update({\r\n        lastmsgdate: date,\r\n        messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n      });\r\n      let notificationobj = {\r\n        notifimsg: emoji,\r\n        notifidate: firebase.firestore.Timestamp.now(),\r\n        read: false,\r\n        sender: user.displayName,\r\n        id: convoid,\r\n        senderid: user.uid,\r\n        notifiid: db.collection('users').doc().id\r\n      }      \r\n      if(notifibool){\r\n        db.collection('notifications').doc(chatuser).update({\r\n          notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n        })\r\n      }\r\n    setMsgstring(\"\");\r\n    typerRef.current.setAttribute(\"style\", \"height: 50px\");\r\n  }\r\n  const scrollto = useRef()\r\n  function  sendMessage() {\r\n    scrollto.current.scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n    const imageRegex = /(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)/g;\r\n    if (msgstring.match(imageRegexB) != null) {\r\n      let msgobject = {\r\n        message: msgstring,\r\n        reaction1: \"\",\r\n        reaction2: '',\r\n        msgdate: firebase.firestore.Timestamp.now(),\r\n        msgid: db.collection(\"conversations\").doc().id,\r\n        read: false,\r\n        senderid: user.uid,\r\n        editing: false,\r\n        nobackground: true,\r\n        emoji: false\r\n      };\r\n      db.collection(\"conversations\")\r\n        .doc(convoid)\r\n        .update({\r\n          lastmsgdate: date,\r\n          messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n        });\r\n        let notificationobj = {\r\n          notifimsg: msgstring,\r\n          notifidate: firebase.firestore.Timestamp.now(),\r\n          read: false,\r\n          sender: user.displayName,\r\n          id: convoid,\r\n          senderid: user.uid,\r\n          notifiid: db.collection('users').doc().id,\r\n\r\n        }      \r\n        if(notifibool){\r\n          db.collection('notifications').doc(chatuser).update({\r\n            notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n          })\r\n        }else {\r\n          return null\r\n        }\r\n      setMsgstring(\"\");\r\n      typerRef.current.setAttribute(\"style\", \"height: 50px\");\r\n    } else if (msgstring.replace(/\\s/g, \"\").length) {\r\n      let msgobject = {\r\n        message: msgstring,\r\n        reaction1: \"\",\r\n        reaction2: \"\",\r\n        msgdate: firebase.firestore.Timestamp.now(),\r\n        msgid: db.collection(\"conversations\").doc().id,\r\n        read: false,\r\n        senderid: user.uid,\r\n        editing: false,\r\n        nobackground: false,\r\n        emoji: false\r\n      };\r\n      let notificationobj = {\r\n        notifimsg: msgstring,\r\n        notifidate: firebase.firestore.Timestamp.now(),\r\n        read: false,\r\n        sender: user.displayName,\r\n        id: convoid,\r\n        senderid: user.uid,\r\n        notifiid: db.collection('users').doc().id\r\n      }      \r\n      if(notifibool){\r\n        db.collection('notifications').doc(chatuser).update({\r\n          notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n        })\r\n      }\r\n      db.collection(\"conversations\")\r\n        .doc(convoid)\r\n        .update({\r\n          lastmsgdate: firebase.firestore.Timestamp.now(),\r\n          messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n        });\r\n      setMsgstring(\"\");\r\n      typerRef.current.setAttribute(\"style\", \"height: 50px\");\r\n    }\r\n  }\r\n  function triggerSend(e) {\r\n    if (e.keyCode === 13 && !e.shiftKey) {\r\n      e.preventDefault();\r\n      sendMessage();\r\n    }\r\n  }\r\n  function formatTextarea() {\r\n\r\n    // setTyping(true)\r\n    // showTypingAnim()\r\n  }\r\n  const emojipickerref = useRef()\r\n  function inputFunc(){\r\n    typerRef.current.focus()\r\n    setEmojipicker(!emojipicker)\r\n  }\r\n  function showTypingAnim() {\r\n    setTyperid(user.uid);\r\n    let infoobj = {\r\n      convoid,\r\n      creatorid,\r\n      recipientid,\r\n      usertyping: typing,\r\n      userref: db.collection(\"users\").doc(recipientid),\r\n      typerid\r\n    };\r\n    db.collection(\"conversations\")\r\n      .doc(convoid)\r\n      .update({\r\n        // convoinfo: infoobj\r\n      })\r\n      .then(() => {\r\n        db.collection(\"conversations\")\r\n          .doc(convoid)\r\n          .onSnapshot((snap) => {\r\n            // setTyperid(snap.data().convoinfo.typerid)\r\n            // setRealtyping(snap.data().convoinfo.usertyping)\r\n          });\r\n      });\r\n  }\r\n  const [zoomamount, setZoomamount]=useState(1)\r\n  function zoom(el){\r\n   if(el.type==='in'){\r\n    setZoomamount(prev=>prev+ 0.1);\r\n   }else {\r\n    if(zoomamount>1){\r\n      setZoomamount(prev=>prev- 0.1);\r\n    }\r\n   }\r\n\r\n  }\r\n  const onEmojiClick = (event, emojiobject)=>{\r\n   setMsgstring(msgstring + emojiobject.emoji)\r\n  }\r\n  useEffect(() => {\r\n    let timer = setInterval(() => {\r\n      setUpdateelapsed((prev) => prev + 1);\r\n    }, 60000);\r\n    return () => {\r\n      clearInterval(timer);\r\n    };\r\n  }, []);\r\n  useEffect(() => {\r\n    let timer = setInterval(() => {\r\n      setTyping(false);\r\n    }, 4000);\r\n    // showTypingAnim()\r\n    return () => {\r\n      clearInterval(timer);\r\n    };\r\n  }, [typing]);\r\n\r\n  useEffect(() => {\r\n    db.collection(\"users\")\r\n      .doc(creatorid)\r\n      .onSnapshot((snap) => {\r\n        const user = snap.data();\r\n        setRecipname(user.userinfo.name);\r\n        setRecipimg(user.userinfo.cover);\r\n        setRecipcity(user.userinfo.city);\r\n        setRecipcountry(user.userinfo.country);\r\n      });\r\n    db.collection(\"users\")\r\n      .doc(recipientid)\r\n      .onSnapshot((snap) => {\r\n        const user = snap.data();\r\n        setUserimg(user.userinfo.cover);\r\n        setUsername(user.userinfo.name);\r\n      });\r\n    db.collection(\"users\")\r\n      .doc(chatuser)\r\n      .onSnapshot((snap) => {\r\n        const user = snap.data();\r\n        setChatname(user.userinfo.name);\r\n        setChatimg(user.userinfo.cover);\r\n        setChatcity(user.userinfo.city);\r\n        setChatcountry(user.userinfo.country);\r\n        setChatactive(user.online);\r\n        setActivestatus(user.userinfo.online);\r\n        setLoading(false);\r\n      });\r\n  }, [creatorid, recipientid, chatuser]);\r\n  useEffect(() => {\r\n    db.collection(\"users\")\r\n      .doc(user.uid)\r\n      .onSnapshot((snap) => {\r\n        const user = snap.data();\r\n        setChatcolor(user.customization.color);\r\n        setUserimg(user.userinfo.cover);\r\n      });\r\n  }, [chatcolor, chatuser]);\r\n  useEffect(() => {\r\n    db.collection(\"users\")\r\n      .doc(chatuser)\r\n      .onSnapshot((snap) => {\r\n        let user = snap.data();\r\n        setUserchatcolor(user.customization.chatcolor);\r\n      });\r\n  }, [chatuser]);\r\n  useEffect(() => {\r\n\r\n    db.collection(\"conversations\")\r\n    .doc(convoid)\r\n    .get().then((snap) => {\r\n      let use = snap.data();\r\n      setMsgs(use.messages);\r\n      setLoader(false);\r\n      setTheme(use.customizedconvo.theme);\r\n      setEmojitype(use.customizedconvo.emoji);\r\n      if(user.uid===props.diag.convoinfo.creatorid) {\r\n        setNotifibool(use.notifications2)\r\n        setNickname(use.nickname1)\r\n      }else {\r\n        setNotifibool(use.notifications1)\r\n        setNickname(use.nickname2)\r\n      }\r\n    }); \r\n\r\n  \r\n  }, [convoid]);\r\n\r\n  return (\r\n\r\n    <>  \r\n\r\n         <div className=\"top br-l\">\r\n        <div className=\"profilepic\">\r\n          <div className=\"relative\">\r\n            {loading ? (\r\n              <div className={\"loader blue reloader\"}>\r\n                <div class=\"lds-ring\">\r\n                  <div></div>\r\n                  <div></div>\r\n                  <div></div>\r\n                  <div></div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              [\r\n                <img src={chatimg} alt=\"\" />,\r\n                <div\r\n                  className=\"notifi\"\r\n                  style={{\r\n                    backgroundColor: chatactive ? \"rgb(44, 255, 44)\" : \"#FF3D3D\"\r\n                  }}\r\n                ></div>\r\n              ]\r\n            )}\r\n          </div>\r\n          <div>\r\n            {nickname===''?<p className='username'>{chatname.length>15?chatname.slice(0, 15)+'...':chatname}</p>:<p className='username'>{nickname}</p>}\r\n            <small>{chatactive ? \"Online\" : \"Offline\"}</small>\r\n          </div>\r\n        </div>\r\n        <div className=\"controls\">\r\n          <i class=\"fal fa-phone-alt\" style={{ color: themecolor }}></i>\r\n          <i class=\"fal fa-video\" style={{ color: themecolor }}></i>\r\n          {icon && icon === \"fal fa-times\" ? (\r\n            <i\r\n              className={icon}\r\n              style={{ padding: \"0 5px\", color: themecolor }}\r\n              onClick={() => setState(false)}\r\n            ></i>\r\n          ) : (\r\n            <Link exact to={\"/chatsettings/\" + convoid}>\r\n              <i\r\n                style={{ padding: \"0 5px\", color: themecolor }}\r\n                class=\"fal fa-ellipsis-v\"\r\n              ></i>\r\n            </Link>\r\n          )}\r\n        </div>\r\n      </div>\r\n \r\n      <Route\r\n        render={({ location }) => (\r\n          <div\r\n            className={!theme?\"msgs black\":theme==='https://i.imgur.com/4hzNTTq.png'?'msgs black':'msgs'}\r\n            style={\r\n              theme\r\n                ? { backgroundImage: \"url(\" + theme + \")\" }\r\n                : { backgroundImage: \"url(https://i.imgur.com/4hzNTTq.png)\" }\r\n            }\r\n          >\r\n            <div className=\"grid\">\r\n              <div className=\"scrollto\" ref={scrollto}></div>\r\n\r\n              {loader ? (\r\n                <div className={loader ? \"loader opa\" : \"loader\"}>\r\n                  <div class=\"lds-ring\">\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                allmsgs\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      />\r\n   <div className=\"search whiteb br-l\">\r\n    <div className=\"plus\">\r\n      <i\r\n        class={visible ? \"fal fa-minus\" : \"fal fa-plus\"}\r\n        style={{ color: themecolor }}\r\n        onClick={() => setVisible(!visible)}\r\n      ></i>\r\n      <CSSTransition\r\n        in={visible}\r\n        timeout={300}\r\n        classNames=\"iconshover\"\r\n        unmountOnExit\r\n      >\r\n        <div className={\"icons\"}>\r\n          {iconsrow}\r\n          <span className=\"uploader bs\" ref={progressbar}>\r\n            <span className=\"percent\" ref={progresswidth}></span>\r\n          </span>\r\n        </div>\r\n      </CSSTransition>\r\n    </div>\r\n    <div className=\"textarea flexrow\">\r\n    <textarea\r\n      type=\"text\"\r\n      placeholder=\"Send a message...\"\r\n      onKeyUp={(e) => triggerSend(e)}\r\n      ref={typerRef}\r\n      value={msgstring}\r\n      onChange={(e) => {\r\n        setMsgstring(e.target.value);\r\n\r\n      }}\r\n      onInput={()=>formatTextarea()}\r\n\r\n    ></textarea>\r\n    <div className=\"gif_emoji\">\r\n    <i className=\"fal fa-laugh\" onClick={()=>{inputFunc()}}></i>\r\n    <i class=\"fal fa-comment-alt-smile\" onClick={()=>setGif(!gif)}></i>\r\n    </div>\r\n\r\n   </div>\r\n      <div className=\"flexrow\">\r\n      <span\r\n      role=\"img\"\r\n      aria-label=\"emoji\"\r\n      onClick={() => sendEmoji(emojitype)}\r\n      style={{ cursor: \"pointer\" }}\r\n    >\r\n      {emojitype}\r\n    </span>\r\n    <i\r\n      class=\"fal fa-paper-plane\"\r\n      style={{ color: themecolor }}\r\n      onClick={() => {sendMessage();setEmojipicker(false)}}\r\n    ></i>\r\n      </div>\r\n  </div>\r\n \r\n      <Contextmenu\r\n        setShowinput={setShowinput}\r\n        editMsg={editMsg}\r\n        setUpdatedMsg={setUpdatedMsg}\r\n        convoid={convoid}\r\n        type={\"msg\"}\r\n        msgid={msgid}\r\n        setMsgid={setMsgid}\r\n        setContextmenu={setContextmenu}\r\n        contextmenu={contextmenu}\r\n        contextstyle={contextstyle}\r\n      />\r\n\r\n      <CSSTransition in={gif} unmountOnExit classNames='gif' timeout={300}>\r\n        <Gif chatimg={chatimg} setGif={setGif} convoid={convoid} notifibool={notifibool} chatuser={chatuser}/>\r\n      </CSSTransition>\r\n      <CSSTransition\r\n        in={notifi}\r\n        timeout={300}\r\n        classNames=\"displayerror\"\r\n        unmountOnExit\r\n      >\r\n        <div className=\"errormsg bs diagmsg\">\r\n          <i\r\n            className={notificont.emoji}\r\n            style={{ position: \"absolute\", left: \"20px\" }}\r\n          ></i>{\" \"}\r\n          <p>{notificont.msg}</p>\r\n          <i\r\n            className=\"far fa-times\"\r\n            style={{ color: themecolor }}\r\n            onClick={() => setNotifi(false)}\r\n          ></i>\r\n        </div>\r\n      </CSSTransition>\r\n      <CSSTransition in={modal} classNames=\"modal\" timeout={0}>\r\n        <div className=\"modal overflowimgcontainer\">\r\n         <div className=\"buttons\">\r\n         \r\n         <i className=\"fal fa-search-minus\" onClick={()=>zoom({type: 'out'})}></i>\r\n         <i class=\"fal fa-redo-alt\" onClick={()=>setZoomamount(1)}></i>\r\n         <i class=\"fal fa-search-plus\" onClick={()=>zoom({type: 'in'})}></i>\r\n         </div>\r\n          <ScrollContainer className='grabbercontainer' hideScrollbars={true}>\r\n          <img src=\"\" alt=\"\" ref={imgsrc}style={{width: 100*zoomamount+'%', height: 100*zoomamount+'%'}} />\r\n          </ScrollContainer>\r\n          <i className=\"fal fa-times\" onClick={() => {setModal(false); setZoomamount(1)}}></i>\r\n        </div>\r\n      </CSSTransition>\r\n      <CSSTransition in={emojipicker}  classNames='emojipicker' timeout={300} >\r\n       <div className=\"emojipicker\" ref={emojipickerref} onMouseOver={()=>typerRef.current.focus()} onClick={()=>typerRef.current.focus()}>\r\n        <div className=\"times\"> <i className=\"fal fa-times\" onClick={()=>setEmojipicker(false)}></i></div>\r\n       <Picker onEmojiClick={onEmojiClick}/>\r\n       </div>\r\n      </CSSTransition>\r\n    </>\r\n  );\r\n}\r\nexport default Dialogue;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}