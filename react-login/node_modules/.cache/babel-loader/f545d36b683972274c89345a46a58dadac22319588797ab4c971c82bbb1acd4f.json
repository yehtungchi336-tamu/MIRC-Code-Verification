{"ast":null,"code":"import _slicedToArray from \"C:/Users/Max/Documents/GitHub/MIRC-Code-Verification/react-login/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"C:\\\\Users\\\\Max\\\\Documents\\\\GitHub\\\\MIRC-Code-Verification\\\\react-login\\\\src\\\\components\\\\msgcomponents\\\\Threedots.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { BrowserRouter as Router, Switch, Route, Link, NavLink, Redirect } from \"react-router-dom\";\nimport Contextoptions from './Contextoptions';\nimport { db } from '../../Fire';\nimport Contextmenu from '../Contextmenu';\nimport { displayName } from 'react-addons-css-transition-group';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Threedots(props) {\n  _s();\n  var _this = this;\n  var msg = props.msg,\n    user = props.user,\n    msgs = props.msgs,\n    convoid = props.convoid;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    visible = _useState2[0],\n    setVisible = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    emojis = _useState4[0],\n    setEmojis = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    msgidedit = _useState6[0],\n    setMsgidedit = _useState6[1];\n  var allemojis = [{\n    class: 'smile-wink yellow',\n    msg: 'Wink'\n  }, {\n    class: 'kiss-beam red',\n    msg: 'Love'\n  }, {\n    class: 'grin-stars yellow',\n    msg: 'Stars'\n  }, {\n    class: 'grin-squint-tears yellow',\n    msg: 'Laugh'\n  }, {\n    class: 'frown red',\n    msg: 'Frown'\n  }, {\n    class: 'heart red',\n    msg: 'Like'\n  }];\n  function sendReaction(opt) {\n    msgs && msgs.map(function (msg) {\n      if (msgidedit === msg.msgid) {\n        var itemindex = msgs.indexOf(msg);\n        if (msg.senderid === user.uid) {\n          msgs[itemindex].reaction1 = \"fad fa-\".concat(opt);\n          db.collection('conversations').doc(convoid).update({\n            messages: msgs\n          });\n        } else {\n          msgs[itemindex].reaction2 = \"fad fa-\".concat(opt);\n          db.collection('conversations').doc(convoid).update({\n            messages: msgs\n          });\n        }\n      }\n    });\n  }\n  var emojisrow = allemojis && allemojis.map(function (emoji) {\n    return /*#__PURE__*/_jsxDEV(\"i\", {\n      className: 'fad fa-' + emoji.class,\n      onClick: function onClick() {\n        sendReaction(emoji.class);\n        setVisible(false);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 14\n    }, _this);\n  });\n  var contextoption = useRef();\n  var emojiref = useRef();\n\n  // function reactionMsg(msgid){\n  //   msgs && msgs.map(msg=>{\n  //     if(msgid===msg.msgid){\n  //       let itemindex = msgs.indexOf(msg)\n  //       msgs[itemindex].reaction=`fad fa-${opt}`\n  //       db.collection('conversations').doc(convoid).update({\n  //           messages: msgs\n  //       })\n  //     }\n  // })\n  // }\n\n  function copyMsg() {\n    var r = document.createRange();\n    var text = document.querySelector(\"#\".concat(msgidedit, \" .msg\"));\n    if (text) {\n      r.selectNode(text);\n      window.getSelection().removeAllRanges();\n      window.getSelection().addRange(r);\n      document.execCommand('copy');\n      window.getSelection().removeAllRanges();\n      setVisible(false);\n    }\n  }\n  function deleteMsg() {\n    msgs && msgs.map(function (msg) {\n      if (msgidedit === msg.msgid && msg.senderid === user.uid) {\n        var itemindex = msgs.indexOf(msg);\n        msgs.splice(itemindex, 1);\n        db.collection('conversations').doc(convoid).update({\n          messages: msgs\n        });\n        setVisible(false);\n      }\n    });\n  }\n  function msgOptions(msg) {}\n  var threedots = useRef();\n  document.addEventListener('click', function (e) {\n    if (e.target !== threedots.current) {\n      setVisible(false);\n      setEmojis(false);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n      ref: threedots,\n      onClick: function onClick(e) {\n        msgOptions(msg);\n        setMsgidedit(msg.msgid);\n        setVisible(!visible);\n      },\n      className: msg.senderid === user.uid ? \"fal fa-ellipsis-v-alt rightdots\" : 'fal fa-ellipsis-v-alt leftdots'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      onContextMenu: function onContextMenu(e) {\n        return e.preventDefault();\n      },\n      onClick: function onClick(e) {\n        return e.stopPropagation();\n      },\n      className: \"flexrow optionsEdit\",\n      ref: contextoption,\n      \"data-id\": msg.msgid,\n      style: {\n        display: visible ? 'flex' : 'none'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"emojisdiv\",\n        children: [/*#__PURE__*/_jsxDEV(Contextoptions, {\n          classNames: 'laugn',\n          icon: 'fad fa-laugh',\n          setState: setEmojis,\n          re: emojiref\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: function onClick(e) {\n            return e.stopPropagation();\n          },\n          className: \"emojisrow flexrow bs\",\n          style: {\n            display: emojis ? 'flex' : 'none',\n            zIndex: 'var(--high-priority)'\n          },\n          children: emojisrow\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Contextoptions, {\n        classNames: 'copy',\n        icon: 'fad fa-copy',\n        function1: function function1() {\n          return copyMsg();\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 8\n      }, this), /*#__PURE__*/_jsxDEV(Contextoptions, {\n        classNames: 'delete',\n        icon: 'fad fa-trash',\n        function1: function function1() {\n          return deleteMsg();\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 8\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Threedots, \"M3U2942kdOksL8UT1yfGBgUpDQw=\");\n_c = Threedots;\nexport default Threedots;\nvar _c;\n$RefreshReg$(_c, \"Threedots\");","map":{"version":3,"names":["React","useState","useEffect","useRef","BrowserRouter","Router","Switch","Route","Link","NavLink","Redirect","Contextoptions","db","Contextmenu","displayName","Threedots","props","msg","user","msgs","convoid","visible","setVisible","emojis","setEmojis","msgidedit","setMsgidedit","allemojis","class","sendReaction","opt","map","msgid","itemindex","indexOf","senderid","uid","reaction1","collection","doc","update","messages","reaction2","emojisrow","emoji","contextoption","emojiref","copyMsg","r","document","createRange","text","querySelector","selectNode","window","getSelection","removeAllRanges","addRange","execCommand","deleteMsg","splice","msgOptions","threedots","addEventListener","e","target","current","preventDefault","stopPropagation","display","zIndex"],"sources":["C:/Users/Max/Documents/GitHub/MIRC-Code-Verification/react-login/src/components/msgcomponents/Threedots.js"],"sourcesContent":["\r\nimport React, {useState, useEffect, useRef} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport Contextoptions from './Contextoptions'\r\nimport {db} from '../../Fire'\r\nimport Contextmenu from '../Contextmenu'\r\nimport { displayName } from 'react-addons-css-transition-group'\r\nfunction Threedots (props) {\r\n  const {msg, user, msgs, convoid}= props\r\n  const [visible, setVisible]=useState(false)\r\n  const [emojis, setEmojis]=useState(false)\r\n  const [msgidedit, setMsgidedit]=useState('')\r\n  const allemojis = [\r\n  {\r\n    class: 'smile-wink yellow',\r\n    msg: 'Wink'\r\n  },\r\n  {\r\n    class: 'kiss-beam red',\r\n    msg: 'Love'\r\n  },\r\n  {\r\n    class: 'grin-stars yellow',\r\n    msg: 'Stars'\r\n  },\r\n  {\r\n    class: 'grin-squint-tears yellow',\r\n    msg: 'Laugh'\r\n  },\r\n  {\r\n    class: 'frown red',\r\n    msg: 'Frown'\r\n  },\r\n  {\r\n    class: 'heart red',\r\n    msg: 'Like'\r\n  }\r\n    ] \r\n    function sendReaction(opt){\r\n      msgs && msgs.map(msg=>{\r\n          if(msgidedit===msg.msgid){\r\n            let itemindex = msgs.indexOf(msg)\r\n            if(msg.senderid===user.uid){\r\n              msgs[itemindex].reaction1=`fad fa-${opt}`\r\n              db.collection('conversations').doc(convoid).update({\r\n                  messages: msgs\r\n              })\r\n            }else {\r\n              msgs[itemindex].reaction2=`fad fa-${opt}`\r\n              db.collection('conversations').doc(convoid).update({\r\n                  messages: msgs\r\n              })\r\n            }\r\n          }\r\n      })\r\n    }\r\n    const emojisrow = allemojis && allemojis.map(emoji=>{\r\n      return <i  className={'fad fa-'+emoji.class} onClick={()=>{sendReaction(emoji.class); setVisible(false)}}></i>\r\n    })\r\n    const contextoption = useRef()\r\n    const emojiref = useRef()\r\n\r\n  // function reactionMsg(msgid){\r\n  //   msgs && msgs.map(msg=>{\r\n  //     if(msgid===msg.msgid){\r\n  //       let itemindex = msgs.indexOf(msg)\r\n  //       msgs[itemindex].reaction=`fad fa-${opt}`\r\n  //       db.collection('conversations').doc(convoid).update({\r\n  //           messages: msgs\r\n  //       })\r\n  //     }\r\n  // })\r\n  // }\r\n\r\n  function copyMsg(){\r\n    var r = document.createRange()\r\n    let text = document.querySelector(`#${msgidedit} .msg`)\r\n    if(text){\r\n      r.selectNode(text)\r\n      window.getSelection().removeAllRanges()\r\n      window.getSelection().addRange(r)\r\n      document.execCommand('copy')\r\n      window.getSelection().removeAllRanges()\r\n      setVisible(false)\r\n    }\r\n  }\r\n  function deleteMsg(){\r\n    msgs && msgs.map(msg=>{\r\n      if(msgidedit===msg.msgid&&msg.senderid===user.uid){\r\n        let itemindex = msgs.indexOf(msg)\r\n        msgs.splice(itemindex, 1) \r\n        db.collection('conversations').doc(convoid).update({\r\n            messages: msgs\r\n        })\r\n        setVisible(false)\r\n      }\r\n  })\r\n\r\n  }\r\n \r\n  function msgOptions(msg){\r\n\r\n  }\r\n  const threedots = useRef()\r\n  document.addEventListener('click', function(e){\r\n  if(e.target!==threedots.current){\r\n    setVisible(false)\r\n    setEmojis(false)\r\n  }\r\n})\r\n  return (\r\n    <>\r\n      <i ref={threedots}onClick={(e)=>{msgOptions(msg); setMsgidedit(msg.msgid); setVisible(!visible)}} className={msg.senderid === user.uid ?\"fal fa-ellipsis-v-alt rightdots\":'fal fa-ellipsis-v-alt leftdots'}></i>\r\n      <div onContextMenu={(e)=>e.preventDefault()} onClick={(e)=>e.stopPropagation()} className='flexrow optionsEdit' ref={contextoption} data-id={msg.msgid} style={{display: visible?'flex':'none'}}>\r\n      <div className=\"emojisdiv\">\r\n      <Contextoptions classNames={'laugn'} icon={'fad fa-laugh'} setState={setEmojis} re={emojiref}/>\r\n      <div  onClick={(e)=>e.stopPropagation()} className=\"emojisrow flexrow bs\" style={{display: emojis?'flex':'none',  zIndex: 'var(--high-priority)'}}>\r\n        {emojisrow}\r\n      </div>\r\n      </div>\r\n       <Contextoptions classNames={'copy'} icon={'fad fa-copy'} function1={()=>copyMsg()}/>\r\n       <Contextoptions classNames={'delete'} icon={'fad fa-trash'} function1={()=>deleteMsg()}/>\r\n      </div>\r\n    </>\r\n      )\r\n}\r\nexport default Threedots"],"mappings":";;;AACA,OAAOA,KAAK,IAAGC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAO,OAAO;AACxD,SAASC,aAAa,IAAIC,MAAM,EAACC,MAAM,EAACC,KAAK,EAACC,IAAI,EAACC,OAAO,EAAEC,QAAQ,QAAQ,kBAAkB;AAC9F,OAAOC,cAAc,MAAM,kBAAkB;AAC7C,SAAQC,EAAE,QAAO,YAAY;AAC7B,OAAOC,WAAW,MAAM,gBAAgB;AACxC,SAASC,WAAW,QAAQ,mCAAmC;AAAA;AAAA;AAC/D,SAASC,SAAS,CAAEC,KAAK,EAAE;EAAA;EAAA;EACzB,IAAOC,GAAG,GAAwBD,KAAK,CAAhCC,GAAG;IAAEC,IAAI,GAAkBF,KAAK,CAA3BE,IAAI;IAAEC,IAAI,GAAYH,KAAK,CAArBG,IAAI;IAAEC,OAAO,GAAGJ,KAAK,CAAfI,OAAO;EAC/B,gBAA4BnB,QAAQ,CAAC,KAAK,CAAC;IAAA;IAApCoB,OAAO;IAAEC,UAAU;EAC1B,iBAA0BrB,QAAQ,CAAC,KAAK,CAAC;IAAA;IAAlCsB,MAAM;IAAEC,SAAS;EACxB,iBAAgCvB,QAAQ,CAAC,EAAE,CAAC;IAAA;IAArCwB,SAAS;IAAEC,YAAY;EAC9B,IAAMC,SAAS,GAAG,CAClB;IACEC,KAAK,EAAE,mBAAmB;IAC1BX,GAAG,EAAE;EACP,CAAC,EACD;IACEW,KAAK,EAAE,eAAe;IACtBX,GAAG,EAAE;EACP,CAAC,EACD;IACEW,KAAK,EAAE,mBAAmB;IAC1BX,GAAG,EAAE;EACP,CAAC,EACD;IACEW,KAAK,EAAE,0BAA0B;IACjCX,GAAG,EAAE;EACP,CAAC,EACD;IACEW,KAAK,EAAE,WAAW;IAClBX,GAAG,EAAE;EACP,CAAC,EACD;IACEW,KAAK,EAAE,WAAW;IAClBX,GAAG,EAAE;EACP,CAAC,CACE;EACD,SAASY,YAAY,CAACC,GAAG,EAAC;IACxBX,IAAI,IAAIA,IAAI,CAACY,GAAG,CAAC,UAAAd,GAAG,EAAE;MAClB,IAAGQ,SAAS,KAAGR,GAAG,CAACe,KAAK,EAAC;QACvB,IAAIC,SAAS,GAAGd,IAAI,CAACe,OAAO,CAACjB,GAAG,CAAC;QACjC,IAAGA,GAAG,CAACkB,QAAQ,KAAGjB,IAAI,CAACkB,GAAG,EAAC;UACzBjB,IAAI,CAACc,SAAS,CAAC,CAACI,SAAS,oBAAWP,GAAG,CAAE;UACzClB,EAAE,CAAC0B,UAAU,CAAC,eAAe,CAAC,CAACC,GAAG,CAACnB,OAAO,CAAC,CAACoB,MAAM,CAAC;YAC/CC,QAAQ,EAAEtB;UACd,CAAC,CAAC;QACJ,CAAC,MAAK;UACJA,IAAI,CAACc,SAAS,CAAC,CAACS,SAAS,oBAAWZ,GAAG,CAAE;UACzClB,EAAE,CAAC0B,UAAU,CAAC,eAAe,CAAC,CAACC,GAAG,CAACnB,OAAO,CAAC,CAACoB,MAAM,CAAC;YAC/CC,QAAQ,EAAEtB;UACd,CAAC,CAAC;QACJ;MACF;IACJ,CAAC,CAAC;EACJ;EACA,IAAMwB,SAAS,GAAGhB,SAAS,IAAIA,SAAS,CAACI,GAAG,CAAC,UAAAa,KAAK,EAAE;IAClD,oBAAO;MAAI,SAAS,EAAE,SAAS,GAACA,KAAK,CAAChB,KAAM;MAAC,OAAO,EAAE,mBAAI;QAACC,YAAY,CAACe,KAAK,CAAChB,KAAK,CAAC;QAAEN,UAAU,CAAC,KAAK,CAAC;MAAA;IAAE;MAAA;MAAA;MAAA;IAAA,SAAK;EAChH,CAAC,CAAC;EACF,IAAMuB,aAAa,GAAG1C,MAAM,EAAE;EAC9B,IAAM2C,QAAQ,GAAG3C,MAAM,EAAE;;EAE3B;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,SAAS4C,OAAO,GAAE;IAChB,IAAIC,CAAC,GAAGC,QAAQ,CAACC,WAAW,EAAE;IAC9B,IAAIC,IAAI,GAAGF,QAAQ,CAACG,aAAa,YAAK3B,SAAS,WAAQ;IACvD,IAAG0B,IAAI,EAAC;MACNH,CAAC,CAACK,UAAU,CAACF,IAAI,CAAC;MAClBG,MAAM,CAACC,YAAY,EAAE,CAACC,eAAe,EAAE;MACvCF,MAAM,CAACC,YAAY,EAAE,CAACE,QAAQ,CAACT,CAAC,CAAC;MACjCC,QAAQ,CAACS,WAAW,CAAC,MAAM,CAAC;MAC5BJ,MAAM,CAACC,YAAY,EAAE,CAACC,eAAe,EAAE;MACvClC,UAAU,CAAC,KAAK,CAAC;IACnB;EACF;EACA,SAASqC,SAAS,GAAE;IAClBxC,IAAI,IAAIA,IAAI,CAACY,GAAG,CAAC,UAAAd,GAAG,EAAE;MACpB,IAAGQ,SAAS,KAAGR,GAAG,CAACe,KAAK,IAAEf,GAAG,CAACkB,QAAQ,KAAGjB,IAAI,CAACkB,GAAG,EAAC;QAChD,IAAIH,SAAS,GAAGd,IAAI,CAACe,OAAO,CAACjB,GAAG,CAAC;QACjCE,IAAI,CAACyC,MAAM,CAAC3B,SAAS,EAAE,CAAC,CAAC;QACzBrB,EAAE,CAAC0B,UAAU,CAAC,eAAe,CAAC,CAACC,GAAG,CAACnB,OAAO,CAAC,CAACoB,MAAM,CAAC;UAC/CC,QAAQ,EAAEtB;QACd,CAAC,CAAC;QACFG,UAAU,CAAC,KAAK,CAAC;MACnB;IACJ,CAAC,CAAC;EAEF;EAEA,SAASuC,UAAU,CAAC5C,GAAG,EAAC,CAExB;EACA,IAAM6C,SAAS,GAAG3D,MAAM,EAAE;EAC1B8C,QAAQ,CAACc,gBAAgB,CAAC,OAAO,EAAE,UAASC,CAAC,EAAC;IAC9C,IAAGA,CAAC,CAACC,MAAM,KAAGH,SAAS,CAACI,OAAO,EAAC;MAC9B5C,UAAU,CAAC,KAAK,CAAC;MACjBE,SAAS,CAAC,KAAK,CAAC;IAClB;EACF,CAAC,CAAC;EACA,oBACE;IAAA,wBACE;MAAG,GAAG,EAAEsC,SAAU;MAAA,OAAO,EAAE,iBAACE,CAAC,EAAG;QAACH,UAAU,CAAC5C,GAAG,CAAC;QAAES,YAAY,CAACT,GAAG,CAACe,KAAK,CAAC;QAAEV,UAAU,CAAC,CAACD,OAAO,CAAC;MAAA,CAAE;MAAC,SAAS,EAAEJ,GAAG,CAACkB,QAAQ,KAAKjB,IAAI,CAACkB,GAAG,GAAE,iCAAiC,GAAC;IAAiC;MAAA;MAAA;MAAA;IAAA,QAAK,eAChN;MAAK,aAAa,EAAE,uBAAC4B,CAAC;QAAA,OAAGA,CAAC,CAACG,cAAc,EAAE;MAAA,CAAC;MAAC,OAAO,EAAE,iBAACH,CAAC;QAAA,OAAGA,CAAC,CAACI,eAAe,EAAE;MAAA,CAAC;MAAC,SAAS,EAAC,qBAAqB;MAAC,GAAG,EAAEvB,aAAc;MAAC,WAAS5B,GAAG,CAACe,KAAM;MAAC,KAAK,EAAE;QAACqC,OAAO,EAAEhD,OAAO,GAAC,MAAM,GAAC;MAAM,CAAE;MAAA,wBAChM;QAAK,SAAS,EAAC,WAAW;QAAA,wBAC1B,QAAC,cAAc;UAAC,UAAU,EAAE,OAAQ;UAAC,IAAI,EAAE,cAAe;UAAC,QAAQ,EAAEG,SAAU;UAAC,EAAE,EAAEsB;QAAS;UAAA;UAAA;UAAA;QAAA,QAAE,eAC/F;UAAM,OAAO,EAAE,iBAACkB,CAAC;YAAA,OAAGA,CAAC,CAACI,eAAe,EAAE;UAAA,CAAC;UAAC,SAAS,EAAC,sBAAsB;UAAC,KAAK,EAAE;YAACC,OAAO,EAAE9C,MAAM,GAAC,MAAM,GAAC,MAAM;YAAG+C,MAAM,EAAE;UAAsB,CAAE;UAAA,UAC/I3B;QAAS;UAAA;UAAA;UAAA;QAAA,QACN;MAAA;QAAA;QAAA;QAAA;MAAA,QACA,eACL,QAAC,cAAc;QAAC,UAAU,EAAE,MAAO;QAAC,IAAI,EAAE,aAAc;QAAC,SAAS,EAAE;UAAA,OAAII,OAAO,EAAE;QAAA;MAAC;QAAA;QAAA;QAAA;MAAA,QAAE,eACpF,QAAC,cAAc;QAAC,UAAU,EAAE,QAAS;QAAC,IAAI,EAAE,cAAe;QAAC,SAAS,EAAE;UAAA,OAAIY,SAAS,EAAE;QAAA;MAAC;QAAA;QAAA;QAAA;MAAA,QAAE;IAAA;MAAA;MAAA;MAAA;IAAA,QACpF;EAAA,gBACL;AAEP;AAAC,GAtHQ5C,SAAS;AAAA,KAATA,SAAS;AAuHlB,eAAeA,SAAS;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}