{"ast":null,"code":"import _slicedToArray from\"/Users/jinsonwu/Desktop/MIRC-Code-Verification/react-login/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef}from'react';import{BrowserRouter as Router,Switch,Route,Link,NavLink,Redirect}from\"react-router-dom\";import Contextoptions from'./Contextoptions';import{db}from'../../Fire';import Contextmenu from'../Contextmenu';import{displayName}from'react-addons-css-transition-group';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Threedots(props){var msg=props.msg,user=props.user,msgs=props.msgs,convoid=props.convoid;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),visible=_useState2[0],setVisible=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),emojis=_useState4[0],setEmojis=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),msgidedit=_useState6[0],setMsgidedit=_useState6[1];var allemojis=[{class:'smile-wink yellow',msg:'Wink'},{class:'kiss-beam red',msg:'Love'},{class:'grin-stars yellow',msg:'Stars'},{class:'grin-squint-tears yellow',msg:'Laugh'},{class:'frown red',msg:'Frown'},{class:'heart red',msg:'Like'}];function sendReaction(opt){msgs&&msgs.map(function(msg){if(msgidedit===msg.msgid){var itemindex=msgs.indexOf(msg);if(msg.senderid===user.uid){msgs[itemindex].reaction1=\"fad fa-\".concat(opt);db.collection('conversations').doc(convoid).update({messages:msgs});}else{msgs[itemindex].reaction2=\"fad fa-\".concat(opt);db.collection('conversations').doc(convoid).update({messages:msgs});}}});}var emojisrow=allemojis&&allemojis.map(function(emoji){return/*#__PURE__*/_jsx(\"i\",{className:'fad fa-'+emoji.class,onClick:function onClick(){sendReaction(emoji.class);setVisible(false);}});});var contextoption=useRef();var emojiref=useRef();// function reactionMsg(msgid){\n//   msgs && msgs.map(msg=>{\n//     if(msgid===msg.msgid){\n//       let itemindex = msgs.indexOf(msg)\n//       msgs[itemindex].reaction=`fad fa-${opt}`\n//       db.collection('conversations').doc(convoid).update({\n//           messages: msgs\n//       })\n//     }\n// })\n// }\nfunction copyMsg(){var r=document.createRange();var text=document.querySelector(\"#\".concat(msgidedit,\" .msg\"));if(text){r.selectNode(text);window.getSelection().removeAllRanges();window.getSelection().addRange(r);document.execCommand('copy');window.getSelection().removeAllRanges();setVisible(false);}}function deleteMsg(){msgs&&msgs.map(function(msg){if(msgidedit===msg.msgid&&msg.senderid===user.uid){var itemindex=msgs.indexOf(msg);msgs.splice(itemindex,1);db.collection('conversations').doc(convoid).update({messages:msgs});setVisible(false);}});}function msgOptions(msg){}var threedots=useRef();document.addEventListener('click',function(e){if(e.target!==threedots.current){setVisible(false);setEmojis(false);}});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"i\",{ref:threedots,onClick:function onClick(e){msgOptions(msg);setMsgidedit(msg.msgid);setVisible(!visible);},className:msg.senderid===user.uid?\"fal fa-ellipsis-v-alt rightdots\":'fal fa-ellipsis-v-alt leftdots'}),/*#__PURE__*/_jsxs(\"div\",{onContextMenu:function onContextMenu(e){return e.preventDefault();},onClick:function onClick(e){return e.stopPropagation();},className:\"flexrow optionsEdit\",ref:contextoption,\"data-id\":msg.msgid,style:{display:visible?'flex':'none'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"emojisdiv\",children:[/*#__PURE__*/_jsx(Contextoptions,{classNames:'laugn',icon:'fad fa-laugh',setState:setEmojis,re:emojiref}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(e){return e.stopPropagation();},className:\"emojisrow flexrow bs\",style:{display:emojis?'flex':'none',zIndex:'var(--high-priority)'},children:emojisrow})]}),/*#__PURE__*/_jsx(Contextoptions,{classNames:'copy',icon:'fad fa-copy',function1:function function1(){return copyMsg();}}),/*#__PURE__*/_jsx(Contextoptions,{classNames:'delete',icon:'fad fa-trash',function1:function function1(){return deleteMsg();}})]})]});}export default Threedots;","map":{"version":3,"names":["React","useState","useEffect","useRef","BrowserRouter","Router","Switch","Route","Link","NavLink","Redirect","Contextoptions","db","Contextmenu","displayName","Threedots","props","msg","user","msgs","convoid","visible","setVisible","emojis","setEmojis","msgidedit","setMsgidedit","allemojis","class","sendReaction","opt","map","msgid","itemindex","indexOf","senderid","uid","reaction1","collection","doc","update","messages","reaction2","emojisrow","emoji","contextoption","emojiref","copyMsg","r","document","createRange","text","querySelector","selectNode","window","getSelection","removeAllRanges","addRange","execCommand","deleteMsg","splice","msgOptions","threedots","addEventListener","e","target","current","preventDefault","stopPropagation","display","zIndex"],"sources":["/Users/jinsonwu/Desktop/MIRC-Code-Verification/react-login/src/components/msgcomponents/Threedots.js"],"sourcesContent":["\r\nimport React, {useState, useEffect, useRef} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect } from \"react-router-dom\" \r\nimport Contextoptions from './Contextoptions'\r\nimport {db} from '../../Fire'\r\nimport Contextmenu from '../Contextmenu'\r\nimport { displayName } from 'react-addons-css-transition-group'\r\nfunction Threedots (props) {\r\n  const {msg, user, msgs, convoid}= props\r\n  const [visible, setVisible]=useState(false)\r\n  const [emojis, setEmojis]=useState(false)\r\n  const [msgidedit, setMsgidedit]=useState('')\r\n  const allemojis = [\r\n  {\r\n    class: 'smile-wink yellow',\r\n    msg: 'Wink'\r\n  },\r\n  {\r\n    class: 'kiss-beam red',\r\n    msg: 'Love'\r\n  },\r\n  {\r\n    class: 'grin-stars yellow',\r\n    msg: 'Stars'\r\n  },\r\n  {\r\n    class: 'grin-squint-tears yellow',\r\n    msg: 'Laugh'\r\n  },\r\n  {\r\n    class: 'frown red',\r\n    msg: 'Frown'\r\n  },\r\n  {\r\n    class: 'heart red',\r\n    msg: 'Like'\r\n  }\r\n    ] \r\n    function sendReaction(opt){\r\n      msgs && msgs.map(msg=>{\r\n          if(msgidedit===msg.msgid){\r\n            let itemindex = msgs.indexOf(msg)\r\n            if(msg.senderid===user.uid){\r\n              msgs[itemindex].reaction1=`fad fa-${opt}`\r\n              db.collection('conversations').doc(convoid).update({\r\n                  messages: msgs\r\n              })\r\n            }else {\r\n              msgs[itemindex].reaction2=`fad fa-${opt}`\r\n              db.collection('conversations').doc(convoid).update({\r\n                  messages: msgs\r\n              })\r\n            }\r\n          }\r\n      })\r\n    }\r\n    const emojisrow = allemojis && allemojis.map(emoji=>{\r\n      return <i  className={'fad fa-'+emoji.class} onClick={()=>{sendReaction(emoji.class); setVisible(false)}}></i>\r\n    })\r\n    const contextoption = useRef()\r\n    const emojiref = useRef()\r\n\r\n  // function reactionMsg(msgid){\r\n  //   msgs && msgs.map(msg=>{\r\n  //     if(msgid===msg.msgid){\r\n  //       let itemindex = msgs.indexOf(msg)\r\n  //       msgs[itemindex].reaction=`fad fa-${opt}`\r\n  //       db.collection('conversations').doc(convoid).update({\r\n  //           messages: msgs\r\n  //       })\r\n  //     }\r\n  // })\r\n  // }\r\n\r\n  function copyMsg(){\r\n    var r = document.createRange()\r\n    let text = document.querySelector(`#${msgidedit} .msg`)\r\n    if(text){\r\n      r.selectNode(text)\r\n      window.getSelection().removeAllRanges()\r\n      window.getSelection().addRange(r)\r\n      document.execCommand('copy')\r\n      window.getSelection().removeAllRanges()\r\n      setVisible(false)\r\n    }\r\n  }\r\n  function deleteMsg(){\r\n    msgs && msgs.map(msg=>{\r\n      if(msgidedit===msg.msgid&&msg.senderid===user.uid){\r\n        let itemindex = msgs.indexOf(msg)\r\n        msgs.splice(itemindex, 1) \r\n        db.collection('conversations').doc(convoid).update({\r\n            messages: msgs\r\n        })\r\n        setVisible(false)\r\n      }\r\n  })\r\n\r\n  }\r\n \r\n  function msgOptions(msg){\r\n\r\n  }\r\n  const threedots = useRef()\r\n  document.addEventListener('click', function(e){\r\n  if(e.target!==threedots.current){\r\n    setVisible(false)\r\n    setEmojis(false)\r\n  }\r\n})\r\n  return (\r\n    <>\r\n      <i ref={threedots}onClick={(e)=>{msgOptions(msg); setMsgidedit(msg.msgid); setVisible(!visible)}} className={msg.senderid === user.uid ?\"fal fa-ellipsis-v-alt rightdots\":'fal fa-ellipsis-v-alt leftdots'}></i>\r\n      <div onContextMenu={(e)=>e.preventDefault()} onClick={(e)=>e.stopPropagation()} className='flexrow optionsEdit' ref={contextoption} data-id={msg.msgid} style={{display: visible?'flex':'none'}}>\r\n      <div className=\"emojisdiv\">\r\n      <Contextoptions classNames={'laugn'} icon={'fad fa-laugh'} setState={setEmojis} re={emojiref}/>\r\n      <div  onClick={(e)=>e.stopPropagation()} className=\"emojisrow flexrow bs\" style={{display: emojis?'flex':'none',  zIndex: 'var(--high-priority)'}}>\r\n        {emojisrow}\r\n      </div>\r\n      </div>\r\n       <Contextoptions classNames={'copy'} icon={'fad fa-copy'} function1={()=>copyMsg()}/>\r\n       <Contextoptions classNames={'delete'} icon={'fad fa-trash'} function1={()=>deleteMsg()}/>\r\n      </div>\r\n    </>\r\n      )\r\n}\r\nexport default Threedots"],"mappings":"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"},"metadata":{},"sourceType":"module"}