{"ast":null,"code":"/*!\nFullCalendar v5.5.1\nDocs & License: https://fullcalendar.io/\n(c) 2020 Adam Shaw\n*/\nimport './vdom.js';\nimport { __extends, __assign } from 'tslib';\nimport { render, createElement, CalendarRoot, CustomContentRenderContext, CalendarContent, unmountComponentAtNode, flushToDom, DelayedRunner, CalendarDataManager, isArraysEqual, applyStyleProp, CalendarApi } from '@fullcalendar/common';\nexport * from '@fullcalendar/common';\nvar Calendar = /** @class */function (_super) {\n  __extends(Calendar, _super);\n  function Calendar(el, optionOverrides) {\n    if (optionOverrides === void 0) {\n      optionOverrides = {};\n    }\n    var _this = _super.call(this) || this;\n    _this.isRendering = false;\n    _this.isRendered = false;\n    _this.currentClassNames = [];\n    _this.customContentRenderId = 0; // will affect custom generated classNames?\n    _this.handleAction = function (action) {\n      // actions we know we want to render immediately\n      switch (action.type) {\n        case 'SET_EVENT_DRAG':\n        case 'SET_EVENT_RESIZE':\n          _this.renderRunner.tryDrain();\n      }\n    };\n    _this.handleData = function (data) {\n      _this.currentData = data;\n      _this.renderRunner.request(data.calendarOptions.rerenderDelay);\n    };\n    _this.handleRenderRequest = function () {\n      if (_this.isRendering) {\n        _this.isRendered = true;\n        var currentData_1 = _this.currentData;\n        render(createElement(CalendarRoot, {\n          options: currentData_1.calendarOptions,\n          theme: currentData_1.theme,\n          emitter: currentData_1.emitter\n        }, function (classNames, height, isHeightAuto, forPrint) {\n          _this.setClassNames(classNames);\n          _this.setHeight(height);\n          return createElement(CustomContentRenderContext.Provider, {\n            value: _this.customContentRenderId\n          }, createElement(CalendarContent, __assign({\n            isHeightAuto: isHeightAuto,\n            forPrint: forPrint\n          }, currentData_1)));\n        }), _this.el);\n      } else if (_this.isRendered) {\n        _this.isRendered = false;\n        unmountComponentAtNode(_this.el);\n        _this.setClassNames([]);\n        _this.setHeight('');\n      }\n      flushToDom();\n    };\n    _this.el = el;\n    _this.renderRunner = new DelayedRunner(_this.handleRenderRequest);\n    new CalendarDataManager({\n      optionOverrides: optionOverrides,\n      calendarApi: _this,\n      onAction: _this.handleAction,\n      onData: _this.handleData\n    });\n    return _this;\n  }\n  Object.defineProperty(Calendar.prototype, \"view\", {\n    get: function get() {\n      return this.currentData.viewApi;\n    } // for public API\n    ,\n\n    enumerable: false,\n    configurable: true\n  });\n  Calendar.prototype.render = function () {\n    var wasRendering = this.isRendering;\n    if (!wasRendering) {\n      this.isRendering = true;\n    } else {\n      this.customContentRenderId += 1;\n    }\n    this.renderRunner.request();\n    if (wasRendering) {\n      this.updateSize();\n    }\n  };\n  Calendar.prototype.destroy = function () {\n    if (this.isRendering) {\n      this.isRendering = false;\n      this.renderRunner.request();\n    }\n  };\n  Calendar.prototype.updateSize = function () {\n    _super.prototype.updateSize.call(this);\n    flushToDom();\n  };\n  Calendar.prototype.batchRendering = function (func) {\n    this.renderRunner.pause('batchRendering');\n    func();\n    this.renderRunner.resume('batchRendering');\n  };\n  Calendar.prototype.pauseRendering = function () {\n    this.renderRunner.pause('pauseRendering');\n  };\n  Calendar.prototype.resumeRendering = function () {\n    this.renderRunner.resume('pauseRendering', true);\n  };\n  Calendar.prototype.resetOptions = function (optionOverrides, append) {\n    this.currentDataManager.resetOptions(optionOverrides, append);\n  };\n  Calendar.prototype.setClassNames = function (classNames) {\n    if (!isArraysEqual(classNames, this.currentClassNames)) {\n      var classList = this.el.classList;\n      for (var _i = 0, _a = this.currentClassNames; _i < _a.length; _i++) {\n        var className = _a[_i];\n        classList.remove(className);\n      }\n      for (var _b = 0, classNames_1 = classNames; _b < classNames_1.length; _b++) {\n        var className = classNames_1[_b];\n        classList.add(className);\n      }\n      this.currentClassNames = classNames;\n    }\n  };\n  Calendar.prototype.setHeight = function (height) {\n    applyStyleProp(this.el, 'height', height);\n  };\n  return Calendar;\n}(CalendarApi);\nexport { Calendar };","map":{"version":3,"sources":["src/Calendar.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  CalendarOptions, Action, CalendarContent, render, createElement, DelayedRunner, CssDimValue, applyStyleProp,\n  CalendarApi, CalendarRoot, isArraysEqual, CalendarDataManager, CalendarData,\n  CustomContentRenderContext, flushToDom, unmountComponentAtNode,\n} from '@fullcalendar/common'\n\nexport class Calendar extends CalendarApi {\n  currentData: CalendarData\n  renderRunner: DelayedRunner\n  el: HTMLElement\n  isRendering = false\n  isRendered = false\n  currentClassNames: string[] = []\n  customContentRenderId = 0 // will affect custom generated classNames?\n\n  get view() { return this.currentData.viewApi } // for public API\n\n  constructor(el: HTMLElement, optionOverrides: CalendarOptions = {}) {\n    super()\n\n    this.el = el\n    this.renderRunner = new DelayedRunner(this.handleRenderRequest)\n\n    new CalendarDataManager({ // eslint-disable-line no-new\n      optionOverrides,\n      calendarApi: this,\n      onAction: this.handleAction,\n      onData: this.handleData,\n    })\n  }\n\n  handleAction = (action: Action) => {\n    // actions we know we want to render immediately\n    switch (action.type) {\n      case 'SET_EVENT_DRAG':\n      case 'SET_EVENT_RESIZE':\n        this.renderRunner.tryDrain()\n    }\n  }\n\n  handleData = (data: CalendarData) => {\n    this.currentData = data\n    this.renderRunner.request(data.calendarOptions.rerenderDelay)\n  }\n\n  handleRenderRequest = () => {\n    if (this.isRendering) {\n      this.isRendered = true\n      let { currentData } = this\n\n      render(\n        <CalendarRoot options={currentData.calendarOptions} theme={currentData.theme} emitter={currentData.emitter}>\n          {(classNames, height, isHeightAuto, forPrint) => {\n            this.setClassNames(classNames)\n            this.setHeight(height)\n\n            return (\n              <CustomContentRenderContext.Provider value={this.customContentRenderId}>\n                <CalendarContent\n                  isHeightAuto={isHeightAuto}\n                  forPrint={forPrint}\n                  {...currentData}\n                />\n              </CustomContentRenderContext.Provider>\n            )\n          }}\n        </CalendarRoot>,\n        this.el,\n      )\n    } else if (this.isRendered) {\n      this.isRendered = false\n      unmountComponentAtNode(this.el)\n      this.setClassNames([])\n      this.setHeight('')\n    }\n\n    flushToDom()\n  }\n\n  render() {\n    let wasRendering = this.isRendering\n\n    if (!wasRendering) {\n      this.isRendering = true\n    } else {\n      this.customContentRenderId += 1\n    }\n\n    this.renderRunner.request()\n\n    if (wasRendering) {\n      this.updateSize()\n    }\n  }\n\n  destroy() {\n    if (this.isRendering) {\n      this.isRendering = false\n      this.renderRunner.request()\n    }\n  }\n\n  updateSize() {\n    super.updateSize()\n    flushToDom()\n  }\n\n  batchRendering(func) {\n    this.renderRunner.pause('batchRendering')\n    func()\n    this.renderRunner.resume('batchRendering')\n  }\n\n  pauseRendering() { // available to plugins\n    this.renderRunner.pause('pauseRendering')\n  }\n\n  resumeRendering() { // available to plugins\n    this.renderRunner.resume('pauseRendering', true)\n  }\n\n  resetOptions(optionOverrides, append?) {\n    this.currentDataManager.resetOptions(optionOverrides, append)\n  }\n\n  setClassNames(classNames: string[]) {\n    if (!isArraysEqual(classNames, this.currentClassNames)) {\n      let { classList } = this.el\n\n      for (let className of this.currentClassNames) {\n        classList.remove(className)\n      }\n\n      for (let className of classNames) {\n        classList.add(className)\n      }\n\n      this.currentClassNames = classNames\n    }\n  }\n\n  setHeight(height: CssDimValue) {\n    applyStyleProp(this.el, 'height', height)\n  }\n}\n"]},"metadata":{},"sourceType":"module"}