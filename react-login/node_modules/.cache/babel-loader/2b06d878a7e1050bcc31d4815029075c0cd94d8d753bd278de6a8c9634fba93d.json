{"ast":null,"code":"import _slicedToArray from \"C:/Users/Max/Documents/GitHub/MIRC-Code-Verification/react-login/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"C:\\\\Users\\\\Max\\\\Documents\\\\GitHub\\\\MIRC-Code-Verification\\\\react-login\\\\src\\\\components\\\\Dialogue.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useContext } from \"react\";\nimport { NavLink, Route, Link } from \"react-router-dom\";\nimport Users from \"./Users\";\nimport firebase from \"firebase\";\nimport { db } from \"../Fire\";\nimport Contextmenu from \"./Contextmenu\";\nimport { FilePond, File, registerPlugin } from \"react-filepond\";\nimport \"filepond/dist/filepond.min.css\";\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\nimport ElapsedTime from \"./Elapsedtime\";\nimport { ContextApp } from \"../ContextAPI\";\nimport Hoverableicondiv from \"./Hoverableiconsdiv\";\nimport InnerImageZoom from \"react-inner-image-zoom\";\nimport Iframe from \"./msgcomponents/Iframe\";\nimport Img from './msgcomponents/Img';\nimport Filemsg from './msgcomponents/File';\nimport P from './msgcomponents/P';\nimport Recording from \"./msgcomponents/Recording\";\nimport Gif from \"./Gifs.js/Gif\";\nimport ReactTimeAgo from 'react-time-ago';\nimport ReactImageMagnify from 'react-image-magnify';\nimport Contextoptions from \"./msgcomponents/Contextoptions\";\nimport Threedots from \"./msgcomponents/Threedots\";\nimport ScrollContainer from 'react-indiana-drag-scroll';\nimport { ReactTinyLink } from 'react-tiny-link';\nimport Picker from 'emoji-picker-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Dialogue(props) {\n  _s();\n  var _this = this;\n  var _useContext = useContext(ContextApp),\n    themecolor = _useContext.themecolor,\n    notifi = _useContext.notifi,\n    setNotifi = _useContext.setNotifi,\n    notificont = _useContext.notificont,\n    setNotificont = _useContext.setNotificont;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    gif = _useState2[0],\n    setGif = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    msgs = _useState4[0],\n    setMsgs = _useState4[1];\n  var _useState5 = useState(\"\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    msgstring = _useState6[0],\n    setMsgstring = _useState6[1];\n  var _useState7 = useState(0),\n    _useState8 = _slicedToArray(_useState7, 2),\n    updateelapsed = _useState8[0],\n    setUpdateelapsed = _useState8[1];\n  var _useState9 = useState(false),\n    _useState10 = _slicedToArray(_useState9, 2),\n    typing = _useState10[0],\n    setTyping = _useState10[1];\n  var _useState11 = useState(false),\n    _useState12 = _slicedToArray(_useState11, 2),\n    realtyping = _useState12[0],\n    setRealtyping = _useState12[1];\n  var _useState13 = useState(\"\"),\n    _useState14 = _slicedToArray(_useState13, 2),\n    typerid = _useState14[0],\n    setTyperid = _useState14[1];\n  var _useState15 = useState(false),\n    _useState16 = _slicedToArray(_useState15, 2),\n    activestatus = _useState16[0],\n    setActivestatus = _useState16[1];\n  var _useState17 = useState(\"\"),\n    _useState18 = _slicedToArray(_useState17, 2),\n    recipname = _useState18[0],\n    setRecipname = _useState18[1];\n  var _useState19 = useState(\"\"),\n    _useState20 = _slicedToArray(_useState19, 2),\n    recipimg = _useState20[0],\n    setRecipimg = _useState20[1];\n  var _useState21 = useState(\"\"),\n    _useState22 = _slicedToArray(_useState21, 2),\n    recipcity = _useState22[0],\n    setRecipcity = _useState22[1];\n  var _useState23 = useState(\"\"),\n    _useState24 = _slicedToArray(_useState23, 2),\n    recipcountry = _useState24[0],\n    setRecipcountry = _useState24[1];\n  var _useState25 = useState(\"\"),\n    _useState26 = _slicedToArray(_useState25, 2),\n    userimg = _useState26[0],\n    setUserimg = _useState26[1];\n  var _useState27 = useState(\"\"),\n    _useState28 = _slicedToArray(_useState27, 2),\n    username = _useState28[0],\n    setUsername = _useState28[1];\n  var _useState29 = useState(false),\n    _useState30 = _slicedToArray(_useState29, 2),\n    visible = _useState30[0],\n    setVisible = _useState30[1];\n  var _useState31 = useState(false),\n    _useState32 = _slicedToArray(_useState31, 2),\n    contextmenu = _useState32[0],\n    setContextmenu = _useState32[1];\n  var _useState33 = useState({\n      top: 0,\n      left: 0\n    }),\n    _useState34 = _slicedToArray(_useState33, 2),\n    contextstyle = _useState34[0],\n    setContextstyle = _useState34[1];\n  var _useState35 = useState(true),\n    _useState36 = _slicedToArray(_useState35, 2),\n    notifibool = _useState36[0],\n    setNotifibool = _useState36[1];\n  var _useState37 = useState(\"\"),\n    _useState38 = _slicedToArray(_useState37, 2),\n    emojitype = _useState38[0],\n    setEmojitype = _useState38[1];\n  var _useState39 = useState(true),\n    _useState40 = _slicedToArray(_useState39, 2),\n    loader = _useState40[0],\n    setLoader = _useState40[1];\n  var _useState41 = useState(true),\n    _useState42 = _slicedToArray(_useState41, 2),\n    loading = _useState42[0],\n    setLoading = _useState42[1];\n  var _useState43 = useState(\"\"),\n    _useState44 = _slicedToArray(_useState43, 2),\n    chatcolor = _useState44[0],\n    setChatcolor = _useState44[1];\n  var _useState45 = useState(\"\"),\n    _useState46 = _slicedToArray(_useState45, 2),\n    userChatcolor = _useState46[0],\n    setUserchatcolor = _useState46[1];\n  var _useState47 = useState(false),\n    _useState48 = _slicedToArray(_useState47, 2),\n    showinput = _useState48[0],\n    setShowinput = _useState48[1];\n  var _useState49 = useState(\"\"),\n    _useState50 = _slicedToArray(_useState49, 2),\n    updatedMsg = _useState50[0],\n    setUpdatedMsg = _useState50[1];\n  var _useState51 = useState(false),\n    _useState52 = _slicedToArray(_useState51, 2),\n    emojilist = _useState52[0],\n    setEmojilist = _useState52[1];\n  var _useState53 = useState(\"\"),\n    _useState54 = _slicedToArray(_useState53, 2),\n    theme = _useState54[0],\n    setTheme = _useState54[1];\n  var _useState55 = useState(\"\"),\n    _useState56 = _slicedToArray(_useState55, 2),\n    msgid = _useState56[0],\n    setMsgid = _useState56[1];\n  var _useState57 = useState(\"\"),\n    _useState58 = _slicedToArray(_useState57, 2),\n    chatname = _useState58[0],\n    setChatname = _useState58[1];\n  var _useState59 = useState(\"\"),\n    _useState60 = _slicedToArray(_useState59, 2),\n    chatimg = _useState60[0],\n    setChatimg = _useState60[1];\n  var _useState61 = useState(\"\"),\n    _useState62 = _slicedToArray(_useState61, 2),\n    chatcity = _useState62[0],\n    setChatcity = _useState62[1];\n  var _useState63 = useState(\"\"),\n    _useState64 = _slicedToArray(_useState63, 2),\n    chatcountry = _useState64[0],\n    setChatcountry = _useState64[1];\n  var _useState65 = useState(\"\"),\n    _useState66 = _slicedToArray(_useState65, 2),\n    chatactive = _useState66[0],\n    setChatactive = _useState66[1];\n  var _useState67 = useState([]),\n    _useState68 = _slicedToArray(_useState67, 2),\n    nickname = _useState68[0],\n    setNickname = _useState68[1];\n  var _useState69 = useState(false),\n    _useState70 = _slicedToArray(_useState69, 2),\n    emojipicker = _useState70[0],\n    setEmojipicker = _useState70[1];\n  var emojis = [];\n  var chatuser = props.chatuser,\n    setState = props.setState,\n    icon = props.icon,\n    type = props.type;\n  var messages = props.diag.messages;\n  var _props$diag$convoinfo = props.diag.convoinfo,\n    convoid = _props$diag$convoinfo.convoid,\n    creatorid = _props$diag$convoinfo.creatorid,\n    recipientid = _props$diag$convoinfo.recipientid;\n  var user = firebase.auth().currentUser;\n  var date = firebase.firestore.FieldValue.serverTimestamp();\n  var typerRef = useRef();\n  var id = db.collection('users').doc().id;\n  var reg = /((?:(?!(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)).)+)|((?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)(?:\\?\\S+=\\S*(?:&\\S+=\\S*)*)?)/gm;\n  var imageRegexB = /(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)/g;\n  var urlreg = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/g;\n  var ureg = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/g;\n  function ytVidId(url) {\n    var p = /(?:https?:\\/\\/)?(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?/;\n    return url.match(p) ? RegExp.$1 : false;\n  }\n  function determineMsgtype(msg) {\n    if (msg.base64) {\n      return /*#__PURE__*/_jsxDEV(Img, {\n        src: msg.message,\n        link: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 14\n      }, this);\n    } else if (msg.file) {\n      return /*#__PURE__*/_jsxDEV(Filemsg, {\n        name: msg.name,\n        link: msg.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 14\n      }, this);\n    } else if (msg.audio) {\n      return /*#__PURE__*/_jsxDEV(Recording, {\n        src: msg.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 14\n      }, this);\n    } else if (msg.video) {\n      return /*#__PURE__*/_jsxDEV(Iframe, {\n        type: \"video\",\n        link: msg.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 14\n      }, this);\n    } else if (ytVidId(msg.message)) {\n      return /*#__PURE__*/_jsxDEV(Iframe, {\n        link: \"https://www.youtube.com/embed/\" + ytVidId(msg.message)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 14\n      }, this);\n    }\n    // else if(urlreg.test(msg.message)){\n    //   const stringWithOnlyURLS = msg.message.match(urlreg).join(' ');\n    //   const string = msg.message.replace(stringWithOnlyURLS, ' ')\n    //   return <>\n    //   <p className='bg'>{string}</p>\n    //     <div>\n    //     <ReactTinyLink\n    //   cardSize=\"small\" \n    //   showGraphic={true}\n    //   maxLine={2}\n    //   minLine={1}\n    //   url={stringWithOnlyURLS}\n    //   />\n    //     </div>\n    //   </>\n    // }  \n    else {\n      var sm = msg.message.replace(reg, function (_, text, img) {\n        return text ? \"<p>\".concat(text.trim(), \"</p>\") : \"<img src=\\\"\".concat(img, \"\\\"/>\");\n      });\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: sm\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 15\n      }, this);\n    }\n  }\n  function determineClass(msg) {\n    var urreg = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/g;\n    if (user.uid === msg.senderid) {\n      if (msg.file) {\n        return \"msg file\";\n      } else if (msg.video) {\n        return 'msg video';\n      } else if (msg.audio) {\n        return \"msg audio\";\n      } else if (msg.emoji) {\n        return \"msg emojimsg\";\n      } else if (msg.nobackground) {\n        return \"no-bg msg\";\n      } else if (ytVidId(msg.message)) {\n        return \"msg youtube\";\n      }\n      //   else if(urreg.test(msg.message)){\n      //   return 'msg emojimsg imp'\n      // }\n      else {\n        return \"msg\";\n      }\n    } else {\n      if (msg.file) {\n        return \"msg file trans\";\n      } else if (msg.video) {\n        return 'msg video trans';\n      } else if (msg.audio) {\n        return \"msg audio trans\";\n      } else if (msg.emoji) {\n        return \"msg emojimsg trans\";\n      } else if (msg.nobackground) {\n        return \"no-bg msg trans\";\n      } else if (ytVidId(msg.message)) {\n        return \"msg youtube trans\";\n      }\n      //   else if(urreg.test(msg.message)){\n      //   return 'msg emojimsg imp'\n      // }\n      else {\n        return \"msg trans\";\n      }\n    }\n  }\n  var _useState71 = useState(false),\n    _useState72 = _slicedToArray(_useState71, 2),\n    opti = _useState72[0],\n    setOpti = _useState72[1];\n  function msgOptions(msg) {\n    var allel = document.querySelectorAll('.optionsEdit');\n    allel.forEach(function (el) {\n      el.style.display = 'none';\n    });\n    var el = document.querySelector(\"div[data-id=\\\"\".concat(msg.msgid, \"\\\"]\"));\n    el.style.display = 'flex';\n  }\n  var _useState73 = useState(false),\n    _useState74 = _slicedToArray(_useState73, 2),\n    modal = _useState74[0],\n    setModal = _useState74[1];\n  var imgsrc = useRef();\n  var _useState75 = useState(''),\n    _useState76 = _slicedToArray(_useState75, 2),\n    imgSrcModal = _useState76[0],\n    setImgSrcModal = _useState76[1];\n  function clickHandler(e) {\n    var audio = e.target.querySelector(\".controls\");\n    var video = e.target.closest(\"VIDEO\");\n    var play = e.target.querySelector(\".fa-play\");\n    var el = e.target.closest(\"IMG\");\n    if (el && e.currentTarget.contains(el)) {\n      setModal(true);\n      var _imgsrc = document.querySelector(\".modal img\");\n      setImgSrcModal(el.getAttribute('src'));\n      _imgsrc.setAttribute(\"src\", el.getAttribute(\"src\"));\n    }\n    if (video && e.currentTarget.contains(video)) {}\n  }\n  var allmsgs = messages && messages.slice(0).reverse().map(function (msg) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: msg.msgid,\n      className: msg.senderid === user.uid ? \"right m\" : \"left m\",\n      onContextMenu: function onContextMenu(e) {\n        return contextMenu(e);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: determineClass(msg),\n          contentEditable: false,\n          style: msg.nobackground ? {\n            backgroundColor: \"transparent\"\n          } : msg.emoji ? {\n            backgroundColor: \"transparent\"\n          } : ytVidId(msg.message) ? {\n            backgroundColor: \"transparent\"\n          } : msg.senderid === user.uid ? {\n            backgroundColor: chatcolor\n          } : null,\n          onClick: function onClick(e) {\n            return clickHandler(e);\n          },\n          children: [\"    \", determineMsgtype(msg)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 15\n        }, _this), /*#__PURE__*/_jsxDEV(Threedots, {\n          msgs: msgs,\n          user: user,\n          msg: msg,\n          convoid: convoid\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 14\n        }, _this), /*#__PURE__*/_jsxDEV(\"small\", {\n          className: msg.senderid === user.uid ? \"alignRight elapsedtime\" : \"alignLeft elapsedtime\",\n          children: /*#__PURE__*/_jsxDEV(ReactTimeAgo, {\n            date: msg.msgdate.toDate()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 16\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 17\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"reaction\",\n          style: {\n            display: msg.reaction1 || msg.reaction2 ? \"flex\" : \"none\",\n            width: msg.reaction1 === '' || msg.reaction2 === '' ? '22px' : '42px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: msg.reaction1 === \"fad fa-heart\" ? \"emoj fas fa-\" + msg.reaction1 : \"emoj fad fa-\" + msg.reaction1\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 17\n          }, _this), /*#__PURE__*/_jsxDEV(\"i\", {\n            style: {\n              marginLeft: msg.reaction2 === '' ? '' : '5px'\n            },\n            className: msg.reaction2 === \"fad fa-heart\" ? \"emoj fas fa-\" + msg.reaction2 : \"emoj fad fa-\" + msg.reaction2\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 17\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 15\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: msg.senderid === user.uid ? userimg : chatimg,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 13\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 11\n    }, _this);\n  });\n  var progressbar = useRef();\n  var progresswidth = useRef();\n  var _useState77 = useState(),\n    _useState78 = _slicedToArray(_useState77, 2),\n    img = _useState78[0],\n    setImg = _useState78[1];\n  var inputref = useRef();\n  function sendFile(type) {\n    var file = document.querySelector(\".\".concat(type, \"file\")).files[0];\n    if (file) {\n      var idxDot = file.name.lastIndexOf(\".\") + 1;\n      var extFile = file.name.substr(idxDot, file.name.length).toLowerCase();\n      var storageRef = firebase.storage().ref(\"\".concat(convoid, \"/\").concat(file.name));\n      var task = storageRef.put(file);\n      task.on(\"state_changes\", function progress(snap) {\n        progressbar.current.style.display = \"flex\";\n        var percentage = snap.bytesTransferred / snap.totalBytes * 100;\n        progresswidth.current.style.height = \"\".concat(percentage, \"%\");\n      }, function error(err) {}, function complete() {\n        if (type === \"image\") {\n          if (extFile === \"jpg\" || extFile === \"jpeg\" || extFile === \"png\") {\n            var msgobject = {\n              message: \"https://firebasestorage.googleapis.com/v0/b/\".concat(storageRef.bucket, \"/o/\").concat(convoid, \"%2F\").concat(file.name, \"?alt=media\"),\n              reaction1: \"\",\n              reaction2: \"\",\n              msgdate: firebase.firestore.Timestamp.now(),\n              msgid: db.collection(\"conversations\").doc().id,\n              read: false,\n              senderid: user.uid,\n              editing: false,\n              nobackground: true,\n              emoji: true,\n              base64: true\n            };\n            var notificationobj = {\n              notifimsg: \"https://firebasestorage.googleapis.com/v0/b/\".concat(storageRef.bucket, \"/o/\").concat(convoid, \"%2F\").concat(file.name, \"?alt=media\"),\n              notifidate: firebase.firestore.Timestamp.now(),\n              read: false,\n              sender: user.displayName,\n              base64: true,\n              id: convoid,\n              senderid: user.uid,\n              notifiid: db.collection('users').doc().id\n            };\n            if (notifibool) {\n              db.collection('notifications').doc(chatuser).update({\n                notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\n              });\n            }\n            db.collection(\"conversations\").doc(convoid).update({\n              lastmsgdate: date,\n              messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\n            });\n          } else {\n            setNotifi(true);\n            setNotificont({\n              emoji: \"fal fa-exclamation-circle\",\n              msg: \"Only Images are allowed!\"\n            });\n            setTimeout(function () {\n              setNotifi(false);\n            }, 300500);\n          }\n        } else if (type === \"paperclip\") {\n          var _msgobject = {\n            message: \"https://firebasestorage.googleapis.com/v0/b/\".concat(storageRef.bucket, \"/o/\").concat(convoid, \"%2F\").concat(file.name, \"?alt=media\"),\n            reaction1: \"\",\n            reaction2: \"\",\n            msgdate: firebase.firestore.Timestamp.now(),\n            msgid: db.collection(\"conversations\").doc().id,\n            read: false,\n            senderid: user.uid,\n            editing: false,\n            nobackground: true,\n            emoji: true,\n            file: true,\n            name: file.name,\n            base64: false\n          };\n          var _notificationobj = {\n            notifimsg: \"https://firebasestorage.googleapis.com/v0/b/\".concat(storageRef.bucket, \"/o/\").concat(convoid, \"%2F\").concat(file.name, \"?alt=media\"),\n            notifidate: firebase.firestore.Timestamp.now(),\n            read: false,\n            sender: user.displayName,\n            file: true,\n            id: convoid,\n            senderid: user.uid,\n            notifiid: db.collection('users').doc().id\n          };\n          if (notifibool) {\n            db.collection('notifications').doc(chatuser).update({\n              notifications: firebase.firestore.FieldValue.arrayUnion(_notificationobj)\n            });\n          }\n          db.collection(\"conversations\").doc(convoid).update({\n            lastmsgdate: date,\n            messages: firebase.firestore.FieldValue.arrayUnion(_msgobject)\n          });\n        } else if (type === \"microphone\") {} else if (type === 'film') {\n          if (extFile === 'mp4' || 'gif' || 'avi') {\n            var _msgobject2 = {\n              message: \"https://firebasestorage.googleapis.com/v0/b/\".concat(storageRef.bucket, \"/o/\").concat(convoid, \"%2F\").concat(file.name, \"?alt=media\"),\n              reaction1: \"\",\n              reaction2: \"\",\n              msgdate: firebase.firestore.Timestamp.now(),\n              msgid: db.collection(\"conversations\").doc().id,\n              read: false,\n              senderid: user.uid,\n              editing: false,\n              nobackground: true,\n              emoji: true,\n              video: true\n            };\n            var _notificationobj2 = {\n              notifimsg: \"https://firebasestorage.googleapis.com/v0/b/\".concat(storageRef.bucket, \"/o/\").concat(convoid, \"%2F\").concat(file.name, \"?alt=media\"),\n              notifidate: firebase.firestore.Timestamp.now(),\n              read: false,\n              sender: user.displayName,\n              video: true,\n              id: convoid,\n              senderid: user.uid,\n              notifiid: db.collection('users').doc().id\n            };\n            if (notifibool) {\n              db.collection('notifications').doc(chatuser).update({\n                notifications: firebase.firestore.FieldValue.arrayUnion(_notificationobj2)\n              });\n            }\n            db.collection(\"conversations\").doc(convoid).update({\n              lastmsgdate: date,\n              messages: firebase.firestore.FieldValue.arrayUnion(_msgobject2)\n            });\n          } else {}\n        }\n        progressbar.current.style.display = \"none\";\n      });\n    }\n  }\n  var icons = [{\n    icon: \"image\",\n    type: \"file\"\n  }, {\n    icon: 'film',\n    type: 'file'\n  }, {\n    icon: \"paperclip\",\n    type: \"file\"\n  }, {\n    icon: \"microphone\",\n    type: \"microphone\"\n  }];\n  var iconsrow = icons.map(function (icon) {\n    return /*#__PURE__*/_jsxDEV(Hoverableicondiv, {\n      progressbar: progressbar,\n      progresswidth: progresswidth,\n      classNames: \"\",\n      icon: icon.icon,\n      type: icon.type,\n      special: true,\n      sendFile: sendFile,\n      convoid: convoid,\n      inputref: inputref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 7\n    }, _this);\n  });\n  function editMsg() {\n    msgs && msgs.map(function (msg) {\n      if (msgid === msg.msgid) {\n        var itemindex = msgs.indexOf(msg);\n        msgs[itemindex].message = updatedMsg;\n        db.collection(\"conversations\").doc(convoid).update({\n          messages: msgs\n        });\n      }\n    });\n  }\n  function contextMenu(e) {\n    var customcontext = document.querySelector(\".contextmenu\");\n    var bounding = customcontext.getBoundingClientRect();\n    e.preventDefault();\n    setMsgid(e.currentTarget.getAttribute(\"id\"));\n    setContextmenu(true);\n    if (type === \"small\") {\n      customcontext.style.top = \"\".concat(e.pageY - 201, \"px\");\n      customcontext.style.left = \"\".concat(0, \"px\");\n    } else {\n      var _bounding = customcontext.getBoundingClientRect();\n      customcontext.style.top = \"\".concat(e.pageY - 200, \"px\");\n      customcontext.style.left = \"\".concat(e.pageX - 150, \"px\");\n    }\n    if (!updatedMsg === \"\") {\n      editMsg();\n    }\n  }\n  function sendEmoji(emoji) {\n    var msgobject = {\n      message: emoji,\n      reaction1: \"\",\n      reaction2: \"\",\n      msgdate: firebase.firestore.Timestamp.now(),\n      msgid: db.collection(\"conversations\").doc().id,\n      read: false,\n      senderid: user.uid,\n      editing: false,\n      nobackground: false,\n      emoji: true\n    };\n    db.collection(\"conversations\").doc(convoid).update({\n      lastmsgdate: date,\n      messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\n    });\n    var notificationobj = {\n      notifimsg: emoji,\n      notifidate: firebase.firestore.Timestamp.now(),\n      read: false,\n      sender: user.displayName,\n      id: convoid,\n      senderid: user.uid,\n      notifiid: db.collection('users').doc().id\n    };\n    if (notifibool) {\n      db.collection('notifications').doc(chatuser).update({\n        notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\n      });\n    }\n    setMsgstring(\"\");\n    typerRef.current.setAttribute(\"style\", \"height: 50px\");\n  }\n  var scrollto = useRef();\n  function sendMessage() {\n    scrollto.current.scrollIntoView({\n      behavior: 'smooth',\n      block: 'start'\n    });\n    var imageRegex = /(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)/g;\n    if (msgstring.match(imageRegexB) != null) {\n      var msgobject = {\n        message: msgstring,\n        reaction1: \"\",\n        reaction2: '',\n        msgdate: firebase.firestore.Timestamp.now(),\n        msgid: db.collection(\"conversations\").doc().id,\n        read: false,\n        senderid: user.uid,\n        editing: false,\n        nobackground: true,\n        emoji: false\n      };\n      db.collection(\"conversations\").doc(convoid).update({\n        lastmsgdate: date,\n        messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\n      });\n      var notificationobj = {\n        notifimsg: msgstring,\n        notifidate: firebase.firestore.Timestamp.now(),\n        read: false,\n        sender: user.displayName,\n        id: convoid,\n        senderid: user.uid,\n        notifiid: db.collection('users').doc().id\n      };\n      if (notifibool) {\n        db.collection('notifications').doc(chatuser).update({\n          notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\n        });\n      } else {\n        return null;\n      }\n      setMsgstring(\"\");\n      typerRef.current.setAttribute(\"style\", \"height: 50px\");\n    } else if (msgstring.replace(/\\s/g, \"\").length) {\n      var _msgobject3 = {\n        message: msgstring,\n        reaction1: \"\",\n        reaction2: \"\",\n        msgdate: firebase.firestore.Timestamp.now(),\n        msgid: db.collection(\"conversations\").doc().id,\n        read: false,\n        senderid: user.uid,\n        editing: false,\n        nobackground: false,\n        emoji: false\n      };\n      var _notificationobj3 = {\n        notifimsg: msgstring,\n        notifidate: firebase.firestore.Timestamp.now(),\n        read: false,\n        sender: user.displayName,\n        id: convoid,\n        senderid: user.uid,\n        notifiid: db.collection('users').doc().id\n      };\n      if (notifibool) {\n        db.collection('notifications').doc(chatuser).update({\n          notifications: firebase.firestore.FieldValue.arrayUnion(_notificationobj3)\n        });\n      }\n      db.collection(\"conversations\").doc(convoid).update({\n        lastmsgdate: firebase.firestore.Timestamp.now(),\n        messages: firebase.firestore.FieldValue.arrayUnion(_msgobject3)\n      });\n      setMsgstring(\"\");\n      typerRef.current.setAttribute(\"style\", \"height: 50px\");\n    }\n  }\n  function triggerSend(e) {\n    if (e.keyCode === 13 && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  }\n  function formatTextarea() {\n\n    // setTyping(true)\n    // showTypingAnim()\n  }\n  var emojipickerref = useRef();\n  function inputFunc() {\n    typerRef.current.focus();\n    setEmojipicker(!emojipicker);\n  }\n  function showTypingAnim() {\n    setTyperid(user.uid);\n    var infoobj = {\n      convoid: convoid,\n      creatorid: creatorid,\n      recipientid: recipientid,\n      usertyping: typing,\n      userref: db.collection(\"users\").doc(recipientid),\n      typerid: typerid\n    };\n    db.collection(\"conversations\").doc(convoid).update({\n      // convoinfo: infoobj\n    }).then(function () {\n      db.collection(\"conversations\").doc(convoid).onSnapshot(function (snap) {\n        // setTyperid(snap.data().convoinfo.typerid)\n        // setRealtyping(snap.data().convoinfo.usertyping)\n      });\n    });\n  }\n  var _useState79 = useState(1),\n    _useState80 = _slicedToArray(_useState79, 2),\n    zoomamount = _useState80[0],\n    setZoomamount = _useState80[1];\n  function zoom(el) {\n    if (el.type === 'in') {\n      setZoomamount(function (prev) {\n        return prev + 0.1;\n      });\n    } else {\n      if (zoomamount > 1) {\n        setZoomamount(function (prev) {\n          return prev - 0.1;\n        });\n      }\n    }\n  }\n  var onEmojiClick = function onEmojiClick(event, emojiobject) {\n    setMsgstring(msgstring + emojiobject.emoji);\n  };\n  useEffect(function () {\n    var timer = setInterval(function () {\n      setUpdateelapsed(function (prev) {\n        return prev + 1;\n      });\n    }, 60000);\n    return function () {\n      clearInterval(timer);\n    };\n  }, []);\n  useEffect(function () {\n    var timer = setInterval(function () {\n      setTyping(false);\n    }, 4000);\n    // showTypingAnim()\n    return function () {\n      clearInterval(timer);\n    };\n  }, [typing]);\n  useEffect(function () {\n    db.collection(\"users\").doc(creatorid).onSnapshot(function (snap) {\n      var user = snap.data();\n      setRecipname(user.userinfo.name);\n      setRecipimg(user.userinfo.cover);\n      setRecipcity(user.userinfo.city);\n      setRecipcountry(user.userinfo.country);\n    });\n    db.collection(\"users\").doc(recipientid).onSnapshot(function (snap) {\n      var user = snap.data();\n      setUserimg(user.userinfo.cover);\n      setUsername(user.userinfo.name);\n    });\n    db.collection(\"users\").doc(chatuser).onSnapshot(function (snap) {\n      var user = snap.data();\n      setChatname(user.userinfo.name);\n      setChatimg(user.userinfo.cover);\n      setChatcity(user.userinfo.city);\n      setChatcountry(user.userinfo.country);\n      setChatactive(user.online);\n      setActivestatus(user.userinfo.online);\n      setLoading(false);\n    });\n  }, [creatorid, recipientid, chatuser]);\n  useEffect(function () {\n    db.collection(\"users\").doc(user.uid).onSnapshot(function (snap) {\n      var user = snap.data();\n      setChatcolor(user.customization.color);\n      setUserimg(user.userinfo.cover);\n    });\n  }, [chatcolor, chatuser]);\n  useEffect(function () {\n    db.collection(\"users\").doc(chatuser).onSnapshot(function (snap) {\n      var user = snap.data();\n      setUserchatcolor(user.customization.chatcolor);\n    });\n  }, [chatuser]);\n  useEffect(function () {\n    db.collection(\"conversations\").doc(convoid).get().then(function (snap) {\n      var use = snap.data();\n      setMsgs(use.messages);\n      setLoader(false);\n      setTheme(use.customizedconvo.theme);\n      setEmojitype(use.customizedconvo.emoji);\n      if (user.uid === props.diag.convoinfo.creatorid) {\n        setNotifibool(use.notifications2);\n        setNickname(use.nickname1);\n      } else {\n        setNotifibool(use.notifications1);\n        setNickname(use.nickname2);\n      }\n    });\n  }, [convoid]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"top br-l\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profilepic\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative\",\n          children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loader blue reloader\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"lds-ring\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 730,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 731,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 732,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 733,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 729,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 728,\n            columnNumber: 15\n          }, this) : [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: chatimg,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 738,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"notifi\",\n            style: {\n              backgroundColor: chatactive ? \"rgb(44, 255, 44)\" : \"#FF3D3D\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 739,\n            columnNumber: 17\n          }, this)]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 726,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [nickname === '' ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"username\",\n            children: chatname.length > 15 ? chatname.slice(0, 15) + '...' : chatname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 749,\n            columnNumber: 28\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"username\",\n            children: nickname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 749,\n            columnNumber: 114\n          }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n            children: chatactive ? \"Online\" : \"Offline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 750,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 748,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 725,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          class: \"fal fa-phone-alt\",\n          style: {\n            color: themecolor\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 754,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n          class: \"fal fa-video\",\n          style: {\n            color: themecolor\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 755,\n          columnNumber: 11\n        }, this), icon && icon === \"fal fa-times\" ? /*#__PURE__*/_jsxDEV(\"i\", {\n          className: icon,\n          style: {\n            padding: \"0 5px\",\n            color: themecolor\n          },\n          onClick: function onClick() {\n            return setState(false);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 757,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Link, {\n          exact: true,\n          to: \"/chatsettings/\" + convoid,\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            style: {\n              padding: \"0 5px\",\n              color: themecolor\n            },\n            class: \"fal fa-ellipsis-v\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 764,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 763,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 753,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 724,\n      columnNumber: 10\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      render: function render(_ref) {\n        var location = _ref.location;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: !theme ? \"msgs black\" : theme === 'https://i.imgur.com/4hzNTTq.png' ? 'msgs black' : 'msgs',\n          style: theme ? {\n            backgroundImage: \"url(\" + theme + \")\"\n          } : {\n            backgroundImage: \"url(https://i.imgur.com/4hzNTTq.png)\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"scrollto\",\n              ref: scrollto\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 784,\n              columnNumber: 15\n            }, _this), loader ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: loader ? \"loader opa\" : \"loader\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"lds-ring\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 789,\n                  columnNumber: 21\n                }, _this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 790,\n                  columnNumber: 21\n                }, _this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 791,\n                  columnNumber: 21\n                }, _this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 792,\n                  columnNumber: 21\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 788,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 787,\n              columnNumber: 17\n            }, _this) : allmsgs]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 783,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 775,\n          columnNumber: 11\n        }, _this);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 773,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search whiteb br-l\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"plus\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          class: visible ? \"fal fa-minus\" : \"fal fa-plus\",\n          style: {\n            color: themecolor\n          },\n          onClick: function onClick() {\n            return setVisible(!visible);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 804,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(CSSTransition, {\n          in: visible,\n          timeout: 300,\n          classNames: \"iconshover\",\n          unmountOnExit: true,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"icons\",\n            children: [iconsrow, /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"uploader bs\",\n              ref: progressbar,\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"percent\",\n                ref: progresswidth\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 818,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 817,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 815,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 809,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 803,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"textarea flexrow\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          type: \"text\",\n          placeholder: \"Send a message...\",\n          onKeyUp: function onKeyUp(e) {\n            return triggerSend(e);\n          },\n          ref: typerRef,\n          value: msgstring,\n          onChange: function onChange(e) {\n            setMsgstring(e.target.value);\n          },\n          onInput: function onInput() {\n            return formatTextarea();\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 824,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"gif_emoji\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fal fa-laugh\",\n            onClick: function onClick() {\n              inputFunc();\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 838,\n            columnNumber: 5\n          }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n            class: \"fal fa-comment-alt-smile\",\n            onClick: function onClick() {\n              return setGif(!gif);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 839,\n            columnNumber: 5\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 837,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 823,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flexrow\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          role: \"img\",\n          \"aria-label\": \"emoji\",\n          onClick: function onClick() {\n            return sendEmoji(emojitype);\n          },\n          style: {\n            cursor: \"pointer\"\n          },\n          children: emojitype\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 844,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n          class: \"fal fa-paper-plane\",\n          style: {\n            color: themecolor\n          },\n          onClick: function onClick() {\n            sendMessage();\n            setEmojipicker(false);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 852,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 843,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 802,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Contextmenu, {\n      setShowinput: setShowinput,\n      editMsg: editMsg,\n      setUpdatedMsg: setUpdatedMsg,\n      convoid: convoid,\n      type: \"msg\",\n      msgid: msgid,\n      setMsgid: setMsgid,\n      setContextmenu: setContextmenu,\n      contextmenu: contextmenu,\n      contextstyle: contextstyle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 860,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CSSTransition, {\n      in: gif,\n      unmountOnExit: true,\n      classNames: \"gif\",\n      timeout: 300,\n      children: /*#__PURE__*/_jsxDEV(Gif, {\n        chatimg: chatimg,\n        setGif: setGif,\n        convoid: convoid,\n        notifibool: notifibool,\n        chatuser: chatuser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 874,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 873,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CSSTransition, {\n      in: notifi,\n      timeout: 300,\n      classNames: \"displayerror\",\n      unmountOnExit: true,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"errormsg bs diagmsg\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: notificont.emoji,\n          style: {\n            position: \"absolute\",\n            left: \"20px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 883,\n          columnNumber: 11\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n          children: notificont.msg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 887,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"far fa-times\",\n          style: {\n            color: themecolor\n          },\n          onClick: function onClick() {\n            return setNotifi(false);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 888,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 882,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 876,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CSSTransition, {\n      in: modal,\n      classNames: \"modal\",\n      timeout: 0,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal overflowimgcontainer\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fal fa-search-minus\",\n            onClick: function onClick() {\n              return zoom({\n                type: 'out'\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 899,\n            columnNumber: 10\n          }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n            class: \"fal fa-redo-alt\",\n            onClick: function onClick() {\n              return setZoomamount(1);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 900,\n            columnNumber: 10\n          }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n            class: \"fal fa-search-plus\",\n            onClick: function onClick() {\n              return zoom({\n                type: 'in'\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 901,\n            columnNumber: 10\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 897,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(ScrollContainer, {\n          className: \"grabbercontainer\",\n          hideScrollbars: true,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"\",\n            alt: \"\",\n            ref: imgsrc,\n            style: {\n              width: 100 * zoomamount + '%',\n              height: 100 * zoomamount + '%'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 904,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 903,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fal fa-times\",\n          onClick: function onClick() {\n            setModal(false);\n            setZoomamount(1);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 906,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 896,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 895,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CSSTransition, {\n      in: emojipicker,\n      classNames: \"emojipicker\",\n      timeout: 300,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"emojipicker\",\n        ref: emojipickerref,\n        onMouseOver: function onMouseOver() {\n          return typerRef.current.focus();\n        },\n        onClick: function onClick() {\n          return typerRef.current.focus();\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"times\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fal fa-times\",\n            onClick: function onClick() {\n              return setEmojipicker(false);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 911,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 911,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Picker, {\n          onEmojiClick: onEmojiClick\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 912,\n          columnNumber: 8\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 910,\n        columnNumber: 8\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 909,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Dialogue, \"yyQ7tNaldSaujnj96dBeDUT6HLU=\");\n_c = Dialogue;\nexport default Dialogue;\nvar _c;\n$RefreshReg$(_c, \"Dialogue\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useContext","NavLink","Route","Link","Users","firebase","db","Contextmenu","FilePond","File","registerPlugin","CSSTransition","TransitionGroup","ElapsedTime","ContextApp","Hoverableicondiv","InnerImageZoom","Iframe","Img","Filemsg","P","Recording","Gif","ReactTimeAgo","ReactImageMagnify","Contextoptions","Threedots","ScrollContainer","ReactTinyLink","Picker","Dialogue","props","themecolor","notifi","setNotifi","notificont","setNotificont","gif","setGif","msgs","setMsgs","msgstring","setMsgstring","updateelapsed","setUpdateelapsed","typing","setTyping","realtyping","setRealtyping","typerid","setTyperid","activestatus","setActivestatus","recipname","setRecipname","recipimg","setRecipimg","recipcity","setRecipcity","recipcountry","setRecipcountry","userimg","setUserimg","username","setUsername","visible","setVisible","contextmenu","setContextmenu","top","left","contextstyle","setContextstyle","notifibool","setNotifibool","emojitype","setEmojitype","loader","setLoader","loading","setLoading","chatcolor","setChatcolor","userChatcolor","setUserchatcolor","showinput","setShowinput","updatedMsg","setUpdatedMsg","emojilist","setEmojilist","theme","setTheme","msgid","setMsgid","chatname","setChatname","chatimg","setChatimg","chatcity","setChatcity","chatcountry","setChatcountry","chatactive","setChatactive","nickname","setNickname","emojipicker","setEmojipicker","emojis","chatuser","setState","icon","type","messages","diag","convoinfo","convoid","creatorid","recipientid","user","auth","currentUser","date","firestore","FieldValue","serverTimestamp","typerRef","id","collection","doc","reg","imageRegexB","urlreg","ureg","ytVidId","url","p","match","RegExp","$1","determineMsgtype","msg","base64","message","file","name","audio","video","sm","replace","_","text","img","trim","__html","determineClass","urreg","uid","senderid","emoji","nobackground","opti","setOpti","msgOptions","allel","document","querySelectorAll","forEach","el","style","display","querySelector","modal","setModal","imgsrc","imgSrcModal","setImgSrcModal","clickHandler","e","target","closest","play","currentTarget","contains","getAttribute","setAttribute","allmsgs","slice","reverse","map","contextMenu","backgroundColor","msgdate","toDate","reaction1","reaction2","width","marginLeft","progressbar","progresswidth","setImg","inputref","sendFile","files","idxDot","lastIndexOf","extFile","substr","length","toLowerCase","storageRef","storage","ref","task","put","on","progress","snap","current","percentage","bytesTransferred","totalBytes","height","error","err","complete","msgobject","bucket","Timestamp","now","read","editing","notificationobj","notifimsg","notifidate","sender","displayName","notifiid","update","notifications","arrayUnion","lastmsgdate","setTimeout","icons","iconsrow","editMsg","itemindex","indexOf","customcontext","bounding","getBoundingClientRect","preventDefault","pageY","pageX","sendEmoji","scrollto","sendMessage","scrollIntoView","behavior","block","imageRegex","triggerSend","keyCode","shiftKey","formatTextarea","emojipickerref","inputFunc","focus","showTypingAnim","infoobj","usertyping","userref","then","onSnapshot","zoomamount","setZoomamount","zoom","prev","onEmojiClick","event","emojiobject","timer","setInterval","clearInterval","data","userinfo","cover","city","country","online","customization","color","get","use","customizedconvo","notifications2","nickname1","notifications1","nickname2","padding","location","backgroundImage","value","cursor","position"],"sources":["C:/Users/Max/Documents/GitHub/MIRC-Code-Verification/react-login/src/components/Dialogue.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useContext } from \"react\";\r\nimport { NavLink, Route, Link } from \"react-router-dom\";\r\nimport Users from \"./Users\";\r\nimport firebase from \"firebase\";\r\nimport { db } from \"../Fire\";\r\nimport Contextmenu from \"./Contextmenu\";\r\nimport { FilePond, File, registerPlugin } from \"react-filepond\";\r\nimport \"filepond/dist/filepond.min.css\";\r\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\r\nimport ElapsedTime from \"./Elapsedtime\";\r\nimport { ContextApp } from \"../ContextAPI\";\r\nimport Hoverableicondiv from \"./Hoverableiconsdiv\";\r\nimport InnerImageZoom from \"react-inner-image-zoom\";\r\nimport Iframe from \"./msgcomponents/Iframe\";\r\nimport Img from './msgcomponents/Img'\r\nimport Filemsg from './msgcomponents/File'\r\nimport P from './msgcomponents/P'\r\nimport Recording from \"./msgcomponents/Recording\";\r\nimport Gif from \"./Gifs.js/Gif\";\r\nimport ReactTimeAgo from 'react-time-ago'\r\nimport ReactImageMagnify from 'react-image-magnify';\r\nimport Contextoptions from \"./msgcomponents/Contextoptions\";\r\nimport Threedots from \"./msgcomponents/Threedots\";\r\nimport ScrollContainer from 'react-indiana-drag-scroll';\r\nimport { ReactTinyLink } from 'react-tiny-link'\r\nimport Picker from 'emoji-picker-react';\r\n\r\nfunction Dialogue(props) {\r\n  const {\r\n    themecolor,\r\n    notifi,\r\n    setNotifi,\r\n    notificont,\r\n    setNotificont\r\n  } = useContext(ContextApp);\r\n  const [gif, setGif]=useState(false)\r\n  const [msgs, setMsgs] = useState([]);\r\n  const [msgstring, setMsgstring] = useState(\"\");\r\n  const [updateelapsed, setUpdateelapsed] = useState(0);\r\n  const [typing, setTyping] = useState(false);\r\n  const [realtyping, setRealtyping] = useState(false);\r\n  const [typerid, setTyperid] = useState(\"\");\r\n  const [activestatus, setActivestatus] = useState(false);\r\n  const [recipname, setRecipname] = useState(\"\");\r\n  const [recipimg, setRecipimg] = useState(\"\");\r\n  const [recipcity, setRecipcity] = useState(\"\");\r\n  const [recipcountry, setRecipcountry] = useState(\"\");\r\n  const [userimg, setUserimg] = useState(\"\");\r\n  const [username, setUsername] = useState(\"\");\r\n  const [visible, setVisible] = useState(false);\r\n  const [contextmenu, setContextmenu] = useState(false);\r\n  const [contextstyle, setContextstyle] = useState({\r\n    top: 0,\r\n    left: 0\r\n  });\r\n  const [notifibool, setNotifibool]=useState(true)\r\n  const [emojitype, setEmojitype] = useState(\"\");\r\n  const [loader, setLoader] = useState(true);\r\n  const [loading, setLoading] = useState(true);\r\n  const [chatcolor, setChatcolor] = useState(\"\");\r\n  const [userChatcolor, setUserchatcolor] = useState(\"\");\r\n  const [showinput, setShowinput] = useState(false);\r\n  const [updatedMsg, setUpdatedMsg] = useState(\"\");\r\n  const [emojilist, setEmojilist] = useState(false);\r\n  const [theme, setTheme] = useState(\"\");\r\n  const [msgid, setMsgid] = useState(\"\");\r\n  const [chatname, setChatname] = useState(\"\");\r\n  const [chatimg, setChatimg] = useState(\"\");\r\n  const [chatcity, setChatcity] = useState(\"\");\r\n  const [chatcountry, setChatcountry] = useState(\"\");\r\n  const [chatactive, setChatactive] = useState(\"\");\r\n  const [nickname, setNickname] = useState([]);\r\n  const [emojipicker, setEmojipicker]=useState(false)\r\n  const emojis = []\r\n  const { chatuser, setState, icon, type } = props;\r\n  const { messages } = props.diag;\r\n  const { convoid, creatorid, recipientid } = props.diag.convoinfo;\r\n  const user = firebase.auth().currentUser;\r\n  const date = firebase.firestore.FieldValue.serverTimestamp()\r\n  const typerRef = useRef();\r\n  const id =db.collection('users').doc().id\r\n  const reg = /((?:(?!(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)).)+)|((?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)(?:\\?\\S+=\\S*(?:&\\S+=\\S*)*)?)/gm;\r\n  const imageRegexB = /(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)/g;\r\n  var urlreg = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/g;\r\n  var ureg = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/g;\r\n\r\n  function ytVidId(url) {\r\n    var p = /(?:https?:\\/\\/)?(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?/;\r\n    return url.match(p) ? RegExp.$1 : false;\r\n  }\r\n\r\n  \r\n  function determineMsgtype(msg) {\r\n    if (msg.base64) {\r\n      return <Img src={msg.message} link={true}/>\r\n     \r\n    }\r\n    else if (msg.file) {\r\n      return <Filemsg name={msg.name} link={msg.message}/>\r\n    } else if (msg.audio) {\r\n      return <Recording src={msg.message}/>\r\n      \r\n    } else if (msg.video){\r\n      return <Iframe type='video' link={msg.message}/>\r\n    }\r\n    else if (ytVidId(msg.message)) {\r\n      return <Iframe link={\"https://www.youtube.com/embed/\" + ytVidId(msg.message)} />\r\n\r\n    }\r\n    // else if(urlreg.test(msg.message)){\r\n    //   const stringWithOnlyURLS = msg.message.match(urlreg).join(' ');\r\n    //   const string = msg.message.replace(stringWithOnlyURLS, ' ')\r\n    //   return <>\r\n    //   <p className='bg'>{string}</p>\r\n    //     <div>\r\n    //     <ReactTinyLink\r\n    //   cardSize=\"small\" \r\n    //   showGraphic={true}\r\n    //   maxLine={2}\r\n    //   minLine={1}\r\n    //   url={stringWithOnlyURLS}\r\n    //   />\r\n    //     </div>\r\n    //   </>\r\n    // }  \r\n    else {\r\n      const sm = msg.message.replace(reg, (_, text, img)  => \r\n      text ?  `<p>${text.trim()}</p>`:`<img src=\"${img}\"/>`\r\n      ) \r\n      return  <div dangerouslySetInnerHTML={{__html:sm}} ></div>\r\n    }\r\n  }\r\n  function determineClass(msg) {\r\n    var urreg = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/g;\r\n    if(user.uid===msg.senderid){\r\n      if (msg.file) {\r\n        return \"msg file\";\r\n      }else if (msg.video) {\r\n        return 'msg video'\r\n      }\r\n       else if (msg.audio) {\r\n        return \"msg audio\";\r\n      } else if (msg.emoji) {\r\n        return \"msg emojimsg\";\r\n      } else if (msg.nobackground) {\r\n        return \"no-bg msg\";\r\n      } else if (ytVidId(msg.message)) {\r\n        return `msg youtube`;\r\n      }\r\n      //   else if(urreg.test(msg.message)){\r\n      //   return 'msg emojimsg imp'\r\n      // }\r\n      else {\r\n        return \"msg\";\r\n      }\r\n    }else {\r\n      if (msg.file) {\r\n        return \"msg file trans\";\r\n      }else if (msg.video) {\r\n        return 'msg video trans'\r\n      }\r\n       else if (msg.audio) {\r\n        return \"msg audio trans\";\r\n      } else if (msg.emoji) {\r\n        return \"msg emojimsg trans\";\r\n      } else if (msg.nobackground) {\r\n        return \"no-bg msg trans\";\r\n      } else if (ytVidId(msg.message)) {\r\n        return `msg youtube trans`;\r\n      }\r\n      //   else if(urreg.test(msg.message)){\r\n      //   return 'msg emojimsg imp'\r\n      // }\r\n      else {\r\n        return \"msg trans\";\r\n      }\r\n    }\r\n  }\r\n  const [opti, setOpti]=useState(false)\r\n  function msgOptions(msg){\r\n    const allel = document.querySelectorAll('.optionsEdit')\r\n    allel.forEach(el=>{\r\n      el.style.display='none'\r\n    })\r\n    const el = document.querySelector(`div[data-id=\"${msg.msgid}\"]`)\r\n    el.style.display='flex'\r\n  }\r\n  const [modal, setModal] = useState(false);\r\n  const imgsrc = useRef();\r\n  const [imgSrcModal, setImgSrcModal]=useState('')\r\n  function clickHandler(e) {\r\n    const audio = e.target.querySelector(\".controls\");\r\n    const video = e.target.closest(\"VIDEO\");\r\n\r\n    const play = e.target.querySelector(\".fa-play\");\r\n    const el = e.target.closest(\"IMG\");\r\n    if (el && e.currentTarget.contains(el)) {\r\n      setModal(true);\r\n      const imgsrc = document.querySelector(\".modal img\");\r\n      setImgSrcModal(el.getAttribute('src'))\r\n      imgsrc.setAttribute(\"src\", el.getAttribute(\"src\"));\r\n    }\r\n    if (video && e.currentTarget.contains(video)) {\r\n    }\r\n  }\r\n  const allmsgs =\r\n    messages &&\r\n    messages\r\n      .slice(0)\r\n      .reverse()\r\n      .map((msg) => {\r\n        return (\r\n          <div\r\n            id={msg.msgid}\r\n            className={msg.senderid === user.uid ? \"right m\" : \"left m\"}\r\n            onContextMenu={(e) => contextMenu(e)}\r\n          >\r\n            <div className=\"flex\">\r\n              <p\r\n                className={determineClass(msg)}\r\n                contentEditable={false}\r\n                style={\r\n                  msg.nobackground\r\n                    ? { backgroundColor: \"transparent\" }\r\n                    : msg.emoji\r\n                    ? { backgroundColor: \"transparent\" }\r\n                    : ytVidId(msg.message)\r\n                    ? { backgroundColor: \"transparent\" }\r\n                    : msg.senderid === user.uid\r\n                    ? { backgroundColor: chatcolor }\r\n                    : null\r\n                }\r\n                onClick={(e) => clickHandler(e)}\r\n     \r\n              >    { determineMsgtype(msg) }</p>\r\n\r\n             <Threedots msgs={msgs} user={user} msg={msg} convoid={convoid}/>\r\n\r\n                <small\r\n                className={\r\n                  msg.senderid === user.uid\r\n                    ? \"alignRight elapsedtime\"\r\n                    : \"alignLeft elapsedtime\"\r\n                }\r\n              ><ReactTimeAgo date={msg.msgdate.toDate()}/></small>\r\n              <div\r\n                className=\"reaction\"\r\n                style={{ display: (msg.reaction1||msg.reaction2) ? \"flex\" : \"none\", width: (msg.reaction1===''||msg.reaction2==='')?'22px':'42px' }}\r\n              >\r\n                <i className={ msg.reaction1 === \"fad fa-heart\"? \"emoj fas fa-\" + msg.reaction1: \"emoj fad fa-\" + msg.reaction1 }></i>\r\n                <i style={{marginLeft: msg.reaction2===''?'':'5px'}}className={ msg.reaction2 === \"fad fa-heart\"? \"emoj fas fa-\" + msg.reaction2: \"emoj fad fa-\" + msg.reaction2}></i>\r\n              </div>\r\n            </div>\r\n            <img src={msg.senderid === user.uid ? userimg : chatimg} alt=\"\" />\r\n          </div>\r\n        );\r\n      });\r\n  const progressbar = useRef();\r\n  const progresswidth = useRef();\r\n  const [img, setImg] = useState();\r\n  const inputref = useRef()\r\n  function sendFile(type) {\r\n    let file = document.querySelector(`.${type}file`).files[0];\r\n    if (file) {\r\n      var idxDot = file.name.lastIndexOf(\".\") + 1;\r\n      var extFile = file.name.substr(idxDot, file.name.length).toLowerCase();\r\n\r\n      const storageRef = firebase.storage().ref(`${convoid}/${file.name}`);\r\n      const task = storageRef.put(file);\r\n      task.on(\r\n        \"state_changes\",\r\n\r\n        function progress(snap) {\r\n          progressbar.current.style.display = \"flex\";\r\n          const percentage = (snap.bytesTransferred / snap.totalBytes) * 100;\r\n          progresswidth.current.style.height = `${percentage}%`;\r\n        },\r\n        function error(err) {},\r\n        function complete() {\r\n          if (type === \"image\") {\r\n            if (extFile === \"jpg\" || extFile === \"jpeg\" || extFile === \"png\") {\r\n              let msgobject = {\r\n                message: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n                reaction1: \"\",\r\n                reaction2: \"\",\r\n                msgdate: firebase.firestore.Timestamp.now(),\r\n                msgid: db.collection(\"conversations\").doc().id,\r\n                read: false,\r\n                senderid: user.uid,\r\n                editing: false,\r\n                nobackground: true,\r\n                emoji: true,\r\n                base64: true\r\n              };\r\n              let notificationobj = {\r\n                notifimsg: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n                notifidate: firebase.firestore.Timestamp.now(),\r\n                read: false,\r\n                sender: user.displayName,\r\n                base64: true,\r\n                id: convoid,\r\n                senderid: user.uid,\r\n                notifiid: db.collection('users').doc().id              }      \r\n                if(notifibool){\r\n                  db.collection('notifications').doc(chatuser).update({\r\n                    notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n                  })\r\n                }\r\n              db.collection(\"conversations\")\r\n                .doc(convoid)\r\n                .update({\r\n                  lastmsgdate: date,\r\n                  messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n                });\r\n            } else {\r\n              setNotifi(true);\r\n              setNotificont({\r\n                emoji: \"fal fa-exclamation-circle\",\r\n                msg: \"Only Images are allowed!\"\r\n              });\r\n              setTimeout(() => {\r\n                setNotifi(false);\r\n              }, 300500);\r\n            }\r\n          } else if (type === \"paperclip\") {\r\n            let msgobject = {\r\n              message: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n              reaction1: \"\",\r\n              reaction2: \"\",\r\n              msgdate: firebase.firestore.Timestamp.now(),\r\n              msgid: db.collection(\"conversations\").doc().id,\r\n              read: false,\r\n              senderid: user.uid,\r\n              editing: false,\r\n              nobackground: true,\r\n              emoji: true,\r\n              file: true,\r\n              name: file.name,\r\n              base64: false\r\n            };\r\n            let notificationobj = {\r\n              notifimsg: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n              notifidate: firebase.firestore.Timestamp.now(),\r\n              read: false,\r\n              sender: user.displayName,\r\n              file: true,\r\n              id: convoid,\r\n              senderid: user.uid,\r\n              notifiid: db.collection('users').doc().id            }      \r\n            if(notifibool){\r\n              db.collection('notifications').doc(chatuser).update({\r\n                notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n              })\r\n            }\r\n            db.collection(\"conversations\")\r\n              .doc(convoid)\r\n              .update({\r\n                lastmsgdate: date,\r\n                messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n              });\r\n          } else if (type === \"microphone\") {\r\n          }else if(type==='film') {\r\n              if(extFile==='mp4'||'gif'||'avi'){\r\n                let msgobject = {\r\n                  message: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n                  reaction1: \"\",\r\n                  reaction2: \"\",\r\n                  msgdate: firebase.firestore.Timestamp.now(),\r\n                  msgid: db.collection(\"conversations\").doc().id,\r\n                  read: false,\r\n                  senderid: user.uid,\r\n                  editing: false,\r\n                  nobackground: true,\r\n                  emoji: true,\r\n                  video: true\r\n                };\r\n                let notificationobj = {\r\n                  notifimsg: `https://firebasestorage.googleapis.com/v0/b/${storageRef.bucket}/o/${convoid}%2F${file.name}?alt=media`,\r\n                  notifidate: firebase.firestore.Timestamp.now(),\r\n                  read: false,\r\n                  sender: user.displayName,\r\n                  video: true,\r\n                  id: convoid,\r\n                  senderid: user.uid,\r\n                  notifiid: db.collection('users').doc().id                }      \r\n                if(notifibool){\r\n                  db.collection('notifications').doc(chatuser).update({\r\n                    notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n                  })\r\n                }\r\n                db.collection(\"conversations\")\r\n                  .doc(convoid)\r\n                  .update({\r\n                    lastmsgdate: date,\r\n                    messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n                  });\r\n              }else {\r\n\r\n              }\r\n          }\r\n          progressbar.current.style.display = \"none\";\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  const icons = [\r\n    { icon: \"image\", type: \"file\" },\r\n    {icon: 'film', type:'file'},\r\n    { icon: \"paperclip\", type: \"file\" },\r\n    { icon: \"microphone\", type: \"microphone\" },\r\n\r\n  ];\r\n\r\n  let iconsrow = icons.map((icon) => {\r\n    return (\r\n      <Hoverableicondiv\r\n        progressbar={progressbar}\r\n        progresswidth={progresswidth}\r\n        classNames=\"\"\r\n        icon={icon.icon}\r\n        type={icon.type}\r\n        special={true}\r\n        sendFile={sendFile}\r\n        convoid={convoid}\r\n        inputref={inputref}\r\n        \r\n      />\r\n    );\r\n  });\r\n\r\n  function editMsg() {\r\n    msgs &&\r\n      msgs.map((msg) => {\r\n        if (msgid === msg.msgid) {\r\n          let itemindex = msgs.indexOf(msg);\r\n          msgs[itemindex].message = updatedMsg;\r\n          db.collection(\"conversations\").doc(convoid).update({\r\n            messages: msgs\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  function contextMenu(e) {\r\n    let customcontext = document.querySelector(\".contextmenu\");\r\n    const bounding = customcontext.getBoundingClientRect();\r\n    e.preventDefault();\r\n    setMsgid(e.currentTarget.getAttribute(\"id\"));\r\n    setContextmenu(true);\r\n    if (type === \"small\") {\r\n      customcontext.style.top = `${e.pageY - 201}px`;\r\n      customcontext.style.left = `${0}px`;\r\n    } else {\r\n    const bounding = customcontext.getBoundingClientRect()\r\n    customcontext.style.top = `${e.pageY -200}px`;\r\n    customcontext.style.left = `${e.pageX -150 }px`;\r\n    }\r\n\r\n    if (!updatedMsg === \"\") {\r\n      editMsg();\r\n    }\r\n  }\r\n  function sendEmoji(emoji) {\r\n    let msgobject = {\r\n      message: emoji,\r\n      reaction1: \"\",\r\n      reaction2: \"\",\r\n      msgdate: firebase.firestore.Timestamp.now(),\r\n      msgid: db.collection(\"conversations\").doc().id,\r\n      read: false,\r\n      senderid: user.uid,\r\n      editing: false,\r\n      nobackground: false,\r\n      emoji: true\r\n    };\r\n    db.collection(\"conversations\")\r\n      .doc(convoid)\r\n      .update({\r\n        lastmsgdate: date,\r\n        messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n      });\r\n      let notificationobj = {\r\n        notifimsg: emoji,\r\n        notifidate: firebase.firestore.Timestamp.now(),\r\n        read: false,\r\n        sender: user.displayName,\r\n        id: convoid,\r\n        senderid: user.uid,\r\n        notifiid: db.collection('users').doc().id\r\n      }      \r\n      if(notifibool){\r\n        db.collection('notifications').doc(chatuser).update({\r\n          notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n        })\r\n      }\r\n    setMsgstring(\"\");\r\n    typerRef.current.setAttribute(\"style\", \"height: 50px\");\r\n  }\r\n  const scrollto = useRef()\r\n  function  sendMessage() {\r\n    scrollto.current.scrollIntoView({ behavior: 'smooth', block: 'start' })\r\n    const imageRegex = /(?:https?|ftp):\\/\\/[\\S]*\\.(?:png|jpe?g|gif|svg|webp)/g;\r\n    if (msgstring.match(imageRegexB) != null) {\r\n      let msgobject = {\r\n        message: msgstring,\r\n        reaction1: \"\",\r\n        reaction2: '',\r\n        msgdate: firebase.firestore.Timestamp.now(),\r\n        msgid: db.collection(\"conversations\").doc().id,\r\n        read: false,\r\n        senderid: user.uid,\r\n        editing: false,\r\n        nobackground: true,\r\n        emoji: false\r\n      };\r\n      db.collection(\"conversations\")\r\n        .doc(convoid)\r\n        .update({\r\n          lastmsgdate: date,\r\n          messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n        });\r\n        let notificationobj = {\r\n          notifimsg: msgstring,\r\n          notifidate: firebase.firestore.Timestamp.now(),\r\n          read: false,\r\n          sender: user.displayName,\r\n          id: convoid,\r\n          senderid: user.uid,\r\n          notifiid: db.collection('users').doc().id,\r\n\r\n        }      \r\n        if(notifibool){\r\n          db.collection('notifications').doc(chatuser).update({\r\n            notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n          })\r\n        }else {\r\n          return null\r\n        }\r\n      setMsgstring(\"\");\r\n      typerRef.current.setAttribute(\"style\", \"height: 50px\");\r\n    } else if (msgstring.replace(/\\s/g, \"\").length) {\r\n      let msgobject = {\r\n        message: msgstring,\r\n        reaction1: \"\",\r\n        reaction2: \"\",\r\n        msgdate: firebase.firestore.Timestamp.now(),\r\n        msgid: db.collection(\"conversations\").doc().id,\r\n        read: false,\r\n        senderid: user.uid,\r\n        editing: false,\r\n        nobackground: false,\r\n        emoji: false\r\n      };\r\n      let notificationobj = {\r\n        notifimsg: msgstring,\r\n        notifidate: firebase.firestore.Timestamp.now(),\r\n        read: false,\r\n        sender: user.displayName,\r\n        id: convoid,\r\n        senderid: user.uid,\r\n        notifiid: db.collection('users').doc().id\r\n      }      \r\n      if(notifibool){\r\n        db.collection('notifications').doc(chatuser).update({\r\n          notifications: firebase.firestore.FieldValue.arrayUnion(notificationobj)\r\n        })\r\n      }\r\n      db.collection(\"conversations\")\r\n        .doc(convoid)\r\n        .update({\r\n          lastmsgdate: firebase.firestore.Timestamp.now(),\r\n          messages: firebase.firestore.FieldValue.arrayUnion(msgobject)\r\n        });\r\n      setMsgstring(\"\");\r\n      typerRef.current.setAttribute(\"style\", \"height: 50px\");\r\n    }\r\n  }\r\n  function triggerSend(e) {\r\n    if (e.keyCode === 13 && !e.shiftKey) {\r\n      e.preventDefault();\r\n      sendMessage();\r\n    }\r\n  }\r\n  function formatTextarea() {\r\n\r\n    // setTyping(true)\r\n    // showTypingAnim()\r\n  }\r\n  const emojipickerref = useRef()\r\n  function inputFunc(){\r\n    typerRef.current.focus()\r\n    setEmojipicker(!emojipicker)\r\n  }\r\n  function showTypingAnim() {\r\n    setTyperid(user.uid);\r\n    let infoobj = {\r\n      convoid,\r\n      creatorid,\r\n      recipientid,\r\n      usertyping: typing,\r\n      userref: db.collection(\"users\").doc(recipientid),\r\n      typerid\r\n    };\r\n    db.collection(\"conversations\")\r\n      .doc(convoid)\r\n      .update({\r\n        // convoinfo: infoobj\r\n      })\r\n      .then(() => {\r\n        db.collection(\"conversations\")\r\n          .doc(convoid)\r\n          .onSnapshot((snap) => {\r\n            // setTyperid(snap.data().convoinfo.typerid)\r\n            // setRealtyping(snap.data().convoinfo.usertyping)\r\n          });\r\n      });\r\n  }\r\n  const [zoomamount, setZoomamount]=useState(1)\r\n  function zoom(el){\r\n   if(el.type==='in'){\r\n    setZoomamount(prev=>prev+ 0.1);\r\n   }else {\r\n    if(zoomamount>1){\r\n      setZoomamount(prev=>prev- 0.1);\r\n    }\r\n   }\r\n\r\n  }\r\n  const onEmojiClick = (event, emojiobject)=>{\r\n   setMsgstring(msgstring + emojiobject.emoji)\r\n  }\r\n  useEffect(() => {\r\n    let timer = setInterval(() => {\r\n      setUpdateelapsed((prev) => prev + 1);\r\n    }, 60000);\r\n    return () => {\r\n      clearInterval(timer);\r\n    };\r\n  }, []);\r\n  useEffect(() => {\r\n    let timer = setInterval(() => {\r\n      setTyping(false);\r\n    }, 4000);\r\n    // showTypingAnim()\r\n    return () => {\r\n      clearInterval(timer);\r\n    };\r\n  }, [typing]);\r\n\r\n  useEffect(() => {\r\n    db.collection(\"users\")\r\n      .doc(creatorid)\r\n      .onSnapshot((snap) => {\r\n        const user = snap.data();\r\n        setRecipname(user.userinfo.name);\r\n        setRecipimg(user.userinfo.cover);\r\n        setRecipcity(user.userinfo.city);\r\n        setRecipcountry(user.userinfo.country);\r\n      });\r\n    db.collection(\"users\")\r\n      .doc(recipientid)\r\n      .onSnapshot((snap) => {\r\n        const user = snap.data();\r\n        setUserimg(user.userinfo.cover);\r\n        setUsername(user.userinfo.name);\r\n      });\r\n    db.collection(\"users\")\r\n      .doc(chatuser)\r\n      .onSnapshot((snap) => {\r\n        const user = snap.data();\r\n        setChatname(user.userinfo.name);\r\n        setChatimg(user.userinfo.cover);\r\n        setChatcity(user.userinfo.city);\r\n        setChatcountry(user.userinfo.country);\r\n        setChatactive(user.online);\r\n        setActivestatus(user.userinfo.online);\r\n        setLoading(false);\r\n      });\r\n  }, [creatorid, recipientid, chatuser]);\r\n  useEffect(() => {\r\n    db.collection(\"users\")\r\n      .doc(user.uid)\r\n      .onSnapshot((snap) => {\r\n        const user = snap.data();\r\n        setChatcolor(user.customization.color);\r\n        setUserimg(user.userinfo.cover);\r\n      });\r\n  }, [chatcolor, chatuser]);\r\n  useEffect(() => {\r\n    db.collection(\"users\")\r\n      .doc(chatuser)\r\n      .onSnapshot((snap) => {\r\n        let user = snap.data();\r\n        setUserchatcolor(user.customization.chatcolor);\r\n      });\r\n  }, [chatuser]);\r\n  useEffect(() => {\r\n\r\n    db.collection(\"conversations\")\r\n    .doc(convoid)\r\n    .get().then((snap) => {\r\n      let use = snap.data();\r\n      setMsgs(use.messages);\r\n      setLoader(false);\r\n      setTheme(use.customizedconvo.theme);\r\n      setEmojitype(use.customizedconvo.emoji);\r\n      if(user.uid===props.diag.convoinfo.creatorid) {\r\n        setNotifibool(use.notifications2)\r\n        setNickname(use.nickname1)\r\n      }else {\r\n        setNotifibool(use.notifications1)\r\n        setNickname(use.nickname2)\r\n      }\r\n    }); \r\n\r\n  \r\n  }, [convoid]);\r\n\r\n  return (\r\n\r\n    <>  \r\n\r\n         <div className=\"top br-l\">\r\n        <div className=\"profilepic\">\r\n          <div className=\"relative\">\r\n            {loading ? (\r\n              <div className={\"loader blue reloader\"}>\r\n                <div class=\"lds-ring\">\r\n                  <div></div>\r\n                  <div></div>\r\n                  <div></div>\r\n                  <div></div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              [\r\n                <img src={chatimg} alt=\"\" />,\r\n                <div\r\n                  className=\"notifi\"\r\n                  style={{\r\n                    backgroundColor: chatactive ? \"rgb(44, 255, 44)\" : \"#FF3D3D\"\r\n                  }}\r\n                ></div>\r\n              ]\r\n            )}\r\n          </div>\r\n          <div>\r\n            {nickname===''?<p className='username'>{chatname.length>15?chatname.slice(0, 15)+'...':chatname}</p>:<p className='username'>{nickname}</p>}\r\n            <small>{chatactive ? \"Online\" : \"Offline\"}</small>\r\n          </div>\r\n        </div>\r\n        <div className=\"controls\">\r\n          <i class=\"fal fa-phone-alt\" style={{ color: themecolor }}></i>\r\n          <i class=\"fal fa-video\" style={{ color: themecolor }}></i>\r\n          {icon && icon === \"fal fa-times\" ? (\r\n            <i\r\n              className={icon}\r\n              style={{ padding: \"0 5px\", color: themecolor }}\r\n              onClick={() => setState(false)}\r\n            ></i>\r\n          ) : (\r\n            <Link exact to={\"/chatsettings/\" + convoid}>\r\n              <i\r\n                style={{ padding: \"0 5px\", color: themecolor }}\r\n                class=\"fal fa-ellipsis-v\"\r\n              ></i>\r\n            </Link>\r\n          )}\r\n        </div>\r\n      </div>\r\n \r\n      <Route\r\n        render={({ location }) => (\r\n          <div\r\n            className={!theme?\"msgs black\":theme==='https://i.imgur.com/4hzNTTq.png'?'msgs black':'msgs'}\r\n            style={\r\n              theme\r\n                ? { backgroundImage: \"url(\" + theme + \")\" }\r\n                : { backgroundImage: \"url(https://i.imgur.com/4hzNTTq.png)\" }\r\n            }\r\n          >\r\n            <div className=\"grid\">\r\n              <div className=\"scrollto\" ref={scrollto}></div>\r\n\r\n              {loader ? (\r\n                <div className={loader ? \"loader opa\" : \"loader\"}>\r\n                  <div class=\"lds-ring\">\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                    <div></div>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                allmsgs\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      />\r\n   <div className=\"search whiteb br-l\">\r\n    <div className=\"plus\">\r\n      <i\r\n        class={visible ? \"fal fa-minus\" : \"fal fa-plus\"}\r\n        style={{ color: themecolor }}\r\n        onClick={() => setVisible(!visible)}\r\n      ></i>\r\n      <CSSTransition\r\n        in={visible}\r\n        timeout={300}\r\n        classNames=\"iconshover\"\r\n        unmountOnExit\r\n      >\r\n        <div className={\"icons\"}>\r\n          {iconsrow}\r\n          <span className=\"uploader bs\" ref={progressbar}>\r\n            <span className=\"percent\" ref={progresswidth}></span>\r\n          </span>\r\n        </div>\r\n      </CSSTransition>\r\n    </div>\r\n    <div className=\"textarea flexrow\">\r\n    <textarea\r\n      type=\"text\"\r\n      placeholder=\"Send a message...\"\r\n      onKeyUp={(e) => triggerSend(e)}\r\n      ref={typerRef}\r\n      value={msgstring}\r\n      onChange={(e) => {\r\n        setMsgstring(e.target.value);\r\n\r\n      }}\r\n      onInput={()=>formatTextarea()}\r\n\r\n    ></textarea>\r\n    <div className=\"gif_emoji\">\r\n    <i className=\"fal fa-laugh\" onClick={()=>{inputFunc()}}></i>\r\n    <i class=\"fal fa-comment-alt-smile\" onClick={()=>setGif(!gif)}></i>\r\n    </div>\r\n\r\n   </div>\r\n      <div className=\"flexrow\">\r\n      <span\r\n      role=\"img\"\r\n      aria-label=\"emoji\"\r\n      onClick={() => sendEmoji(emojitype)}\r\n      style={{ cursor: \"pointer\" }}\r\n    >\r\n      {emojitype}\r\n    </span>\r\n    <i\r\n      class=\"fal fa-paper-plane\"\r\n      style={{ color: themecolor }}\r\n      onClick={() => {sendMessage();setEmojipicker(false)}}\r\n    ></i>\r\n      </div>\r\n  </div>\r\n \r\n      <Contextmenu\r\n        setShowinput={setShowinput}\r\n        editMsg={editMsg}\r\n        setUpdatedMsg={setUpdatedMsg}\r\n        convoid={convoid}\r\n        type={\"msg\"}\r\n        msgid={msgid}\r\n        setMsgid={setMsgid}\r\n        setContextmenu={setContextmenu}\r\n        contextmenu={contextmenu}\r\n        contextstyle={contextstyle}\r\n      />\r\n\r\n      <CSSTransition in={gif} unmountOnExit classNames='gif' timeout={300}>\r\n        <Gif chatimg={chatimg} setGif={setGif} convoid={convoid} notifibool={notifibool} chatuser={chatuser}/>\r\n      </CSSTransition>\r\n      <CSSTransition\r\n        in={notifi}\r\n        timeout={300}\r\n        classNames=\"displayerror\"\r\n        unmountOnExit\r\n      >\r\n        <div className=\"errormsg bs diagmsg\">\r\n          <i\r\n            className={notificont.emoji}\r\n            style={{ position: \"absolute\", left: \"20px\" }}\r\n          ></i>{\" \"}\r\n          <p>{notificont.msg}</p>\r\n          <i\r\n            className=\"far fa-times\"\r\n            style={{ color: themecolor }}\r\n            onClick={() => setNotifi(false)}\r\n          ></i>\r\n        </div>\r\n      </CSSTransition>\r\n      <CSSTransition in={modal} classNames=\"modal\" timeout={0}>\r\n        <div className=\"modal overflowimgcontainer\">\r\n         <div className=\"buttons\">\r\n         \r\n         <i className=\"fal fa-search-minus\" onClick={()=>zoom({type: 'out'})}></i>\r\n         <i class=\"fal fa-redo-alt\" onClick={()=>setZoomamount(1)}></i>\r\n         <i class=\"fal fa-search-plus\" onClick={()=>zoom({type: 'in'})}></i>\r\n         </div>\r\n          <ScrollContainer className='grabbercontainer' hideScrollbars={true}>\r\n          <img src=\"\" alt=\"\" ref={imgsrc}style={{width: 100*zoomamount+'%', height: 100*zoomamount+'%'}} />\r\n          </ScrollContainer>\r\n          <i className=\"fal fa-times\" onClick={() => {setModal(false); setZoomamount(1)}}></i>\r\n        </div>\r\n      </CSSTransition>\r\n      <CSSTransition in={emojipicker}  classNames='emojipicker' timeout={300} >\r\n       <div className=\"emojipicker\" ref={emojipickerref} onMouseOver={()=>typerRef.current.focus()} onClick={()=>typerRef.current.focus()}>\r\n        <div className=\"times\"> <i className=\"fal fa-times\" onClick={()=>setEmojipicker(false)}></i></div>\r\n       <Picker onEmojiClick={onEmojiClick}/>\r\n       </div>\r\n      </CSSTransition>\r\n    </>\r\n  );\r\n}\r\nexport default Dialogue;\r\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,EAAEC,UAAU,QAAQ,OAAO;AACtE,SAASC,OAAO,EAAEC,KAAK,EAAEC,IAAI,QAAQ,kBAAkB;AACvD,OAAOC,KAAK,MAAM,SAAS;AAC3B,OAAOC,QAAQ,MAAM,UAAU;AAC/B,SAASC,EAAE,QAAQ,SAAS;AAC5B,OAAOC,WAAW,MAAM,eAAe;AACvC,SAASC,QAAQ,EAAEC,IAAI,EAAEC,cAAc,QAAQ,gBAAgB;AAC/D,OAAO,gCAAgC;AACvC,SAASC,aAAa,EAAEC,eAAe,QAAQ,wBAAwB;AACvE,OAAOC,WAAW,MAAM,eAAe;AACvC,SAASC,UAAU,QAAQ,eAAe;AAC1C,OAAOC,gBAAgB,MAAM,qBAAqB;AAClD,OAAOC,cAAc,MAAM,wBAAwB;AACnD,OAAOC,MAAM,MAAM,wBAAwB;AAC3C,OAAOC,GAAG,MAAM,qBAAqB;AACrC,OAAOC,OAAO,MAAM,sBAAsB;AAC1C,OAAOC,CAAC,MAAM,mBAAmB;AACjC,OAAOC,SAAS,MAAM,2BAA2B;AACjD,OAAOC,GAAG,MAAM,eAAe;AAC/B,OAAOC,YAAY,MAAM,gBAAgB;AACzC,OAAOC,iBAAiB,MAAM,qBAAqB;AACnD,OAAOC,cAAc,MAAM,gCAAgC;AAC3D,OAAOC,SAAS,MAAM,2BAA2B;AACjD,OAAOC,eAAe,MAAM,2BAA2B;AACvD,SAASC,aAAa,QAAQ,iBAAiB;AAC/C,OAAOC,MAAM,MAAM,oBAAoB;AAAC;AAAA;AAExC,SAASC,QAAQ,CAACC,KAAK,EAAE;EAAA;EAAA;EACvB,kBAMI/B,UAAU,CAACc,UAAU,CAAC;IALxBkB,UAAU,eAAVA,UAAU;IACVC,MAAM,eAANA,MAAM;IACNC,SAAS,eAATA,SAAS;IACTC,UAAU,eAAVA,UAAU;IACVC,aAAa,eAAbA,aAAa;EAEf,gBAAoBvC,QAAQ,CAAC,KAAK,CAAC;IAAA;IAA5BwC,GAAG;IAAEC,MAAM;EAClB,iBAAwBzC,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA7B0C,IAAI;IAAEC,OAAO;EACpB,iBAAkC3C,QAAQ,CAAC,EAAE,CAAC;IAAA;IAAvC4C,SAAS;IAAEC,YAAY;EAC9B,iBAA0C7C,QAAQ,CAAC,CAAC,CAAC;IAAA;IAA9C8C,aAAa;IAAEC,gBAAgB;EACtC,iBAA4B/C,QAAQ,CAAC,KAAK,CAAC;IAAA;IAApCgD,MAAM;IAAEC,SAAS;EACxB,kBAAoCjD,QAAQ,CAAC,KAAK,CAAC;IAAA;IAA5CkD,UAAU;IAAEC,aAAa;EAChC,kBAA8BnD,QAAQ,CAAC,EAAE,CAAC;IAAA;IAAnCoD,OAAO;IAAEC,UAAU;EAC1B,kBAAwCrD,QAAQ,CAAC,KAAK,CAAC;IAAA;IAAhDsD,YAAY;IAAEC,eAAe;EACpC,kBAAkCvD,QAAQ,CAAC,EAAE,CAAC;IAAA;IAAvCwD,SAAS;IAAEC,YAAY;EAC9B,kBAAgCzD,QAAQ,CAAC,EAAE,CAAC;IAAA;IAArC0D,QAAQ;IAAEC,WAAW;EAC5B,kBAAkC3D,QAAQ,CAAC,EAAE,CAAC;IAAA;IAAvC4D,SAAS;IAAEC,YAAY;EAC9B,kBAAwC7D,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA7C8D,YAAY;IAAEC,eAAe;EACpC,kBAA8B/D,QAAQ,CAAC,EAAE,CAAC;IAAA;IAAnCgE,OAAO;IAAEC,UAAU;EAC1B,kBAAgCjE,QAAQ,CAAC,EAAE,CAAC;IAAA;IAArCkE,QAAQ;IAAEC,WAAW;EAC5B,kBAA8BnE,QAAQ,CAAC,KAAK,CAAC;IAAA;IAAtCoE,OAAO;IAAEC,UAAU;EAC1B,kBAAsCrE,QAAQ,CAAC,KAAK,CAAC;IAAA;IAA9CsE,WAAW;IAAEC,cAAc;EAClC,kBAAwCvE,QAAQ,CAAC;MAC/CwE,GAAG,EAAE,CAAC;MACNC,IAAI,EAAE;IACR,CAAC,CAAC;IAAA;IAHKC,YAAY;IAAEC,eAAe;EAIpC,kBAAkC3E,QAAQ,CAAC,IAAI,CAAC;IAAA;IAAzC4E,UAAU;IAAEC,aAAa;EAChC,kBAAkC7E,QAAQ,CAAC,EAAE,CAAC;IAAA;IAAvC8E,SAAS;IAAEC,YAAY;EAC9B,kBAA4B/E,QAAQ,CAAC,IAAI,CAAC;IAAA;IAAnCgF,MAAM;IAAEC,SAAS;EACxB,kBAA8BjF,QAAQ,CAAC,IAAI,CAAC;IAAA;IAArCkF,OAAO;IAAEC,UAAU;EAC1B,kBAAkCnF,QAAQ,CAAC,EAAE,CAAC;IAAA;IAAvCoF,SAAS;IAAEC,YAAY;EAC9B,kBAA0CrF,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA/CsF,aAAa;IAAEC,gBAAgB;EACtC,kBAAkCvF,QAAQ,CAAC,KAAK,CAAC;IAAA;IAA1CwF,SAAS;IAAEC,YAAY;EAC9B,kBAAoCzF,QAAQ,CAAC,EAAE,CAAC;IAAA;IAAzC0F,UAAU;IAAEC,aAAa;EAChC,kBAAkC3F,QAAQ,CAAC,KAAK,CAAC;IAAA;IAA1C4F,SAAS;IAAEC,YAAY;EAC9B,kBAA0B7F,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA/B8F,KAAK;IAAEC,QAAQ;EACtB,kBAA0B/F,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA/BgG,KAAK;IAAEC,QAAQ;EACtB,kBAAgCjG,QAAQ,CAAC,EAAE,CAAC;IAAA;IAArCkG,QAAQ;IAAEC,WAAW;EAC5B,kBAA8BnG,QAAQ,CAAC,EAAE,CAAC;IAAA;IAAnCoG,OAAO;IAAEC,UAAU;EAC1B,kBAAgCrG,QAAQ,CAAC,EAAE,CAAC;IAAA;IAArCsG,QAAQ;IAAEC,WAAW;EAC5B,kBAAsCvG,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA3CwG,WAAW;IAAEC,cAAc;EAClC,kBAAoCzG,QAAQ,CAAC,EAAE,CAAC;IAAA;IAAzC0G,UAAU;IAAEC,aAAa;EAChC,kBAAgC3G,QAAQ,CAAC,EAAE,CAAC;IAAA;IAArC4G,QAAQ;IAAEC,WAAW;EAC5B,kBAAoC7G,QAAQ,CAAC,KAAK,CAAC;IAAA;IAA5C8G,WAAW;IAAEC,cAAc;EAClC,IAAMC,MAAM,GAAG,EAAE;EACjB,IAAQC,QAAQ,GAA2B/E,KAAK,CAAxC+E,QAAQ;IAAEC,QAAQ,GAAiBhF,KAAK,CAA9BgF,QAAQ;IAAEC,IAAI,GAAWjF,KAAK,CAApBiF,IAAI;IAAEC,IAAI,GAAKlF,KAAK,CAAdkF,IAAI;EACtC,IAAQC,QAAQ,GAAKnF,KAAK,CAACoF,IAAI,CAAvBD,QAAQ;EAChB,4BAA4CnF,KAAK,CAACoF,IAAI,CAACC,SAAS;IAAxDC,OAAO,yBAAPA,OAAO;IAAEC,SAAS,yBAATA,SAAS;IAAEC,WAAW,yBAAXA,WAAW;EACvC,IAAMC,IAAI,GAAGnH,QAAQ,CAACoH,IAAI,EAAE,CAACC,WAAW;EACxC,IAAMC,IAAI,GAAGtH,QAAQ,CAACuH,SAAS,CAACC,UAAU,CAACC,eAAe,EAAE;EAC5D,IAAMC,QAAQ,GAAGhI,MAAM,EAAE;EACzB,IAAMiI,EAAE,GAAE1H,EAAE,CAAC2H,UAAU,CAAC,OAAO,CAAC,CAACC,GAAG,EAAE,CAACF,EAAE;EACzC,IAAMG,GAAG,GAAG,sJAAsJ;EAClK,IAAMC,WAAW,GAAG,uDAAuD;EAC3E,IAAIC,MAAM,GAAG,wGAAwG;EACrH,IAAIC,IAAI,GAAG,wGAAwG;EAEnH,SAASC,OAAO,CAACC,GAAG,EAAE;IACpB,IAAIC,CAAC,GAAG,oHAAoH;IAC5H,OAAOD,GAAG,CAACE,KAAK,CAACD,CAAC,CAAC,GAAGE,MAAM,CAACC,EAAE,GAAG,KAAK;EACzC;EAGA,SAASC,gBAAgB,CAACC,GAAG,EAAE;IAC7B,IAAIA,GAAG,CAACC,MAAM,EAAE;MACd,oBAAO,QAAC,GAAG;QAAC,GAAG,EAAED,GAAG,CAACE,OAAQ;QAAC,IAAI,EAAE;MAAK;QAAA;QAAA;QAAA;MAAA,QAAE;IAE7C,CAAC,MACI,IAAIF,GAAG,CAACG,IAAI,EAAE;MACjB,oBAAO,QAAC,OAAO;QAAC,IAAI,EAAEH,GAAG,CAACI,IAAK;QAAC,IAAI,EAAEJ,GAAG,CAACE;MAAQ;QAAA;QAAA;QAAA;MAAA,QAAE;IACtD,CAAC,MAAM,IAAIF,GAAG,CAACK,KAAK,EAAE;MACpB,oBAAO,QAAC,SAAS;QAAC,GAAG,EAAEL,GAAG,CAACE;MAAQ;QAAA;QAAA;QAAA;MAAA,QAAE;IAEvC,CAAC,MAAM,IAAIF,GAAG,CAACM,KAAK,EAAC;MACnB,oBAAO,QAAC,MAAM;QAAC,IAAI,EAAC,OAAO;QAAC,IAAI,EAAEN,GAAG,CAACE;MAAQ;QAAA;QAAA;QAAA;MAAA,QAAE;IAClD,CAAC,MACI,IAAIT,OAAO,CAACO,GAAG,CAACE,OAAO,CAAC,EAAE;MAC7B,oBAAO,QAAC,MAAM;QAAC,IAAI,EAAE,gCAAgC,GAAGT,OAAO,CAACO,GAAG,CAACE,OAAO;MAAE;QAAA;QAAA;QAAA;MAAA,QAAG;IAElF;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAAA,KACK;MACH,IAAMK,EAAE,GAAGP,GAAG,CAACE,OAAO,CAACM,OAAO,CAACnB,GAAG,EAAE,UAACoB,CAAC,EAAEC,IAAI,EAAEC,GAAG;QAAA,OACjDD,IAAI,gBAAUA,IAAI,CAACE,IAAI,EAAE,iCAAoBD,GAAG,SAAK;MAAA,EACpD;MACD,oBAAQ;QAAK,uBAAuB,EAAE;UAACE,MAAM,EAACN;QAAE;MAAE;QAAA;QAAA;QAAA;MAAA,QAAQ;IAC5D;EACF;EACA,SAASO,cAAc,CAACd,GAAG,EAAE;IAC3B,IAAIe,KAAK,GAAG,wGAAwG;IACpH,IAAGrC,IAAI,CAACsC,GAAG,KAAGhB,GAAG,CAACiB,QAAQ,EAAC;MACzB,IAAIjB,GAAG,CAACG,IAAI,EAAE;QACZ,OAAO,UAAU;MACnB,CAAC,MAAK,IAAIH,GAAG,CAACM,KAAK,EAAE;QACnB,OAAO,WAAW;MACpB,CAAC,MACK,IAAIN,GAAG,CAACK,KAAK,EAAE;QACnB,OAAO,WAAW;MACpB,CAAC,MAAM,IAAIL,GAAG,CAACkB,KAAK,EAAE;QACpB,OAAO,cAAc;MACvB,CAAC,MAAM,IAAIlB,GAAG,CAACmB,YAAY,EAAE;QAC3B,OAAO,WAAW;MACpB,CAAC,MAAM,IAAI1B,OAAO,CAACO,GAAG,CAACE,OAAO,CAAC,EAAE;QAC/B;MACF;MACA;MACA;MACA;MAAA,KACK;QACH,OAAO,KAAK;MACd;IACF,CAAC,MAAK;MACJ,IAAIF,GAAG,CAACG,IAAI,EAAE;QACZ,OAAO,gBAAgB;MACzB,CAAC,MAAK,IAAIH,GAAG,CAACM,KAAK,EAAE;QACnB,OAAO,iBAAiB;MAC1B,CAAC,MACK,IAAIN,GAAG,CAACK,KAAK,EAAE;QACnB,OAAO,iBAAiB;MAC1B,CAAC,MAAM,IAAIL,GAAG,CAACkB,KAAK,EAAE;QACpB,OAAO,oBAAoB;MAC7B,CAAC,MAAM,IAAIlB,GAAG,CAACmB,YAAY,EAAE;QAC3B,OAAO,iBAAiB;MAC1B,CAAC,MAAM,IAAI1B,OAAO,CAACO,GAAG,CAACE,OAAO,CAAC,EAAE;QAC/B;MACF;MACA;MACA;MACA;MAAA,KACK;QACH,OAAO,WAAW;MACpB;IACF;EACF;EACA,kBAAsBnJ,QAAQ,CAAC,KAAK,CAAC;IAAA;IAA9BqK,IAAI;IAAEC,OAAO;EACpB,SAASC,UAAU,CAACtB,GAAG,EAAC;IACtB,IAAMuB,KAAK,GAAGC,QAAQ,CAACC,gBAAgB,CAAC,cAAc,CAAC;IACvDF,KAAK,CAACG,OAAO,CAAC,UAAAC,EAAE,EAAE;MAChBA,EAAE,CAACC,KAAK,CAACC,OAAO,GAAC,MAAM;IACzB,CAAC,CAAC;IACF,IAAMF,EAAE,GAAGH,QAAQ,CAACM,aAAa,yBAAiB9B,GAAG,CAACjD,KAAK,SAAK;IAChE4E,EAAE,CAACC,KAAK,CAACC,OAAO,GAAC,MAAM;EACzB;EACA,kBAA0B9K,QAAQ,CAAC,KAAK,CAAC;IAAA;IAAlCgL,KAAK;IAAEC,QAAQ;EACtB,IAAMC,MAAM,GAAGhL,MAAM,EAAE;EACvB,kBAAoCF,QAAQ,CAAC,EAAE,CAAC;IAAA;IAAzCmL,WAAW;IAAEC,cAAc;EAClC,SAASC,YAAY,CAACC,CAAC,EAAE;IACvB,IAAMhC,KAAK,GAAGgC,CAAC,CAACC,MAAM,CAACR,aAAa,CAAC,WAAW,CAAC;IACjD,IAAMxB,KAAK,GAAG+B,CAAC,CAACC,MAAM,CAACC,OAAO,CAAC,OAAO,CAAC;IAEvC,IAAMC,IAAI,GAAGH,CAAC,CAACC,MAAM,CAACR,aAAa,CAAC,UAAU,CAAC;IAC/C,IAAMH,EAAE,GAAGU,CAAC,CAACC,MAAM,CAACC,OAAO,CAAC,KAAK,CAAC;IAClC,IAAIZ,EAAE,IAAIU,CAAC,CAACI,aAAa,CAACC,QAAQ,CAACf,EAAE,CAAC,EAAE;MACtCK,QAAQ,CAAC,IAAI,CAAC;MACd,IAAMC,OAAM,GAAGT,QAAQ,CAACM,aAAa,CAAC,YAAY,CAAC;MACnDK,cAAc,CAACR,EAAE,CAACgB,YAAY,CAAC,KAAK,CAAC,CAAC;MACtCV,OAAM,CAACW,YAAY,CAAC,KAAK,EAAEjB,EAAE,CAACgB,YAAY,CAAC,KAAK,CAAC,CAAC;IACpD;IACA,IAAIrC,KAAK,IAAI+B,CAAC,CAACI,aAAa,CAACC,QAAQ,CAACpC,KAAK,CAAC,EAAE,CAC9C;EACF;EACA,IAAMuC,OAAO,GACXzE,QAAQ,IACRA,QAAQ,CACL0E,KAAK,CAAC,CAAC,CAAC,CACRC,OAAO,EAAE,CACTC,GAAG,CAAC,UAAChD,GAAG,EAAK;IACZ,oBACE;MACE,EAAE,EAAEA,GAAG,CAACjD,KAAM;MACd,SAAS,EAAEiD,GAAG,CAACiB,QAAQ,KAAKvC,IAAI,CAACsC,GAAG,GAAG,SAAS,GAAG,QAAS;MAC5D,aAAa,EAAE,uBAACqB,CAAC;QAAA,OAAKY,WAAW,CAACZ,CAAC,CAAC;MAAA,CAAC;MAAA,wBAErC;QAAK,SAAS,EAAC,MAAM;QAAA,wBACnB;UACE,SAAS,EAAEvB,cAAc,CAACd,GAAG,CAAE;UAC/B,eAAe,EAAE,KAAM;UACvB,KAAK,EACHA,GAAG,CAACmB,YAAY,GACZ;YAAE+B,eAAe,EAAE;UAAc,CAAC,GAClClD,GAAG,CAACkB,KAAK,GACT;YAAEgC,eAAe,EAAE;UAAc,CAAC,GAClCzD,OAAO,CAACO,GAAG,CAACE,OAAO,CAAC,GACpB;YAAEgD,eAAe,EAAE;UAAc,CAAC,GAClClD,GAAG,CAACiB,QAAQ,KAAKvC,IAAI,CAACsC,GAAG,GACzB;YAAEkC,eAAe,EAAE/G;UAAU,CAAC,GAC9B,IACL;UACD,OAAO,EAAE,iBAACkG,CAAC;YAAA,OAAKD,YAAY,CAACC,CAAC,CAAC;UAAA,CAAC;UAAA,mBAE3BtC,gBAAgB,CAACC,GAAG,CAAC;QAAA;UAAA;UAAA;UAAA;QAAA,SAAM,eAEnC,QAAC,SAAS;UAAC,IAAI,EAAEvG,IAAK;UAAC,IAAI,EAAEiF,IAAK;UAAC,GAAG,EAAEsB,GAAI;UAAC,OAAO,EAAEzB;QAAQ;UAAA;UAAA;UAAA;QAAA,SAAE,eAE7D;UACA,SAAS,EACPyB,GAAG,CAACiB,QAAQ,KAAKvC,IAAI,CAACsC,GAAG,GACrB,wBAAwB,GACxB,uBACL;UAAA,uBACF,QAAC,YAAY;YAAC,IAAI,EAAEhB,GAAG,CAACmD,OAAO,CAACC,MAAM;UAAG;YAAA;YAAA;YAAA;UAAA;QAAE;UAAA;UAAA;UAAA;QAAA,SAAQ,eACpD;UACE,SAAS,EAAC,UAAU;UACpB,KAAK,EAAE;YAAEvB,OAAO,EAAG7B,GAAG,CAACqD,SAAS,IAAErD,GAAG,CAACsD,SAAS,GAAI,MAAM,GAAG,MAAM;YAAEC,KAAK,EAAGvD,GAAG,CAACqD,SAAS,KAAG,EAAE,IAAErD,GAAG,CAACsD,SAAS,KAAG,EAAE,GAAE,MAAM,GAAC;UAAO,CAAE;UAAA,wBAEpI;YAAG,SAAS,EAAGtD,GAAG,CAACqD,SAAS,KAAK,cAAc,GAAE,cAAc,GAAGrD,GAAG,CAACqD,SAAS,GAAE,cAAc,GAAGrD,GAAG,CAACqD;UAAW;YAAA;YAAA;YAAA;UAAA,SAAK,eACtH;YAAG,KAAK,EAAE;cAACG,UAAU,EAAExD,GAAG,CAACsD,SAAS,KAAG,EAAE,GAAC,EAAE,GAAC;YAAK,CAAE;YAAA,SAAS,EAAGtD,GAAG,CAACsD,SAAS,KAAK,cAAc,GAAE,cAAc,GAAGtD,GAAG,CAACsD,SAAS,GAAE,cAAc,GAAGtD,GAAG,CAACsD;UAAU;YAAA;YAAA;YAAA;UAAA,SAAK;QAAA;UAAA;UAAA;UAAA;QAAA,SAClK;MAAA;QAAA;QAAA;QAAA;MAAA,SACF,eACN;QAAK,GAAG,EAAEtD,GAAG,CAACiB,QAAQ,KAAKvC,IAAI,CAACsC,GAAG,GAAGjG,OAAO,GAAGoC,OAAQ;QAAC,GAAG,EAAC;MAAE;QAAA;QAAA;QAAA;MAAA,SAAG;IAAA;MAAA;MAAA;MAAA;IAAA,SAC9D;EAEV,CAAC,CAAC;EACN,IAAMsG,WAAW,GAAGxM,MAAM,EAAE;EAC5B,IAAMyM,aAAa,GAAGzM,MAAM,EAAE;EAC9B,kBAAsBF,QAAQ,EAAE;IAAA;IAAzB4J,GAAG;IAAEgD,MAAM;EAClB,IAAMC,QAAQ,GAAG3M,MAAM,EAAE;EACzB,SAAS4M,QAAQ,CAAC1F,IAAI,EAAE;IACtB,IAAIgC,IAAI,GAAGqB,QAAQ,CAACM,aAAa,YAAK3D,IAAI,UAAO,CAAC2F,KAAK,CAAC,CAAC,CAAC;IAC1D,IAAI3D,IAAI,EAAE;MACR,IAAI4D,MAAM,GAAG5D,IAAI,CAACC,IAAI,CAAC4D,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC;MAC3C,IAAIC,OAAO,GAAG9D,IAAI,CAACC,IAAI,CAAC8D,MAAM,CAACH,MAAM,EAAE5D,IAAI,CAACC,IAAI,CAAC+D,MAAM,CAAC,CAACC,WAAW,EAAE;MAEtE,IAAMC,UAAU,GAAG9M,QAAQ,CAAC+M,OAAO,EAAE,CAACC,GAAG,WAAIhG,OAAO,cAAI4B,IAAI,CAACC,IAAI,EAAG;MACpE,IAAMoE,IAAI,GAAGH,UAAU,CAACI,GAAG,CAACtE,IAAI,CAAC;MACjCqE,IAAI,CAACE,EAAE,CACL,eAAe,EAEf,SAASC,QAAQ,CAACC,IAAI,EAAE;QACtBnB,WAAW,CAACoB,OAAO,CAACjD,KAAK,CAACC,OAAO,GAAG,MAAM;QAC1C,IAAMiD,UAAU,GAAIF,IAAI,CAACG,gBAAgB,GAAGH,IAAI,CAACI,UAAU,GAAI,GAAG;QAClEtB,aAAa,CAACmB,OAAO,CAACjD,KAAK,CAACqD,MAAM,aAAMH,UAAU,MAAG;MACvD,CAAC,EACD,SAASI,KAAK,CAACC,GAAG,EAAE,CAAC,CAAC,EACtB,SAASC,QAAQ,GAAG;QAClB,IAAIjH,IAAI,KAAK,OAAO,EAAE;UACpB,IAAI8F,OAAO,KAAK,KAAK,IAAIA,OAAO,KAAK,MAAM,IAAIA,OAAO,KAAK,KAAK,EAAE;YAChE,IAAIoB,SAAS,GAAG;cACdnF,OAAO,wDAAiDmE,UAAU,CAACiB,MAAM,gBAAM/G,OAAO,gBAAM4B,IAAI,CAACC,IAAI,eAAY;cACjHiD,SAAS,EAAE,EAAE;cACbC,SAAS,EAAE,EAAE;cACbH,OAAO,EAAE5L,QAAQ,CAACuH,SAAS,CAACyG,SAAS,CAACC,GAAG,EAAE;cAC3CzI,KAAK,EAAEvF,EAAE,CAAC2H,UAAU,CAAC,eAAe,CAAC,CAACC,GAAG,EAAE,CAACF,EAAE;cAC9CuG,IAAI,EAAE,KAAK;cACXxE,QAAQ,EAAEvC,IAAI,CAACsC,GAAG;cAClB0E,OAAO,EAAE,KAAK;cACdvE,YAAY,EAAE,IAAI;cAClBD,KAAK,EAAE,IAAI;cACXjB,MAAM,EAAE;YACV,CAAC;YACD,IAAI0F,eAAe,GAAG;cACpBC,SAAS,wDAAiDvB,UAAU,CAACiB,MAAM,gBAAM/G,OAAO,gBAAM4B,IAAI,CAACC,IAAI,eAAY;cACnHyF,UAAU,EAAEtO,QAAQ,CAACuH,SAAS,CAACyG,SAAS,CAACC,GAAG,EAAE;cAC9CC,IAAI,EAAE,KAAK;cACXK,MAAM,EAAEpH,IAAI,CAACqH,WAAW;cACxB9F,MAAM,EAAE,IAAI;cACZf,EAAE,EAAEX,OAAO;cACX0C,QAAQ,EAAEvC,IAAI,CAACsC,GAAG;cAClBgF,QAAQ,EAAExO,EAAE,CAAC2H,UAAU,CAAC,OAAO,CAAC,CAACC,GAAG,EAAE,CAACF;YAAgB,CAAC;YACxD,IAAGvD,UAAU,EAAC;cACZnE,EAAE,CAAC2H,UAAU,CAAC,eAAe,CAAC,CAACC,GAAG,CAACpB,QAAQ,CAAC,CAACiI,MAAM,CAAC;gBAClDC,aAAa,EAAE3O,QAAQ,CAACuH,SAAS,CAACC,UAAU,CAACoH,UAAU,CAACR,eAAe;cACzE,CAAC,CAAC;YACJ;YACFnO,EAAE,CAAC2H,UAAU,CAAC,eAAe,CAAC,CAC3BC,GAAG,CAACb,OAAO,CAAC,CACZ0H,MAAM,CAAC;cACNG,WAAW,EAAEvH,IAAI;cACjBT,QAAQ,EAAE7G,QAAQ,CAACuH,SAAS,CAACC,UAAU,CAACoH,UAAU,CAACd,SAAS;YAC9D,CAAC,CAAC;UACN,CAAC,MAAM;YACLjM,SAAS,CAAC,IAAI,CAAC;YACfE,aAAa,CAAC;cACZ4H,KAAK,EAAE,2BAA2B;cAClClB,GAAG,EAAE;YACP,CAAC,CAAC;YACFqG,UAAU,CAAC,YAAM;cACfjN,SAAS,CAAC,KAAK,CAAC;YAClB,CAAC,EAAE,MAAM,CAAC;UACZ;QACF,CAAC,MAAM,IAAI+E,IAAI,KAAK,WAAW,EAAE;UAC/B,IAAIkH,UAAS,GAAG;YACdnF,OAAO,wDAAiDmE,UAAU,CAACiB,MAAM,gBAAM/G,OAAO,gBAAM4B,IAAI,CAACC,IAAI,eAAY;YACjHiD,SAAS,EAAE,EAAE;YACbC,SAAS,EAAE,EAAE;YACbH,OAAO,EAAE5L,QAAQ,CAACuH,SAAS,CAACyG,SAAS,CAACC,GAAG,EAAE;YAC3CzI,KAAK,EAAEvF,EAAE,CAAC2H,UAAU,CAAC,eAAe,CAAC,CAACC,GAAG,EAAE,CAACF,EAAE;YAC9CuG,IAAI,EAAE,KAAK;YACXxE,QAAQ,EAAEvC,IAAI,CAACsC,GAAG;YAClB0E,OAAO,EAAE,KAAK;YACdvE,YAAY,EAAE,IAAI;YAClBD,KAAK,EAAE,IAAI;YACXf,IAAI,EAAE,IAAI;YACVC,IAAI,EAAED,IAAI,CAACC,IAAI;YACfH,MAAM,EAAE;UACV,CAAC;UACD,IAAI0F,gBAAe,GAAG;YACpBC,SAAS,wDAAiDvB,UAAU,CAACiB,MAAM,gBAAM/G,OAAO,gBAAM4B,IAAI,CAACC,IAAI,eAAY;YACnHyF,UAAU,EAAEtO,QAAQ,CAACuH,SAAS,CAACyG,SAAS,CAACC,GAAG,EAAE;YAC9CC,IAAI,EAAE,KAAK;YACXK,MAAM,EAAEpH,IAAI,CAACqH,WAAW;YACxB5F,IAAI,EAAE,IAAI;YACVjB,EAAE,EAAEX,OAAO;YACX0C,QAAQ,EAAEvC,IAAI,CAACsC,GAAG;YAClBgF,QAAQ,EAAExO,EAAE,CAAC2H,UAAU,CAAC,OAAO,CAAC,CAACC,GAAG,EAAE,CAACF;UAAc,CAAC;UACxD,IAAGvD,UAAU,EAAC;YACZnE,EAAE,CAAC2H,UAAU,CAAC,eAAe,CAAC,CAACC,GAAG,CAACpB,QAAQ,CAAC,CAACiI,MAAM,CAAC;cAClDC,aAAa,EAAE3O,QAAQ,CAACuH,SAAS,CAACC,UAAU,CAACoH,UAAU,CAACR,gBAAe;YACzE,CAAC,CAAC;UACJ;UACAnO,EAAE,CAAC2H,UAAU,CAAC,eAAe,CAAC,CAC3BC,GAAG,CAACb,OAAO,CAAC,CACZ0H,MAAM,CAAC;YACNG,WAAW,EAAEvH,IAAI;YACjBT,QAAQ,EAAE7G,QAAQ,CAACuH,SAAS,CAACC,UAAU,CAACoH,UAAU,CAACd,UAAS;UAC9D,CAAC,CAAC;QACN,CAAC,MAAM,IAAIlH,IAAI,KAAK,YAAY,EAAE,CAClC,CAAC,MAAK,IAAGA,IAAI,KAAG,MAAM,EAAE;UACpB,IAAG8F,OAAO,KAAG,KAAK,IAAE,KAAK,IAAE,KAAK,EAAC;YAC/B,IAAIoB,WAAS,GAAG;cACdnF,OAAO,wDAAiDmE,UAAU,CAACiB,MAAM,gBAAM/G,OAAO,gBAAM4B,IAAI,CAACC,IAAI,eAAY;cACjHiD,SAAS,EAAE,EAAE;cACbC,SAAS,EAAE,EAAE;cACbH,OAAO,EAAE5L,QAAQ,CAACuH,SAAS,CAACyG,SAAS,CAACC,GAAG,EAAE;cAC3CzI,KAAK,EAAEvF,EAAE,CAAC2H,UAAU,CAAC,eAAe,CAAC,CAACC,GAAG,EAAE,CAACF,EAAE;cAC9CuG,IAAI,EAAE,KAAK;cACXxE,QAAQ,EAAEvC,IAAI,CAACsC,GAAG;cAClB0E,OAAO,EAAE,KAAK;cACdvE,YAAY,EAAE,IAAI;cAClBD,KAAK,EAAE,IAAI;cACXZ,KAAK,EAAE;YACT,CAAC;YACD,IAAIqF,iBAAe,GAAG;cACpBC,SAAS,wDAAiDvB,UAAU,CAACiB,MAAM,gBAAM/G,OAAO,gBAAM4B,IAAI,CAACC,IAAI,eAAY;cACnHyF,UAAU,EAAEtO,QAAQ,CAACuH,SAAS,CAACyG,SAAS,CAACC,GAAG,EAAE;cAC9CC,IAAI,EAAE,KAAK;cACXK,MAAM,EAAEpH,IAAI,CAACqH,WAAW;cACxBzF,KAAK,EAAE,IAAI;cACXpB,EAAE,EAAEX,OAAO;cACX0C,QAAQ,EAAEvC,IAAI,CAACsC,GAAG;cAClBgF,QAAQ,EAAExO,EAAE,CAAC2H,UAAU,CAAC,OAAO,CAAC,CAACC,GAAG,EAAE,CAACF;YAAkB,CAAC;YAC5D,IAAGvD,UAAU,EAAC;cACZnE,EAAE,CAAC2H,UAAU,CAAC,eAAe,CAAC,CAACC,GAAG,CAACpB,QAAQ,CAAC,CAACiI,MAAM,CAAC;gBAClDC,aAAa,EAAE3O,QAAQ,CAACuH,SAAS,CAACC,UAAU,CAACoH,UAAU,CAACR,iBAAe;cACzE,CAAC,CAAC;YACJ;YACAnO,EAAE,CAAC2H,UAAU,CAAC,eAAe,CAAC,CAC3BC,GAAG,CAACb,OAAO,CAAC,CACZ0H,MAAM,CAAC;cACNG,WAAW,EAAEvH,IAAI;cACjBT,QAAQ,EAAE7G,QAAQ,CAACuH,SAAS,CAACC,UAAU,CAACoH,UAAU,CAACd,WAAS;YAC9D,CAAC,CAAC;UACN,CAAC,MAAK,CAEN;QACJ;QACA5B,WAAW,CAACoB,OAAO,CAACjD,KAAK,CAACC,OAAO,GAAG,MAAM;MAC5C,CAAC,CACF;IACH;EACF;EAEA,IAAMyE,KAAK,GAAG,CACZ;IAAEpI,IAAI,EAAE,OAAO;IAAEC,IAAI,EAAE;EAAO,CAAC,EAC/B;IAACD,IAAI,EAAE,MAAM;IAAEC,IAAI,EAAC;EAAM,CAAC,EAC3B;IAAED,IAAI,EAAE,WAAW;IAAEC,IAAI,EAAE;EAAO,CAAC,EACnC;IAAED,IAAI,EAAE,YAAY;IAAEC,IAAI,EAAE;EAAa,CAAC,CAE3C;EAED,IAAIoI,QAAQ,GAAGD,KAAK,CAACtD,GAAG,CAAC,UAAC9E,IAAI,EAAK;IACjC,oBACE,QAAC,gBAAgB;MACf,WAAW,EAAEuF,WAAY;MACzB,aAAa,EAAEC,aAAc;MAC7B,UAAU,EAAC,EAAE;MACb,IAAI,EAAExF,IAAI,CAACA,IAAK;MAChB,IAAI,EAAEA,IAAI,CAACC,IAAK;MAChB,OAAO,EAAE,IAAK;MACd,QAAQ,EAAE0F,QAAS;MACnB,OAAO,EAAEtF,OAAQ;MACjB,QAAQ,EAAEqF;IAAS;MAAA;MAAA;MAAA;IAAA,SAEnB;EAEN,CAAC,CAAC;EAEF,SAAS4C,OAAO,GAAG;IACjB/M,IAAI,IACFA,IAAI,CAACuJ,GAAG,CAAC,UAAChD,GAAG,EAAK;MAChB,IAAIjD,KAAK,KAAKiD,GAAG,CAACjD,KAAK,EAAE;QACvB,IAAI0J,SAAS,GAAGhN,IAAI,CAACiN,OAAO,CAAC1G,GAAG,CAAC;QACjCvG,IAAI,CAACgN,SAAS,CAAC,CAACvG,OAAO,GAAGzD,UAAU;QACpCjF,EAAE,CAAC2H,UAAU,CAAC,eAAe,CAAC,CAACC,GAAG,CAACb,OAAO,CAAC,CAAC0H,MAAM,CAAC;UACjD7H,QAAQ,EAAE3E;QACZ,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;EACN;EAEA,SAASwJ,WAAW,CAACZ,CAAC,EAAE;IACtB,IAAIsE,aAAa,GAAGnF,QAAQ,CAACM,aAAa,CAAC,cAAc,CAAC;IAC1D,IAAM8E,QAAQ,GAAGD,aAAa,CAACE,qBAAqB,EAAE;IACtDxE,CAAC,CAACyE,cAAc,EAAE;IAClB9J,QAAQ,CAACqF,CAAC,CAACI,aAAa,CAACE,YAAY,CAAC,IAAI,CAAC,CAAC;IAC5CrH,cAAc,CAAC,IAAI,CAAC;IACpB,IAAI6C,IAAI,KAAK,OAAO,EAAE;MACpBwI,aAAa,CAAC/E,KAAK,CAACrG,GAAG,aAAM8G,CAAC,CAAC0E,KAAK,GAAG,GAAG,OAAI;MAC9CJ,aAAa,CAAC/E,KAAK,CAACpG,IAAI,aAAM,CAAC,OAAI;IACrC,CAAC,MAAM;MACP,IAAMoL,SAAQ,GAAGD,aAAa,CAACE,qBAAqB,EAAE;MACtDF,aAAa,CAAC/E,KAAK,CAACrG,GAAG,aAAM8G,CAAC,CAAC0E,KAAK,GAAE,GAAG,OAAI;MAC7CJ,aAAa,CAAC/E,KAAK,CAACpG,IAAI,aAAM6G,CAAC,CAAC2E,KAAK,GAAE,GAAG,OAAK;IAC/C;IAEA,IAAI,CAACvK,UAAU,KAAK,EAAE,EAAE;MACtB+J,OAAO,EAAE;IACX;EACF;EACA,SAASS,SAAS,CAAC/F,KAAK,EAAE;IACxB,IAAImE,SAAS,GAAG;MACdnF,OAAO,EAAEgB,KAAK;MACdmC,SAAS,EAAE,EAAE;MACbC,SAAS,EAAE,EAAE;MACbH,OAAO,EAAE5L,QAAQ,CAACuH,SAAS,CAACyG,SAAS,CAACC,GAAG,EAAE;MAC3CzI,KAAK,EAAEvF,EAAE,CAAC2H,UAAU,CAAC,eAAe,CAAC,CAACC,GAAG,EAAE,CAACF,EAAE;MAC9CuG,IAAI,EAAE,KAAK;MACXxE,QAAQ,EAAEvC,IAAI,CAACsC,GAAG;MAClB0E,OAAO,EAAE,KAAK;MACdvE,YAAY,EAAE,KAAK;MACnBD,KAAK,EAAE;IACT,CAAC;IACD1J,EAAE,CAAC2H,UAAU,CAAC,eAAe,CAAC,CAC3BC,GAAG,CAACb,OAAO,CAAC,CACZ0H,MAAM,CAAC;MACNG,WAAW,EAAEvH,IAAI;MACjBT,QAAQ,EAAE7G,QAAQ,CAACuH,SAAS,CAACC,UAAU,CAACoH,UAAU,CAACd,SAAS;IAC9D,CAAC,CAAC;IACF,IAAIM,eAAe,GAAG;MACpBC,SAAS,EAAE1E,KAAK;MAChB2E,UAAU,EAAEtO,QAAQ,CAACuH,SAAS,CAACyG,SAAS,CAACC,GAAG,EAAE;MAC9CC,IAAI,EAAE,KAAK;MACXK,MAAM,EAAEpH,IAAI,CAACqH,WAAW;MACxB7G,EAAE,EAAEX,OAAO;MACX0C,QAAQ,EAAEvC,IAAI,CAACsC,GAAG;MAClBgF,QAAQ,EAAExO,EAAE,CAAC2H,UAAU,CAAC,OAAO,CAAC,CAACC,GAAG,EAAE,CAACF;IACzC,CAAC;IACD,IAAGvD,UAAU,EAAC;MACZnE,EAAE,CAAC2H,UAAU,CAAC,eAAe,CAAC,CAACC,GAAG,CAACpB,QAAQ,CAAC,CAACiI,MAAM,CAAC;QAClDC,aAAa,EAAE3O,QAAQ,CAACuH,SAAS,CAACC,UAAU,CAACoH,UAAU,CAACR,eAAe;MACzE,CAAC,CAAC;IACJ;IACF/L,YAAY,CAAC,EAAE,CAAC;IAChBqF,QAAQ,CAAC4F,OAAO,CAACjC,YAAY,CAAC,OAAO,EAAE,cAAc,CAAC;EACxD;EACA,IAAMsE,QAAQ,GAAGjQ,MAAM,EAAE;EACzB,SAAUkQ,WAAW,GAAG;IACtBD,QAAQ,CAACrC,OAAO,CAACuC,cAAc,CAAC;MAAEC,QAAQ,EAAE,QAAQ;MAAEC,KAAK,EAAE;IAAQ,CAAC,CAAC;IACvE,IAAMC,UAAU,GAAG,uDAAuD;IAC1E,IAAI5N,SAAS,CAACiG,KAAK,CAACN,WAAW,CAAC,IAAI,IAAI,EAAE;MACxC,IAAI+F,SAAS,GAAG;QACdnF,OAAO,EAAEvG,SAAS;QAClB0J,SAAS,EAAE,EAAE;QACbC,SAAS,EAAE,EAAE;QACbH,OAAO,EAAE5L,QAAQ,CAACuH,SAAS,CAACyG,SAAS,CAACC,GAAG,EAAE;QAC3CzI,KAAK,EAAEvF,EAAE,CAAC2H,UAAU,CAAC,eAAe,CAAC,CAACC,GAAG,EAAE,CAACF,EAAE;QAC9CuG,IAAI,EAAE,KAAK;QACXxE,QAAQ,EAAEvC,IAAI,CAACsC,GAAG;QAClB0E,OAAO,EAAE,KAAK;QACdvE,YAAY,EAAE,IAAI;QAClBD,KAAK,EAAE;MACT,CAAC;MACD1J,EAAE,CAAC2H,UAAU,CAAC,eAAe,CAAC,CAC3BC,GAAG,CAACb,OAAO,CAAC,CACZ0H,MAAM,CAAC;QACNG,WAAW,EAAEvH,IAAI;QACjBT,QAAQ,EAAE7G,QAAQ,CAACuH,SAAS,CAACC,UAAU,CAACoH,UAAU,CAACd,SAAS;MAC9D,CAAC,CAAC;MACF,IAAIM,eAAe,GAAG;QACpBC,SAAS,EAAEjM,SAAS;QACpBkM,UAAU,EAAEtO,QAAQ,CAACuH,SAAS,CAACyG,SAAS,CAACC,GAAG,EAAE;QAC9CC,IAAI,EAAE,KAAK;QACXK,MAAM,EAAEpH,IAAI,CAACqH,WAAW;QACxB7G,EAAE,EAAEX,OAAO;QACX0C,QAAQ,EAAEvC,IAAI,CAACsC,GAAG;QAClBgF,QAAQ,EAAExO,EAAE,CAAC2H,UAAU,CAAC,OAAO,CAAC,CAACC,GAAG,EAAE,CAACF;MAEzC,CAAC;MACD,IAAGvD,UAAU,EAAC;QACZnE,EAAE,CAAC2H,UAAU,CAAC,eAAe,CAAC,CAACC,GAAG,CAACpB,QAAQ,CAAC,CAACiI,MAAM,CAAC;UAClDC,aAAa,EAAE3O,QAAQ,CAACuH,SAAS,CAACC,UAAU,CAACoH,UAAU,CAACR,eAAe;QACzE,CAAC,CAAC;MACJ,CAAC,MAAK;QACJ,OAAO,IAAI;MACb;MACF/L,YAAY,CAAC,EAAE,CAAC;MAChBqF,QAAQ,CAAC4F,OAAO,CAACjC,YAAY,CAAC,OAAO,EAAE,cAAc,CAAC;IACxD,CAAC,MAAM,IAAIjJ,SAAS,CAAC6G,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC2D,MAAM,EAAE;MAC9C,IAAIkB,WAAS,GAAG;QACdnF,OAAO,EAAEvG,SAAS;QAClB0J,SAAS,EAAE,EAAE;QACbC,SAAS,EAAE,EAAE;QACbH,OAAO,EAAE5L,QAAQ,CAACuH,SAAS,CAACyG,SAAS,CAACC,GAAG,EAAE;QAC3CzI,KAAK,EAAEvF,EAAE,CAAC2H,UAAU,CAAC,eAAe,CAAC,CAACC,GAAG,EAAE,CAACF,EAAE;QAC9CuG,IAAI,EAAE,KAAK;QACXxE,QAAQ,EAAEvC,IAAI,CAACsC,GAAG;QAClB0E,OAAO,EAAE,KAAK;QACdvE,YAAY,EAAE,KAAK;QACnBD,KAAK,EAAE;MACT,CAAC;MACD,IAAIyE,iBAAe,GAAG;QACpBC,SAAS,EAAEjM,SAAS;QACpBkM,UAAU,EAAEtO,QAAQ,CAACuH,SAAS,CAACyG,SAAS,CAACC,GAAG,EAAE;QAC9CC,IAAI,EAAE,KAAK;QACXK,MAAM,EAAEpH,IAAI,CAACqH,WAAW;QACxB7G,EAAE,EAAEX,OAAO;QACX0C,QAAQ,EAAEvC,IAAI,CAACsC,GAAG;QAClBgF,QAAQ,EAAExO,EAAE,CAAC2H,UAAU,CAAC,OAAO,CAAC,CAACC,GAAG,EAAE,CAACF;MACzC,CAAC;MACD,IAAGvD,UAAU,EAAC;QACZnE,EAAE,CAAC2H,UAAU,CAAC,eAAe,CAAC,CAACC,GAAG,CAACpB,QAAQ,CAAC,CAACiI,MAAM,CAAC;UAClDC,aAAa,EAAE3O,QAAQ,CAACuH,SAAS,CAACC,UAAU,CAACoH,UAAU,CAACR,iBAAe;QACzE,CAAC,CAAC;MACJ;MACAnO,EAAE,CAAC2H,UAAU,CAAC,eAAe,CAAC,CAC3BC,GAAG,CAACb,OAAO,CAAC,CACZ0H,MAAM,CAAC;QACNG,WAAW,EAAE7O,QAAQ,CAACuH,SAAS,CAACyG,SAAS,CAACC,GAAG,EAAE;QAC/CpH,QAAQ,EAAE7G,QAAQ,CAACuH,SAAS,CAACC,UAAU,CAACoH,UAAU,CAACd,WAAS;MAC9D,CAAC,CAAC;MACJzL,YAAY,CAAC,EAAE,CAAC;MAChBqF,QAAQ,CAAC4F,OAAO,CAACjC,YAAY,CAAC,OAAO,EAAE,cAAc,CAAC;IACxD;EACF;EACA,SAAS4E,WAAW,CAACnF,CAAC,EAAE;IACtB,IAAIA,CAAC,CAACoF,OAAO,KAAK,EAAE,IAAI,CAACpF,CAAC,CAACqF,QAAQ,EAAE;MACnCrF,CAAC,CAACyE,cAAc,EAAE;MAClBK,WAAW,EAAE;IACf;EACF;EACA,SAASQ,cAAc,GAAG;;IAExB;IACA;EAAA;EAEF,IAAMC,cAAc,GAAG3Q,MAAM,EAAE;EAC/B,SAAS4Q,SAAS,GAAE;IAClB5I,QAAQ,CAAC4F,OAAO,CAACiD,KAAK,EAAE;IACxBhK,cAAc,CAAC,CAACD,WAAW,CAAC;EAC9B;EACA,SAASkK,cAAc,GAAG;IACxB3N,UAAU,CAACsE,IAAI,CAACsC,GAAG,CAAC;IACpB,IAAIgH,OAAO,GAAG;MACZzJ,OAAO,EAAPA,OAAO;MACPC,SAAS,EAATA,SAAS;MACTC,WAAW,EAAXA,WAAW;MACXwJ,UAAU,EAAElO,MAAM;MAClBmO,OAAO,EAAE1Q,EAAE,CAAC2H,UAAU,CAAC,OAAO,CAAC,CAACC,GAAG,CAACX,WAAW,CAAC;MAChDtE,OAAO,EAAPA;IACF,CAAC;IACD3C,EAAE,CAAC2H,UAAU,CAAC,eAAe,CAAC,CAC3BC,GAAG,CAACb,OAAO,CAAC,CACZ0H,MAAM,CAAC;MACN;IAAA,CACD,CAAC,CACDkC,IAAI,CAAC,YAAM;MACV3Q,EAAE,CAAC2H,UAAU,CAAC,eAAe,CAAC,CAC3BC,GAAG,CAACb,OAAO,CAAC,CACZ6J,UAAU,CAAC,UAACxD,IAAI,EAAK;QACpB;QACA;MAAA,CACD,CAAC;IACN,CAAC,CAAC;EACN;EACA,kBAAkC7N,QAAQ,CAAC,CAAC,CAAC;IAAA;IAAtCsR,UAAU;IAAEC,aAAa;EAChC,SAASC,IAAI,CAAC5G,EAAE,EAAC;IAChB,IAAGA,EAAE,CAACxD,IAAI,KAAG,IAAI,EAAC;MACjBmK,aAAa,CAAC,UAAAE,IAAI;QAAA,OAAEA,IAAI,GAAE,GAAG;MAAA,EAAC;IAC/B,CAAC,MAAK;MACL,IAAGH,UAAU,GAAC,CAAC,EAAC;QACdC,aAAa,CAAC,UAAAE,IAAI;UAAA,OAAEA,IAAI,GAAE,GAAG;QAAA,EAAC;MAChC;IACD;EAED;EACA,IAAMC,YAAY,GAAG,SAAfA,YAAY,CAAIC,KAAK,EAAEC,WAAW,EAAG;IAC1C/O,YAAY,CAACD,SAAS,GAAGgP,WAAW,CAACzH,KAAK,CAAC;EAC5C,CAAC;EACDlK,SAAS,CAAC,YAAM;IACd,IAAI4R,KAAK,GAAGC,WAAW,CAAC,YAAM;MAC5B/O,gBAAgB,CAAC,UAAC0O,IAAI;QAAA,OAAKA,IAAI,GAAG,CAAC;MAAA,EAAC;IACtC,CAAC,EAAE,KAAK,CAAC;IACT,OAAO,YAAM;MACXM,aAAa,CAACF,KAAK,CAAC;IACtB,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EACN5R,SAAS,CAAC,YAAM;IACd,IAAI4R,KAAK,GAAGC,WAAW,CAAC,YAAM;MAC5B7O,SAAS,CAAC,KAAK,CAAC;IAClB,CAAC,EAAE,IAAI,CAAC;IACR;IACA,OAAO,YAAM;MACX8O,aAAa,CAACF,KAAK,CAAC;IACtB,CAAC;EACH,CAAC,EAAE,CAAC7O,MAAM,CAAC,CAAC;EAEZ/C,SAAS,CAAC,YAAM;IACdQ,EAAE,CAAC2H,UAAU,CAAC,OAAO,CAAC,CACnBC,GAAG,CAACZ,SAAS,CAAC,CACd4J,UAAU,CAAC,UAACxD,IAAI,EAAK;MACpB,IAAMlG,IAAI,GAAGkG,IAAI,CAACmE,IAAI,EAAE;MACxBvO,YAAY,CAACkE,IAAI,CAACsK,QAAQ,CAAC5I,IAAI,CAAC;MAChC1F,WAAW,CAACgE,IAAI,CAACsK,QAAQ,CAACC,KAAK,CAAC;MAChCrO,YAAY,CAAC8D,IAAI,CAACsK,QAAQ,CAACE,IAAI,CAAC;MAChCpO,eAAe,CAAC4D,IAAI,CAACsK,QAAQ,CAACG,OAAO,CAAC;IACxC,CAAC,CAAC;IACJ3R,EAAE,CAAC2H,UAAU,CAAC,OAAO,CAAC,CACnBC,GAAG,CAACX,WAAW,CAAC,CAChB2J,UAAU,CAAC,UAACxD,IAAI,EAAK;MACpB,IAAMlG,IAAI,GAAGkG,IAAI,CAACmE,IAAI,EAAE;MACxB/N,UAAU,CAAC0D,IAAI,CAACsK,QAAQ,CAACC,KAAK,CAAC;MAC/B/N,WAAW,CAACwD,IAAI,CAACsK,QAAQ,CAAC5I,IAAI,CAAC;IACjC,CAAC,CAAC;IACJ5I,EAAE,CAAC2H,UAAU,CAAC,OAAO,CAAC,CACnBC,GAAG,CAACpB,QAAQ,CAAC,CACboK,UAAU,CAAC,UAACxD,IAAI,EAAK;MACpB,IAAMlG,IAAI,GAAGkG,IAAI,CAACmE,IAAI,EAAE;MACxB7L,WAAW,CAACwB,IAAI,CAACsK,QAAQ,CAAC5I,IAAI,CAAC;MAC/BhD,UAAU,CAACsB,IAAI,CAACsK,QAAQ,CAACC,KAAK,CAAC;MAC/B3L,WAAW,CAACoB,IAAI,CAACsK,QAAQ,CAACE,IAAI,CAAC;MAC/B1L,cAAc,CAACkB,IAAI,CAACsK,QAAQ,CAACG,OAAO,CAAC;MACrCzL,aAAa,CAACgB,IAAI,CAAC0K,MAAM,CAAC;MAC1B9O,eAAe,CAACoE,IAAI,CAACsK,QAAQ,CAACI,MAAM,CAAC;MACrClN,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC,CAAC;EACN,CAAC,EAAE,CAACsC,SAAS,EAAEC,WAAW,EAAET,QAAQ,CAAC,CAAC;EACtChH,SAAS,CAAC,YAAM;IACdQ,EAAE,CAAC2H,UAAU,CAAC,OAAO,CAAC,CACnBC,GAAG,CAACV,IAAI,CAACsC,GAAG,CAAC,CACboH,UAAU,CAAC,UAACxD,IAAI,EAAK;MACpB,IAAMlG,IAAI,GAAGkG,IAAI,CAACmE,IAAI,EAAE;MACxB3M,YAAY,CAACsC,IAAI,CAAC2K,aAAa,CAACC,KAAK,CAAC;MACtCtO,UAAU,CAAC0D,IAAI,CAACsK,QAAQ,CAACC,KAAK,CAAC;IACjC,CAAC,CAAC;EACN,CAAC,EAAE,CAAC9M,SAAS,EAAE6B,QAAQ,CAAC,CAAC;EACzBhH,SAAS,CAAC,YAAM;IACdQ,EAAE,CAAC2H,UAAU,CAAC,OAAO,CAAC,CACnBC,GAAG,CAACpB,QAAQ,CAAC,CACboK,UAAU,CAAC,UAACxD,IAAI,EAAK;MACpB,IAAIlG,IAAI,GAAGkG,IAAI,CAACmE,IAAI,EAAE;MACtBzM,gBAAgB,CAACoC,IAAI,CAAC2K,aAAa,CAAClN,SAAS,CAAC;IAChD,CAAC,CAAC;EACN,CAAC,EAAE,CAAC6B,QAAQ,CAAC,CAAC;EACdhH,SAAS,CAAC,YAAM;IAEdQ,EAAE,CAAC2H,UAAU,CAAC,eAAe,CAAC,CAC7BC,GAAG,CAACb,OAAO,CAAC,CACZgL,GAAG,EAAE,CAACpB,IAAI,CAAC,UAACvD,IAAI,EAAK;MACpB,IAAI4E,GAAG,GAAG5E,IAAI,CAACmE,IAAI,EAAE;MACrBrP,OAAO,CAAC8P,GAAG,CAACpL,QAAQ,CAAC;MACrBpC,SAAS,CAAC,KAAK,CAAC;MAChBc,QAAQ,CAAC0M,GAAG,CAACC,eAAe,CAAC5M,KAAK,CAAC;MACnCf,YAAY,CAAC0N,GAAG,CAACC,eAAe,CAACvI,KAAK,CAAC;MACvC,IAAGxC,IAAI,CAACsC,GAAG,KAAG/H,KAAK,CAACoF,IAAI,CAACC,SAAS,CAACE,SAAS,EAAE;QAC5C5C,aAAa,CAAC4N,GAAG,CAACE,cAAc,CAAC;QACjC9L,WAAW,CAAC4L,GAAG,CAACG,SAAS,CAAC;MAC5B,CAAC,MAAK;QACJ/N,aAAa,CAAC4N,GAAG,CAACI,cAAc,CAAC;QACjChM,WAAW,CAAC4L,GAAG,CAACK,SAAS,CAAC;MAC5B;IACF,CAAC,CAAC;EAGJ,CAAC,EAAE,CAACtL,OAAO,CAAC,CAAC;EAEb,oBAEE;IAAA,wBAEK;MAAK,SAAS,EAAC,UAAU;MAAA,wBAC1B;QAAK,SAAS,EAAC,YAAY;QAAA,wBACzB;UAAK,SAAS,EAAC,UAAU;UAAA,UACtBtC,OAAO,gBACN;YAAK,SAAS,EAAE,sBAAuB;YAAA,uBACrC;cAAK,KAAK,EAAC,UAAU;cAAA,wBACnB;gBAAA;gBAAA;gBAAA;cAAA,QAAW,eACX;gBAAA;gBAAA;gBAAA;cAAA,QAAW,eACX;gBAAA;gBAAA;gBAAA;cAAA,QAAW,eACX;gBAAA;gBAAA;gBAAA;cAAA,QAAW;YAAA;cAAA;cAAA;cAAA;YAAA;UACP;YAAA;YAAA;YAAA;UAAA,QACF,GAEN,cACE;YAAK,GAAG,EAAEkB,OAAQ;YAAC,GAAG,EAAC;UAAE;YAAA;YAAA;YAAA;UAAA,QAAG,eAC5B;YACE,SAAS,EAAC,QAAQ;YAClB,KAAK,EAAE;cACL+F,eAAe,EAAEzF,UAAU,GAAG,kBAAkB,GAAG;YACrD;UAAE;YAAA;YAAA;YAAA;UAAA,QACG;QAEV;UAAA;UAAA;UAAA;QAAA,QACG,eACN;UAAA,WACGE,QAAQ,KAAG,EAAE,gBAAC;YAAG,SAAS,EAAC,UAAU;YAAA,UAAEV,QAAQ,CAACkH,MAAM,GAAC,EAAE,GAAClH,QAAQ,CAAC6F,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,GAAC,KAAK,GAAC7F;UAAQ;YAAA;YAAA;YAAA;UAAA,QAAK,gBAAC;YAAG,SAAS,EAAC,UAAU;YAAA,UAAEU;UAAQ;YAAA;YAAA;YAAA;UAAA,QAAK,eAC3I;YAAA,UAAQF,UAAU,GAAG,QAAQ,GAAG;UAAS;YAAA;YAAA;YAAA;UAAA,QAAS;QAAA;UAAA;UAAA;UAAA;QAAA,QAC9C;MAAA;QAAA;QAAA;QAAA;MAAA,QACF,eACN;QAAK,SAAS,EAAC,UAAU;QAAA,wBACvB;UAAG,KAAK,EAAC,kBAAkB;UAAC,KAAK,EAAE;YAAE6L,KAAK,EAAEpQ;UAAW;QAAE;UAAA;UAAA;UAAA;QAAA,QAAK,eAC9D;UAAG,KAAK,EAAC,cAAc;UAAC,KAAK,EAAE;YAAEoQ,KAAK,EAAEpQ;UAAW;QAAE;UAAA;UAAA;UAAA;QAAA,QAAK,EACzDgF,IAAI,IAAIA,IAAI,KAAK,cAAc,gBAC9B;UACE,SAAS,EAAEA,IAAK;UAChB,KAAK,EAAE;YAAE4L,OAAO,EAAE,OAAO;YAAER,KAAK,EAAEpQ;UAAW,CAAE;UAC/C,OAAO,EAAE;YAAA,OAAM+E,QAAQ,CAAC,KAAK,CAAC;UAAA;QAAC;UAAA;UAAA;UAAA;QAAA,QAC5B,gBAEL,QAAC,IAAI;UAAC,KAAK;UAAC,EAAE,EAAE,gBAAgB,GAAGM,OAAQ;UAAA,uBACzC;YACE,KAAK,EAAE;cAAEuL,OAAO,EAAE,OAAO;cAAER,KAAK,EAAEpQ;YAAW,CAAE;YAC/C,KAAK,EAAC;UAAmB;YAAA;YAAA;YAAA;UAAA;QACtB;UAAA;UAAA;UAAA;QAAA,QAER;MAAA;QAAA;QAAA;QAAA;MAAA,QACG;IAAA;MAAA;MAAA;MAAA;IAAA,QACF,eAEN,QAAC,KAAK;MACJ,MAAM,EAAE;QAAA,IAAG6Q,QAAQ,QAARA,QAAQ;QAAA,oBACjB;UACE,SAAS,EAAE,CAAClN,KAAK,GAAC,YAAY,GAACA,KAAK,KAAG,iCAAiC,GAAC,YAAY,GAAC,MAAO;UAC7F,KAAK,EACHA,KAAK,GACD;YAAEmN,eAAe,EAAE,MAAM,GAAGnN,KAAK,GAAG;UAAI,CAAC,GACzC;YAAEmN,eAAe,EAAE;UAAuC,CAC/D;UAAA,uBAED;YAAK,SAAS,EAAC,MAAM;YAAA,wBACnB;cAAK,SAAS,EAAC,UAAU;cAAC,GAAG,EAAE9C;YAAS;cAAA;cAAA;cAAA;YAAA,SAAO,EAE9CnL,MAAM,gBACL;cAAK,SAAS,EAAEA,MAAM,GAAG,YAAY,GAAG,QAAS;cAAA,uBAC/C;gBAAK,KAAK,EAAC,UAAU;gBAAA,wBACnB;kBAAA;kBAAA;kBAAA;gBAAA,SAAW,eACX;kBAAA;kBAAA;kBAAA;gBAAA,SAAW,eACX;kBAAA;kBAAA;kBAAA;gBAAA,SAAW,eACX;kBAAA;kBAAA;kBAAA;gBAAA,SAAW;cAAA;gBAAA;gBAAA;gBAAA;cAAA;YACP;cAAA;cAAA;cAAA;YAAA,SACF,GAEN8G,OACD;UAAA;YAAA;YAAA;YAAA;UAAA;QACG;UAAA;UAAA;UAAA;QAAA,SACF;MAAA;IACN;MAAA;MAAA;MAAA;IAAA,QACF,eACL;MAAK,SAAS,EAAC,oBAAoB;MAAA,wBAClC;QAAK,SAAS,EAAC,MAAM;QAAA,wBACnB;UACE,KAAK,EAAE1H,OAAO,GAAG,cAAc,GAAG,aAAc;UAChD,KAAK,EAAE;YAAEmO,KAAK,EAAEpQ;UAAW,CAAE;UAC7B,OAAO,EAAE;YAAA,OAAMkC,UAAU,CAAC,CAACD,OAAO,CAAC;UAAA;QAAC;UAAA;UAAA;UAAA;QAAA,QACjC,eACL,QAAC,aAAa;UACZ,EAAE,EAAEA,OAAQ;UACZ,OAAO,EAAE,GAAI;UACb,UAAU,EAAC,YAAY;UACvB,aAAa;UAAA,uBAEb;YAAK,SAAS,EAAE,OAAQ;YAAA,WACrBoL,QAAQ,eACT;cAAM,SAAS,EAAC,aAAa;cAAC,GAAG,EAAE9C,WAAY;cAAA,uBAC7C;gBAAM,SAAS,EAAC,SAAS;gBAAC,GAAG,EAAEC;cAAc;gBAAA;gBAAA;gBAAA;cAAA;YAAQ;cAAA;cAAA;cAAA;YAAA,QAChD;UAAA;YAAA;YAAA;YAAA;UAAA;QACH;UAAA;UAAA;UAAA;QAAA,QACQ;MAAA;QAAA;QAAA;QAAA;MAAA,QACZ,eACN;QAAK,SAAS,EAAC,kBAAkB;QAAA,wBACjC;UACE,IAAI,EAAC,MAAM;UACX,WAAW,EAAC,mBAAmB;UAC/B,OAAO,EAAE,iBAACrB,CAAC;YAAA,OAAKmF,WAAW,CAACnF,CAAC,CAAC;UAAA,CAAC;UAC/B,GAAG,EAAEpD,QAAS;UACd,KAAK,EAAEtF,SAAU;UACjB,QAAQ,EAAE,kBAAC0I,CAAC,EAAK;YACfzI,YAAY,CAACyI,CAAC,CAACC,MAAM,CAAC2H,KAAK,CAAC;UAE9B,CAAE;UACF,OAAO,EAAE;YAAA,OAAItC,cAAc,EAAE;UAAA;QAAC;UAAA;UAAA;UAAA;QAAA,QAEpB,eACZ;UAAK,SAAS,EAAC,WAAW;UAAA,wBAC1B;YAAG,SAAS,EAAC,cAAc;YAAC,OAAO,EAAE,mBAAI;cAACE,SAAS,EAAE;YAAA;UAAE;YAAA;YAAA;YAAA;UAAA,QAAK,eAC5D;YAAG,KAAK,EAAC,0BAA0B;YAAC,OAAO,EAAE;cAAA,OAAIrO,MAAM,CAAC,CAACD,GAAG,CAAC;YAAA;UAAC;YAAA;YAAA;YAAA;UAAA,QAAK;QAAA;UAAA;UAAA;UAAA;QAAA,QAC7D;MAAA;QAAA;QAAA;QAAA;MAAA,QAED,eACH;QAAK,SAAS,EAAC,SAAS;QAAA,wBACxB;UACA,IAAI,EAAC,KAAK;UACV,cAAW,OAAO;UAClB,OAAO,EAAE;YAAA,OAAM0N,SAAS,CAACpL,SAAS,CAAC;UAAA,CAAC;UACpC,KAAK,EAAE;YAAEqO,MAAM,EAAE;UAAU,CAAE;UAAA,UAE5BrO;QAAS;UAAA;UAAA;UAAA;QAAA,QACL,eACP;UACE,KAAK,EAAC,oBAAoB;UAC1B,KAAK,EAAE;YAAEyN,KAAK,EAAEpQ;UAAW,CAAE;UAC7B,OAAO,EAAE,mBAAM;YAACiO,WAAW,EAAE;YAACrJ,cAAc,CAAC,KAAK,CAAC;UAAA;QAAE;UAAA;UAAA;UAAA;QAAA,QAClD;MAAA;QAAA;QAAA;QAAA;MAAA,QACG;IAAA;MAAA;MAAA;MAAA;IAAA,QACJ,eAEF,QAAC,WAAW;MACV,YAAY,EAAEtB,YAAa;MAC3B,OAAO,EAAEgK,OAAQ;MACjB,aAAa,EAAE9J,aAAc;MAC7B,OAAO,EAAE6B,OAAQ;MACjB,IAAI,EAAE,KAAM;MACZ,KAAK,EAAExB,KAAM;MACb,QAAQ,EAAEC,QAAS;MACnB,cAAc,EAAE1B,cAAe;MAC/B,WAAW,EAAED,WAAY;MACzB,YAAY,EAAEI;IAAa;MAAA;MAAA;MAAA;IAAA,QAC3B,eAEF,QAAC,aAAa;MAAC,EAAE,EAAElC,GAAI;MAAC,aAAa;MAAC,UAAU,EAAC,KAAK;MAAC,OAAO,EAAE,GAAI;MAAA,uBAClE,QAAC,GAAG;QAAC,OAAO,EAAE4D,OAAQ;QAAC,MAAM,EAAE3D,MAAO;QAAC,OAAO,EAAE+E,OAAQ;QAAC,UAAU,EAAE5C,UAAW;QAAC,QAAQ,EAAEqC;MAAS;QAAA;QAAA;QAAA;MAAA;IAAE;MAAA;MAAA;MAAA;IAAA,QACxF,eAChB,QAAC,aAAa;MACZ,EAAE,EAAE7E,MAAO;MACX,OAAO,EAAE,GAAI;MACb,UAAU,EAAC,cAAc;MACzB,aAAa;MAAA,uBAEb;QAAK,SAAS,EAAC,qBAAqB;QAAA,wBAClC;UACE,SAAS,EAAEE,UAAU,CAAC6H,KAAM;UAC5B,KAAK,EAAE;YAAEiJ,QAAQ,EAAE,UAAU;YAAE3O,IAAI,EAAE;UAAO;QAAE;UAAA;UAAA;UAAA;QAAA,QAC3C,EAAC,GAAG,eACT;UAAA,UAAInC,UAAU,CAAC2G;QAAG;UAAA;UAAA;UAAA;QAAA,QAAK,eACvB;UACE,SAAS,EAAC,cAAc;UACxB,KAAK,EAAE;YAAEsJ,KAAK,EAAEpQ;UAAW,CAAE;UAC7B,OAAO,EAAE;YAAA,OAAME,SAAS,CAAC,KAAK,CAAC;UAAA;QAAC;UAAA;UAAA;UAAA;QAAA,QAC7B;MAAA;QAAA;QAAA;QAAA;MAAA;IACD;MAAA;MAAA;MAAA;IAAA,QACQ,eAChB,QAAC,aAAa;MAAC,EAAE,EAAE2I,KAAM;MAAC,UAAU,EAAC,OAAO;MAAC,OAAO,EAAE,CAAE;MAAA,uBACtD;QAAK,SAAS,EAAC,4BAA4B;QAAA,wBAC1C;UAAK,SAAS,EAAC,SAAS;UAAA,wBAExB;YAAG,SAAS,EAAC,qBAAqB;YAAC,OAAO,EAAE;cAAA,OAAIwG,IAAI,CAAC;gBAACpK,IAAI,EAAE;cAAK,CAAC,CAAC;YAAA;UAAC;YAAA;YAAA;YAAA;UAAA,QAAK,eACzE;YAAG,KAAK,EAAC,iBAAiB;YAAC,OAAO,EAAE;cAAA,OAAImK,aAAa,CAAC,CAAC,CAAC;YAAA;UAAC;YAAA;YAAA;YAAA;UAAA,QAAK,eAC9D;YAAG,KAAK,EAAC,oBAAoB;YAAC,OAAO,EAAE;cAAA,OAAIC,IAAI,CAAC;gBAACpK,IAAI,EAAE;cAAI,CAAC,CAAC;YAAA;UAAC;YAAA;YAAA;YAAA;UAAA,QAAK;QAAA;UAAA;UAAA;UAAA;QAAA,QAC7D,eACL,QAAC,eAAe;UAAC,SAAS,EAAC,kBAAkB;UAAC,cAAc,EAAE,IAAK;UAAA,uBACnE;YAAK,GAAG,EAAC,EAAE;YAAC,GAAG,EAAC,EAAE;YAAC,GAAG,EAAE8D,MAAO;YAAA,KAAK,EAAE;cAACsB,KAAK,EAAE,GAAG,GAAC8E,UAAU,GAAC,GAAG;cAAEpD,MAAM,EAAE,GAAG,GAACoD,UAAU,GAAC;YAAG;UAAE;YAAA;YAAA;YAAA;UAAA;QAAG;UAAA;UAAA;UAAA;QAAA,QAC/E,eAClB;UAAG,SAAS,EAAC,cAAc;UAAC,OAAO,EAAE,mBAAM;YAACrG,QAAQ,CAAC,KAAK,CAAC;YAAEsG,aAAa,CAAC,CAAC,CAAC;UAAA;QAAE;UAAA;UAAA;UAAA;QAAA,QAAK;MAAA;QAAA;QAAA;QAAA;MAAA;IAChF;MAAA;MAAA;MAAA;IAAA,QACQ,eAChB,QAAC,aAAa;MAAC,EAAE,EAAEzK,WAAY;MAAE,UAAU,EAAC,aAAa;MAAC,OAAO,EAAE,GAAI;MAAA,uBACtE;QAAK,SAAS,EAAC,aAAa;QAAC,GAAG,EAAE+J,cAAe;QAAC,WAAW,EAAE;UAAA,OAAI3I,QAAQ,CAAC4F,OAAO,CAACiD,KAAK,EAAE;QAAA,CAAC;QAAC,OAAO,EAAE;UAAA,OAAI7I,QAAQ,CAAC4F,OAAO,CAACiD,KAAK,EAAE;QAAA,CAAC;QAAA,wBAClI;UAAK,SAAS,EAAC,OAAO;UAAA,6BAAE;YAAG,SAAS,EAAC,cAAc;YAAC,OAAO,EAAE;cAAA,OAAIhK,cAAc,CAAC,KAAK,CAAC;YAAA;UAAC;YAAA;YAAA;YAAA;UAAA,QAAK;QAAA;UAAA;UAAA;UAAA;QAAA,QAAM,eACnG,QAAC,MAAM;UAAC,YAAY,EAAE2K;QAAa;UAAA;UAAA;UAAA;QAAA,QAAE;MAAA;QAAA;QAAA;QAAA;MAAA;IAC/B;MAAA;MAAA;MAAA;IAAA,QACS;EAAA,gBACf;AAEP;AAAC,GAz3BQzP,QAAQ;AAAA,KAARA,QAAQ;AA03BjB,eAAeA,QAAQ;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}