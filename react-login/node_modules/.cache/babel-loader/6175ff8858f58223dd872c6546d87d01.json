{"ast":null,"code":"import _slicedToArray from\"/Users/jinsonwu/Desktop/MIRC-Code-Verification/react-login/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Switch,Route,Link,NavLink,Redirect,useLocation}from\"react-router-dom\";import firebase from'firebase';import{db}from'../Fire';import Hoverableicondiv from'./Hoverableiconsdiv';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Users(props){// const [name, setName]=useState('')\n// const [img, setImg]=useState('')\n// const [city, setCity]=useState('')\n// const [country, setCountry]=useState('')\n// const [job, setJob]=useState('')\n// const [recipnumber, setRecipnumber]=useState('')\n// const [recipemail, setRecipemail]=useState('')\n// const [recipwebsite, setRecipwebsite]=useState('')\n// const [extend, setExtend]=useState(false)\nvar lnk=props.lnk,convoinfo=props.convoinfo,setConvoinfo=props.setConvoinfo,el=props.el,setChatuser=props.setChatuser,chatuser=props.chatuser,setChatstarted=props.setChatstarted,setChatview=props.setChatview;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),recipimg=_useState2[0],setRecipimg=_useState2[1];// const {recipname, setRecipname, sendername, setSendername}=props\nvar _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),recipname=_useState4[0],setRecipname=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),sendername=_useState6[0],setSendername=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),activestatus=_useState8[0],setActivestatus=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),senderimg=_useState10[0],setSenderimg=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),senderonline=_useState12[0],setSenderonline=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),reciponline=_useState14[0],setReciponline=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),loading=_useState16[0],setLoading=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),msg=_useState18[0],setMsg=_useState18[1];var location=useLocation();var user=firebase.auth().currentUser;function colorFunc(){if(el.convoinfo.creatorid===user.uid){if(reciponline){return'rgb(44, 255, 44)';}else{return'#FF3D3D';}}else{if(senderonline){return'rgb(44, 255, 44)';}else{return'#FF3D3D';}}}useEffect(function(){db.collection('users').doc(el.convoinfo.recipientid).onSnapshot(function(snap){var user=snap.data();setRecipname(user.userinfo.name);setRecipimg(user.userinfo.cover);setActivestatus(user.userinfo.online);setLoading(false);setReciponline(user.online);});db.collection('users').doc(el.convoinfo.creatorid).onSnapshot(function(snap){var user=snap.data();setSendername(user.userinfo.name);setSenderimg(user.userinfo.cover);setLoading(false);setSenderonline(user.online);});db.collection('conversations').doc(el.convoinfo.convoid).onSnapshot(function(snap){var msgs=snap.data();setMsg(msgs.messages[msgs.messages.length-1]);});},[el.convoinfo.recipientid,el,chatuser]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Link,{onClick:function onClick(){setChatuser(el.convoinfo.creatorid===user.uid?el.convoinfo.recipientid:el.convoinfo.creatorid);},children:[loading?/*#__PURE__*/_jsxs(\"div\",{class:\"lds-ring\",children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"flexrow\",onClick:function onClick(){return setChatstarted(true);},children:[\" \",/*#__PURE__*/_jsx(\"img\",{src:el.convoinfo.creatorid===user.uid?recipimg:senderimg,alt:\"\"}),\"  \",/*#__PURE__*/_jsx(\"small\",{children:el.convoinfo.creatorid===user.uid?recipname:sendername}),\"    \",/*#__PURE__*/_jsx(\"div\",{className:\"notifi\",style:{backgroundColor:colorFunc()}}),\" \"]}),/*#__PURE__*/_jsx(Hoverableicondiv,{icon:'ellipsis-h-alt',classNames:'white',type:'link',lnk:\"/chatsettings/\".concat(el.convoinfo.convoid),setState:setChatview,setState2:setChatstarted})]})});}export default Users;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Switch","Route","Link","NavLink","Redirect","useLocation","firebase","db","Hoverableicondiv","Users","props","lnk","convoinfo","setConvoinfo","el","setChatuser","chatuser","setChatstarted","setChatview","recipimg","setRecipimg","recipname","setRecipname","sendername","setSendername","activestatus","setActivestatus","senderimg","setSenderimg","senderonline","setSenderonline","reciponline","setReciponline","loading","setLoading","msg","setMsg","location","user","auth","currentUser","colorFunc","creatorid","uid","collection","doc","recipientid","onSnapshot","snap","data","userinfo","name","cover","online","convoid","msgs","messages","length","backgroundColor"],"sources":["/Users/jinsonwu/Desktop/MIRC-Code-Verification/react-login/src/components/Chatviewrow.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect, useLocation } from \"react-router-dom\" \r\nimport firebase from 'firebase'\r\nimport {db} from '../Fire'\r\nimport Hoverableicondiv from './Hoverableiconsdiv'\r\nfunction Users (props) {\r\n  // const [name, setName]=useState('')\r\n  // const [img, setImg]=useState('')\r\n  // const [city, setCity]=useState('')\r\n  // const [country, setCountry]=useState('')\r\n  // const [job, setJob]=useState('')\r\n  // const [recipnumber, setRecipnumber]=useState('')\r\n  // const [recipemail, setRecipemail]=useState('')\r\n  // const [recipwebsite, setRecipwebsite]=useState('')\r\n  // const [extend, setExtend]=useState(false)\r\n    const {lnk,convoinfo, setConvoinfo, el, setChatuser, chatuser, setChatstarted, setChatview}=props\r\n    const [recipimg, setRecipimg]=useState('')\r\n    // const {recipname, setRecipname, sendername, setSendername}=props\r\n    const [recipname, setRecipname] = useState('')\r\n    const [sendername, setSendername]=useState('')\r\n    const [activestatus, setActivestatus]=useState(false)\r\n    const [senderimg, setSenderimg]=useState('')\r\n    const [senderonline, setSenderonline]=useState(false)\r\n    const [reciponline, setReciponline]=useState(false)\r\n    const [loading, setLoading]=useState(true)\r\n    const [msg, setMsg]=useState('')\r\n    const location = useLocation()\r\n    let user = firebase.auth().currentUser\r\n  function colorFunc(){\r\n    if(el.convoinfo.creatorid===user.uid){\r\n        if(reciponline){\r\n          return 'rgb(44, 255, 44)'\r\n        }else {\r\n          return '#FF3D3D'\r\n        }\r\n    }else {\r\n      if(senderonline){\r\n        return 'rgb(44, 255, 44)'\r\n      }else {\r\n        return '#FF3D3D'\r\n      }\r\n    }\r\n  }\r\n    useEffect(()=>{\r\n      db.collection('users').doc(el.convoinfo.recipientid).onSnapshot(snap=>{\r\n        const user = snap.data()\r\n        setRecipname(user.userinfo.name)\r\n        setRecipimg(user.userinfo.cover)\r\n        setActivestatus(user.userinfo.online)\r\n        setLoading(false)\r\n        setReciponline(user.online)\r\n      })\r\n      db.collection('users').doc(el.convoinfo.creatorid).onSnapshot(snap=>{\r\n        const user = snap.data()\r\n        setSendername(user.userinfo.name)\r\n        setSenderimg(user.userinfo.cover)\r\n        setLoading(false)\r\n        setSenderonline(user.online)\r\n      })\r\n      db.collection('conversations').doc(el.convoinfo.convoid).onSnapshot(snap=>{\r\n        const msgs = snap.data()  \r\n        setMsg(msgs.messages[msgs.messages.length-1])\r\n      })\r\n    \r\n    },[el.convoinfo.recipientid, el, chatuser])\r\n    return (\r\n   <>\r\n  <Link   onClick={()=>{setChatuser(el.convoinfo.creatorid===user.uid?el.convoinfo.recipientid:el.convoinfo.creatorid)}} >\r\n    {loading?<div class=\"lds-ring\"><div></div><div></div><div></div><div></div></div>:<div className='flexrow' onClick={()=>setChatstarted(true)}> <img src={el.convoinfo.creatorid===user.uid?recipimg:senderimg} alt=\"\"/>  <small>{el.convoinfo.creatorid===user.uid?recipname:sendername}</small>    <div className=\"notifi\" style={{backgroundColor: colorFunc()}}></div> </div>}\r\n\r\n      <Hoverableicondiv icon={'ellipsis-h-alt'} classNames={'white'} type={'link'} lnk={`/chatsettings/${el.convoinfo.convoid}`} setState={setChatview} setState2={setChatstarted}/>\r\n  </Link>\r\n  </>\r\n  )\r\n}\r\nexport default Users"],"mappings":"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"},"metadata":{},"sourceType":"module"}