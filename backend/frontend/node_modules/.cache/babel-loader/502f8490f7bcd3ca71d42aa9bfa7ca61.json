{"ast":null,"code":"import _slicedToArray from \"/Users/jinsonwu/Desktop/MIRC-Code-Verification/backend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/Users/jinsonwu/Desktop/MIRC-Code-Verification/backend/frontend/src/components/Chatviewrow.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Switch, Route, Link, NavLink, Redirect, useLocation } from \"react-router-dom\";\nimport firebase from 'firebase';\nimport { db } from '../Fire';\nimport Hoverableicondiv from './Hoverableiconsdiv';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Users(props) {\n  _s();\n  // const [name, setName]=useState('')\n  // const [img, setImg]=useState('')\n  // const [city, setCity]=useState('')\n  // const [country, setCountry]=useState('')\n  // const [job, setJob]=useState('')\n  // const [recipnumber, setRecipnumber]=useState('')\n  // const [recipemail, setRecipemail]=useState('')\n  // const [recipwebsite, setRecipwebsite]=useState('')\n  // const [extend, setExtend]=useState(false)\n  var lnk = props.lnk,\n    convoinfo = props.convoinfo,\n    setConvoinfo = props.setConvoinfo,\n    el = props.el,\n    setChatuser = props.setChatuser,\n    chatuser = props.chatuser,\n    setChatstarted = props.setChatstarted,\n    setChatview = props.setChatview;\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    recipimg = _useState2[0],\n    setRecipimg = _useState2[1];\n  // const {recipname, setRecipname, sendername, setSendername}=props\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    recipname = _useState4[0],\n    setRecipname = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    sendername = _useState6[0],\n    setSendername = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    activestatus = _useState8[0],\n    setActivestatus = _useState8[1];\n  var _useState9 = useState(''),\n    _useState10 = _slicedToArray(_useState9, 2),\n    senderimg = _useState10[0],\n    setSenderimg = _useState10[1];\n  var _useState11 = useState(false),\n    _useState12 = _slicedToArray(_useState11, 2),\n    senderonline = _useState12[0],\n    setSenderonline = _useState12[1];\n  var _useState13 = useState(false),\n    _useState14 = _slicedToArray(_useState13, 2),\n    reciponline = _useState14[0],\n    setReciponline = _useState14[1];\n  var _useState15 = useState(true),\n    _useState16 = _slicedToArray(_useState15, 2),\n    loading = _useState16[0],\n    setLoading = _useState16[1];\n  var _useState17 = useState(''),\n    _useState18 = _slicedToArray(_useState17, 2),\n    msg = _useState18[0],\n    setMsg = _useState18[1];\n  var location = useLocation();\n  var user = firebase.auth().currentUser;\n  function colorFunc() {\n    if (el.convoinfo.creatorid === user.uid) {\n      if (reciponline) {\n        return 'rgb(44, 255, 44)';\n      } else {\n        return '#FF3D3D';\n      }\n    } else {\n      if (senderonline) {\n        return 'rgb(44, 255, 44)';\n      } else {\n        return '#FF3D3D';\n      }\n    }\n  }\n  useEffect(function () {\n    db.collection('users').doc(el.convoinfo.recipientid).onSnapshot(function (snap) {\n      var user = snap.data();\n      setRecipname(user.userinfo.name);\n      setRecipimg(user.userinfo.cover);\n      setActivestatus(user.userinfo.online);\n      setLoading(false);\n      setReciponline(user.online);\n    });\n    db.collection('users').doc(el.convoinfo.creatorid).onSnapshot(function (snap) {\n      var user = snap.data();\n      setSendername(user.userinfo.name);\n      setSenderimg(user.userinfo.cover);\n      setLoading(false);\n      setSenderonline(user.online);\n    });\n    db.collection('conversations').doc(el.convoinfo.convoid).onSnapshot(function (snap) {\n      var msgs = snap.data();\n      setMsg(msgs.messages[msgs.messages.length - 1]);\n    });\n  }, [el.convoinfo.recipientid, el, chatuser]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Link, {\n      onClick: function onClick() {\n        setChatuser(el.convoinfo.creatorid === user.uid ? el.convoinfo.recipientid : el.convoinfo.creatorid);\n      },\n      children: [loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"lds-ring\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 36\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 47\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 58\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 69\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 14\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flexrow\",\n        onClick: function onClick() {\n          return setChatstarted(true);\n        },\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"img\", {\n          src: el.convoinfo.creatorid === user.uid ? recipimg : senderimg,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 148\n        }, this), \"  \", /*#__PURE__*/_jsxDEV(\"small\", {\n          children: el.convoinfo.creatorid === user.uid ? recipname : sendername\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 222\n        }, this), \"    \", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"notifi\",\n          style: {\n            backgroundColor: colorFunc()\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 297\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 87\n      }, this), /*#__PURE__*/_jsxDEV(Hoverableicondiv, {\n        icon: 'ellipsis-h-alt',\n        classNames: 'white',\n        type: 'link',\n        lnk: \"/chatsettings/\".concat(el.convoinfo.convoid),\n        setState: setChatview,\n        setState2: setChatstarted\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 3\n    }, this)\n  }, void 0, false);\n}\n_s(Users, \"k0F6wxazsOUoRg5gPta3AA+cGPQ=\", false, function () {\n  return [useLocation];\n});\n_c = Users;\nexport default Users;\nvar _c;\n$RefreshReg$(_c, \"Users\");","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Switch","Route","Link","NavLink","Redirect","useLocation","firebase","db","Hoverableicondiv","Users","props","lnk","convoinfo","setConvoinfo","el","setChatuser","chatuser","setChatstarted","setChatview","recipimg","setRecipimg","recipname","setRecipname","sendername","setSendername","activestatus","setActivestatus","senderimg","setSenderimg","senderonline","setSenderonline","reciponline","setReciponline","loading","setLoading","msg","setMsg","location","user","auth","currentUser","colorFunc","creatorid","uid","collection","doc","recipientid","onSnapshot","snap","data","userinfo","name","cover","online","convoid","msgs","messages","length","backgroundColor"],"sources":["/Users/jinsonwu/Desktop/MIRC-Code-Verification/backend/frontend/src/components/Chatviewrow.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport { BrowserRouter as Router,Switch,Route,Link,NavLink, Redirect, useLocation } from \"react-router-dom\" \r\nimport firebase from 'firebase'\r\nimport {db} from '../Fire'\r\nimport Hoverableicondiv from './Hoverableiconsdiv'\r\nfunction Users (props) {\r\n  // const [name, setName]=useState('')\r\n  // const [img, setImg]=useState('')\r\n  // const [city, setCity]=useState('')\r\n  // const [country, setCountry]=useState('')\r\n  // const [job, setJob]=useState('')\r\n  // const [recipnumber, setRecipnumber]=useState('')\r\n  // const [recipemail, setRecipemail]=useState('')\r\n  // const [recipwebsite, setRecipwebsite]=useState('')\r\n  // const [extend, setExtend]=useState(false)\r\n    const {lnk,convoinfo, setConvoinfo, el, setChatuser, chatuser, setChatstarted, setChatview}=props\r\n    const [recipimg, setRecipimg]=useState('')\r\n    // const {recipname, setRecipname, sendername, setSendername}=props\r\n    const [recipname, setRecipname] = useState('')\r\n    const [sendername, setSendername]=useState('')\r\n    const [activestatus, setActivestatus]=useState(false)\r\n    const [senderimg, setSenderimg]=useState('')\r\n    const [senderonline, setSenderonline]=useState(false)\r\n    const [reciponline, setReciponline]=useState(false)\r\n    const [loading, setLoading]=useState(true)\r\n    const [msg, setMsg]=useState('')\r\n    const location = useLocation()\r\n    let user = firebase.auth().currentUser\r\n  function colorFunc(){\r\n    if(el.convoinfo.creatorid===user.uid){\r\n        if(reciponline){\r\n          return 'rgb(44, 255, 44)'\r\n        }else {\r\n          return '#FF3D3D'\r\n        }\r\n    }else {\r\n      if(senderonline){\r\n        return 'rgb(44, 255, 44)'\r\n      }else {\r\n        return '#FF3D3D'\r\n      }\r\n    }\r\n  }\r\n    useEffect(()=>{\r\n      db.collection('users').doc(el.convoinfo.recipientid).onSnapshot(snap=>{\r\n        const user = snap.data()\r\n        setRecipname(user.userinfo.name)\r\n        setRecipimg(user.userinfo.cover)\r\n        setActivestatus(user.userinfo.online)\r\n        setLoading(false)\r\n        setReciponline(user.online)\r\n      })\r\n      db.collection('users').doc(el.convoinfo.creatorid).onSnapshot(snap=>{\r\n        const user = snap.data()\r\n        setSendername(user.userinfo.name)\r\n        setSenderimg(user.userinfo.cover)\r\n        setLoading(false)\r\n        setSenderonline(user.online)\r\n      })\r\n      db.collection('conversations').doc(el.convoinfo.convoid).onSnapshot(snap=>{\r\n        const msgs = snap.data()  \r\n        setMsg(msgs.messages[msgs.messages.length-1])\r\n      })\r\n    \r\n    },[el.convoinfo.recipientid, el, chatuser])\r\n    return (\r\n   <>\r\n  <Link   onClick={()=>{setChatuser(el.convoinfo.creatorid===user.uid?el.convoinfo.recipientid:el.convoinfo.creatorid)}} >\r\n    {loading?<div class=\"lds-ring\"><div></div><div></div><div></div><div></div></div>:<div className='flexrow' onClick={()=>setChatstarted(true)}> <img src={el.convoinfo.creatorid===user.uid?recipimg:senderimg} alt=\"\"/>  <small>{el.convoinfo.creatorid===user.uid?recipname:sendername}</small>    <div className=\"notifi\" style={{backgroundColor: colorFunc()}}></div> </div>}\r\n\r\n      <Hoverableicondiv icon={'ellipsis-h-alt'} classNames={'white'} type={'link'} lnk={`/chatsettings/${el.convoinfo.convoid}`} setState={setChatview} setState2={setChatstarted}/>\r\n  </Link>\r\n  </>\r\n  )\r\n}\r\nexport default Users"],"mappings":"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"},"metadata":{},"sourceType":"module"}